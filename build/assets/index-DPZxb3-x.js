function d2(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function Tc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function f2(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var Vd={exports:{}},si={},qd={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function h2(){if(Jg)return ut;Jg=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=m&&M[m]||M["@@iterator"],typeof M=="function"?M:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,N={};function b(M,U,te){this.props=M,this.context=U,this.refs=N,this.updater=te||y}b.prototype.isReactComponent={},b.prototype.setState=function(M,U){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,U,"setState")},b.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function j(){}j.prototype=b.prototype;function k(M,U,te){this.props=M,this.context=U,this.refs=N,this.updater=te||y}var C=k.prototype=new j;C.constructor=k,w(C,b.prototype),C.isPureReactComponent=!0;var A=Array.isArray,L=Object.prototype.hasOwnProperty,T={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function P(M,U,te){var Q,ee={},ce=null,X=null;if(U!=null)for(Q in U.ref!==void 0&&(X=U.ref),U.key!==void 0&&(ce=""+U.key),U)L.call(U,Q)&&!B.hasOwnProperty(Q)&&(ee[Q]=U[Q]);var ie=arguments.length-2;if(ie===1)ee.children=te;else if(1<ie){for(var fe=Array(ie),se=0;se<ie;se++)fe[se]=arguments[se+2];ee.children=fe}if(M&&M.defaultProps)for(Q in ie=M.defaultProps,ie)ee[Q]===void 0&&(ee[Q]=ie[Q]);return{$$typeof:e,type:M,key:ce,ref:X,props:ee,_owner:T.current}}function I(M,U){return{$$typeof:e,type:M.type,key:U,ref:M.ref,props:M.props,_owner:M._owner}}function $(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function H(M){var U={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(te){return U[te]})}var G=/\/+/g;function K(M,U){return typeof M=="object"&&M!==null&&M.key!=null?H(""+M.key):U.toString(36)}function V(M,U,te,Q,ee){var ce=typeof M;(ce==="undefined"||ce==="boolean")&&(M=null);var X=!1;if(M===null)X=!0;else switch(ce){case"string":case"number":X=!0;break;case"object":switch(M.$$typeof){case e:case t:X=!0}}if(X)return X=M,ee=ee(X),M=Q===""?"."+K(X,0):Q,A(ee)?(te="",M!=null&&(te=M.replace(G,"$&/")+"/"),V(ee,U,te,"",function(se){return se})):ee!=null&&($(ee)&&(ee=I(ee,te+(!ee.key||X&&X.key===ee.key?"":(""+ee.key).replace(G,"$&/")+"/")+M)),U.push(ee)),1;if(X=0,Q=Q===""?".":Q+":",A(M))for(var ie=0;ie<M.length;ie++){ce=M[ie];var fe=Q+K(ce,ie);X+=V(ce,U,te,fe,ee)}else if(fe=v(M),typeof fe=="function")for(M=fe.call(M),ie=0;!(ce=M.next()).done;)ce=ce.value,fe=Q+K(ce,ie++),X+=V(ce,U,te,fe,ee);else if(ce==="object")throw U=String(M),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return X}function J(M,U,te){if(M==null)return M;var Q=[],ee=0;return V(M,Q,"","",function(ce){return U.call(te,ce,ee++)}),Q}function R(M){if(M._status===-1){var U=M._result;U=U(),U.then(function(te){(M._status===0||M._status===-1)&&(M._status=1,M._result=te)},function(te){(M._status===0||M._status===-1)&&(M._status=2,M._result=te)}),M._status===-1&&(M._status=0,M._result=U)}if(M._status===1)return M._result.default;throw M._result}var E={current:null},D={transition:null},W={ReactCurrentDispatcher:E,ReactCurrentBatchConfig:D,ReactCurrentOwner:T};function F(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:J,forEach:function(M,U,te){J(M,function(){U.apply(this,arguments)},te)},count:function(M){var U=0;return J(M,function(){U++}),U},toArray:function(M){return J(M,function(U){return U})||[]},only:function(M){if(!$(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ut.Component=b,ut.Fragment=n,ut.Profiler=o,ut.PureComponent=k,ut.StrictMode=r,ut.Suspense=h,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,ut.act=F,ut.cloneElement=function(M,U,te){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Q=w({},M.props),ee=M.key,ce=M.ref,X=M._owner;if(U!=null){if(U.ref!==void 0&&(ce=U.ref,X=T.current),U.key!==void 0&&(ee=""+U.key),M.type&&M.type.defaultProps)var ie=M.type.defaultProps;for(fe in U)L.call(U,fe)&&!B.hasOwnProperty(fe)&&(Q[fe]=U[fe]===void 0&&ie!==void 0?ie[fe]:U[fe])}var fe=arguments.length-2;if(fe===1)Q.children=te;else if(1<fe){ie=Array(fe);for(var se=0;se<fe;se++)ie[se]=arguments[se+2];Q.children=ie}return{$$typeof:e,type:M.type,key:ee,ref:ce,props:Q,_owner:X}},ut.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:i,_context:M},M.Consumer=M},ut.createElement=P,ut.createFactory=function(M){var U=P.bind(null,M);return U.type=M,U},ut.createRef=function(){return{current:null}},ut.forwardRef=function(M){return{$$typeof:u,render:M}},ut.isValidElement=$,ut.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:R}},ut.memo=function(M,U){return{$$typeof:p,type:M,compare:U===void 0?null:U}},ut.startTransition=function(M){var U=D.transition;D.transition={};try{M()}finally{D.transition=U}},ut.unstable_act=F,ut.useCallback=function(M,U){return E.current.useCallback(M,U)},ut.useContext=function(M){return E.current.useContext(M)},ut.useDebugValue=function(){},ut.useDeferredValue=function(M){return E.current.useDeferredValue(M)},ut.useEffect=function(M,U){return E.current.useEffect(M,U)},ut.useId=function(){return E.current.useId()},ut.useImperativeHandle=function(M,U,te){return E.current.useImperativeHandle(M,U,te)},ut.useInsertionEffect=function(M,U){return E.current.useInsertionEffect(M,U)},ut.useLayoutEffect=function(M,U){return E.current.useLayoutEffect(M,U)},ut.useMemo=function(M,U){return E.current.useMemo(M,U)},ut.useReducer=function(M,U,te){return E.current.useReducer(M,U,te)},ut.useRef=function(M){return E.current.useRef(M)},ut.useState=function(M){return E.current.useState(M)},ut.useSyncExternalStore=function(M,U,te){return E.current.useSyncExternalStore(M,U,te)},ut.useTransition=function(){return E.current.useTransition()},ut.version="18.3.1",ut}var Xg;function Ic(){return Xg||(Xg=1,qd.exports=h2()),qd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function m2(){if(Zg)return si;Zg=1;var e=Ic(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,p){var f,m={},v=null,y=null;p!==void 0&&(v=""+p),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(y=h.ref);for(f in h)r.call(h,f)&&!i.hasOwnProperty(f)&&(m[f]=h[f]);if(u&&u.defaultProps)for(f in h=u.defaultProps,h)m[f]===void 0&&(m[f]=h[f]);return{$$typeof:t,type:u,key:v,ref:y,props:m,_owner:o.current}}return si.Fragment=n,si.jsx=c,si.jsxs=c,si}var ev;function p2(){return ev||(ev=1,Vd.exports=m2()),Vd.exports}var l=p2(),zl={},Gd={exports:{}},Sn={},Yd={exports:{}},Kd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function g2(){return tv||(tv=1,(function(e){function t(D,W){var F=D.length;D.push(W);e:for(;0<F;){var M=F-1>>>1,U=D[M];if(0<o(U,W))D[M]=W,D[F]=U,F=M;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var W=D[0],F=D.pop();if(F!==W){D[0]=F;e:for(var M=0,U=D.length,te=U>>>1;M<te;){var Q=2*(M+1)-1,ee=D[Q],ce=Q+1,X=D[ce];if(0>o(ee,F))ce<U&&0>o(X,ee)?(D[M]=X,D[ce]=F,M=ce):(D[M]=ee,D[Q]=F,M=Q);else if(ce<U&&0>o(X,F))D[M]=X,D[ce]=F,M=ce;else break e}}return W}function o(D,W){var F=D.sortIndex-W.sortIndex;return F!==0?F:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var h=[],p=[],f=1,m=null,v=3,y=!1,w=!1,N=!1,b=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(D){for(var W=n(p);W!==null;){if(W.callback===null)r(p);else if(W.startTime<=D)r(p),W.sortIndex=W.expirationTime,t(h,W);else break;W=n(p)}}function A(D){if(N=!1,C(D),!w)if(n(h)!==null)w=!0,R(L);else{var W=n(p);W!==null&&E(A,W.startTime-D)}}function L(D,W){w=!1,N&&(N=!1,j(P),P=-1),y=!0;var F=v;try{for(C(W),m=n(h);m!==null&&(!(m.expirationTime>W)||D&&!H());){var M=m.callback;if(typeof M=="function"){m.callback=null,v=m.priorityLevel;var U=M(m.expirationTime<=W);W=e.unstable_now(),typeof U=="function"?m.callback=U:m===n(h)&&r(h),C(W)}else r(h);m=n(h)}if(m!==null)var te=!0;else{var Q=n(p);Q!==null&&E(A,Q.startTime-W),te=!1}return te}finally{m=null,v=F,y=!1}}var T=!1,B=null,P=-1,I=5,$=-1;function H(){return!(e.unstable_now()-$<I)}function G(){if(B!==null){var D=e.unstable_now();$=D;var W=!0;try{W=B(!0,D)}finally{W?K():(T=!1,B=null)}}else T=!1}var K;if(typeof k=="function")K=function(){k(G)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,J=V.port2;V.port1.onmessage=G,K=function(){J.postMessage(null)}}else K=function(){b(G,0)};function R(D){B=D,T||(T=!0,K())}function E(D,W){P=b(function(){D(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){w||y||(w=!0,R(L))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(D){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var F=v;v=W;try{return D()}finally{v=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=v;v=D;try{return W()}finally{v=F}},e.unstable_scheduleCallback=function(D,W,F){var M=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?M+F:M):F=M,D){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=F+U,D={id:f++,callback:W,priorityLevel:D,startTime:F,expirationTime:U,sortIndex:-1},F>M?(D.sortIndex=F,t(p,D),n(h)===null&&D===n(p)&&(N?(j(P),P=-1):N=!0,E(A,F-M))):(D.sortIndex=U,t(h,D),w||y||(w=!0,R(L))),D},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(D){var W=v;return function(){var F=v;v=W;try{return D.apply(this,arguments)}finally{v=F}}}})(Kd)),Kd}var nv;function v2(){return nv||(nv=1,Yd.exports=g2()),Yd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function y2(){if(rv)return Sn;rv=1;var e=Ic(),t=v2();function n(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function i(s,a){c(s,a),c(s+"Capture",a)}function c(s,a){for(o[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function v(s){return h.call(m,s)?!0:h.call(f,s)?!1:p.test(s)?m[s]=!0:(f[s]=!0,!1)}function y(s,a,d,g){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function w(s,a,d,g){if(a===null||typeof a>"u"||y(s,a,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function N(s,a,d,g,x,S,O){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=g,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=S,this.removeEmptyString=O}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){b[s]=new N(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];b[a]=new N(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){b[s]=new N(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){b[s]=new N(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){b[s]=new N(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){b[s]=new N(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){b[s]=new N(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){b[s]=new N(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){b[s]=new N(s,5,!1,s.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function k(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(j,k);b[a]=new N(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(j,k);b[a]=new N(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(j,k);b[a]=new N(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){b[s]=new N(s,1,!1,s.toLowerCase(),null,!1,!1)}),b.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){b[s]=new N(s,1,!1,s.toLowerCase(),null,!0,!0)});function C(s,a,d,g){var x=b.hasOwnProperty(a)?b[a]:null;(x!==null?x.type!==0:g||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(w(a,d,x,g)&&(d=null),g||x===null?v(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):x.mustUseProperty?s[x.propertyName]=d===null?x.type===3?!1:"":d:(a=x.attributeName,g=x.attributeNamespace,d===null?s.removeAttribute(a):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,g?s.setAttributeNS(g,a,d):s.setAttribute(a,d))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),T=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),H=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),D=Symbol.iterator;function W(s){return s===null||typeof s!="object"?null:(s=D&&s[D]||s["@@iterator"],typeof s=="function"?s:null)}var F=Object.assign,M;function U(s){if(M===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);M=a&&a[1]||""}return`
`+M+s}var te=!1;function Q(s,a){if(!s||te)return"";te=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(le){var g=le}Reflect.construct(s,[],a)}else{try{a.call()}catch(le){g=le}s.call(a.prototype)}else{try{throw Error()}catch(le){g=le}s()}}catch(le){if(le&&g&&typeof le.stack=="string"){for(var x=le.stack.split(`
`),S=g.stack.split(`
`),O=x.length-1,Y=S.length-1;1<=O&&0<=Y&&x[O]!==S[Y];)Y--;for(;1<=O&&0<=Y;O--,Y--)if(x[O]!==S[Y]){if(O!==1||Y!==1)do if(O--,Y--,0>Y||x[O]!==S[Y]){var Z=`
`+x[O].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=O&&0<=Y);break}}}finally{te=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?U(s):""}function ee(s){switch(s.tag){case 5:return U(s.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return s=Q(s.type,!1),s;case 11:return s=Q(s.type.render,!1),s;case 1:return s=Q(s.type,!0),s;default:return""}}function ce(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case B:return"Fragment";case T:return"Portal";case I:return"Profiler";case P:return"StrictMode";case K:return"Suspense";case V:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case H:return(s.displayName||"Context")+".Consumer";case $:return(s._context.displayName||"Context")+".Provider";case G:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case J:return a=s.displayName||null,a!==null?a:ce(s.type)||"Memo";case R:a=s._payload,s=s._init;try{return ce(s(a))}catch{}}return null}function X(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(a);case 8:return a===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ie(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function fe(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function se(s){var a=fe(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),g=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,S=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return x.call(this)},set:function(O){g=""+O,S.call(this,O)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function he(s){s._valueTracker||(s._valueTracker=se(s))}function Ee(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),g="";return s&&(g=fe(s)?s.checked?"true":"false":s.value),s=g,s!==d?(a.setValue(s),!0):!1}function Se(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function z(s,a){var d=a.checked;return F({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function de(s,a){var d=a.defaultValue==null?"":a.defaultValue,g=a.checked!=null?a.checked:a.defaultChecked;d=ie(a.value!=null?a.value:d),s._wrapperState={initialChecked:g,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ye(s,a){a=a.checked,a!=null&&C(s,"checked",a,!1)}function _e(s,a){ye(s,a);var d=ie(a.value),g=a.type;if(d!=null)g==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?me(s,a.type,d):a.hasOwnProperty("defaultValue")&&me(s,a.type,ie(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function pe(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var g=a.type;if(!(g!=="submit"&&g!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function me(s,a,d){(a!=="number"||Se(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var Te=Array.isArray;function Je(s,a,d,g){if(s=s.options,a){a={};for(var x=0;x<d.length;x++)a["$"+d[x]]=!0;for(d=0;d<s.length;d++)x=a.hasOwnProperty("$"+s[d].value),s[d].selected!==x&&(s[d].selected=x),x&&g&&(s[d].defaultSelected=!0)}else{for(d=""+ie(d),a=null,x=0;x<s.length;x++){if(s[x].value===d){s[x].selected=!0,g&&(s[x].defaultSelected=!0);return}a!==null||s[x].disabled||(a=s[x])}a!==null&&(a.selected=!0)}}function Ue(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return F({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ke(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(Te(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:ie(d)}}function He(s,a){var d=ie(a.value),g=ie(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),g!=null&&(s.defaultValue=""+g)}function tt(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function yt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ct(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?yt(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Pe,dt=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,g,x){MSApp.execUnsafeLocalFunction(function(){return s(a,d,g,x)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Pe=Pe||document.createElement("div"),Pe.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Pe.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Ge(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var _t={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q=["Webkit","ms","Moz","O"];Object.keys(_t).forEach(function(s){q.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),_t[a]=_t[s]})});function re(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||_t.hasOwnProperty(s)&&_t[s]?(""+a).trim():a+"px"}function je(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var g=d.indexOf("--")===0,x=re(d,a[d],g);d==="float"&&(d="cssFloat"),g?s.setProperty(d,x):s[d]=x}}var Re=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qe(s,a){if(a){if(Re[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Le(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xe=null;function Oe(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var lt=null,Dt=null,wt=null;function Mt(s){if(s=Wa(s)){if(typeof lt!="function")throw Error(n(280));var a=s.stateNode;a&&(a=rl(a),lt(s.stateNode,s.type,a))}}function ze(s){Dt?wt?wt.push(s):wt=[s]:Dt=s}function ft(){if(Dt){var s=Dt,a=wt;if(wt=Dt=null,Mt(s),a)for(s=0;s<a.length;s++)Mt(a[s])}}function xt(s,a){return s(a)}function Nt(){}var Wt=!1;function Tt(s,a,d){if(Wt)return s(a,d);Wt=!0;try{return xt(s,a,d)}finally{Wt=!1,(Dt!==null||wt!==null)&&(Nt(),ft())}}function Ht(s,a){var d=s.stateNode;if(d===null)return null;var g=rl(d);if(g===null)return null;d=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var Qr=!1;if(u)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",rn,rn),window.removeEventListener("test",rn,rn)}catch{Qr=!1}function Rn(s,a,d,g,x,S,O,Y,Z){var le=Array.prototype.slice.call(arguments,3);try{a.apply(d,le)}catch(ve){this.onError(ve)}}var Jr=!1,$n=null,Sa=!1,uu=null,y1={onError:function(s){Jr=!0,$n=s}};function x1(s,a,d,g,x,S,O,Y,Z){Jr=!1,$n=null,Rn.apply(y1,arguments)}function w1(s,a,d,g,x,S,O,Y,Z){if(x1.apply(this,arguments),Jr){if(Jr){var le=$n;Jr=!1,$n=null}else throw Error(n(198));Sa||(Sa=!0,uu=le)}}function Fs(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function wm(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function bm(s){if(Fs(s)!==s)throw Error(n(188))}function b1(s){var a=s.alternate;if(!a){if(a=Fs(s),a===null)throw Error(n(188));return a!==s?null:s}for(var d=s,g=a;;){var x=d.return;if(x===null)break;var S=x.alternate;if(S===null){if(g=x.return,g!==null){d=g;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===d)return bm(x),s;if(S===g)return bm(x),a;S=S.sibling}throw Error(n(188))}if(d.return!==g.return)d=x,g=S;else{for(var O=!1,Y=x.child;Y;){if(Y===d){O=!0,d=x,g=S;break}if(Y===g){O=!0,g=x,d=S;break}Y=Y.sibling}if(!O){for(Y=S.child;Y;){if(Y===d){O=!0,d=S,g=x;break}if(Y===g){O=!0,g=S,d=x;break}Y=Y.sibling}if(!O)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:a}function _m(s){return s=b1(s),s!==null?Nm(s):null}function Nm(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Nm(s);if(a!==null)return a;s=s.sibling}return null}var Sm=t.unstable_scheduleCallback,jm=t.unstable_cancelCallback,_1=t.unstable_shouldYield,N1=t.unstable_requestPaint,Ut=t.unstable_now,S1=t.unstable_getCurrentPriorityLevel,du=t.unstable_ImmediatePriority,Cm=t.unstable_UserBlockingPriority,Fi=t.unstable_NormalPriority,j1=t.unstable_LowPriority,km=t.unstable_IdlePriority,Li=null,hr=null;function C1(s){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(Li,s,void 0,(s.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:P1,k1=Math.log,E1=Math.LN2;function P1(s){return s>>>=0,s===0?32:31-(k1(s)/E1|0)|0}var Bi=64,$i=4194304;function ja(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ui(s,a){var d=s.pendingLanes;if(d===0)return 0;var g=0,x=s.suspendedLanes,S=s.pingedLanes,O=d&268435455;if(O!==0){var Y=O&~x;Y!==0?g=ja(Y):(S&=O,S!==0&&(g=ja(S)))}else O=d&~x,O!==0?g=ja(O):S!==0&&(g=ja(S));if(g===0)return 0;if(a!==0&&a!==g&&(a&x)===0&&(x=g&-g,S=a&-a,x>=S||x===16&&(S&4194240)!==0))return a;if((g&4)!==0&&(g|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=g;0<a;)d=31-Kn(a),x=1<<d,g|=s[d],a&=~x;return g}function R1(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A1(s,a){for(var d=s.suspendedLanes,g=s.pingedLanes,x=s.expirationTimes,S=s.pendingLanes;0<S;){var O=31-Kn(S),Y=1<<O,Z=x[O];Z===-1?((Y&d)===0||(Y&g)!==0)&&(x[O]=R1(Y,a)):Z<=a&&(s.expiredLanes|=Y),S&=~Y}}function fu(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Em(){var s=Bi;return Bi<<=1,(Bi&4194240)===0&&(Bi=64),s}function hu(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function Ca(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-Kn(a),s[a]=d}function T1(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<d;){var x=31-Kn(d),S=1<<x;a[x]=0,g[x]=-1,s[x]=-1,d&=~S}}function mu(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var g=31-Kn(d),x=1<<g;x&a|s[g]&a&&(s[g]|=a),d&=~x}}var St=0;function Pm(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Rm,pu,Am,Tm,Im,gu=!1,zi=[],Xr=null,Zr=null,es=null,ka=new Map,Ea=new Map,ts=[],I1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Om(s,a){switch(s){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":ka.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(a.pointerId)}}function Pa(s,a,d,g,x,S){return s===null||s.nativeEvent!==S?(s={blockedOn:a,domEventName:d,eventSystemFlags:g,nativeEvent:S,targetContainers:[x]},a!==null&&(a=Wa(a),a!==null&&pu(a)),s):(s.eventSystemFlags|=g,a=s.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),s)}function O1(s,a,d,g,x){switch(a){case"focusin":return Xr=Pa(Xr,s,a,d,g,x),!0;case"dragenter":return Zr=Pa(Zr,s,a,d,g,x),!0;case"mouseover":return es=Pa(es,s,a,d,g,x),!0;case"pointerover":var S=x.pointerId;return ka.set(S,Pa(ka.get(S)||null,s,a,d,g,x)),!0;case"gotpointercapture":return S=x.pointerId,Ea.set(S,Pa(Ea.get(S)||null,s,a,d,g,x)),!0}return!1}function Dm(s){var a=Ls(s.target);if(a!==null){var d=Fs(a);if(d!==null){if(a=d.tag,a===13){if(a=wm(d),a!==null){s.blockedOn=a,Im(s.priority,function(){Am(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wi(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=yu(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);Xe=g,d.target.dispatchEvent(g),Xe=null}else return a=Wa(d),a!==null&&pu(a),s.blockedOn=d,!1;a.shift()}return!0}function Mm(s,a,d){Wi(s)&&d.delete(a)}function D1(){gu=!1,Xr!==null&&Wi(Xr)&&(Xr=null),Zr!==null&&Wi(Zr)&&(Zr=null),es!==null&&Wi(es)&&(es=null),ka.forEach(Mm),Ea.forEach(Mm)}function Ra(s,a){s.blockedOn===a&&(s.blockedOn=null,gu||(gu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,D1)))}function Aa(s){function a(x){return Ra(x,s)}if(0<zi.length){Ra(zi[0],s);for(var d=1;d<zi.length;d++){var g=zi[d];g.blockedOn===s&&(g.blockedOn=null)}}for(Xr!==null&&Ra(Xr,s),Zr!==null&&Ra(Zr,s),es!==null&&Ra(es,s),ka.forEach(a),Ea.forEach(a),d=0;d<ts.length;d++)g=ts[d],g.blockedOn===s&&(g.blockedOn=null);for(;0<ts.length&&(d=ts[0],d.blockedOn===null);)Dm(d),d.blockedOn===null&&ts.shift()}var yo=A.ReactCurrentBatchConfig,Hi=!0;function M1(s,a,d,g){var x=St,S=yo.transition;yo.transition=null;try{St=1,vu(s,a,d,g)}finally{St=x,yo.transition=S}}function F1(s,a,d,g){var x=St,S=yo.transition;yo.transition=null;try{St=4,vu(s,a,d,g)}finally{St=x,yo.transition=S}}function vu(s,a,d,g){if(Hi){var x=yu(s,a,d,g);if(x===null)Du(s,a,g,Vi,d),Om(s,g);else if(O1(x,s,a,d,g))g.stopPropagation();else if(Om(s,g),a&4&&-1<I1.indexOf(s)){for(;x!==null;){var S=Wa(x);if(S!==null&&Rm(S),S=yu(s,a,d,g),S===null&&Du(s,a,g,Vi,d),S===x)break;x=S}x!==null&&g.stopPropagation()}else Du(s,a,g,null,d)}}var Vi=null;function yu(s,a,d,g){if(Vi=null,s=Oe(g),s=Ls(s),s!==null)if(a=Fs(s),a===null)s=null;else if(d=a.tag,d===13){if(s=wm(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Vi=s,null}function Fm(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S1()){case du:return 1;case Cm:return 4;case Fi:case j1:return 16;case km:return 536870912;default:return 16}default:return 16}}var ns=null,xu=null,qi=null;function Lm(){if(qi)return qi;var s,a=xu,d=a.length,g,x="value"in ns?ns.value:ns.textContent,S=x.length;for(s=0;s<d&&a[s]===x[s];s++);var O=d-s;for(g=1;g<=O&&a[d-g]===x[S-g];g++);return qi=x.slice(s,1<g?1-g:void 0)}function Gi(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Yi(){return!0}function Bm(){return!1}function An(s){function a(d,g,x,S,O){this._reactName=d,this._targetInst=x,this.type=g,this.nativeEvent=S,this.target=O,this.currentTarget=null;for(var Y in s)s.hasOwnProperty(Y)&&(d=s[Y],this[Y]=d?d(S):S[Y]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Yi:Bm,this.isPropagationStopped=Bm,this}return F(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),a}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wu=An(xo),Ta=F({},xo,{view:0,detail:0}),L1=An(Ta),bu,_u,Ia,Ki=F({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Su,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ia&&(Ia&&s.type==="mousemove"?(bu=s.screenX-Ia.screenX,_u=s.screenY-Ia.screenY):_u=bu=0,Ia=s),bu)},movementY:function(s){return"movementY"in s?s.movementY:_u}}),$m=An(Ki),B1=F({},Ki,{dataTransfer:0}),$1=An(B1),U1=F({},Ta,{relatedTarget:0}),Nu=An(U1),z1=F({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),W1=An(z1),H1=F({},xo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),V1=An(H1),q1=F({},xo,{data:0}),Um=An(q1),G1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q1(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=K1[s])?!!a[s]:!1}function Su(){return Q1}var J1=F({},Ta,{key:function(s){if(s.key){var a=G1[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Gi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Y1[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Su,charCode:function(s){return s.type==="keypress"?Gi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Gi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),X1=An(J1),Z1=F({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zm=An(Z1),e_=F({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Su}),t_=An(e_),n_=F({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),r_=An(n_),s_=F({},Ki,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),o_=An(s_),a_=[9,13,27,32],ju=u&&"CompositionEvent"in window,Oa=null;u&&"documentMode"in document&&(Oa=document.documentMode);var i_=u&&"TextEvent"in window&&!Oa,Wm=u&&(!ju||Oa&&8<Oa&&11>=Oa),Hm=" ",Vm=!1;function qm(s,a){switch(s){case"keyup":return a_.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var wo=!1;function l_(s,a){switch(s){case"compositionend":return Gm(a);case"keypress":return a.which!==32?null:(Vm=!0,Hm);case"textInput":return s=a.data,s===Hm&&Vm?null:s;default:return null}}function c_(s,a){if(wo)return s==="compositionend"||!ju&&qm(s,a)?(s=Lm(),qi=xu=ns=null,wo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Wm&&a.locale!=="ko"?null:a.data;default:return null}}var u_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ym(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!u_[s.type]:a==="textarea"}function Km(s,a,d,g){ze(g),a=el(a,"onChange"),0<a.length&&(d=new wu("onChange","change",null,d,g),s.push({event:d,listeners:a}))}var Da=null,Ma=null;function d_(s){hp(s,0)}function Qi(s){var a=jo(s);if(Ee(a))return s}function f_(s,a){if(s==="change")return a}var Qm=!1;if(u){var Cu;if(u){var ku="oninput"in document;if(!ku){var Jm=document.createElement("div");Jm.setAttribute("oninput","return;"),ku=typeof Jm.oninput=="function"}Cu=ku}else Cu=!1;Qm=Cu&&(!document.documentMode||9<document.documentMode)}function Xm(){Da&&(Da.detachEvent("onpropertychange",Zm),Ma=Da=null)}function Zm(s){if(s.propertyName==="value"&&Qi(Ma)){var a=[];Km(a,Ma,s,Oe(s)),Tt(d_,a)}}function h_(s,a,d){s==="focusin"?(Xm(),Da=a,Ma=d,Da.attachEvent("onpropertychange",Zm)):s==="focusout"&&Xm()}function m_(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Qi(Ma)}function p_(s,a){if(s==="click")return Qi(a)}function g_(s,a){if(s==="input"||s==="change")return Qi(a)}function v_(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Qn=typeof Object.is=="function"?Object.is:v_;function Fa(s,a){if(Qn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),g=Object.keys(a);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var x=d[g];if(!h.call(a,x)||!Qn(s[x],a[x]))return!1}return!0}function ep(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function tp(s,a){var d=ep(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=a&&g>=a)return{node:d,offset:a-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=ep(d)}}function np(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?np(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function rp(){for(var s=window,a=Se();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=Se(s.document)}return a}function Eu(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function y_(s){var a=rp(),d=s.focusedElem,g=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&np(d.ownerDocument.documentElement,d)){if(g!==null&&Eu(d)){if(a=g.start,s=g.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var x=d.textContent.length,S=Math.min(g.start,x);g=g.end===void 0?S:Math.min(g.end,x),!s.extend&&S>g&&(x=g,g=S,S=x),x=tp(d,S);var O=tp(d,g);x&&O&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==O.node||s.focusOffset!==O.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),s.removeAllRanges(),S>g?(s.addRange(a),s.extend(O.node,O.offset)):(a.setEnd(O.node,O.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var x_=u&&"documentMode"in document&&11>=document.documentMode,bo=null,Pu=null,La=null,Ru=!1;function sp(s,a,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Ru||bo==null||bo!==Se(g)||(g=bo,"selectionStart"in g&&Eu(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),La&&Fa(La,g)||(La=g,g=el(Pu,"onSelect"),0<g.length&&(a=new wu("onSelect","select",null,a,d),s.push({event:a,listeners:g}),a.target=bo)))}function Ji(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var _o={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionend:Ji("Transition","TransitionEnd")},Au={},op={};u&&(op=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function Xi(s){if(Au[s])return Au[s];if(!_o[s])return s;var a=_o[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in op)return Au[s]=a[d];return s}var ap=Xi("animationend"),ip=Xi("animationiteration"),lp=Xi("animationstart"),cp=Xi("transitionend"),up=new Map,dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(s,a){up.set(s,a),i(a,[s])}for(var Tu=0;Tu<dp.length;Tu++){var Iu=dp[Tu],w_=Iu.toLowerCase(),b_=Iu[0].toUpperCase()+Iu.slice(1);rs(w_,"on"+b_)}rs(ap,"onAnimationEnd"),rs(ip,"onAnimationIteration"),rs(lp,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(cp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),__=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function fp(s,a,d){var g=s.type||"unknown-event";s.currentTarget=d,w1(g,a,void 0,s),s.currentTarget=null}function hp(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],x=g.event;g=g.listeners;e:{var S=void 0;if(a)for(var O=g.length-1;0<=O;O--){var Y=g[O],Z=Y.instance,le=Y.currentTarget;if(Y=Y.listener,Z!==S&&x.isPropagationStopped())break e;fp(x,Y,le),S=Z}else for(O=0;O<g.length;O++){if(Y=g[O],Z=Y.instance,le=Y.currentTarget,Y=Y.listener,Z!==S&&x.isPropagationStopped())break e;fp(x,Y,le),S=Z}}}if(Sa)throw s=uu,Sa=!1,uu=null,s}function It(s,a){var d=a[Uu];d===void 0&&(d=a[Uu]=new Set);var g=s+"__bubble";d.has(g)||(mp(a,s,2,!1),d.add(g))}function Ou(s,a,d){var g=0;a&&(g|=4),mp(d,s,g,a)}var Zi="_reactListening"+Math.random().toString(36).slice(2);function $a(s){if(!s[Zi]){s[Zi]=!0,r.forEach(function(d){d!=="selectionchange"&&(__.has(d)||Ou(d,!1,s),Ou(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Zi]||(a[Zi]=!0,Ou("selectionchange",!1,a))}}function mp(s,a,d,g){switch(Fm(a)){case 1:var x=M1;break;case 4:x=F1;break;default:x=vu}d=x.bind(null,a,d,s),x=void 0,!Qr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),g?x!==void 0?s.addEventListener(a,d,{capture:!0,passive:x}):s.addEventListener(a,d,!0):x!==void 0?s.addEventListener(a,d,{passive:x}):s.addEventListener(a,d,!1)}function Du(s,a,d,g,x){var S=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var Y=g.stateNode.containerInfo;if(Y===x||Y.nodeType===8&&Y.parentNode===x)break;if(O===4)for(O=g.return;O!==null;){var Z=O.tag;if((Z===3||Z===4)&&(Z=O.stateNode.containerInfo,Z===x||Z.nodeType===8&&Z.parentNode===x))return;O=O.return}for(;Y!==null;){if(O=Ls(Y),O===null)return;if(Z=O.tag,Z===5||Z===6){g=S=O;continue e}Y=Y.parentNode}}g=g.return}Tt(function(){var le=S,ve=Oe(d),xe=[];e:{var ge=up.get(s);if(ge!==void 0){var Ae=wu,De=s;switch(s){case"keypress":if(Gi(d)===0)break e;case"keydown":case"keyup":Ae=X1;break;case"focusin":De="focus",Ae=Nu;break;case"focusout":De="blur",Ae=Nu;break;case"beforeblur":case"afterblur":Ae=Nu;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=$m;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=t_;break;case ap:case ip:case lp:Ae=W1;break;case cp:Ae=r_;break;case"scroll":Ae=L1;break;case"wheel":Ae=o_;break;case"copy":case"cut":case"paste":Ae=V1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=zm}var Be=(a&4)!==0,zt=!Be&&s==="scroll",oe=Be?ge!==null?ge+"Capture":null:ge;Be=[];for(var ne=le,ae;ne!==null;){ae=ne;var Ne=ae.stateNode;if(ae.tag===5&&Ne!==null&&(ae=Ne,oe!==null&&(Ne=Ht(ne,oe),Ne!=null&&Be.push(Ua(ne,Ne,ae)))),zt)break;ne=ne.return}0<Be.length&&(ge=new Ae(ge,De,null,d,ve),xe.push({event:ge,listeners:Be}))}}if((a&7)===0){e:{if(ge=s==="mouseover"||s==="pointerover",Ae=s==="mouseout"||s==="pointerout",ge&&d!==Xe&&(De=d.relatedTarget||d.fromElement)&&(Ls(De)||De[Pr]))break e;if((Ae||ge)&&(ge=ve.window===ve?ve:(ge=ve.ownerDocument)?ge.defaultView||ge.parentWindow:window,Ae?(De=d.relatedTarget||d.toElement,Ae=le,De=De?Ls(De):null,De!==null&&(zt=Fs(De),De!==zt||De.tag!==5&&De.tag!==6)&&(De=null)):(Ae=null,De=le),Ae!==De)){if(Be=$m,Ne="onMouseLeave",oe="onMouseEnter",ne="mouse",(s==="pointerout"||s==="pointerover")&&(Be=zm,Ne="onPointerLeave",oe="onPointerEnter",ne="pointer"),zt=Ae==null?ge:jo(Ae),ae=De==null?ge:jo(De),ge=new Be(Ne,ne+"leave",Ae,d,ve),ge.target=zt,ge.relatedTarget=ae,Ne=null,Ls(ve)===le&&(Be=new Be(oe,ne+"enter",De,d,ve),Be.target=ae,Be.relatedTarget=zt,Ne=Be),zt=Ne,Ae&&De)t:{for(Be=Ae,oe=De,ne=0,ae=Be;ae;ae=No(ae))ne++;for(ae=0,Ne=oe;Ne;Ne=No(Ne))ae++;for(;0<ne-ae;)Be=No(Be),ne--;for(;0<ae-ne;)oe=No(oe),ae--;for(;ne--;){if(Be===oe||oe!==null&&Be===oe.alternate)break t;Be=No(Be),oe=No(oe)}Be=null}else Be=null;Ae!==null&&pp(xe,ge,Ae,Be,!1),De!==null&&zt!==null&&pp(xe,zt,De,Be,!0)}}e:{if(ge=le?jo(le):window,Ae=ge.nodeName&&ge.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&ge.type==="file")var $e=f_;else if(Ym(ge))if(Qm)$e=g_;else{$e=m_;var Ye=h_}else(Ae=ge.nodeName)&&Ae.toLowerCase()==="input"&&(ge.type==="checkbox"||ge.type==="radio")&&($e=p_);if($e&&($e=$e(s,le))){Km(xe,$e,d,ve);break e}Ye&&Ye(s,ge,le),s==="focusout"&&(Ye=ge._wrapperState)&&Ye.controlled&&ge.type==="number"&&me(ge,"number",ge.value)}switch(Ye=le?jo(le):window,s){case"focusin":(Ym(Ye)||Ye.contentEditable==="true")&&(bo=Ye,Pu=le,La=null);break;case"focusout":La=Pu=bo=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,sp(xe,d,ve);break;case"selectionchange":if(x_)break;case"keydown":case"keyup":sp(xe,d,ve)}var Ke;if(ju)e:{switch(s){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else wo?qm(s,d)&&(et="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(et="onCompositionStart");et&&(Wm&&d.locale!=="ko"&&(wo||et!=="onCompositionStart"?et==="onCompositionEnd"&&wo&&(Ke=Lm()):(ns=ve,xu="value"in ns?ns.value:ns.textContent,wo=!0)),Ye=el(le,et),0<Ye.length&&(et=new Um(et,s,null,d,ve),xe.push({event:et,listeners:Ye}),Ke?et.data=Ke:(Ke=Gm(d),Ke!==null&&(et.data=Ke)))),(Ke=i_?l_(s,d):c_(s,d))&&(le=el(le,"onBeforeInput"),0<le.length&&(ve=new Um("onBeforeInput","beforeinput",null,d,ve),xe.push({event:ve,listeners:le}),ve.data=Ke))}hp(xe,a)})}function Ua(s,a,d){return{instance:s,listener:a,currentTarget:d}}function el(s,a){for(var d=a+"Capture",g=[];s!==null;){var x=s,S=x.stateNode;x.tag===5&&S!==null&&(x=S,S=Ht(s,d),S!=null&&g.unshift(Ua(s,S,x)),S=Ht(s,a),S!=null&&g.push(Ua(s,S,x))),s=s.return}return g}function No(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function pp(s,a,d,g,x){for(var S=a._reactName,O=[];d!==null&&d!==g;){var Y=d,Z=Y.alternate,le=Y.stateNode;if(Z!==null&&Z===g)break;Y.tag===5&&le!==null&&(Y=le,x?(Z=Ht(d,S),Z!=null&&O.unshift(Ua(d,Z,Y))):x||(Z=Ht(d,S),Z!=null&&O.push(Ua(d,Z,Y)))),d=d.return}O.length!==0&&s.push({event:a,listeners:O})}var N_=/\r\n?/g,S_=/\u0000|\uFFFD/g;function gp(s){return(typeof s=="string"?s:""+s).replace(N_,`
`).replace(S_,"")}function tl(s,a,d){if(a=gp(a),gp(s)!==a&&d)throw Error(n(425))}function nl(){}var Mu=null,Fu=null;function Lu(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Bu=typeof setTimeout=="function"?setTimeout:void 0,j_=typeof clearTimeout=="function"?clearTimeout:void 0,vp=typeof Promise=="function"?Promise:void 0,C_=typeof queueMicrotask=="function"?queueMicrotask:typeof vp<"u"?function(s){return vp.resolve(null).then(s).catch(k_)}:Bu;function k_(s){setTimeout(function(){throw s})}function $u(s,a){var d=a,g=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(g===0){s.removeChild(x),Aa(a);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=x}while(d);Aa(a)}function ss(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function yp(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var So=Math.random().toString(36).slice(2),mr="__reactFiber$"+So,za="__reactProps$"+So,Pr="__reactContainer$"+So,Uu="__reactEvents$"+So,E_="__reactListeners$"+So,P_="__reactHandles$"+So;function Ls(s){var a=s[mr];if(a)return a;for(var d=s.parentNode;d;){if(a=d[Pr]||d[mr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=yp(s);s!==null;){if(d=s[mr])return d;s=yp(s)}return a}s=d,d=s.parentNode}return null}function Wa(s){return s=s[mr]||s[Pr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function jo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function rl(s){return s[za]||null}var zu=[],Co=-1;function os(s){return{current:s}}function Ot(s){0>Co||(s.current=zu[Co],zu[Co]=null,Co--)}function Et(s,a){Co++,zu[Co]=s.current,s.current=a}var as={},cn=os(as),xn=os(!1),Bs=as;function ko(s,a){var d=s.type.contextTypes;if(!d)return as;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===a)return g.__reactInternalMemoizedMaskedChildContext;var x={},S;for(S in d)x[S]=a[S];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=x),x}function wn(s){return s=s.childContextTypes,s!=null}function sl(){Ot(xn),Ot(cn)}function xp(s,a,d){if(cn.current!==as)throw Error(n(168));Et(cn,a),Et(xn,d)}function wp(s,a,d){var g=s.stateNode;if(a=a.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var x in g)if(!(x in a))throw Error(n(108,X(s)||"Unknown",x));return F({},d,g)}function ol(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||as,Bs=cn.current,Et(cn,s),Et(xn,xn.current),!0}function bp(s,a,d){var g=s.stateNode;if(!g)throw Error(n(169));d?(s=wp(s,a,Bs),g.__reactInternalMemoizedMergedChildContext=s,Ot(xn),Ot(cn),Et(cn,s)):Ot(xn),Et(xn,d)}var Rr=null,al=!1,Wu=!1;function _p(s){Rr===null?Rr=[s]:Rr.push(s)}function R_(s){al=!0,_p(s)}function is(){if(!Wu&&Rr!==null){Wu=!0;var s=0,a=St;try{var d=Rr;for(St=1;s<d.length;s++){var g=d[s];do g=g(!0);while(g!==null)}Rr=null,al=!1}catch(x){throw Rr!==null&&(Rr=Rr.slice(s+1)),Sm(du,is),x}finally{St=a,Wu=!1}}return null}var Eo=[],Po=0,il=null,ll=0,Un=[],zn=0,$s=null,Ar=1,Tr="";function Us(s,a){Eo[Po++]=ll,Eo[Po++]=il,il=s,ll=a}function Np(s,a,d){Un[zn++]=Ar,Un[zn++]=Tr,Un[zn++]=$s,$s=s;var g=Ar;s=Tr;var x=32-Kn(g)-1;g&=~(1<<x),d+=1;var S=32-Kn(a)+x;if(30<S){var O=x-x%5;S=(g&(1<<O)-1).toString(32),g>>=O,x-=O,Ar=1<<32-Kn(a)+x|d<<x|g,Tr=S+s}else Ar=1<<S|d<<x|g,Tr=s}function Hu(s){s.return!==null&&(Us(s,1),Np(s,1,0))}function Vu(s){for(;s===il;)il=Eo[--Po],Eo[Po]=null,ll=Eo[--Po],Eo[Po]=null;for(;s===$s;)$s=Un[--zn],Un[zn]=null,Tr=Un[--zn],Un[zn]=null,Ar=Un[--zn],Un[zn]=null}var Tn=null,In=null,Ft=!1,Jn=null;function Sp(s,a){var d=qn(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function jp(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Tn=s,In=ss(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Tn=s,In=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=$s!==null?{id:Ar,overflow:Tr}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=qn(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,Tn=s,In=null,!0):!1;default:return!1}}function qu(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Gu(s){if(Ft){var a=In;if(a){var d=a;if(!jp(s,a)){if(qu(s))throw Error(n(418));a=ss(d.nextSibling);var g=Tn;a&&jp(s,a)?Sp(g,d):(s.flags=s.flags&-4097|2,Ft=!1,Tn=s)}}else{if(qu(s))throw Error(n(418));s.flags=s.flags&-4097|2,Ft=!1,Tn=s}}}function Cp(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Tn=s}function cl(s){if(s!==Tn)return!1;if(!Ft)return Cp(s),Ft=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Lu(s.type,s.memoizedProps)),a&&(a=In)){if(qu(s))throw kp(),Error(n(418));for(;a;)Sp(s,a),a=ss(a.nextSibling)}if(Cp(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){In=ss(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}In=null}}else In=Tn?ss(s.stateNode.nextSibling):null;return!0}function kp(){for(var s=In;s;)s=ss(s.nextSibling)}function Ro(){In=Tn=null,Ft=!1}function Yu(s){Jn===null?Jn=[s]:Jn.push(s)}var A_=A.ReactCurrentBatchConfig;function Ha(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,s));var x=g,S=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===S?a.ref:(a=function(O){var Y=x.refs;O===null?delete Y[S]:Y[S]=O},a._stringRef=S,a)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function ul(s,a){throw s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Ep(s){var a=s._init;return a(s._payload)}function Pp(s){function a(oe,ne){if(s){var ae=oe.deletions;ae===null?(oe.deletions=[ne],oe.flags|=16):ae.push(ne)}}function d(oe,ne){if(!s)return null;for(;ne!==null;)a(oe,ne),ne=ne.sibling;return null}function g(oe,ne){for(oe=new Map;ne!==null;)ne.key!==null?oe.set(ne.key,ne):oe.set(ne.index,ne),ne=ne.sibling;return oe}function x(oe,ne){return oe=ps(oe,ne),oe.index=0,oe.sibling=null,oe}function S(oe,ne,ae){return oe.index=ae,s?(ae=oe.alternate,ae!==null?(ae=ae.index,ae<ne?(oe.flags|=2,ne):ae):(oe.flags|=2,ne)):(oe.flags|=1048576,ne)}function O(oe){return s&&oe.alternate===null&&(oe.flags|=2),oe}function Y(oe,ne,ae,Ne){return ne===null||ne.tag!==6?(ne=Bd(ae,oe.mode,Ne),ne.return=oe,ne):(ne=x(ne,ae),ne.return=oe,ne)}function Z(oe,ne,ae,Ne){var $e=ae.type;return $e===B?ve(oe,ne,ae.props.children,Ne,ae.key):ne!==null&&(ne.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===R&&Ep($e)===ne.type)?(Ne=x(ne,ae.props),Ne.ref=Ha(oe,ne,ae),Ne.return=oe,Ne):(Ne=Ol(ae.type,ae.key,ae.props,null,oe.mode,Ne),Ne.ref=Ha(oe,ne,ae),Ne.return=oe,Ne)}function le(oe,ne,ae,Ne){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ae.containerInfo||ne.stateNode.implementation!==ae.implementation?(ne=$d(ae,oe.mode,Ne),ne.return=oe,ne):(ne=x(ne,ae.children||[]),ne.return=oe,ne)}function ve(oe,ne,ae,Ne,$e){return ne===null||ne.tag!==7?(ne=Ks(ae,oe.mode,Ne,$e),ne.return=oe,ne):(ne=x(ne,ae),ne.return=oe,ne)}function xe(oe,ne,ae){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=Bd(""+ne,oe.mode,ae),ne.return=oe,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case L:return ae=Ol(ne.type,ne.key,ne.props,null,oe.mode,ae),ae.ref=Ha(oe,null,ne),ae.return=oe,ae;case T:return ne=$d(ne,oe.mode,ae),ne.return=oe,ne;case R:var Ne=ne._init;return xe(oe,Ne(ne._payload),ae)}if(Te(ne)||W(ne))return ne=Ks(ne,oe.mode,ae,null),ne.return=oe,ne;ul(oe,ne)}return null}function ge(oe,ne,ae,Ne){var $e=ne!==null?ne.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return $e!==null?null:Y(oe,ne,""+ae,Ne);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case L:return ae.key===$e?Z(oe,ne,ae,Ne):null;case T:return ae.key===$e?le(oe,ne,ae,Ne):null;case R:return $e=ae._init,ge(oe,ne,$e(ae._payload),Ne)}if(Te(ae)||W(ae))return $e!==null?null:ve(oe,ne,ae,Ne,null);ul(oe,ae)}return null}function Ae(oe,ne,ae,Ne,$e){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return oe=oe.get(ae)||null,Y(ne,oe,""+Ne,$e);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case L:return oe=oe.get(Ne.key===null?ae:Ne.key)||null,Z(ne,oe,Ne,$e);case T:return oe=oe.get(Ne.key===null?ae:Ne.key)||null,le(ne,oe,Ne,$e);case R:var Ye=Ne._init;return Ae(oe,ne,ae,Ye(Ne._payload),$e)}if(Te(Ne)||W(Ne))return oe=oe.get(ae)||null,ve(ne,oe,Ne,$e,null);ul(ne,Ne)}return null}function De(oe,ne,ae,Ne){for(var $e=null,Ye=null,Ke=ne,et=ne=0,tn=null;Ke!==null&&et<ae.length;et++){Ke.index>et?(tn=Ke,Ke=null):tn=Ke.sibling;var gt=ge(oe,Ke,ae[et],Ne);if(gt===null){Ke===null&&(Ke=tn);break}s&&Ke&&gt.alternate===null&&a(oe,Ke),ne=S(gt,ne,et),Ye===null?$e=gt:Ye.sibling=gt,Ye=gt,Ke=tn}if(et===ae.length)return d(oe,Ke),Ft&&Us(oe,et),$e;if(Ke===null){for(;et<ae.length;et++)Ke=xe(oe,ae[et],Ne),Ke!==null&&(ne=S(Ke,ne,et),Ye===null?$e=Ke:Ye.sibling=Ke,Ye=Ke);return Ft&&Us(oe,et),$e}for(Ke=g(oe,Ke);et<ae.length;et++)tn=Ae(Ke,oe,et,ae[et],Ne),tn!==null&&(s&&tn.alternate!==null&&Ke.delete(tn.key===null?et:tn.key),ne=S(tn,ne,et),Ye===null?$e=tn:Ye.sibling=tn,Ye=tn);return s&&Ke.forEach(function(gs){return a(oe,gs)}),Ft&&Us(oe,et),$e}function Be(oe,ne,ae,Ne){var $e=W(ae);if(typeof $e!="function")throw Error(n(150));if(ae=$e.call(ae),ae==null)throw Error(n(151));for(var Ye=$e=null,Ke=ne,et=ne=0,tn=null,gt=ae.next();Ke!==null&&!gt.done;et++,gt=ae.next()){Ke.index>et?(tn=Ke,Ke=null):tn=Ke.sibling;var gs=ge(oe,Ke,gt.value,Ne);if(gs===null){Ke===null&&(Ke=tn);break}s&&Ke&&gs.alternate===null&&a(oe,Ke),ne=S(gs,ne,et),Ye===null?$e=gs:Ye.sibling=gs,Ye=gs,Ke=tn}if(gt.done)return d(oe,Ke),Ft&&Us(oe,et),$e;if(Ke===null){for(;!gt.done;et++,gt=ae.next())gt=xe(oe,gt.value,Ne),gt!==null&&(ne=S(gt,ne,et),Ye===null?$e=gt:Ye.sibling=gt,Ye=gt);return Ft&&Us(oe,et),$e}for(Ke=g(oe,Ke);!gt.done;et++,gt=ae.next())gt=Ae(Ke,oe,et,gt.value,Ne),gt!==null&&(s&&gt.alternate!==null&&Ke.delete(gt.key===null?et:gt.key),ne=S(gt,ne,et),Ye===null?$e=gt:Ye.sibling=gt,Ye=gt);return s&&Ke.forEach(function(u2){return a(oe,u2)}),Ft&&Us(oe,et),$e}function zt(oe,ne,ae,Ne){if(typeof ae=="object"&&ae!==null&&ae.type===B&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case L:e:{for(var $e=ae.key,Ye=ne;Ye!==null;){if(Ye.key===$e){if($e=ae.type,$e===B){if(Ye.tag===7){d(oe,Ye.sibling),ne=x(Ye,ae.props.children),ne.return=oe,oe=ne;break e}}else if(Ye.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===R&&Ep($e)===Ye.type){d(oe,Ye.sibling),ne=x(Ye,ae.props),ne.ref=Ha(oe,Ye,ae),ne.return=oe,oe=ne;break e}d(oe,Ye);break}else a(oe,Ye);Ye=Ye.sibling}ae.type===B?(ne=Ks(ae.props.children,oe.mode,Ne,ae.key),ne.return=oe,oe=ne):(Ne=Ol(ae.type,ae.key,ae.props,null,oe.mode,Ne),Ne.ref=Ha(oe,ne,ae),Ne.return=oe,oe=Ne)}return O(oe);case T:e:{for(Ye=ae.key;ne!==null;){if(ne.key===Ye)if(ne.tag===4&&ne.stateNode.containerInfo===ae.containerInfo&&ne.stateNode.implementation===ae.implementation){d(oe,ne.sibling),ne=x(ne,ae.children||[]),ne.return=oe,oe=ne;break e}else{d(oe,ne);break}else a(oe,ne);ne=ne.sibling}ne=$d(ae,oe.mode,Ne),ne.return=oe,oe=ne}return O(oe);case R:return Ye=ae._init,zt(oe,ne,Ye(ae._payload),Ne)}if(Te(ae))return De(oe,ne,ae,Ne);if(W(ae))return Be(oe,ne,ae,Ne);ul(oe,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,ne!==null&&ne.tag===6?(d(oe,ne.sibling),ne=x(ne,ae),ne.return=oe,oe=ne):(d(oe,ne),ne=Bd(ae,oe.mode,Ne),ne.return=oe,oe=ne),O(oe)):d(oe,ne)}return zt}var Ao=Pp(!0),Rp=Pp(!1),dl=os(null),fl=null,To=null,Ku=null;function Qu(){Ku=To=fl=null}function Ju(s){var a=dl.current;Ot(dl),s._currentValue=a}function Xu(s,a,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),s===d)break;s=s.return}}function Io(s,a){fl=s,Ku=To=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(bn=!0),s.firstContext=null)}function Wn(s){var a=s._currentValue;if(Ku!==s)if(s={context:s,memoizedValue:a,next:null},To===null){if(fl===null)throw Error(n(308));To=s,fl.dependencies={lanes:0,firstContext:s}}else To=To.next=s;return a}var zs=null;function Zu(s){zs===null?zs=[s]:zs.push(s)}function Ap(s,a,d,g){var x=a.interleaved;return x===null?(d.next=d,Zu(a)):(d.next=x.next,x.next=d),a.interleaved=d,Ir(s,g)}function Ir(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var ls=!1;function ed(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tp(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Or(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function cs(s,a,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(ht&2)!==0){var x=g.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),g.pending=a,Ir(s,d)}return x=g.interleaved,x===null?(a.next=a,Zu(g)):(a.next=x.next,x.next=a),g.interleaved=a,Ir(s,d)}function hl(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var g=a.lanes;g&=s.pendingLanes,d|=g,a.lanes=d,mu(s,d)}}function Ip(s,a){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var x=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var O={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?x=S=O:S=S.next=O,d=d.next}while(d!==null);S===null?x=S=a:S=S.next=a}else x=S=a;d={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:g.shared,effects:g.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function ml(s,a,d,g){var x=s.updateQueue;ls=!1;var S=x.firstBaseUpdate,O=x.lastBaseUpdate,Y=x.shared.pending;if(Y!==null){x.shared.pending=null;var Z=Y,le=Z.next;Z.next=null,O===null?S=le:O.next=le,O=Z;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,Y=ve.lastBaseUpdate,Y!==O&&(Y===null?ve.firstBaseUpdate=le:Y.next=le,ve.lastBaseUpdate=Z))}if(S!==null){var xe=x.baseState;O=0,ve=le=Z=null,Y=S;do{var ge=Y.lane,Ae=Y.eventTime;if((g&ge)===ge){ve!==null&&(ve=ve.next={eventTime:Ae,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var De=s,Be=Y;switch(ge=a,Ae=d,Be.tag){case 1:if(De=Be.payload,typeof De=="function"){xe=De.call(Ae,xe,ge);break e}xe=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Be.payload,ge=typeof De=="function"?De.call(Ae,xe,ge):De,ge==null)break e;xe=F({},xe,ge);break e;case 2:ls=!0}}Y.callback!==null&&Y.lane!==0&&(s.flags|=64,ge=x.effects,ge===null?x.effects=[Y]:ge.push(Y))}else Ae={eventTime:Ae,lane:ge,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},ve===null?(le=ve=Ae,Z=xe):ve=ve.next=Ae,O|=ge;if(Y=Y.next,Y===null){if(Y=x.shared.pending,Y===null)break;ge=Y,Y=ge.next,ge.next=null,x.lastBaseUpdate=ge,x.shared.pending=null}}while(!0);if(ve===null&&(Z=xe),x.baseState=Z,x.firstBaseUpdate=le,x.lastBaseUpdate=ve,a=x.shared.interleaved,a!==null){x=a;do O|=x.lane,x=x.next;while(x!==a)}else S===null&&(x.shared.lanes=0);Vs|=O,s.lanes=O,s.memoizedState=xe}}function Op(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var g=s[a],x=g.callback;if(x!==null){if(g.callback=null,g=d,typeof x!="function")throw Error(n(191,x));x.call(g)}}}var Va={},pr=os(Va),qa=os(Va),Ga=os(Va);function Ws(s){if(s===Va)throw Error(n(174));return s}function td(s,a){switch(Et(Ga,a),Et(qa,s),Et(pr,Va),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ct(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Ct(a,s)}Ot(pr),Et(pr,a)}function Oo(){Ot(pr),Ot(qa),Ot(Ga)}function Dp(s){Ws(Ga.current);var a=Ws(pr.current),d=Ct(a,s.type);a!==d&&(Et(qa,s),Et(pr,d))}function nd(s){qa.current===s&&(Ot(pr),Ot(qa))}var Lt=os(0);function pl(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var rd=[];function sd(){for(var s=0;s<rd.length;s++)rd[s]._workInProgressVersionPrimary=null;rd.length=0}var gl=A.ReactCurrentDispatcher,od=A.ReactCurrentBatchConfig,Hs=0,Bt=null,Yt=null,Zt=null,vl=!1,Ya=!1,Ka=0,T_=0;function un(){throw Error(n(321))}function ad(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!Qn(s[d],a[d]))return!1;return!0}function id(s,a,d,g,x,S){if(Hs=S,Bt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,gl.current=s===null||s.memoizedState===null?M_:F_,s=d(g,x),Ya){S=0;do{if(Ya=!1,Ka=0,25<=S)throw Error(n(301));S+=1,Zt=Yt=null,a.updateQueue=null,gl.current=L_,s=d(g,x)}while(Ya)}if(gl.current=wl,a=Yt!==null&&Yt.next!==null,Hs=0,Zt=Yt=Bt=null,vl=!1,a)throw Error(n(300));return s}function ld(){var s=Ka!==0;return Ka=0,s}function gr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Bt.memoizedState=Zt=s:Zt=Zt.next=s,Zt}function Hn(){if(Yt===null){var s=Bt.alternate;s=s!==null?s.memoizedState:null}else s=Yt.next;var a=Zt===null?Bt.memoizedState:Zt.next;if(a!==null)Zt=a,Yt=s;else{if(s===null)throw Error(n(310));Yt=s,s={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Zt===null?Bt.memoizedState=Zt=s:Zt=Zt.next=s}return Zt}function Qa(s,a){return typeof a=="function"?a(s):a}function cd(s){var a=Hn(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=Yt,x=g.baseQueue,S=d.pending;if(S!==null){if(x!==null){var O=x.next;x.next=S.next,S.next=O}g.baseQueue=x=S,d.pending=null}if(x!==null){S=x.next,g=g.baseState;var Y=O=null,Z=null,le=S;do{var ve=le.lane;if((Hs&ve)===ve)Z!==null&&(Z=Z.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),g=le.hasEagerState?le.eagerState:s(g,le.action);else{var xe={lane:ve,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};Z===null?(Y=Z=xe,O=g):Z=Z.next=xe,Bt.lanes|=ve,Vs|=ve}le=le.next}while(le!==null&&le!==S);Z===null?O=g:Z.next=Y,Qn(g,a.memoizedState)||(bn=!0),a.memoizedState=g,a.baseState=O,a.baseQueue=Z,d.lastRenderedState=g}if(s=d.interleaved,s!==null){x=s;do S=x.lane,Bt.lanes|=S,Vs|=S,x=x.next;while(x!==s)}else x===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function ud(s){var a=Hn(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=d.dispatch,x=d.pending,S=a.memoizedState;if(x!==null){d.pending=null;var O=x=x.next;do S=s(S,O.action),O=O.next;while(O!==x);Qn(S,a.memoizedState)||(bn=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),d.lastRenderedState=S}return[S,g]}function Mp(){}function Fp(s,a){var d=Bt,g=Hn(),x=a(),S=!Qn(g.memoizedState,x);if(S&&(g.memoizedState=x,bn=!0),g=g.queue,dd($p.bind(null,d,g,s),[s]),g.getSnapshot!==a||S||Zt!==null&&Zt.memoizedState.tag&1){if(d.flags|=2048,Ja(9,Bp.bind(null,d,g,x,a),void 0,null),en===null)throw Error(n(349));(Hs&30)!==0||Lp(d,a,x)}return x}function Lp(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=Bt.updateQueue,a===null?(a={lastEffect:null,stores:null},Bt.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function Bp(s,a,d,g){a.value=d,a.getSnapshot=g,Up(a)&&zp(s)}function $p(s,a,d){return d(function(){Up(a)&&zp(s)})}function Up(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!Qn(s,d)}catch{return!0}}function zp(s){var a=Ir(s,1);a!==null&&tr(a,s,1,-1)}function Wp(s){var a=gr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:s},a.queue=s,s=s.dispatch=D_.bind(null,Bt,s),[a.memoizedState,s]}function Ja(s,a,d,g){return s={tag:s,create:a,destroy:d,deps:g,next:null},a=Bt.updateQueue,a===null?(a={lastEffect:null,stores:null},Bt.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,a.lastEffect=s)),s}function Hp(){return Hn().memoizedState}function yl(s,a,d,g){var x=gr();Bt.flags|=s,x.memoizedState=Ja(1|a,d,void 0,g===void 0?null:g)}function xl(s,a,d,g){var x=Hn();g=g===void 0?null:g;var S=void 0;if(Yt!==null){var O=Yt.memoizedState;if(S=O.destroy,g!==null&&ad(g,O.deps)){x.memoizedState=Ja(a,d,S,g);return}}Bt.flags|=s,x.memoizedState=Ja(1|a,d,S,g)}function Vp(s,a){return yl(8390656,8,s,a)}function dd(s,a){return xl(2048,8,s,a)}function qp(s,a){return xl(4,2,s,a)}function Gp(s,a){return xl(4,4,s,a)}function Yp(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Kp(s,a,d){return d=d!=null?d.concat([s]):null,xl(4,4,Yp.bind(null,a,s),d)}function fd(){}function Qp(s,a){var d=Hn();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&ad(a,g[1])?g[0]:(d.memoizedState=[s,a],s)}function Jp(s,a){var d=Hn();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&ad(a,g[1])?g[0]:(s=s(),d.memoizedState=[s,a],s)}function Xp(s,a,d){return(Hs&21)===0?(s.baseState&&(s.baseState=!1,bn=!0),s.memoizedState=d):(Qn(d,a)||(d=Em(),Bt.lanes|=d,Vs|=d,s.baseState=!0),a)}function I_(s,a){var d=St;St=d!==0&&4>d?d:4,s(!0);var g=od.transition;od.transition={};try{s(!1),a()}finally{St=d,od.transition=g}}function Zp(){return Hn().memoizedState}function O_(s,a,d){var g=hs(s);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},eg(s))tg(a,d);else if(d=Ap(s,a,d,g),d!==null){var x=vn();tr(d,s,g,x),ng(d,a,g)}}function D_(s,a,d){var g=hs(s),x={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(eg(s))tg(a,x);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var O=a.lastRenderedState,Y=S(O,d);if(x.hasEagerState=!0,x.eagerState=Y,Qn(Y,O)){var Z=a.interleaved;Z===null?(x.next=x,Zu(a)):(x.next=Z.next,Z.next=x),a.interleaved=x;return}}catch{}finally{}d=Ap(s,a,x,g),d!==null&&(x=vn(),tr(d,s,g,x),ng(d,a,g))}}function eg(s){var a=s.alternate;return s===Bt||a!==null&&a===Bt}function tg(s,a){Ya=vl=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function ng(s,a,d){if((d&4194240)!==0){var g=a.lanes;g&=s.pendingLanes,d|=g,a.lanes=d,mu(s,d)}}var wl={readContext:Wn,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},M_={readContext:Wn,useCallback:function(s,a){return gr().memoizedState=[s,a===void 0?null:a],s},useContext:Wn,useEffect:Vp,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,yl(4194308,4,Yp.bind(null,a,s),d)},useLayoutEffect:function(s,a){return yl(4194308,4,s,a)},useInsertionEffect:function(s,a){return yl(4,2,s,a)},useMemo:function(s,a){var d=gr();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var g=gr();return a=d!==void 0?d(a):a,g.memoizedState=g.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},g.queue=s,s=s.dispatch=O_.bind(null,Bt,s),[g.memoizedState,s]},useRef:function(s){var a=gr();return s={current:s},a.memoizedState=s},useState:Wp,useDebugValue:fd,useDeferredValue:function(s){return gr().memoizedState=s},useTransition:function(){var s=Wp(!1),a=s[0];return s=I_.bind(null,s[1]),gr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var g=Bt,x=gr();if(Ft){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),en===null)throw Error(n(349));(Hs&30)!==0||Lp(g,a,d)}x.memoizedState=d;var S={value:d,getSnapshot:a};return x.queue=S,Vp($p.bind(null,g,S,s),[s]),g.flags|=2048,Ja(9,Bp.bind(null,g,S,d,a),void 0,null),d},useId:function(){var s=gr(),a=en.identifierPrefix;if(Ft){var d=Tr,g=Ar;d=(g&~(1<<32-Kn(g)-1)).toString(32)+d,a=":"+a+"R"+d,d=Ka++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=T_++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},F_={readContext:Wn,useCallback:Qp,useContext:Wn,useEffect:dd,useImperativeHandle:Kp,useInsertionEffect:qp,useLayoutEffect:Gp,useMemo:Jp,useReducer:cd,useRef:Hp,useState:function(){return cd(Qa)},useDebugValue:fd,useDeferredValue:function(s){var a=Hn();return Xp(a,Yt.memoizedState,s)},useTransition:function(){var s=cd(Qa)[0],a=Hn().memoizedState;return[s,a]},useMutableSource:Mp,useSyncExternalStore:Fp,useId:Zp,unstable_isNewReconciler:!1},L_={readContext:Wn,useCallback:Qp,useContext:Wn,useEffect:dd,useImperativeHandle:Kp,useInsertionEffect:qp,useLayoutEffect:Gp,useMemo:Jp,useReducer:ud,useRef:Hp,useState:function(){return ud(Qa)},useDebugValue:fd,useDeferredValue:function(s){var a=Hn();return Yt===null?a.memoizedState=s:Xp(a,Yt.memoizedState,s)},useTransition:function(){var s=ud(Qa)[0],a=Hn().memoizedState;return[s,a]},useMutableSource:Mp,useSyncExternalStore:Fp,useId:Zp,unstable_isNewReconciler:!1};function Xn(s,a){if(s&&s.defaultProps){a=F({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function hd(s,a,d,g){a=s.memoizedState,d=d(g,a),d=d==null?a:F({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var bl={isMounted:function(s){return(s=s._reactInternals)?Fs(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var g=vn(),x=hs(s),S=Or(g,x);S.payload=a,d!=null&&(S.callback=d),a=cs(s,S,x),a!==null&&(tr(a,s,x,g),hl(a,s,x))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var g=vn(),x=hs(s),S=Or(g,x);S.tag=1,S.payload=a,d!=null&&(S.callback=d),a=cs(s,S,x),a!==null&&(tr(a,s,x,g),hl(a,s,x))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=vn(),g=hs(s),x=Or(d,g);x.tag=2,a!=null&&(x.callback=a),a=cs(s,x,g),a!==null&&(tr(a,s,g,d),hl(a,s,g))}};function rg(s,a,d,g,x,S,O){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,S,O):a.prototype&&a.prototype.isPureReactComponent?!Fa(d,g)||!Fa(x,S):!0}function sg(s,a,d){var g=!1,x=as,S=a.contextType;return typeof S=="object"&&S!==null?S=Wn(S):(x=wn(a)?Bs:cn.current,g=a.contextTypes,S=(g=g!=null)?ko(s,x):as),a=new a(d,S),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=bl,s.stateNode=a,a._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=S),a}function og(s,a,d,g){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,g),a.state!==s&&bl.enqueueReplaceState(a,a.state,null)}function md(s,a,d,g){var x=s.stateNode;x.props=d,x.state=s.memoizedState,x.refs={},ed(s);var S=a.contextType;typeof S=="object"&&S!==null?x.context=Wn(S):(S=wn(a)?Bs:cn.current,x.context=ko(s,S)),x.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(hd(s,a,S,d),x.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&bl.enqueueReplaceState(x,x.state,null),ml(s,d,x,g),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function Do(s,a){try{var d="",g=a;do d+=ee(g),g=g.return;while(g);var x=d}catch(S){x=`
Error generating stack: `+S.message+`
`+S.stack}return{value:s,source:a,stack:x,digest:null}}function pd(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function gd(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var B_=typeof WeakMap=="function"?WeakMap:Map;function ag(s,a,d){d=Or(-1,d),d.tag=3,d.payload={element:null};var g=a.value;return d.callback=function(){El||(El=!0,Ad=g),gd(s,a)},d}function ig(s,a,d){d=Or(-1,d),d.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var x=a.value;d.payload=function(){return g(x)},d.callback=function(){gd(s,a)}}var S=s.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){gd(s,a),typeof g!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var O=a.stack;this.componentDidCatch(a.value,{componentStack:O!==null?O:""})}),d}function lg(s,a,d){var g=s.pingCache;if(g===null){g=s.pingCache=new B_;var x=new Set;g.set(a,x)}else x=g.get(a),x===void 0&&(x=new Set,g.set(a,x));x.has(d)||(x.add(d),s=Z_.bind(null,s,a,d),a.then(s,s))}function cg(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function ug(s,a,d,g,x){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Or(-1,1),a.tag=2,cs(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var $_=A.ReactCurrentOwner,bn=!1;function gn(s,a,d,g){a.child=s===null?Rp(a,null,d,g):Ao(a,s.child,d,g)}function dg(s,a,d,g,x){d=d.render;var S=a.ref;return Io(a,x),g=id(s,a,d,g,S,x),d=ld(),s!==null&&!bn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Dr(s,a,x)):(Ft&&d&&Hu(a),a.flags|=1,gn(s,a,g,x),a.child)}function fg(s,a,d,g,x){if(s===null){var S=d.type;return typeof S=="function"&&!Ld(S)&&S.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=S,hg(s,a,S,g,x)):(s=Ol(d.type,null,g,a,a.mode,x),s.ref=a.ref,s.return=a,a.child=s)}if(S=s.child,(s.lanes&x)===0){var O=S.memoizedProps;if(d=d.compare,d=d!==null?d:Fa,d(O,g)&&s.ref===a.ref)return Dr(s,a,x)}return a.flags|=1,s=ps(S,g),s.ref=a.ref,s.return=a,a.child=s}function hg(s,a,d,g,x){if(s!==null){var S=s.memoizedProps;if(Fa(S,g)&&s.ref===a.ref)if(bn=!1,a.pendingProps=g=S,(s.lanes&x)!==0)(s.flags&131072)!==0&&(bn=!0);else return a.lanes=s.lanes,Dr(s,a,x)}return vd(s,a,d,g,x)}function mg(s,a,d){var g=a.pendingProps,x=g.children,S=s!==null?s.memoizedState:null;if(g.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Fo,On),On|=d;else{if((d&1073741824)===0)return s=S!==null?S.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Et(Fo,On),On|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:d,Et(Fo,On),On|=g}else S!==null?(g=S.baseLanes|d,a.memoizedState=null):g=d,Et(Fo,On),On|=g;return gn(s,a,x,d),a.child}function pg(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function vd(s,a,d,g,x){var S=wn(d)?Bs:cn.current;return S=ko(a,S),Io(a,x),d=id(s,a,d,g,S,x),g=ld(),s!==null&&!bn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Dr(s,a,x)):(Ft&&g&&Hu(a),a.flags|=1,gn(s,a,d,x),a.child)}function gg(s,a,d,g,x){if(wn(d)){var S=!0;ol(a)}else S=!1;if(Io(a,x),a.stateNode===null)Nl(s,a),sg(a,d,g),md(a,d,g,x),g=!0;else if(s===null){var O=a.stateNode,Y=a.memoizedProps;O.props=Y;var Z=O.context,le=d.contextType;typeof le=="object"&&le!==null?le=Wn(le):(le=wn(d)?Bs:cn.current,le=ko(a,le));var ve=d.getDerivedStateFromProps,xe=typeof ve=="function"||typeof O.getSnapshotBeforeUpdate=="function";xe||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==g||Z!==le)&&og(a,O,g,le),ls=!1;var ge=a.memoizedState;O.state=ge,ml(a,g,O,x),Z=a.memoizedState,Y!==g||ge!==Z||xn.current||ls?(typeof ve=="function"&&(hd(a,d,ve,g),Z=a.memoizedState),(Y=ls||rg(a,d,Y,g,ge,Z,le))?(xe||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(a.flags|=4194308)):(typeof O.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=Z),O.props=g,O.state=Z,O.context=le,g=Y):(typeof O.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{O=a.stateNode,Tp(s,a),Y=a.memoizedProps,le=a.type===a.elementType?Y:Xn(a.type,Y),O.props=le,xe=a.pendingProps,ge=O.context,Z=d.contextType,typeof Z=="object"&&Z!==null?Z=Wn(Z):(Z=wn(d)?Bs:cn.current,Z=ko(a,Z));var Ae=d.getDerivedStateFromProps;(ve=typeof Ae=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==xe||ge!==Z)&&og(a,O,g,Z),ls=!1,ge=a.memoizedState,O.state=ge,ml(a,g,O,x);var De=a.memoizedState;Y!==xe||ge!==De||xn.current||ls?(typeof Ae=="function"&&(hd(a,d,Ae,g),De=a.memoizedState),(le=ls||rg(a,d,le,g,ge,De,Z)||!1)?(ve||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,De,Z),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,De,Z)),typeof O.componentDidUpdate=="function"&&(a.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof O.componentDidUpdate!="function"||Y===s.memoizedProps&&ge===s.memoizedState||(a.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&ge===s.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=De),O.props=g,O.state=De,O.context=Z,g=le):(typeof O.componentDidUpdate!="function"||Y===s.memoizedProps&&ge===s.memoizedState||(a.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&ge===s.memoizedState||(a.flags|=1024),g=!1)}return yd(s,a,d,g,S,x)}function yd(s,a,d,g,x,S){pg(s,a);var O=(a.flags&128)!==0;if(!g&&!O)return x&&bp(a,d,!1),Dr(s,a,S);g=a.stateNode,$_.current=a;var Y=O&&typeof d.getDerivedStateFromError!="function"?null:g.render();return a.flags|=1,s!==null&&O?(a.child=Ao(a,s.child,null,S),a.child=Ao(a,null,Y,S)):gn(s,a,Y,S),a.memoizedState=g.state,x&&bp(a,d,!0),a.child}function vg(s){var a=s.stateNode;a.pendingContext?xp(s,a.pendingContext,a.pendingContext!==a.context):a.context&&xp(s,a.context,!1),td(s,a.containerInfo)}function yg(s,a,d,g,x){return Ro(),Yu(x),a.flags|=256,gn(s,a,d,g),a.child}var xd={dehydrated:null,treeContext:null,retryLane:0};function wd(s){return{baseLanes:s,cachePool:null,transitions:null}}function xg(s,a,d){var g=a.pendingProps,x=Lt.current,S=!1,O=(a.flags&128)!==0,Y;if((Y=O)||(Y=s!==null&&s.memoizedState===null?!1:(x&2)!==0),Y?(S=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),Et(Lt,x&1),s===null)return Gu(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(O=g.children,s=g.fallback,S?(g=a.mode,S=a.child,O={mode:"hidden",children:O},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=O):S=Dl(O,g,0,null),s=Ks(s,g,d,null),S.return=a,s.return=a,S.sibling=s,a.child=S,a.child.memoizedState=wd(d),a.memoizedState=xd,s):bd(a,O));if(x=s.memoizedState,x!==null&&(Y=x.dehydrated,Y!==null))return U_(s,a,O,g,Y,x,d);if(S){S=g.fallback,O=a.mode,x=s.child,Y=x.sibling;var Z={mode:"hidden",children:g.children};return(O&1)===0&&a.child!==x?(g=a.child,g.childLanes=0,g.pendingProps=Z,a.deletions=null):(g=ps(x,Z),g.subtreeFlags=x.subtreeFlags&14680064),Y!==null?S=ps(Y,S):(S=Ks(S,O,d,null),S.flags|=2),S.return=a,g.return=a,g.sibling=S,a.child=g,g=S,S=a.child,O=s.child.memoizedState,O=O===null?wd(d):{baseLanes:O.baseLanes|d,cachePool:null,transitions:O.transitions},S.memoizedState=O,S.childLanes=s.childLanes&~d,a.memoizedState=xd,g}return S=s.child,s=S.sibling,g=ps(S,{mode:"visible",children:g.children}),(a.mode&1)===0&&(g.lanes=d),g.return=a,g.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=g,a.memoizedState=null,g}function bd(s,a){return a=Dl({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function _l(s,a,d,g){return g!==null&&Yu(g),Ao(a,s.child,null,d),s=bd(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function U_(s,a,d,g,x,S,O){if(d)return a.flags&256?(a.flags&=-257,g=pd(Error(n(422))),_l(s,a,O,g)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(S=g.fallback,x=a.mode,g=Dl({mode:"visible",children:g.children},x,0,null),S=Ks(S,x,O,null),S.flags|=2,g.return=a,S.return=a,g.sibling=S,a.child=g,(a.mode&1)!==0&&Ao(a,s.child,null,O),a.child.memoizedState=wd(O),a.memoizedState=xd,S);if((a.mode&1)===0)return _l(s,a,O,null);if(x.data==="$!"){if(g=x.nextSibling&&x.nextSibling.dataset,g)var Y=g.dgst;return g=Y,S=Error(n(419)),g=pd(S,g,void 0),_l(s,a,O,g)}if(Y=(O&s.childLanes)!==0,bn||Y){if(g=en,g!==null){switch(O&-O){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(g.suspendedLanes|O))!==0?0:x,x!==0&&x!==S.retryLane&&(S.retryLane=x,Ir(s,x),tr(g,s,x,-1))}return Fd(),g=pd(Error(n(421))),_l(s,a,O,g)}return x.data==="$?"?(a.flags|=128,a.child=s.child,a=e2.bind(null,s),x._reactRetry=a,null):(s=S.treeContext,In=ss(x.nextSibling),Tn=a,Ft=!0,Jn=null,s!==null&&(Un[zn++]=Ar,Un[zn++]=Tr,Un[zn++]=$s,Ar=s.id,Tr=s.overflow,$s=a),a=bd(a,g.children),a.flags|=4096,a)}function wg(s,a,d){s.lanes|=a;var g=s.alternate;g!==null&&(g.lanes|=a),Xu(s.return,a,d)}function _d(s,a,d,g,x){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:x}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=d,S.tailMode=x)}function bg(s,a,d){var g=a.pendingProps,x=g.revealOrder,S=g.tail;if(gn(s,a,g.children,d),g=Lt.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&wg(s,d,a);else if(s.tag===19)wg(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(Et(Lt,g),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(d=a.child,x=null;d!==null;)s=d.alternate,s!==null&&pl(s)===null&&(x=d),d=d.sibling;d=x,d===null?(x=a.child,a.child=null):(x=d.sibling,d.sibling=null),_d(a,!1,x,d,S);break;case"backwards":for(d=null,x=a.child,a.child=null;x!==null;){if(s=x.alternate,s!==null&&pl(s)===null){a.child=x;break}s=x.sibling,x.sibling=d,d=x,x=s}_d(a,!0,d,null,S);break;case"together":_d(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Nl(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Dr(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),Vs|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,d=ps(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=ps(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function z_(s,a,d){switch(a.tag){case 3:vg(a),Ro();break;case 5:Dp(a);break;case 1:wn(a.type)&&ol(a);break;case 4:td(a,a.stateNode.containerInfo);break;case 10:var g=a.type._context,x=a.memoizedProps.value;Et(dl,g._currentValue),g._currentValue=x;break;case 13:if(g=a.memoizedState,g!==null)return g.dehydrated!==null?(Et(Lt,Lt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?xg(s,a,d):(Et(Lt,Lt.current&1),s=Dr(s,a,d),s!==null?s.sibling:null);Et(Lt,Lt.current&1);break;case 19:if(g=(d&a.childLanes)!==0,(s.flags&128)!==0){if(g)return bg(s,a,d);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Et(Lt,Lt.current),g)break;return null;case 22:case 23:return a.lanes=0,mg(s,a,d)}return Dr(s,a,d)}var _g,Nd,Ng,Sg;_g=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Nd=function(){},Ng=function(s,a,d,g){var x=s.memoizedProps;if(x!==g){s=a.stateNode,Ws(pr.current);var S=null;switch(d){case"input":x=z(s,x),g=z(s,g),S=[];break;case"select":x=F({},x,{value:void 0}),g=F({},g,{value:void 0}),S=[];break;case"textarea":x=Ue(s,x),g=Ue(s,g),S=[];break;default:typeof x.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=nl)}qe(d,g);var O;d=null;for(le in x)if(!g.hasOwnProperty(le)&&x.hasOwnProperty(le)&&x[le]!=null)if(le==="style"){var Y=x[le];for(O in Y)Y.hasOwnProperty(O)&&(d||(d={}),d[O]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(o.hasOwnProperty(le)?S||(S=[]):(S=S||[]).push(le,null));for(le in g){var Z=g[le];if(Y=x?.[le],g.hasOwnProperty(le)&&Z!==Y&&(Z!=null||Y!=null))if(le==="style")if(Y){for(O in Y)!Y.hasOwnProperty(O)||Z&&Z.hasOwnProperty(O)||(d||(d={}),d[O]="");for(O in Z)Z.hasOwnProperty(O)&&Y[O]!==Z[O]&&(d||(d={}),d[O]=Z[O])}else d||(S||(S=[]),S.push(le,d)),d=Z;else le==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Y=Y?Y.__html:void 0,Z!=null&&Y!==Z&&(S=S||[]).push(le,Z)):le==="children"?typeof Z!="string"&&typeof Z!="number"||(S=S||[]).push(le,""+Z):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(o.hasOwnProperty(le)?(Z!=null&&le==="onScroll"&&It("scroll",s),S||Y===Z||(S=[])):(S=S||[]).push(le,Z))}d&&(S=S||[]).push("style",d);var le=S;(a.updateQueue=le)&&(a.flags|=4)}},Sg=function(s,a,d,g){d!==g&&(a.flags|=4)};function Xa(s,a){if(!Ft)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function dn(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(a)for(var x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags&14680064,g|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=g,s.childLanes=d,a}function W_(s,a,d){var g=a.pendingProps;switch(Vu(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(a),null;case 1:return wn(a.type)&&sl(),dn(a),null;case 3:return g=a.stateNode,Oo(),Ot(xn),Ot(cn),sd(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(cl(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Jn!==null&&(Od(Jn),Jn=null))),Nd(s,a),dn(a),null;case 5:nd(a);var x=Ws(Ga.current);if(d=a.type,s!==null&&a.stateNode!=null)Ng(s,a,d,g,x),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!g){if(a.stateNode===null)throw Error(n(166));return dn(a),null}if(s=Ws(pr.current),cl(a)){g=a.stateNode,d=a.type;var S=a.memoizedProps;switch(g[mr]=a,g[za]=S,s=(a.mode&1)!==0,d){case"dialog":It("cancel",g),It("close",g);break;case"iframe":case"object":case"embed":It("load",g);break;case"video":case"audio":for(x=0;x<Ba.length;x++)It(Ba[x],g);break;case"source":It("error",g);break;case"img":case"image":case"link":It("error",g),It("load",g);break;case"details":It("toggle",g);break;case"input":de(g,S),It("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},It("invalid",g);break;case"textarea":ke(g,S),It("invalid",g)}qe(d,S),x=null;for(var O in S)if(S.hasOwnProperty(O)){var Y=S[O];O==="children"?typeof Y=="string"?g.textContent!==Y&&(S.suppressHydrationWarning!==!0&&tl(g.textContent,Y,s),x=["children",Y]):typeof Y=="number"&&g.textContent!==""+Y&&(S.suppressHydrationWarning!==!0&&tl(g.textContent,Y,s),x=["children",""+Y]):o.hasOwnProperty(O)&&Y!=null&&O==="onScroll"&&It("scroll",g)}switch(d){case"input":he(g),pe(g,S,!0);break;case"textarea":he(g),tt(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=nl)}g=x,a.updateQueue=g,g!==null&&(a.flags|=4)}else{O=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=yt(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=O.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=O.createElement(d,{is:g.is}):(s=O.createElement(d),d==="select"&&(O=s,g.multiple?O.multiple=!0:g.size&&(O.size=g.size))):s=O.createElementNS(s,d),s[mr]=a,s[za]=g,_g(s,a,!1,!1),a.stateNode=s;e:{switch(O=Le(d,g),d){case"dialog":It("cancel",s),It("close",s),x=g;break;case"iframe":case"object":case"embed":It("load",s),x=g;break;case"video":case"audio":for(x=0;x<Ba.length;x++)It(Ba[x],s);x=g;break;case"source":It("error",s),x=g;break;case"img":case"image":case"link":It("error",s),It("load",s),x=g;break;case"details":It("toggle",s),x=g;break;case"input":de(s,g),x=z(s,g),It("invalid",s);break;case"option":x=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},x=F({},g,{value:void 0}),It("invalid",s);break;case"textarea":ke(s,g),x=Ue(s,g),It("invalid",s);break;default:x=g}qe(d,x),Y=x;for(S in Y)if(Y.hasOwnProperty(S)){var Z=Y[S];S==="style"?je(s,Z):S==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&dt(s,Z)):S==="children"?typeof Z=="string"?(d!=="textarea"||Z!=="")&&Ge(s,Z):typeof Z=="number"&&Ge(s,""+Z):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(o.hasOwnProperty(S)?Z!=null&&S==="onScroll"&&It("scroll",s):Z!=null&&C(s,S,Z,O))}switch(d){case"input":he(s),pe(s,g,!1);break;case"textarea":he(s),tt(s);break;case"option":g.value!=null&&s.setAttribute("value",""+ie(g.value));break;case"select":s.multiple=!!g.multiple,S=g.value,S!=null?Je(s,!!g.multiple,S,!1):g.defaultValue!=null&&Je(s,!!g.multiple,g.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=nl)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return dn(a),null;case 6:if(s&&a.stateNode!=null)Sg(s,a,s.memoizedProps,g);else{if(typeof g!="string"&&a.stateNode===null)throw Error(n(166));if(d=Ws(Ga.current),Ws(pr.current),cl(a)){if(g=a.stateNode,d=a.memoizedProps,g[mr]=a,(S=g.nodeValue!==d)&&(s=Tn,s!==null))switch(s.tag){case 3:tl(g.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&tl(g.nodeValue,d,(s.mode&1)!==0)}S&&(a.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[mr]=a,a.stateNode=g}return dn(a),null;case 13:if(Ot(Lt),g=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ft&&In!==null&&(a.mode&1)!==0&&(a.flags&128)===0)kp(),Ro(),a.flags|=98560,S=!1;else if(S=cl(a),g!==null&&g.dehydrated!==null){if(s===null){if(!S)throw Error(n(318));if(S=a.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[mr]=a}else Ro(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;dn(a),S=!1}else Jn!==null&&(Od(Jn),Jn=null),S=!0;if(!S)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(Lt.current&1)!==0?Kt===0&&(Kt=3):Fd())),a.updateQueue!==null&&(a.flags|=4),dn(a),null);case 4:return Oo(),Nd(s,a),s===null&&$a(a.stateNode.containerInfo),dn(a),null;case 10:return Ju(a.type._context),dn(a),null;case 17:return wn(a.type)&&sl(),dn(a),null;case 19:if(Ot(Lt),S=a.memoizedState,S===null)return dn(a),null;if(g=(a.flags&128)!==0,O=S.rendering,O===null)if(g)Xa(S,!1);else{if(Kt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(O=pl(s),O!==null){for(a.flags|=128,Xa(S,!1),g=O.updateQueue,g!==null&&(a.updateQueue=g,a.flags|=4),a.subtreeFlags=0,g=d,d=a.child;d!==null;)S=d,s=g,S.flags&=14680066,O=S.alternate,O===null?(S.childLanes=0,S.lanes=s,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=O.childLanes,S.lanes=O.lanes,S.child=O.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=O.memoizedProps,S.memoizedState=O.memoizedState,S.updateQueue=O.updateQueue,S.type=O.type,s=O.dependencies,S.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return Et(Lt,Lt.current&1|2),a.child}s=s.sibling}S.tail!==null&&Ut()>Lo&&(a.flags|=128,g=!0,Xa(S,!1),a.lanes=4194304)}else{if(!g)if(s=pl(O),s!==null){if(a.flags|=128,g=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Xa(S,!0),S.tail===null&&S.tailMode==="hidden"&&!O.alternate&&!Ft)return dn(a),null}else 2*Ut()-S.renderingStartTime>Lo&&d!==1073741824&&(a.flags|=128,g=!0,Xa(S,!1),a.lanes=4194304);S.isBackwards?(O.sibling=a.child,a.child=O):(d=S.last,d!==null?d.sibling=O:a.child=O,S.last=O)}return S.tail!==null?(a=S.tail,S.rendering=a,S.tail=a.sibling,S.renderingStartTime=Ut(),a.sibling=null,d=Lt.current,Et(Lt,g?d&1|2:d&1),a):(dn(a),null);case 22:case 23:return Md(),g=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(a.flags|=8192),g&&(a.mode&1)!==0?(On&1073741824)!==0&&(dn(a),a.subtreeFlags&6&&(a.flags|=8192)):dn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function H_(s,a){switch(Vu(a),a.tag){case 1:return wn(a.type)&&sl(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Oo(),Ot(xn),Ot(cn),sd(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return nd(a),null;case 13:if(Ot(Lt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Ro()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Ot(Lt),null;case 4:return Oo(),null;case 10:return Ju(a.type._context),null;case 22:case 23:return Md(),null;case 24:return null;default:return null}}var Sl=!1,fn=!1,V_=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Mo(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){$t(s,a,g)}else d.current=null}function Sd(s,a,d){try{d()}catch(g){$t(s,a,g)}}var jg=!1;function q_(s,a){if(Mu=Hi,s=rp(),Eu(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var x=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break e}var O=0,Y=-1,Z=-1,le=0,ve=0,xe=s,ge=null;t:for(;;){for(var Ae;xe!==d||x!==0&&xe.nodeType!==3||(Y=O+x),xe!==S||g!==0&&xe.nodeType!==3||(Z=O+g),xe.nodeType===3&&(O+=xe.nodeValue.length),(Ae=xe.firstChild)!==null;)ge=xe,xe=Ae;for(;;){if(xe===s)break t;if(ge===d&&++le===x&&(Y=O),ge===S&&++ve===g&&(Z=O),(Ae=xe.nextSibling)!==null)break;xe=ge,ge=xe.parentNode}xe=Ae}d=Y===-1||Z===-1?null:{start:Y,end:Z}}else d=null}d=d||{start:0,end:0}}else d=null;for(Fu={focusedElem:s,selectionRange:d},Hi=!1,Ie=a;Ie!==null;)if(a=Ie,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Ie=s;else for(;Ie!==null;){a=Ie;try{var De=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Be=De.memoizedProps,zt=De.memoizedState,oe=a.stateNode,ne=oe.getSnapshotBeforeUpdate(a.elementType===a.type?Be:Xn(a.type,Be),zt);oe.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ae=a.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ne){$t(a,a.return,Ne)}if(s=a.sibling,s!==null){s.return=a.return,Ie=s;break}Ie=a.return}return De=jg,jg=!1,De}function Za(s,a,d){var g=a.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var x=g=g.next;do{if((x.tag&s)===s){var S=x.destroy;x.destroy=void 0,S!==void 0&&Sd(a,d,S)}x=x.next}while(x!==g)}}function jl(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var g=d.create;d.destroy=g()}d=d.next}while(d!==a)}}function jd(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function Cg(s){var a=s.alternate;a!==null&&(s.alternate=null,Cg(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[mr],delete a[za],delete a[Uu],delete a[E_],delete a[P_])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function kg(s){return s.tag===5||s.tag===3||s.tag===4}function Eg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||kg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Cd(s,a,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=nl));else if(g!==4&&(s=s.child,s!==null))for(Cd(s,a,d),s=s.sibling;s!==null;)Cd(s,a,d),s=s.sibling}function kd(s,a,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(kd(s,a,d),s=s.sibling;s!==null;)kd(s,a,d),s=s.sibling}var sn=null,Zn=!1;function us(s,a,d){for(d=d.child;d!==null;)Pg(s,a,d),d=d.sibling}function Pg(s,a,d){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(Li,d)}catch{}switch(d.tag){case 5:fn||Mo(d,a);case 6:var g=sn,x=Zn;sn=null,us(s,a,d),sn=g,Zn=x,sn!==null&&(Zn?(s=sn,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):sn.removeChild(d.stateNode));break;case 18:sn!==null&&(Zn?(s=sn,d=d.stateNode,s.nodeType===8?$u(s.parentNode,d):s.nodeType===1&&$u(s,d),Aa(s)):$u(sn,d.stateNode));break;case 4:g=sn,x=Zn,sn=d.stateNode.containerInfo,Zn=!0,us(s,a,d),sn=g,Zn=x;break;case 0:case 11:case 14:case 15:if(!fn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){x=g=g.next;do{var S=x,O=S.destroy;S=S.tag,O!==void 0&&((S&2)!==0||(S&4)!==0)&&Sd(d,a,O),x=x.next}while(x!==g)}us(s,a,d);break;case 1:if(!fn&&(Mo(d,a),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(Y){$t(d,a,Y)}us(s,a,d);break;case 21:us(s,a,d);break;case 22:d.mode&1?(fn=(g=fn)||d.memoizedState!==null,us(s,a,d),fn=g):us(s,a,d);break;default:us(s,a,d)}}function Rg(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new V_),a.forEach(function(g){var x=t2.bind(null,s,g);d.has(g)||(d.add(g),g.then(x,x))})}}function er(s,a){var d=a.deletions;if(d!==null)for(var g=0;g<d.length;g++){var x=d[g];try{var S=s,O=a,Y=O;e:for(;Y!==null;){switch(Y.tag){case 5:sn=Y.stateNode,Zn=!1;break e;case 3:sn=Y.stateNode.containerInfo,Zn=!0;break e;case 4:sn=Y.stateNode.containerInfo,Zn=!0;break e}Y=Y.return}if(sn===null)throw Error(n(160));Pg(S,O,x),sn=null,Zn=!1;var Z=x.alternate;Z!==null&&(Z.return=null),x.return=null}catch(le){$t(x,a,le)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Ag(a,s),a=a.sibling}function Ag(s,a){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(er(a,s),vr(s),g&4){try{Za(3,s,s.return),jl(3,s)}catch(Be){$t(s,s.return,Be)}try{Za(5,s,s.return)}catch(Be){$t(s,s.return,Be)}}break;case 1:er(a,s),vr(s),g&512&&d!==null&&Mo(d,d.return);break;case 5:if(er(a,s),vr(s),g&512&&d!==null&&Mo(d,d.return),s.flags&32){var x=s.stateNode;try{Ge(x,"")}catch(Be){$t(s,s.return,Be)}}if(g&4&&(x=s.stateNode,x!=null)){var S=s.memoizedProps,O=d!==null?d.memoizedProps:S,Y=s.type,Z=s.updateQueue;if(s.updateQueue=null,Z!==null)try{Y==="input"&&S.type==="radio"&&S.name!=null&&ye(x,S),Le(Y,O);var le=Le(Y,S);for(O=0;O<Z.length;O+=2){var ve=Z[O],xe=Z[O+1];ve==="style"?je(x,xe):ve==="dangerouslySetInnerHTML"?dt(x,xe):ve==="children"?Ge(x,xe):C(x,ve,xe,le)}switch(Y){case"input":_e(x,S);break;case"textarea":He(x,S);break;case"select":var ge=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!S.multiple;var Ae=S.value;Ae!=null?Je(x,!!S.multiple,Ae,!1):ge!==!!S.multiple&&(S.defaultValue!=null?Je(x,!!S.multiple,S.defaultValue,!0):Je(x,!!S.multiple,S.multiple?[]:"",!1))}x[za]=S}catch(Be){$t(s,s.return,Be)}}break;case 6:if(er(a,s),vr(s),g&4){if(s.stateNode===null)throw Error(n(162));x=s.stateNode,S=s.memoizedProps;try{x.nodeValue=S}catch(Be){$t(s,s.return,Be)}}break;case 3:if(er(a,s),vr(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Aa(a.containerInfo)}catch(Be){$t(s,s.return,Be)}break;case 4:er(a,s),vr(s);break;case 13:er(a,s),vr(s),x=s.child,x.flags&8192&&(S=x.memoizedState!==null,x.stateNode.isHidden=S,!S||x.alternate!==null&&x.alternate.memoizedState!==null||(Rd=Ut())),g&4&&Rg(s);break;case 22:if(ve=d!==null&&d.memoizedState!==null,s.mode&1?(fn=(le=fn)||ve,er(a,s),fn=le):er(a,s),vr(s),g&8192){if(le=s.memoizedState!==null,(s.stateNode.isHidden=le)&&!ve&&(s.mode&1)!==0)for(Ie=s,ve=s.child;ve!==null;){for(xe=Ie=ve;Ie!==null;){switch(ge=Ie,Ae=ge.child,ge.tag){case 0:case 11:case 14:case 15:Za(4,ge,ge.return);break;case 1:Mo(ge,ge.return);var De=ge.stateNode;if(typeof De.componentWillUnmount=="function"){g=ge,d=ge.return;try{a=g,De.props=a.memoizedProps,De.state=a.memoizedState,De.componentWillUnmount()}catch(Be){$t(g,d,Be)}}break;case 5:Mo(ge,ge.return);break;case 22:if(ge.memoizedState!==null){Og(xe);continue}}Ae!==null?(Ae.return=ge,Ie=Ae):Og(xe)}ve=ve.sibling}e:for(ve=null,xe=s;;){if(xe.tag===5){if(ve===null){ve=xe;try{x=xe.stateNode,le?(S=x.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(Y=xe.stateNode,Z=xe.memoizedProps.style,O=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,Y.style.display=re("display",O))}catch(Be){$t(s,s.return,Be)}}}else if(xe.tag===6){if(ve===null)try{xe.stateNode.nodeValue=le?"":xe.memoizedProps}catch(Be){$t(s,s.return,Be)}}else if((xe.tag!==22&&xe.tag!==23||xe.memoizedState===null||xe===s)&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===s)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===s)break e;ve===xe&&(ve=null),xe=xe.return}ve===xe&&(ve=null),xe.sibling.return=xe.return,xe=xe.sibling}}break;case 19:er(a,s),vr(s),g&4&&Rg(s);break;case 21:break;default:er(a,s),vr(s)}}function vr(s){var a=s.flags;if(a&2){try{e:{for(var d=s.return;d!==null;){if(kg(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var x=g.stateNode;g.flags&32&&(Ge(x,""),g.flags&=-33);var S=Eg(s);kd(s,S,x);break;case 3:case 4:var O=g.stateNode.containerInfo,Y=Eg(s);Cd(s,Y,O);break;default:throw Error(n(161))}}catch(Z){$t(s,s.return,Z)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function G_(s,a,d){Ie=s,Tg(s)}function Tg(s,a,d){for(var g=(s.mode&1)!==0;Ie!==null;){var x=Ie,S=x.child;if(x.tag===22&&g){var O=x.memoizedState!==null||Sl;if(!O){var Y=x.alternate,Z=Y!==null&&Y.memoizedState!==null||fn;Y=Sl;var le=fn;if(Sl=O,(fn=Z)&&!le)for(Ie=x;Ie!==null;)O=Ie,Z=O.child,O.tag===22&&O.memoizedState!==null?Dg(x):Z!==null?(Z.return=O,Ie=Z):Dg(x);for(;S!==null;)Ie=S,Tg(S),S=S.sibling;Ie=x,Sl=Y,fn=le}Ig(s)}else(x.subtreeFlags&8772)!==0&&S!==null?(S.return=x,Ie=S):Ig(s)}}function Ig(s){for(;Ie!==null;){var a=Ie;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:fn||jl(5,a);break;case 1:var g=a.stateNode;if(a.flags&4&&!fn)if(d===null)g.componentDidMount();else{var x=a.elementType===a.type?d.memoizedProps:Xn(a.type,d.memoizedProps);g.componentDidUpdate(x,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=a.updateQueue;S!==null&&Op(a,S,g);break;case 3:var O=a.updateQueue;if(O!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Op(a,O,d)}break;case 5:var Y=a.stateNode;if(d===null&&a.flags&4){d=Y;var Z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&d.focus();break;case"img":Z.src&&(d.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var le=a.alternate;if(le!==null){var ve=le.memoizedState;if(ve!==null){var xe=ve.dehydrated;xe!==null&&Aa(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}fn||a.flags&512&&jd(a)}catch(ge){$t(a,a.return,ge)}}if(a===s){Ie=null;break}if(d=a.sibling,d!==null){d.return=a.return,Ie=d;break}Ie=a.return}}function Og(s){for(;Ie!==null;){var a=Ie;if(a===s){Ie=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Ie=d;break}Ie=a.return}}function Dg(s){for(;Ie!==null;){var a=Ie;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{jl(4,a)}catch(Z){$t(a,d,Z)}break;case 1:var g=a.stateNode;if(typeof g.componentDidMount=="function"){var x=a.return;try{g.componentDidMount()}catch(Z){$t(a,x,Z)}}var S=a.return;try{jd(a)}catch(Z){$t(a,S,Z)}break;case 5:var O=a.return;try{jd(a)}catch(Z){$t(a,O,Z)}}}catch(Z){$t(a,a.return,Z)}if(a===s){Ie=null;break}var Y=a.sibling;if(Y!==null){Y.return=a.return,Ie=Y;break}Ie=a.return}}var Y_=Math.ceil,Cl=A.ReactCurrentDispatcher,Ed=A.ReactCurrentOwner,Vn=A.ReactCurrentBatchConfig,ht=0,en=null,Vt=null,on=0,On=0,Fo=os(0),Kt=0,ei=null,Vs=0,kl=0,Pd=0,ti=null,_n=null,Rd=0,Lo=1/0,Mr=null,El=!1,Ad=null,ds=null,Pl=!1,fs=null,Rl=0,ni=0,Td=null,Al=-1,Tl=0;function vn(){return(ht&6)!==0?Ut():Al!==-1?Al:Al=Ut()}function hs(s){return(s.mode&1)===0?1:(ht&2)!==0&&on!==0?on&-on:A_.transition!==null?(Tl===0&&(Tl=Em()),Tl):(s=St,s!==0||(s=window.event,s=s===void 0?16:Fm(s.type)),s)}function tr(s,a,d,g){if(50<ni)throw ni=0,Td=null,Error(n(185));Ca(s,d,g),((ht&2)===0||s!==en)&&(s===en&&((ht&2)===0&&(kl|=d),Kt===4&&ms(s,on)),Nn(s,g),d===1&&ht===0&&(a.mode&1)===0&&(Lo=Ut()+500,al&&is()))}function Nn(s,a){var d=s.callbackNode;A1(s,a);var g=Ui(s,s===en?on:0);if(g===0)d!==null&&jm(d),s.callbackNode=null,s.callbackPriority=0;else if(a=g&-g,s.callbackPriority!==a){if(d!=null&&jm(d),a===1)s.tag===0?R_(Fg.bind(null,s)):_p(Fg.bind(null,s)),C_(function(){(ht&6)===0&&is()}),d=null;else{switch(Pm(g)){case 1:d=du;break;case 4:d=Cm;break;case 16:d=Fi;break;case 536870912:d=km;break;default:d=Fi}d=Vg(d,Mg.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function Mg(s,a){if(Al=-1,Tl=0,(ht&6)!==0)throw Error(n(327));var d=s.callbackNode;if(Bo()&&s.callbackNode!==d)return null;var g=Ui(s,s===en?on:0);if(g===0)return null;if((g&30)!==0||(g&s.expiredLanes)!==0||a)a=Il(s,g);else{a=g;var x=ht;ht|=2;var S=Bg();(en!==s||on!==a)&&(Mr=null,Lo=Ut()+500,Gs(s,a));do try{J_();break}catch(Y){Lg(s,Y)}while(!0);Qu(),Cl.current=S,ht=x,Vt!==null?a=0:(en=null,on=0,a=Kt)}if(a!==0){if(a===2&&(x=fu(s),x!==0&&(g=x,a=Id(s,x))),a===1)throw d=ei,Gs(s,0),ms(s,g),Nn(s,Ut()),d;if(a===6)ms(s,g);else{if(x=s.current.alternate,(g&30)===0&&!K_(x)&&(a=Il(s,g),a===2&&(S=fu(s),S!==0&&(g=S,a=Id(s,S))),a===1))throw d=ei,Gs(s,0),ms(s,g),Nn(s,Ut()),d;switch(s.finishedWork=x,s.finishedLanes=g,a){case 0:case 1:throw Error(n(345));case 2:Ys(s,_n,Mr);break;case 3:if(ms(s,g),(g&130023424)===g&&(a=Rd+500-Ut(),10<a)){if(Ui(s,0)!==0)break;if(x=s.suspendedLanes,(x&g)!==g){vn(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=Bu(Ys.bind(null,s,_n,Mr),a);break}Ys(s,_n,Mr);break;case 4:if(ms(s,g),(g&4194240)===g)break;for(a=s.eventTimes,x=-1;0<g;){var O=31-Kn(g);S=1<<O,O=a[O],O>x&&(x=O),g&=~S}if(g=x,g=Ut()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Y_(g/1960))-g,10<g){s.timeoutHandle=Bu(Ys.bind(null,s,_n,Mr),g);break}Ys(s,_n,Mr);break;case 5:Ys(s,_n,Mr);break;default:throw Error(n(329))}}}return Nn(s,Ut()),s.callbackNode===d?Mg.bind(null,s):null}function Id(s,a){var d=ti;return s.current.memoizedState.isDehydrated&&(Gs(s,a).flags|=256),s=Il(s,a),s!==2&&(a=_n,_n=d,a!==null&&Od(a)),s}function Od(s){_n===null?_n=s:_n.push.apply(_n,s)}function K_(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var x=d[g],S=x.getSnapshot;x=x.value;try{if(!Qn(S(),x))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ms(s,a){for(a&=~Pd,a&=~kl,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-Kn(a),g=1<<d;s[d]=-1,a&=~g}}function Fg(s){if((ht&6)!==0)throw Error(n(327));Bo();var a=Ui(s,0);if((a&1)===0)return Nn(s,Ut()),null;var d=Il(s,a);if(s.tag!==0&&d===2){var g=fu(s);g!==0&&(a=g,d=Id(s,g))}if(d===1)throw d=ei,Gs(s,0),ms(s,a),Nn(s,Ut()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Ys(s,_n,Mr),Nn(s,Ut()),null}function Dd(s,a){var d=ht;ht|=1;try{return s(a)}finally{ht=d,ht===0&&(Lo=Ut()+500,al&&is())}}function qs(s){fs!==null&&fs.tag===0&&(ht&6)===0&&Bo();var a=ht;ht|=1;var d=Vn.transition,g=St;try{if(Vn.transition=null,St=1,s)return s()}finally{St=g,Vn.transition=d,ht=a,(ht&6)===0&&is()}}function Md(){On=Fo.current,Ot(Fo)}function Gs(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,j_(d)),Vt!==null)for(d=Vt.return;d!==null;){var g=d;switch(Vu(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&sl();break;case 3:Oo(),Ot(xn),Ot(cn),sd();break;case 5:nd(g);break;case 4:Oo();break;case 13:Ot(Lt);break;case 19:Ot(Lt);break;case 10:Ju(g.type._context);break;case 22:case 23:Md()}d=d.return}if(en=s,Vt=s=ps(s.current,null),on=On=a,Kt=0,ei=null,Pd=kl=Vs=0,_n=ti=null,zs!==null){for(a=0;a<zs.length;a++)if(d=zs[a],g=d.interleaved,g!==null){d.interleaved=null;var x=g.next,S=d.pending;if(S!==null){var O=S.next;S.next=x,g.next=O}d.pending=g}zs=null}return s}function Lg(s,a){do{var d=Vt;try{if(Qu(),gl.current=wl,vl){for(var g=Bt.memoizedState;g!==null;){var x=g.queue;x!==null&&(x.pending=null),g=g.next}vl=!1}if(Hs=0,Zt=Yt=Bt=null,Ya=!1,Ka=0,Ed.current=null,d===null||d.return===null){Kt=1,ei=a,Vt=null;break}e:{var S=s,O=d.return,Y=d,Z=a;if(a=on,Y.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var le=Z,ve=Y,xe=ve.tag;if((ve.mode&1)===0&&(xe===0||xe===11||xe===15)){var ge=ve.alternate;ge?(ve.updateQueue=ge.updateQueue,ve.memoizedState=ge.memoizedState,ve.lanes=ge.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var Ae=cg(O);if(Ae!==null){Ae.flags&=-257,ug(Ae,O,Y,S,a),Ae.mode&1&&lg(S,le,a),a=Ae,Z=le;var De=a.updateQueue;if(De===null){var Be=new Set;Be.add(Z),a.updateQueue=Be}else De.add(Z);break e}else{if((a&1)===0){lg(S,le,a),Fd();break e}Z=Error(n(426))}}else if(Ft&&Y.mode&1){var zt=cg(O);if(zt!==null){(zt.flags&65536)===0&&(zt.flags|=256),ug(zt,O,Y,S,a),Yu(Do(Z,Y));break e}}S=Z=Do(Z,Y),Kt!==4&&(Kt=2),ti===null?ti=[S]:ti.push(S),S=O;do{switch(S.tag){case 3:S.flags|=65536,a&=-a,S.lanes|=a;var oe=ag(S,Z,a);Ip(S,oe);break e;case 1:Y=Z;var ne=S.type,ae=S.stateNode;if((S.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(ds===null||!ds.has(ae)))){S.flags|=65536,a&=-a,S.lanes|=a;var Ne=ig(S,Y,a);Ip(S,Ne);break e}}S=S.return}while(S!==null)}Ug(d)}catch($e){a=$e,Vt===d&&d!==null&&(Vt=d=d.return);continue}break}while(!0)}function Bg(){var s=Cl.current;return Cl.current=wl,s===null?wl:s}function Fd(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),en===null||(Vs&268435455)===0&&(kl&268435455)===0||ms(en,on)}function Il(s,a){var d=ht;ht|=2;var g=Bg();(en!==s||on!==a)&&(Mr=null,Gs(s,a));do try{Q_();break}catch(x){Lg(s,x)}while(!0);if(Qu(),ht=d,Cl.current=g,Vt!==null)throw Error(n(261));return en=null,on=0,Kt}function Q_(){for(;Vt!==null;)$g(Vt)}function J_(){for(;Vt!==null&&!_1();)$g(Vt)}function $g(s){var a=Hg(s.alternate,s,On);s.memoizedProps=s.pendingProps,a===null?Ug(s):Vt=a,Ed.current=null}function Ug(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=W_(d,a,On),d!==null){Vt=d;return}}else{if(d=H_(d,a),d!==null){d.flags&=32767,Vt=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Kt=6,Vt=null;return}}if(a=a.sibling,a!==null){Vt=a;return}Vt=a=s}while(a!==null);Kt===0&&(Kt=5)}function Ys(s,a,d){var g=St,x=Vn.transition;try{Vn.transition=null,St=1,X_(s,a,d,g)}finally{Vn.transition=x,St=g}return null}function X_(s,a,d,g){do Bo();while(fs!==null);if((ht&6)!==0)throw Error(n(327));d=s.finishedWork;var x=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var S=d.lanes|d.childLanes;if(T1(s,S),s===en&&(Vt=en=null,on=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Pl||(Pl=!0,Vg(Fi,function(){return Bo(),null})),S=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||S){S=Vn.transition,Vn.transition=null;var O=St;St=1;var Y=ht;ht|=4,Ed.current=null,q_(s,d),Ag(d,s),y_(Fu),Hi=!!Mu,Fu=Mu=null,s.current=d,G_(d),N1(),ht=Y,St=O,Vn.transition=S}else s.current=d;if(Pl&&(Pl=!1,fs=s,Rl=x),S=s.pendingLanes,S===0&&(ds=null),C1(d.stateNode),Nn(s,Ut()),a!==null)for(g=s.onRecoverableError,d=0;d<a.length;d++)x=a[d],g(x.value,{componentStack:x.stack,digest:x.digest});if(El)throw El=!1,s=Ad,Ad=null,s;return(Rl&1)!==0&&s.tag!==0&&Bo(),S=s.pendingLanes,(S&1)!==0?s===Td?ni++:(ni=0,Td=s):ni=0,is(),null}function Bo(){if(fs!==null){var s=Pm(Rl),a=Vn.transition,d=St;try{if(Vn.transition=null,St=16>s?16:s,fs===null)var g=!1;else{if(s=fs,fs=null,Rl=0,(ht&6)!==0)throw Error(n(331));var x=ht;for(ht|=4,Ie=s.current;Ie!==null;){var S=Ie,O=S.child;if((Ie.flags&16)!==0){var Y=S.deletions;if(Y!==null){for(var Z=0;Z<Y.length;Z++){var le=Y[Z];for(Ie=le;Ie!==null;){var ve=Ie;switch(ve.tag){case 0:case 11:case 15:Za(8,ve,S)}var xe=ve.child;if(xe!==null)xe.return=ve,Ie=xe;else for(;Ie!==null;){ve=Ie;var ge=ve.sibling,Ae=ve.return;if(Cg(ve),ve===le){Ie=null;break}if(ge!==null){ge.return=Ae,Ie=ge;break}Ie=Ae}}}var De=S.alternate;if(De!==null){var Be=De.child;if(Be!==null){De.child=null;do{var zt=Be.sibling;Be.sibling=null,Be=zt}while(Be!==null)}}Ie=S}}if((S.subtreeFlags&2064)!==0&&O!==null)O.return=S,Ie=O;else e:for(;Ie!==null;){if(S=Ie,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Za(9,S,S.return)}var oe=S.sibling;if(oe!==null){oe.return=S.return,Ie=oe;break e}Ie=S.return}}var ne=s.current;for(Ie=ne;Ie!==null;){O=Ie;var ae=O.child;if((O.subtreeFlags&2064)!==0&&ae!==null)ae.return=O,Ie=ae;else e:for(O=ne;Ie!==null;){if(Y=Ie,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:jl(9,Y)}}catch($e){$t(Y,Y.return,$e)}if(Y===O){Ie=null;break e}var Ne=Y.sibling;if(Ne!==null){Ne.return=Y.return,Ie=Ne;break e}Ie=Y.return}}if(ht=x,is(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(Li,s)}catch{}g=!0}return g}finally{St=d,Vn.transition=a}}return!1}function zg(s,a,d){a=Do(d,a),a=ag(s,a,1),s=cs(s,a,1),a=vn(),s!==null&&(Ca(s,1,a),Nn(s,a))}function $t(s,a,d){if(s.tag===3)zg(s,s,d);else for(;a!==null;){if(a.tag===3){zg(a,s,d);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ds===null||!ds.has(g))){s=Do(d,s),s=ig(a,s,1),a=cs(a,s,1),s=vn(),a!==null&&(Ca(a,1,s),Nn(a,s));break}}a=a.return}}function Z_(s,a,d){var g=s.pingCache;g!==null&&g.delete(a),a=vn(),s.pingedLanes|=s.suspendedLanes&d,en===s&&(on&d)===d&&(Kt===4||Kt===3&&(on&130023424)===on&&500>Ut()-Rd?Gs(s,0):Pd|=d),Nn(s,a)}function Wg(s,a){a===0&&((s.mode&1)===0?a=1:(a=$i,$i<<=1,($i&130023424)===0&&($i=4194304)));var d=vn();s=Ir(s,a),s!==null&&(Ca(s,a,d),Nn(s,d))}function e2(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),Wg(s,d)}function t2(s,a){var d=0;switch(s.tag){case 13:var g=s.stateNode,x=s.memoizedState;x!==null&&(d=x.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(a),Wg(s,d)}var Hg;Hg=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||xn.current)bn=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return bn=!1,z_(s,a,d);bn=(s.flags&131072)!==0}else bn=!1,Ft&&(a.flags&1048576)!==0&&Np(a,ll,a.index);switch(a.lanes=0,a.tag){case 2:var g=a.type;Nl(s,a),s=a.pendingProps;var x=ko(a,cn.current);Io(a,d),x=id(null,a,g,s,x,d);var S=ld();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,wn(g)?(S=!0,ol(a)):S=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,ed(a),x.updater=bl,a.stateNode=x,x._reactInternals=a,md(a,g,s,d),a=yd(null,a,g,!0,S,d)):(a.tag=0,Ft&&S&&Hu(a),gn(null,a,x,d),a=a.child),a;case 16:g=a.elementType;e:{switch(Nl(s,a),s=a.pendingProps,x=g._init,g=x(g._payload),a.type=g,x=a.tag=r2(g),s=Xn(g,s),x){case 0:a=vd(null,a,g,s,d);break e;case 1:a=gg(null,a,g,s,d);break e;case 11:a=dg(null,a,g,s,d);break e;case 14:a=fg(null,a,g,Xn(g.type,s),d);break e}throw Error(n(306,g,""))}return a;case 0:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:Xn(g,x),vd(s,a,g,x,d);case 1:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:Xn(g,x),gg(s,a,g,x,d);case 3:e:{if(vg(a),s===null)throw Error(n(387));g=a.pendingProps,S=a.memoizedState,x=S.element,Tp(s,a),ml(a,g,null,d);var O=a.memoizedState;if(g=O.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){x=Do(Error(n(423)),a),a=yg(s,a,g,d,x);break e}else if(g!==x){x=Do(Error(n(424)),a),a=yg(s,a,g,d,x);break e}else for(In=ss(a.stateNode.containerInfo.firstChild),Tn=a,Ft=!0,Jn=null,d=Rp(a,null,g,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ro(),g===x){a=Dr(s,a,d);break e}gn(s,a,g,d)}a=a.child}return a;case 5:return Dp(a),s===null&&Gu(a),g=a.type,x=a.pendingProps,S=s!==null?s.memoizedProps:null,O=x.children,Lu(g,x)?O=null:S!==null&&Lu(g,S)&&(a.flags|=32),pg(s,a),gn(s,a,O,d),a.child;case 6:return s===null&&Gu(a),null;case 13:return xg(s,a,d);case 4:return td(a,a.stateNode.containerInfo),g=a.pendingProps,s===null?a.child=Ao(a,null,g,d):gn(s,a,g,d),a.child;case 11:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:Xn(g,x),dg(s,a,g,x,d);case 7:return gn(s,a,a.pendingProps,d),a.child;case 8:return gn(s,a,a.pendingProps.children,d),a.child;case 12:return gn(s,a,a.pendingProps.children,d),a.child;case 10:e:{if(g=a.type._context,x=a.pendingProps,S=a.memoizedProps,O=x.value,Et(dl,g._currentValue),g._currentValue=O,S!==null)if(Qn(S.value,O)){if(S.children===x.children&&!xn.current){a=Dr(s,a,d);break e}}else for(S=a.child,S!==null&&(S.return=a);S!==null;){var Y=S.dependencies;if(Y!==null){O=S.child;for(var Z=Y.firstContext;Z!==null;){if(Z.context===g){if(S.tag===1){Z=Or(-1,d&-d),Z.tag=2;var le=S.updateQueue;if(le!==null){le=le.shared;var ve=le.pending;ve===null?Z.next=Z:(Z.next=ve.next,ve.next=Z),le.pending=Z}}S.lanes|=d,Z=S.alternate,Z!==null&&(Z.lanes|=d),Xu(S.return,d,a),Y.lanes|=d;break}Z=Z.next}}else if(S.tag===10)O=S.type===a.type?null:S.child;else if(S.tag===18){if(O=S.return,O===null)throw Error(n(341));O.lanes|=d,Y=O.alternate,Y!==null&&(Y.lanes|=d),Xu(O,d,a),O=S.sibling}else O=S.child;if(O!==null)O.return=S;else for(O=S;O!==null;){if(O===a){O=null;break}if(S=O.sibling,S!==null){S.return=O.return,O=S;break}O=O.return}S=O}gn(s,a,x.children,d),a=a.child}return a;case 9:return x=a.type,g=a.pendingProps.children,Io(a,d),x=Wn(x),g=g(x),a.flags|=1,gn(s,a,g,d),a.child;case 14:return g=a.type,x=Xn(g,a.pendingProps),x=Xn(g.type,x),fg(s,a,g,x,d);case 15:return hg(s,a,a.type,a.pendingProps,d);case 17:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:Xn(g,x),Nl(s,a),a.tag=1,wn(g)?(s=!0,ol(a)):s=!1,Io(a,d),sg(a,g,x),md(a,g,x,d),yd(null,a,g,!0,s,d);case 19:return bg(s,a,d);case 22:return mg(s,a,d)}throw Error(n(156,a.tag))};function Vg(s,a){return Sm(s,a)}function n2(s,a,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(s,a,d,g){return new n2(s,a,d,g)}function Ld(s){return s=s.prototype,!(!s||!s.isReactComponent)}function r2(s){if(typeof s=="function")return Ld(s)?1:0;if(s!=null){if(s=s.$$typeof,s===G)return 11;if(s===J)return 14}return 2}function ps(s,a){var d=s.alternate;return d===null?(d=qn(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function Ol(s,a,d,g,x,S){var O=2;if(g=s,typeof s=="function")Ld(s)&&(O=1);else if(typeof s=="string")O=5;else e:switch(s){case B:return Ks(d.children,x,S,a);case P:O=8,x|=8;break;case I:return s=qn(12,d,a,x|2),s.elementType=I,s.lanes=S,s;case K:return s=qn(13,d,a,x),s.elementType=K,s.lanes=S,s;case V:return s=qn(19,d,a,x),s.elementType=V,s.lanes=S,s;case E:return Dl(d,x,S,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:O=10;break e;case H:O=9;break e;case G:O=11;break e;case J:O=14;break e;case R:O=16,g=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return a=qn(O,d,a,x),a.elementType=s,a.type=g,a.lanes=S,a}function Ks(s,a,d,g){return s=qn(7,s,g,a),s.lanes=d,s}function Dl(s,a,d,g){return s=qn(22,s,g,a),s.elementType=E,s.lanes=d,s.stateNode={isHidden:!1},s}function Bd(s,a,d){return s=qn(6,s,null,a),s.lanes=d,s}function $d(s,a,d){return a=qn(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function s2(s,a,d,g,x){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hu(0),this.expirationTimes=hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hu(0),this.identifierPrefix=g,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Ud(s,a,d,g,x,S,O,Y,Z){return s=new s2(s,a,d,Y,Z),a===1?(a=1,S===!0&&(a|=8)):a=0,S=qn(3,null,null,a),s.current=S,S.stateNode=s,S.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},ed(S),s}function o2(s,a,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:g==null?null:""+g,children:s,containerInfo:a,implementation:d}}function qg(s){if(!s)return as;s=s._reactInternals;e:{if(Fs(s)!==s||s.tag!==1)throw Error(n(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(wn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(wn(d))return wp(s,d,a)}return a}function Gg(s,a,d,g,x,S,O,Y,Z){return s=Ud(d,g,!0,s,x,S,O,Y,Z),s.context=qg(null),d=s.current,g=vn(),x=hs(d),S=Or(g,x),S.callback=a??null,cs(d,S,x),s.current.lanes=x,Ca(s,x,g),Nn(s,g),s}function Ml(s,a,d,g){var x=a.current,S=vn(),O=hs(x);return d=qg(d),a.context===null?a.context=d:a.pendingContext=d,a=Or(S,O),a.payload={element:s},g=g===void 0?null:g,g!==null&&(a.callback=g),s=cs(x,a,O),s!==null&&(tr(s,x,O,S),hl(s,x,O)),O}function Fl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Yg(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function zd(s,a){Yg(s,a),(s=s.alternate)&&Yg(s,a)}function a2(){return null}var Kg=typeof reportError=="function"?reportError:function(s){console.error(s)};function Wd(s){this._internalRoot=s}Ll.prototype.render=Wd.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));Ml(s,a,null,null)},Ll.prototype.unmount=Wd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;qs(function(){Ml(null,s,null,null)}),a[Pr]=null}};function Ll(s){this._internalRoot=s}Ll.prototype.unstable_scheduleHydration=function(s){if(s){var a=Tm();s={blockedOn:null,target:s,priority:a};for(var d=0;d<ts.length&&a!==0&&a<ts[d].priority;d++);ts.splice(d,0,s),d===0&&Dm(s)}};function Hd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Bl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Qg(){}function i2(s,a,d,g,x){if(x){if(typeof g=="function"){var S=g;g=function(){var le=Fl(O);S.call(le)}}var O=Gg(a,g,s,0,null,!1,!1,"",Qg);return s._reactRootContainer=O,s[Pr]=O.current,$a(s.nodeType===8?s.parentNode:s),qs(),O}for(;x=s.lastChild;)s.removeChild(x);if(typeof g=="function"){var Y=g;g=function(){var le=Fl(Z);Y.call(le)}}var Z=Ud(s,0,!1,null,null,!1,!1,"",Qg);return s._reactRootContainer=Z,s[Pr]=Z.current,$a(s.nodeType===8?s.parentNode:s),qs(function(){Ml(a,Z,d,g)}),Z}function $l(s,a,d,g,x){var S=d._reactRootContainer;if(S){var O=S;if(typeof x=="function"){var Y=x;x=function(){var Z=Fl(O);Y.call(Z)}}Ml(a,O,s,x)}else O=i2(d,a,s,x,g);return Fl(O)}Rm=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=ja(a.pendingLanes);d!==0&&(mu(a,d|1),Nn(a,Ut()),(ht&6)===0&&(Lo=Ut()+500,is()))}break;case 13:qs(function(){var g=Ir(s,1);if(g!==null){var x=vn();tr(g,s,1,x)}}),zd(s,1)}},pu=function(s){if(s.tag===13){var a=Ir(s,134217728);if(a!==null){var d=vn();tr(a,s,134217728,d)}zd(s,134217728)}},Am=function(s){if(s.tag===13){var a=hs(s),d=Ir(s,a);if(d!==null){var g=vn();tr(d,s,a,g)}zd(s,a)}},Tm=function(){return St},Im=function(s,a){var d=St;try{return St=s,a()}finally{St=d}},lt=function(s,a,d){switch(a){case"input":if(_e(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var g=d[a];if(g!==s&&g.form===s.form){var x=rl(g);if(!x)throw Error(n(90));Ee(g),_e(g,x)}}}break;case"textarea":He(s,d);break;case"select":a=d.value,a!=null&&Je(s,!!d.multiple,a,!1)}},xt=Dd,Nt=qs;var l2={usingClientEntryPoint:!1,Events:[Wa,jo,rl,ze,ft,Dd]},ri={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c2={bundleType:ri.bundleType,version:ri.version,rendererPackageName:ri.rendererPackageName,rendererConfig:ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=_m(s),s===null?null:s.stateNode},findFiberByHostInstance:ri.findFiberByHostInstance||a2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Li=Ul.inject(c2),hr=Ul}catch{}}return Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l2,Sn.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hd(a))throw Error(n(200));return o2(s,a,null,d)},Sn.createRoot=function(s,a){if(!Hd(s))throw Error(n(299));var d=!1,g="",x=Kg;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Ud(s,1,!1,null,null,d,!1,g,x),s[Pr]=a.current,$a(s.nodeType===8?s.parentNode:s),new Wd(a)},Sn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=_m(a),s=s===null?null:s.stateNode,s},Sn.flushSync=function(s){return qs(s)},Sn.hydrate=function(s,a,d){if(!Bl(a))throw Error(n(200));return $l(null,s,a,!0,d)},Sn.hydrateRoot=function(s,a,d){if(!Hd(s))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,x=!1,S="",O=Kg;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(O=d.onRecoverableError)),a=Gg(a,null,s,1,d??null,x,!1,S,O),s[Pr]=a.current,$a(s),g)for(s=0;s<g.length;s++)d=g[s],x=d._getVersion,x=x(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,x]:a.mutableSourceEagerHydrationData.push(d,x);return new Ll(a)},Sn.render=function(s,a,d){if(!Bl(a))throw Error(n(200));return $l(null,s,a,!1,d)},Sn.unmountComponentAtNode=function(s){if(!Bl(s))throw Error(n(40));return s._reactRootContainer?(qs(function(){$l(null,null,s,!1,function(){s._reactRootContainer=null,s[Pr]=null})}),!0):!1},Sn.unstable_batchedUpdates=Dd,Sn.unstable_renderSubtreeIntoContainer=function(s,a,d,g){if(!Bl(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return $l(s,a,d,!1,g)},Sn.version="18.3.1-next-f1338f8080-20240426",Sn}var sv;function sx(){if(sv)return Gd.exports;sv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Gd.exports=y2(),Gd.exports}var ov;function x2(){if(ov)return zl;ov=1;var e=sx();return zl.createRoot=e.createRoot,zl.hydrateRoot=e.hydrateRoot,zl}var w2=x2(),_=Ic();const be=Tc(_),ox=d2({__proto__:null,default:be},[_]);function av(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ax(...e){return t=>{let n=!1;const r=e.map(o=>{const i=av(o,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():av(e[o],null)}}}}function kt(...e){return _.useCallback(ax(...e),e)}function oo(e){const t=b2(e),n=_.forwardRef((r,o)=>{const{children:i,...c}=r,u=_.Children.toArray(i),h=u.find(N2);if(h){const p=h.props.children,f=u.map(m=>m===h?_.Children.count(p)>1?_.Children.only(null):_.isValidElement(p)?p.props.children:null:m);return l.jsx(t,{...c,ref:o,children:_.isValidElement(p)?_.cloneElement(p,void 0,f):null})}return l.jsx(t,{...c,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}var ix=oo("Slot");function b2(e){const t=_.forwardRef((n,r)=>{const{children:o,...i}=n;if(_.isValidElement(o)){const c=j2(o),u=S2(i,o.props);return o.type!==_.Fragment&&(u.ref=r?ax(r,c):c),_.cloneElement(o,u)}return _.Children.count(o)>1?_.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var _2=Symbol("radix.slottable");function N2(e){return _.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===_2}function S2(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...u)=>{const h=i(...u);return o(...u),h}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function j2(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function lx(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=lx(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function cx(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=lx(e))&&(r&&(r+=" "),r+=t);return r}const iv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,lv=cx,ux=(e,t)=>n=>{var r;if(t?.variants==null)return lv(e,n?.class,n?.className);const{variants:o,defaultVariants:i}=t,c=Object.keys(o).map(p=>{const f=n?.[p],m=i?.[p];if(f===null)return null;const v=iv(f)||iv(m);return o[p][v]}),u=n&&Object.entries(n).reduce((p,f)=>{let[m,v]=f;return v===void 0||(p[m]=v),p},{}),h=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((p,f)=>{let{class:m,className:v,...y}=f;return Object.entries(y).every(w=>{let[N,b]=w;return Array.isArray(b)?b.includes({...i,...u}[N]):{...i,...u}[N]===b})?[...p,m,v]:p},[]);return lv(e,c,h,n?.class,n?.className)},yh="-",C2=e=>{const t=E2(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:c=>{const u=c.split(yh);return u[0]===""&&u.length!==1&&u.shift(),dx(u,t)||k2(c)},getConflictingClassGroupIds:(c,u)=>{const h=n[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},dx=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?dx(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const i=e.join(yh);return t.validators.find(({validator:c})=>c(i))?.classGroupId},cv=/^\[(.+)\]$/,k2=e=>{if(cv.test(e)){const t=cv.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},E2=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const o in n)Bf(n[o],r,o,t);return r},Bf=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const i=o===""?t:uv(t,o);i.classGroupId=n;return}if(typeof o=="function"){if(P2(o)){Bf(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,c])=>{Bf(c,uv(t,i),n,r)})})},uv=(e,t)=>{let n=e;return t.split(yh).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},P2=e=>e.isThemeGetter,R2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(i,c)=>{n.set(i,c),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let c=n.get(i);if(c!==void 0)return c;if((c=r.get(i))!==void 0)return o(i,c),c},set(i,c){n.has(i)?n.set(i,c):o(i,c)}}},$f="!",Uf=":",A2=Uf.length,T2=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const i=[];let c=0,u=0,h=0,p;for(let w=0;w<o.length;w++){let N=o[w];if(c===0&&u===0){if(N===Uf){i.push(o.slice(h,w)),h=w+A2;continue}if(N==="/"){p=w;continue}}N==="["?c++:N==="]"?c--:N==="("?u++:N===")"&&u--}const f=i.length===0?o:o.substring(h),m=I2(f),v=m!==f,y=p&&p>h?p-h:void 0;return{modifiers:i,hasImportantModifier:v,baseClassName:m,maybePostfixModifierPosition:y}};if(t){const o=t+Uf,i=r;r=c=>c.startsWith(o)?i(c.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=i=>n({className:i,parseClassName:o})}return r},I2=e=>e.endsWith($f)?e.substring(0,e.length-1):e.startsWith($f)?e.substring(1):e,O2=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let i=[];return r.forEach(c=>{c[0]==="["||t[c]?(o.push(...i.sort(),c),i=[]):i.push(c)}),o.push(...i.sort()),o}},D2=e=>({cache:R2(e.cacheSize),parseClassName:T2(e),sortModifiers:O2(e),...C2(e)}),M2=/\s+/,F2=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=t,c=[],u=e.trim().split(M2);let h="";for(let p=u.length-1;p>=0;p-=1){const f=u[p],{isExternal:m,modifiers:v,hasImportantModifier:y,baseClassName:w,maybePostfixModifierPosition:N}=n(f);if(m){h=f+(h.length>0?" "+h:h);continue}let b=!!N,j=r(b?w.substring(0,N):w);if(!j){if(!b){h=f+(h.length>0?" "+h:h);continue}if(j=r(w),!j){h=f+(h.length>0?" "+h:h);continue}b=!1}const k=i(v).join(":"),C=y?k+$f:k,A=C+j;if(c.includes(A))continue;c.push(A);const L=o(j,b);for(let T=0;T<L.length;++T){const B=L[T];c.push(C+B)}h=f+(h.length>0?" "+h:h)}return h};function L2(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=fx(t))&&(r&&(r+=" "),r+=n);return r}const fx=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=fx(e[r]))&&(n&&(n+=" "),n+=t);return n};function B2(e,...t){let n,r,o,i=c;function c(h){const p=t.reduce((f,m)=>m(f),e());return n=D2(p),r=n.cache.get,o=n.cache.set,i=u,u(h)}function u(h){const p=r(h);if(p)return p;const f=F2(h,n);return o(h,f),f}return function(){return i(L2.apply(null,arguments))}}const Qt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},hx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,mx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,$2=/^\d+\/\d+$/,U2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,z2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,W2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,H2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,V2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$o=e=>$2.test(e),ct=e=>!!e&&!Number.isNaN(Number(e)),vs=e=>!!e&&Number.isInteger(Number(e)),Qd=e=>e.endsWith("%")&&ct(e.slice(0,-1)),Fr=e=>U2.test(e),q2=()=>!0,G2=e=>z2.test(e)&&!W2.test(e),px=()=>!1,Y2=e=>H2.test(e),K2=e=>V2.test(e),Q2=e=>!Me(e)&&!Fe(e),J2=e=>ga(e,yx,px),Me=e=>hx.test(e),Qs=e=>ga(e,xx,G2),Jd=e=>ga(e,nN,ct),dv=e=>ga(e,gx,px),X2=e=>ga(e,vx,K2),Wl=e=>ga(e,wx,Y2),Fe=e=>mx.test(e),oi=e=>va(e,xx),Z2=e=>va(e,rN),fv=e=>va(e,gx),eN=e=>va(e,yx),tN=e=>va(e,vx),Hl=e=>va(e,wx,!0),ga=(e,t,n)=>{const r=hx.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},va=(e,t,n=!1)=>{const r=mx.exec(e);return r?r[1]?t(r[1]):n:!1},gx=e=>e==="position"||e==="percentage",vx=e=>e==="image"||e==="url",yx=e=>e==="length"||e==="size"||e==="bg-size",xx=e=>e==="length",nN=e=>e==="number",rN=e=>e==="family-name",wx=e=>e==="shadow",sN=()=>{const e=Qt("color"),t=Qt("font"),n=Qt("text"),r=Qt("font-weight"),o=Qt("tracking"),i=Qt("leading"),c=Qt("breakpoint"),u=Qt("container"),h=Qt("spacing"),p=Qt("radius"),f=Qt("shadow"),m=Qt("inset-shadow"),v=Qt("text-shadow"),y=Qt("drop-shadow"),w=Qt("blur"),N=Qt("perspective"),b=Qt("aspect"),j=Qt("ease"),k=Qt("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...A(),Fe,Me],T=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],P=()=>[Fe,Me,h],I=()=>[$o,"full","auto",...P()],$=()=>[vs,"none","subgrid",Fe,Me],H=()=>["auto",{span:["full",vs,Fe,Me]},vs,Fe,Me],G=()=>[vs,"auto",Fe,Me],K=()=>["auto","min","max","fr",Fe,Me],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...P()],E=()=>[$o,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],D=()=>[e,Fe,Me],W=()=>[...A(),fv,dv,{position:[Fe,Me]}],F=()=>["no-repeat",{repeat:["","x","y","space","round"]}],M=()=>["auto","cover","contain",eN,J2,{size:[Fe,Me]}],U=()=>[Qd,oi,Qs],te=()=>["","none","full",p,Fe,Me],Q=()=>["",ct,oi,Qs],ee=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>[ct,Qd,fv,dv],ie=()=>["","none",w,Fe,Me],fe=()=>["none",ct,Fe,Me],se=()=>["none",ct,Fe,Me],he=()=>[ct,Fe,Me],Ee=()=>[$o,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Fr],breakpoint:[Fr],color:[q2],container:[Fr],"drop-shadow":[Fr],ease:["in","out","in-out"],font:[Q2],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Fr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Fr],shadow:[Fr],spacing:["px",ct],text:[Fr],"text-shadow":[Fr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",$o,Me,Fe,b]}],container:["container"],columns:[{columns:[ct,Me,Fe,u]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[vs,"auto",Fe,Me]}],basis:[{basis:[$o,"full","auto",u,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ct,$o,"auto","initial","none",Me]}],grow:[{grow:["",ct,Fe,Me]}],shrink:[{shrink:["",ct,Fe,Me]}],order:[{order:[vs,"first","last","none",Fe,Me]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:E()}],w:[{w:[u,"screen",...E()]}],"min-w":[{"min-w":[u,"screen","none",...E()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...E()]}],h:[{h:["screen","lh",...E()]}],"min-h":[{"min-h":["screen","lh","none",...E()]}],"max-h":[{"max-h":["screen","lh",...E()]}],"font-size":[{text:["base",n,oi,Qs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Fe,Jd]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Qd,Me]}],"font-family":[{font:[Z2,Me,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,Fe,Me]}],"line-clamp":[{"line-clamp":[ct,"none",Fe,Jd]}],leading:[{leading:[i,...P()]}],"list-image":[{"list-image":["none",Fe,Me]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Fe,Me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[ct,"from-font","auto",Fe,Qs]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[ct,"auto",Fe,Me]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fe,Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fe,Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:F()}],"bg-size":[{bg:M()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},vs,Fe,Me],radial:["",Fe,Me],conic:[vs,Fe,Me]},tN,X2]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:U()}],"gradient-via-pos":[{via:U()}],"gradient-to-pos":[{to:U()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:Q()}],"border-w-x":[{"border-x":Q()}],"border-w-y":[{"border-y":Q()}],"border-w-s":[{"border-s":Q()}],"border-w-e":[{"border-e":Q()}],"border-w-t":[{"border-t":Q()}],"border-w-r":[{"border-r":Q()}],"border-w-b":[{"border-b":Q()}],"border-w-l":[{"border-l":Q()}],"divide-x":[{"divide-x":Q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ee(),"hidden","none"]}],"divide-style":[{divide:[...ee(),"hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:[...ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ct,Fe,Me]}],"outline-w":[{outline:["",ct,oi,Qs]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",f,Hl,Wl]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",m,Hl,Wl]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[ct,Qs]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":Q()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",v,Hl,Wl]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[ct,Fe,Me]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ct]}],"mask-image-linear-from-pos":[{"mask-linear-from":X()}],"mask-image-linear-to-pos":[{"mask-linear-to":X()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":X()}],"mask-image-t-to-pos":[{"mask-t-to":X()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":X()}],"mask-image-r-to-pos":[{"mask-r-to":X()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":X()}],"mask-image-b-to-pos":[{"mask-b-to":X()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":X()}],"mask-image-l-to-pos":[{"mask-l-to":X()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":X()}],"mask-image-x-to-pos":[{"mask-x-to":X()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":X()}],"mask-image-y-to-pos":[{"mask-y-to":X()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[Fe,Me]}],"mask-image-radial-from-pos":[{"mask-radial-from":X()}],"mask-image-radial-to-pos":[{"mask-radial-to":X()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[ct]}],"mask-image-conic-from-pos":[{"mask-conic-from":X()}],"mask-image-conic-to-pos":[{"mask-conic-to":X()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:F()}],"mask-size":[{mask:M()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Fe,Me]}],filter:[{filter:["","none",Fe,Me]}],blur:[{blur:ie()}],brightness:[{brightness:[ct,Fe,Me]}],contrast:[{contrast:[ct,Fe,Me]}],"drop-shadow":[{"drop-shadow":["","none",y,Hl,Wl]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",ct,Fe,Me]}],"hue-rotate":[{"hue-rotate":[ct,Fe,Me]}],invert:[{invert:["",ct,Fe,Me]}],saturate:[{saturate:[ct,Fe,Me]}],sepia:[{sepia:["",ct,Fe,Me]}],"backdrop-filter":[{"backdrop-filter":["","none",Fe,Me]}],"backdrop-blur":[{"backdrop-blur":ie()}],"backdrop-brightness":[{"backdrop-brightness":[ct,Fe,Me]}],"backdrop-contrast":[{"backdrop-contrast":[ct,Fe,Me]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ct,Fe,Me]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ct,Fe,Me]}],"backdrop-invert":[{"backdrop-invert":["",ct,Fe,Me]}],"backdrop-opacity":[{"backdrop-opacity":[ct,Fe,Me]}],"backdrop-saturate":[{"backdrop-saturate":[ct,Fe,Me]}],"backdrop-sepia":[{"backdrop-sepia":["",ct,Fe,Me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Fe,Me]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ct,"initial",Fe,Me]}],ease:[{ease:["linear","initial",j,Fe,Me]}],delay:[{delay:[ct,Fe,Me]}],animate:[{animate:["none",k,Fe,Me]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,Fe,Me]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:se()}],"scale-x":[{"scale-x":se()}],"scale-y":[{"scale-y":se()}],"scale-z":[{"scale-z":se()}],"scale-3d":["scale-3d"],skew:[{skew:he()}],"skew-x":[{"skew-x":he()}],"skew-y":[{"skew-y":he()}],transform:[{transform:[Fe,Me,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ee()}],"translate-x":[{"translate-x":Ee()}],"translate-y":[{"translate-y":Ee()}],"translate-z":[{"translate-z":Ee()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fe,Me]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fe,Me]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[ct,oi,Qs,Jd]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},oN=B2(sN);function rt(...e){return oN(cx(e))}const zf=ux("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-[0.5px] border-[#d1d5db] bg-white text-[#1f2b15] hover:bg-white hover:text-[#1f2b15] focus:border-black focus:ring-0 focus-visible:ring-[#c54a2c]/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),ue=_.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},i)=>{const c=r?ix:"button";return l.jsx(c,{"data-slot":"button",className:rt(zf({variant:t,size:n,className:e})),ref:i,...o})});ue.displayName="Button";function We({className:e,...t}){return l.jsx("div",{"data-slot":"card",className:rt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function vt({className:e,...t}){return l.jsx("div",{"data-slot":"card-header",className:rt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function mt({className:e,...t}){return l.jsx("h4",{"data-slot":"card-title",className:rt("leading-none",e),...t})}function Ve({className:e,...t}){return l.jsx("div",{"data-slot":"card-content",className:rt("px-6 [&:last-child]:pb-6",e),...t})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iN=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),hv=e=>{const t=iN(e);return t.charAt(0).toUpperCase()+t.slice(1)},bx=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:c,...u},h)=>_.createElement("svg",{ref:h,...lN,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:bx("lucide",o),...u},[...c.map(([p,f])=>_.createElement(p,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=(e,t)=>{const n=_.forwardRef(({className:r,...o},i)=>_.createElement(cN,{ref:i,iconNode:t,className:bx(`lucide-${aN(hv(e))}`,`lucide-${e}`,r),...o}));return n.displayName=hv(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ni=it("arrow-left",uN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ao=it("book-open",dN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],mn=it("calendar",fN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],xh=it("camera",hN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],io=it("check",mN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_x=it("chevron-down",pN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Oc=it("chevron-left",gN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Dc=it("chevron-right",vN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],xN=it("chevron-up",yN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],zr=it("circle-alert",wN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ac=it("circle-check-big",bN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],mv=it("circle-plus",_N);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pv=it("circle-x",NN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ya=it("clock",SN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],vi=it("dollar-sign",jN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],mc=it("eye-off",CN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],js=it("eye",kN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Ns=it("heart",EN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],mo=it("image",PN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],gv=it("layout-dashboard",RN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],vv=it("log-out",AN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],yv=it("mail",TN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Si=it("map-pin",IN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],Nx=it("megaphone",ON);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],MN=it("menu",DN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],pn=it("message-square",FN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Wf=it("pencil",LN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ca=it("plus",BN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Sx=it("refresh-cw",$N);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],zN=it("rotate-ccw",UN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],jx=it("search",WN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Mc=it("send",HN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qN=it("settings",VN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],YN=it("square-pen",GN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Fc=it("star",KN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],wh=it("tag",QN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Cs=it("trash-2",JN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ZN=it("triangle-alert",XN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],bh=it("upload",eS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ua=it("user",tS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ar=it("users",nS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ln=it("x",rS);var ji=sx();const Cx=Tc(ji);function sS(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const oS=e=>{switch(e){case"success":return lS;case"info":return uS;case"warning":return cS;case"error":return dS;default:return null}},aS=Array(12).fill(0),iS=({visible:e,className:t})=>be.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},be.createElement("div",{className:"sonner-spinner"},aS.map((n,r)=>be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),lS=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),cS=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),uS=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),dS=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fS=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),hS=()=>{const[e,t]=be.useState(document.hidden);return be.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let Hf=1;class mS{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...o}=t,i=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:Hf++,c=this.toasts.find(h=>h.id===i),u=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),c?this.toasts=this.toasts.map(h=>h.id===i?(this.publish({...h,...t,id:i,title:r}),{...h,...t,id:i,dismissible:u,title:r}):h):this.addToast({title:r,...o,dismissible:u,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const o=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,c;const u=o.then(async p=>{if(c=["resolve",p],be.isValidElement(p))i=!1,this.create({id:r,type:"default",message:p});else if(gS(p)&&!p.ok){i=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${p.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${p.status}`):n.description,w=typeof m=="object"&&!be.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:v,...w})}else if(p instanceof Error){i=!1;const m=typeof n.error=="function"?await n.error(p):n.error,v=typeof n.description=="function"?await n.description(p):n.description,w=typeof m=="object"&&!be.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:v,...w})}else if(n.success!==void 0){i=!1;const m=typeof n.success=="function"?await n.success(p):n.success,v=typeof n.description=="function"?await n.description(p):n.description,w=typeof m=="object"&&!be.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:v,...w})}}).catch(async p=>{if(c=["reject",p],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(p):n.error,m=typeof n.description=="function"?await n.description(p):n.description,y=typeof f=="object"&&!be.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...y})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),h=()=>new Promise((p,f)=>u.then(()=>c[0]==="reject"?f(c[1]):p(c[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:h}:Object.assign(r,{unwrap:h})},this.custom=(t,n)=>{const r=n?.id||Hf++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Cn=new mS,pS=(e,t)=>{const n=t?.id||Hf++;return Cn.addToast({title:e,...t,id:n}),n},gS=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",vS=pS,yS=()=>Cn.toasts,xS=()=>Cn.getActiveToasts(),we=Object.assign(vS,{success:Cn.success,info:Cn.info,warning:Cn.warning,error:Cn.error,custom:Cn.custom,message:Cn.message,promise:Cn.promise,dismiss:Cn.dismiss,loading:Cn.loading},{getHistory:yS,getToasts:xS});sS("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Vl(e){return e.label!==void 0}const wS=3,bS="24px",_S="16px",xv=4e3,NS=356,SS=14,jS=45,CS=200;function yr(...e){return e.filter(Boolean).join(" ")}function kS(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const ES=e=>{var t,n,r,o,i,c,u,h,p;const{invert:f,toast:m,unstyled:v,interacting:y,setHeights:w,visibleToasts:N,heights:b,index:j,toasts:k,expanded:C,removeToast:A,defaultRichColors:L,closeButton:T,style:B,cancelButtonStyle:P,actionButtonStyle:I,className:$="",descriptionClassName:H="",duration:G,position:K,gap:V,expandByDefault:J,classNames:R,icons:E,closeButtonAriaLabel:D="Close toast"}=e,[W,F]=be.useState(null),[M,U]=be.useState(null),[te,Q]=be.useState(!1),[ee,ce]=be.useState(!1),[X,ie]=be.useState(!1),[fe,se]=be.useState(!1),[he,Ee]=be.useState(!1),[Se,z]=be.useState(0),[de,ye]=be.useState(0),_e=be.useRef(m.duration||G||xv),pe=be.useRef(null),me=be.useRef(null),Te=j===0,Je=j+1<=N,Ue=m.type,ke=m.dismissible!==!1,He=m.className||"",tt=m.descriptionClassName||"",yt=be.useMemo(()=>b.findIndex(ze=>ze.toastId===m.id)||0,[b,m.id]),Ct=be.useMemo(()=>{var ze;return(ze=m.closeButton)!=null?ze:T},[m.closeButton,T]),Pe=be.useMemo(()=>m.duration||G||xv,[m.duration,G]),dt=be.useRef(0),Ge=be.useRef(0),_t=be.useRef(0),q=be.useRef(null),[re,je]=K.split("-"),Re=be.useMemo(()=>b.reduce((ze,ft,xt)=>xt>=yt?ze:ze+ft.height,0),[b,yt]),qe=hS(),Le=m.invert||f,Xe=Ue==="loading";Ge.current=be.useMemo(()=>yt*V+Re,[yt,Re]),be.useEffect(()=>{_e.current=Pe},[Pe]),be.useEffect(()=>{Q(!0)},[]),be.useEffect(()=>{const ze=me.current;if(ze){const ft=ze.getBoundingClientRect().height;return ye(ft),w(xt=>[{toastId:m.id,height:ft,position:m.position},...xt]),()=>w(xt=>xt.filter(Nt=>Nt.toastId!==m.id))}},[w,m.id]),be.useLayoutEffect(()=>{if(!te)return;const ze=me.current,ft=ze.style.height;ze.style.height="auto";const xt=ze.getBoundingClientRect().height;ze.style.height=ft,ye(xt),w(Nt=>Nt.find(Tt=>Tt.toastId===m.id)?Nt.map(Tt=>Tt.toastId===m.id?{...Tt,height:xt}:Tt):[{toastId:m.id,height:xt,position:m.position},...Nt])},[te,m.title,m.description,w,m.id]);const Oe=be.useCallback(()=>{ce(!0),z(Ge.current),w(ze=>ze.filter(ft=>ft.toastId!==m.id)),setTimeout(()=>{A(m)},CS)},[m,A,w,Ge]);be.useEffect(()=>{if(m.promise&&Ue==="loading"||m.duration===1/0||m.type==="loading")return;let ze;return C||y||qe?(()=>{if(_t.current<dt.current){const Nt=new Date().getTime()-dt.current;_e.current=_e.current-Nt}_t.current=new Date().getTime()})():(()=>{_e.current!==1/0&&(dt.current=new Date().getTime(),ze=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),Oe()},_e.current))})(),()=>clearTimeout(ze)},[C,y,m,Ue,qe,Oe]),be.useEffect(()=>{m.delete&&Oe()},[Oe,m.delete]);function lt(){var ze;if(E?.loading){var ft;return be.createElement("div",{className:yr(R?.loader,m==null||(ft=m.classNames)==null?void 0:ft.loader,"sonner-loader"),"data-visible":Ue==="loading"},E.loading)}return be.createElement(iS,{className:yr(R?.loader,m==null||(ze=m.classNames)==null?void 0:ze.loader),visible:Ue==="loading"})}const Dt=m.icon||E?.[Ue]||oS(Ue);var wt,Mt;return be.createElement("li",{tabIndex:0,ref:me,className:yr($,He,R?.toast,m==null||(t=m.classNames)==null?void 0:t.toast,R?.default,R?.[Ue],m==null||(n=m.classNames)==null?void 0:n[Ue]),"data-sonner-toast":"","data-rich-colors":(wt=m.richColors)!=null?wt:L,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":te,"data-promise":!!m.promise,"data-swiped":he,"data-removed":ee,"data-visible":Je,"data-y-position":re,"data-x-position":je,"data-index":j,"data-front":Te,"data-swiping":X,"data-dismissible":ke,"data-type":Ue,"data-invert":Le,"data-swipe-out":fe,"data-swipe-direction":M,"data-expanded":!!(C||J&&te),style:{"--index":j,"--toasts-before":j,"--z-index":k.length-j,"--offset":`${ee?Se:Ge.current}px`,"--initial-height":J?"auto":`${de}px`,...B,...m.style},onDragEnd:()=>{ie(!1),F(null),q.current=null},onPointerDown:ze=>{Xe||!ke||(pe.current=new Date,z(Ge.current),ze.target.setPointerCapture(ze.pointerId),ze.target.tagName!=="BUTTON"&&(ie(!0),q.current={x:ze.clientX,y:ze.clientY}))},onPointerUp:()=>{var ze,ft,xt;if(fe||!ke)return;q.current=null;const Nt=Number(((ze=me.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Wt=Number(((ft=me.current)==null?void 0:ft.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Tt=new Date().getTime()-((xt=pe.current)==null?void 0:xt.getTime()),Ht=W==="x"?Nt:Wt,Qr=Math.abs(Ht)/Tt;if(Math.abs(Ht)>=jS||Qr>.11){z(Ge.current),m.onDismiss==null||m.onDismiss.call(m,m),U(W==="x"?Nt>0?"right":"left":Wt>0?"down":"up"),Oe(),se(!0);return}else{var rn,Rn;(rn=me.current)==null||rn.style.setProperty("--swipe-amount-x","0px"),(Rn=me.current)==null||Rn.style.setProperty("--swipe-amount-y","0px")}Ee(!1),ie(!1),F(null)},onPointerMove:ze=>{var ft,xt,Nt;if(!q.current||!ke||((ft=window.getSelection())==null?void 0:ft.toString().length)>0)return;const Tt=ze.clientY-q.current.y,Ht=ze.clientX-q.current.x;var Qr;const rn=(Qr=e.swipeDirections)!=null?Qr:kS(K);!W&&(Math.abs(Ht)>1||Math.abs(Tt)>1)&&F(Math.abs(Ht)>Math.abs(Tt)?"x":"y");let Rn={x:0,y:0};const Jr=$n=>1/(1.5+Math.abs($n)/20);if(W==="y"){if(rn.includes("top")||rn.includes("bottom"))if(rn.includes("top")&&Tt<0||rn.includes("bottom")&&Tt>0)Rn.y=Tt;else{const $n=Tt*Jr(Tt);Rn.y=Math.abs($n)<Math.abs(Tt)?$n:Tt}}else if(W==="x"&&(rn.includes("left")||rn.includes("right")))if(rn.includes("left")&&Ht<0||rn.includes("right")&&Ht>0)Rn.x=Ht;else{const $n=Ht*Jr(Ht);Rn.x=Math.abs($n)<Math.abs(Ht)?$n:Ht}(Math.abs(Rn.x)>0||Math.abs(Rn.y)>0)&&Ee(!0),(xt=me.current)==null||xt.style.setProperty("--swipe-amount-x",`${Rn.x}px`),(Nt=me.current)==null||Nt.style.setProperty("--swipe-amount-y",`${Rn.y}px`)}},Ct&&!m.jsx&&Ue!=="loading"?be.createElement("button",{"aria-label":D,"data-disabled":Xe,"data-close-button":!0,onClick:Xe||!ke?()=>{}:()=>{Oe(),m.onDismiss==null||m.onDismiss.call(m,m)},className:yr(R?.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(Mt=E?.close)!=null?Mt:fS):null,(Ue||m.icon||m.promise)&&m.icon!==null&&(E?.[Ue]!==null||m.icon)?be.createElement("div",{"data-icon":"",className:yr(R?.icon,m==null||(o=m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||lt():null,m.type!=="loading"?Dt:null):null,be.createElement("div",{"data-content":"",className:yr(R?.content,m==null||(i=m.classNames)==null?void 0:i.content)},be.createElement("div",{"data-title":"",className:yr(R?.title,m==null||(c=m.classNames)==null?void 0:c.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?be.createElement("div",{"data-description":"",className:yr(H,tt,R?.description,m==null||(u=m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),be.isValidElement(m.cancel)?m.cancel:m.cancel&&Vl(m.cancel)?be.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:ze=>{Vl(m.cancel)&&ke&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,ze),Oe())},className:yr(R?.cancelButton,m==null||(h=m.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,be.isValidElement(m.action)?m.action:m.action&&Vl(m.action)?be.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||I,onClick:ze=>{Vl(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,ze),!ze.defaultPrevented&&Oe())},className:yr(R?.actionButton,m==null||(p=m.classNames)==null?void 0:p.actionButton)},m.action.label):null)};function wv(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function PS(e,t){const n={};return[e,t].forEach((r,o)=>{const i=o===1,c=i?"--mobile-offset":"--offset",u=i?_S:bS;function h(p){["top","right","bottom","left"].forEach(f=>{n[`${c}-${f}`]=typeof p=="number"?`${p}px`:p})}typeof r=="number"||typeof r=="string"?h(r):typeof r=="object"?["top","right","bottom","left"].forEach(p=>{r[p]===void 0?n[`${c}-${p}`]=u:n[`${c}-${p}`]=typeof r[p]=="number"?`${r[p]}px`:r[p]}):h(u)}),n}const RS=be.forwardRef(function(t,n){const{invert:r,position:o="bottom-right",hotkey:i=["altKey","KeyT"],expand:c,closeButton:u,className:h,offset:p,mobileOffset:f,theme:m="light",richColors:v,duration:y,style:w,visibleToasts:N=wS,toastOptions:b,dir:j=wv(),gap:k=SS,icons:C,containerAriaLabel:A="Notifications"}=t,[L,T]=be.useState([]),B=be.useMemo(()=>Array.from(new Set([o].concat(L.filter(M=>M.position).map(M=>M.position)))),[L,o]),[P,I]=be.useState([]),[$,H]=be.useState(!1),[G,K]=be.useState(!1),[V,J]=be.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=be.useRef(null),E=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=be.useRef(null),W=be.useRef(!1),F=be.useCallback(M=>{T(U=>{var te;return(te=U.find(Q=>Q.id===M.id))!=null&&te.delete||Cn.dismiss(M.id),U.filter(({id:Q})=>Q!==M.id)})},[]);return be.useEffect(()=>Cn.subscribe(M=>{if(M.dismiss){requestAnimationFrame(()=>{T(U=>U.map(te=>te.id===M.id?{...te,delete:!0}:te))});return}setTimeout(()=>{Cx.flushSync(()=>{T(U=>{const te=U.findIndex(Q=>Q.id===M.id);return te!==-1?[...U.slice(0,te),{...U[te],...M},...U.slice(te+1)]:[M,...U]})})})}),[L]),be.useEffect(()=>{if(m!=="system"){J(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?J("dark"):J("light")),typeof window>"u")return;const M=window.matchMedia("(prefers-color-scheme: dark)");try{M.addEventListener("change",({matches:U})=>{J(U?"dark":"light")})}catch{M.addListener(({matches:te})=>{try{J(te?"dark":"light")}catch(Q){console.error(Q)}})}},[m]),be.useEffect(()=>{L.length<=1&&H(!1)},[L]),be.useEffect(()=>{const M=U=>{var te;if(i.every(ce=>U[ce]||U.code===ce)){var ee;H(!0),(ee=R.current)==null||ee.focus()}U.code==="Escape"&&(document.activeElement===R.current||(te=R.current)!=null&&te.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[i]),be.useEffect(()=>{if(R.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,W.current=!1)}},[R.current]),be.createElement("section",{ref:n,"aria-label":`${A} ${E}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},B.map((M,U)=>{var te;const[Q,ee]=M.split("-");return L.length?be.createElement("ol",{key:M,dir:j==="auto"?wv():j,tabIndex:-1,ref:R,className:h,"data-sonner-toaster":!0,"data-sonner-theme":V,"data-y-position":Q,"data-lifted":$&&L.length>1&&!c,"data-x-position":ee,style:{"--front-toast-height":`${((te=P[0])==null?void 0:te.height)||0}px`,"--width":`${NS}px`,"--gap":`${k}px`,...w,...PS(p,f)},onBlur:ce=>{W.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(W.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||W.current||(W.current=!0,D.current=ce.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{G||H(!1)},onDragEnd:()=>H(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},L.filter(ce=>!ce.position&&U===0||ce.position===M).map((ce,X)=>{var ie,fe;return be.createElement(ES,{key:ce.id,icons:C,index:X,toast:ce,defaultRichColors:v,duration:(ie=b?.duration)!=null?ie:y,className:b?.className,descriptionClassName:b?.descriptionClassName,invert:r,visibleToasts:N,closeButton:(fe=b?.closeButton)!=null?fe:u,interacting:G,position:M,style:b?.style,unstyled:b?.unstyled,classNames:b?.classNames,cancelButtonStyle:b?.cancelButtonStyle,actionButtonStyle:b?.actionButtonStyle,closeButtonAriaLabel:b?.closeButtonAriaLabel,removeToast:F,toasts:L.filter(se=>se.position==ce.position),heights:P.filter(se=>se.position==ce.position),setHeights:I,expandByDefault:c,gap:k,expanded:$,swipeDirections:t.swipeDirections})})):null}))});function Xd({onNavigate:e,user:t,onRequireAuth:n}){const r=(o,i=!1)=>{i&&!t?n():t&&!t.stripeConnected?(we.warning("You need to connect your Stripe account before creating classes. Please complete your profile setup."),e("profile")):e(o)};return l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"relative h-96 bg-cover bg-center",style:{backgroundImage:"linear-gradient(rgba(85, 107, 47, 0.6), rgba(85, 107, 47, 0.6)), url('https://images.unsplash.com/photo-1567456035144-5b7969382b9b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxydXN0aWMlMjBmYXJtJTIwYmFybiUyMGNvdW50cnlzaWRlfGVufDF8fHx8MTc1ODQwNDkxNnww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral')"},children:l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-[#f8f9f6] max-w-4xl px-6",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-white",children:"The Learning Hub for Homesteaders"}),l.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:"Connect, learn, and share knowledge in your homesteading community"}),l.jsx(ue,{onClick:()=>e("classes"),size:"lg",className:"bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6] px-8 py-3",children:"Browse Classes Nearby"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[l.jsx(We,{className:"bg-[#ffffff] border-[#a8b892] shadow-lg hover:shadow-xl transition-shadow",children:l.jsxs(Ve,{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-[#556B2F] rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ao,{className:"w-8 h-8 text-[#f8f9f6]"})}),l.jsx("h3",{className:"text-xl font-semibold text-[#2d3d1f] mb-3",children:"Learn New Skills"}),l.jsx("p",{className:"text-[#3c4f21] mb-4",children:"Discover hands-on classes from experienced homesteaders in your area. From gardening to animal care, expand your knowledge."}),l.jsx(ue,{variant:"outline",onClick:()=>e("classes"),className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-[#f8f9f6]",children:"Browse Classes"})]})}),l.jsx(We,{className:"bg-[#ffffff] border-[#a8b892] shadow-lg hover:shadow-xl transition-shadow",children:l.jsxs(Ve,{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-[#556B2F] rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ar,{className:"w-8 h-8 text-[#f8f9f6]"})}),l.jsx("h3",{className:"text-xl font-semibold text-[#2d3d1f] mb-3",children:"Teach & Share"}),l.jsx("p",{className:"text-[#3c4f21] mb-4",children:"Share your expertise with fellow homesteaders. Host classes at your homestead and build community connections."}),l.jsx(ue,{variant:"outline",onClick:()=>r("create-class",!0),className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-[#f8f9f6]",children:t?t.stripeConnected?"Create a Class":"Setup Stripe to Teach":"Sign In to Teach"})]})}),l.jsx(We,{className:"bg-[#ffffff] border-[#a8b892] shadow-lg hover:shadow-xl transition-shadow",children:l.jsxs(Ve,{className:"p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-[#556B2F] rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(pn,{className:"w-8 h-8 text-[#f8f9f6]"})}),l.jsx("h3",{className:"text-xl font-semibold text-[#2d3d1f] mb-3",children:"Community Board"}),l.jsx("p",{className:"text-[#3c4f21] mb-4",children:"Connect with neighbors, share tips, ask questions, and stay updated on local homesteading news and events."}),l.jsx(ue,{variant:"outline",onClick:()=>e("bulletin"),className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-[#f8f9f6]",children:"Visit Bulletin"})]})})]})}),l.jsx("div",{className:"bg-[#556B2F] py-16",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[l.jsx("h2",{className:"text-3xl font-bold text-center text-[#f8f9f6] mb-12",children:"How HERD Works"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-[#f8f9f6] rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Si,{className:"w-8 h-8 text-[#556B2F]"})}),l.jsx("h3",{className:"text-xl font-semibold text-[#f8f9f6] mb-3",children:"1. Find Classes Nearby"}),l.jsx("p",{className:"text-[#a8b892]",children:"Browse local homesteading classes and workshops hosted by experienced community members."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-[#f8f9f6] rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ao,{className:"w-8 h-8 text-[#556B2F]"})}),l.jsx("h3",{className:"text-xl font-semibold text-[#f8f9f6] mb-3",children:"2. Book Securely"}),l.jsx("p",{className:"text-[#a8b892]",children:"Reserve your spot in classes that interest you. Connect directly with instructors and get all the details."})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-[#f8f9f6] rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ar,{className:"w-8 h-8 text-[#556B2F]"})}),l.jsx("h3",{className:"text-xl font-semibold text-[#f8f9f6] mb-3",children:"3. Learn & Connect"}),l.jsx("p",{className:"text-[#a8b892]",children:"Attend hands-on classes, learn new skills, and build lasting connections with fellow homesteaders."})]})]})]})}),l.jsx("div",{className:"bg-[#ffffff] py-16",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4",children:[l.jsx("h2",{className:"text-3xl font-bold text-[#2d3d1f] mb-4",children:"Ready to Grow Your Homesteading Skills?"}),l.jsx("p",{className:"text-[#3c4f21] text-lg mb-8",children:"Join our community of passionate homesteaders and start learning today."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t?l.jsx(ue,{onClick:()=>e("dashboard"),size:"lg",className:"min-w-[220px] bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:"Go to Dashboard"}):l.jsx(ue,{onClick:()=>e("classes"),size:"lg",className:"min-w-[220px] bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:"Start Learning"}),l.jsx(ue,{onClick:()=>r("create-class",!0),size:"lg",className:"min-w-[220px] bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:t?t.stripeConnected?"Start Teaching":"Setup Stripe to Teach":"Sign In to Teach"})]})]})})]})}function bt({className:e,type:t,...n}){return l.jsx("input",{type:t,"data-slot":"input",className:rt("w-full h-10 rounded-md border-[0.5px] border-[#d1d5db] bg-white text-[#1f2b15] placeholder:text-[#6b7280] px-3","focus:border-black focus:ring-0 focus-visible:ring-4 focus-visible:ring-[#c54a2c]/30","focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:opacity-50 transition-all",e),...n})}function Gn({className:e,...t}){return l.jsx("textarea",{"data-slot":"textarea",className:rt("w-full min-h-[140px] rounded-md border-[0.5px] border-[#d1d5db] bg-white text-[#1f2b15] placeholder:text-[#6b7280] px-3 py-2","focus:border-black focus:ring-0 focus-visible:ring-4 focus-visible:ring-[#c54a2c]/30","focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:opacity-50 transition-all resize-none",e),...t})}var AS=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ot=AS.reduce((e,t)=>{const n=oo(`Primitive.${t}`),r=_.forwardRef((o,i)=>{const{asChild:c,...u}=o,h=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...u,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function TS(e,t){e&&ji.flushSync(()=>e.dispatchEvent(t))}var IS="Label",kx=_.forwardRef((e,t)=>l.jsx(ot.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));kx.displayName=IS;var OS=kx;function nt({className:e,...t}){return l.jsx(OS,{"data-slot":"label",className:rt("block text-sm font-medium text-[#1f2b15] mb-1 select-none","peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function DS(e,t){const n=_.createContext(t),r=i=>{const{children:c,...u}=i,h=_.useMemo(()=>u,Object.values(u));return l.jsx(n.Provider,{value:h,children:c})};r.displayName=e+"Provider";function o(i){const c=_.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,o]}function Cr(e,t=[]){let n=[];function r(i,c){const u=_.createContext(c),h=n.length;n=[...n,c];const p=m=>{const{scope:v,children:y,...w}=m,N=v?.[e]?.[h]||u,b=_.useMemo(()=>w,Object.values(w));return l.jsx(N.Provider,{value:b,children:y})};p.displayName=i+"Provider";function f(m,v){const y=v?.[e]?.[h]||u,w=_.useContext(y);if(w)return w;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[p,f]}const o=()=>{const i=n.map(c=>_.createContext(c));return function(u){const h=u?.[e]||i;return _.useMemo(()=>({[`__scope${e}`]:{...u,[e]:h}}),[u,h])}};return o.scopeName=e,[r,MS(o,...t)]}function MS(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const c=r.reduce((u,{useScope:h,scopeName:p})=>{const m=h(i)[`__scope${p}`];return{...u,...m}},{});return _.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}function at(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}var Xt=globalThis?.document?_.useLayoutEffect:()=>{},FS=ox[" useInsertionEffect ".trim().toString()]||Xt;function ks({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,i,c]=LS({defaultProp:t,onChange:n}),u=e!==void 0,h=u?e:o;{const f=_.useRef(e!==void 0);_.useEffect(()=>{const m=f.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=u},[u,r])}const p=_.useCallback(f=>{if(u){const m=BS(f)?f(e):f;m!==e&&c.current?.(m)}else i(f)},[u,e,i,c]);return[h,p]}function LS({defaultProp:e,onChange:t}){const[n,r]=_.useState(e),o=_.useRef(n),i=_.useRef(t);return FS(()=>{i.current=t},[t]),_.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,r,i]}function BS(e){return typeof e=="function"}function _h(e){const t=_.useRef({value:e,previous:e});return _.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function Nh(e){const[t,n]=_.useState(void 0);return Xt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let c,u;if("borderBoxSize"in i){const h=i.borderBoxSize,p=Array.isArray(h)?h[0]:h;c=p.inlineSize,u=p.blockSize}else c=e.offsetWidth,u=e.offsetHeight;n({width:c,height:u})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}function $S(e,t){return _.useReducer((n,r)=>t[n][r]??n,e)}var As=e=>{const{present:t,children:n}=e,r=US(t),o=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=kt(r.ref,zS(o));return typeof n=="function"||r.isPresent?_.cloneElement(o,{ref:i}):null};As.displayName="Presence";function US(e){const[t,n]=_.useState(),r=_.useRef(null),o=_.useRef(e),i=_.useRef("none"),c=e?"mounted":"unmounted",[u,h]=$S(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const p=ql(r.current);i.current=u==="mounted"?p:"none"},[u]),Xt(()=>{const p=r.current,f=o.current;if(f!==e){const v=i.current,y=ql(p);e?h("MOUNT"):y==="none"||p?.display==="none"?h("UNMOUNT"):h(f&&v!==y?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,h]),Xt(()=>{if(t){let p;const f=t.ownerDocument.defaultView??window,m=y=>{const N=ql(r.current).includes(CSS.escape(y.animationName));if(y.target===t&&N&&(h("ANIMATION_END"),!o.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",p=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},v=y=>{y.target===t&&(i.current=ql(r.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(p),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[t,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(p=>{r.current=p?getComputedStyle(p):null,n(p)},[])}}function ql(e){return e?.animationName||"none"}function zS(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Lc="Checkbox",[WS]=Cr(Lc),[HS,Sh]=WS(Lc);function VS(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:o,disabled:i,form:c,name:u,onCheckedChange:h,required:p,value:f="on",internal_do_not_use_render:m}=e,[v,y]=ks({prop:n,defaultProp:o??!1,onChange:h,caller:Lc}),[w,N]=_.useState(null),[b,j]=_.useState(null),k=_.useRef(!1),C=w?!!c||!!w.closest("form"):!0,A={checked:v,disabled:i,setChecked:y,control:w,setControl:N,name:u,form:c,value:f,hasConsumerStoppedPropagationRef:k,required:p,defaultChecked:Ss(o)?!1:o,isFormControl:C,bubbleInput:b,setBubbleInput:j};return l.jsx(HS,{scope:t,...A,children:qS(m)?m(A):r})}var Ex="CheckboxTrigger",Px=_.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},o)=>{const{control:i,value:c,disabled:u,checked:h,required:p,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:v,isFormControl:y,bubbleInput:w}=Sh(Ex,e),N=kt(o,f),b=_.useRef(h);return _.useEffect(()=>{const j=i?.form;if(j){const k=()=>m(b.current);return j.addEventListener("reset",k),()=>j.removeEventListener("reset",k)}},[i,m]),l.jsx(ot.button,{type:"button",role:"checkbox","aria-checked":Ss(h)?"mixed":h,"aria-required":p,"data-state":Dx(h),"data-disabled":u?"":void 0,disabled:u,value:c,...r,ref:N,onKeyDown:at(t,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:at(n,j=>{m(k=>Ss(k)?!0:!k),w&&y&&(v.current=j.isPropagationStopped(),v.current||j.stopPropagation())})})});Px.displayName=Ex;var Rx=_.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:i,required:c,disabled:u,value:h,onCheckedChange:p,form:f,...m}=e;return l.jsx(VS,{__scopeCheckbox:n,checked:o,defaultChecked:i,disabled:u,required:c,onCheckedChange:p,name:r,form:f,value:h,internal_do_not_use_render:({isFormControl:v})=>l.jsxs(l.Fragment,{children:[l.jsx(Px,{...m,ref:t,__scopeCheckbox:n}),v&&l.jsx(Ox,{__scopeCheckbox:n})]})})});Rx.displayName=Lc;var Ax="CheckboxIndicator",Tx=_.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,i=Sh(Ax,n);return l.jsx(As,{present:r||Ss(i.checked)||i.checked===!0,children:l.jsx(ot.span,{"data-state":Dx(i.checked),"data-disabled":i.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});Tx.displayName=Ax;var Ix="CheckboxBubbleInput",Ox=_.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:i,defaultChecked:c,required:u,disabled:h,name:p,value:f,form:m,bubbleInput:v,setBubbleInput:y}=Sh(Ix,e),w=kt(n,y),N=_h(i),b=Nh(r);_.useEffect(()=>{const k=v;if(!k)return;const C=window.HTMLInputElement.prototype,L=Object.getOwnPropertyDescriptor(C,"checked").set,T=!o.current;if(N!==i&&L){const B=new Event("click",{bubbles:T});k.indeterminate=Ss(i),L.call(k,Ss(i)?!1:i),k.dispatchEvent(B)}},[v,N,i,o]);const j=_.useRef(Ss(i)?!1:i);return l.jsx(ot.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??j.current,required:u,disabled:h,name:p,value:f,form:m,...t,tabIndex:-1,ref:w,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Ox.displayName=Ix;function qS(e){return typeof e=="function"}function Ss(e){return e==="indeterminate"}function Dx(e){return Ss(e)?"indeterminate":e?"checked":"unchecked"}function Mx({className:e,...t}){return l.jsx(Rx,{"data-slot":"checkbox",className:rt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:l.jsx(Tx,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:l.jsx(io,{className:"size-3.5"})})})}const GS=e=>{if(typeof e=="number")return e;if(typeof e=="string"){const t=Number(e);return Number.isFinite(t)?t:0}return 0},Ts=e=>{const t=GS(e);return!Number.isFinite(t)||t<=0?0:Math.abs(t)>=100&&Number.isInteger(t)?Math.round(t):Math.round(t*100)},ir=(e,t={})=>{const o=(Ts(e)/100).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return t.withCurrency?`$${o}`:o},YS=(e,t={})=>{const{requireFutureDate:n=!1}=t;if(!e.startDate)return"Please select a start date.";if(!e.startTime)return"Please select a start time.";if(n){const r=String(e.startDate??"").split("-");if(r.length!==3)return"Please select a valid start date.";const[o,i,c]=r,u=Number(o),h=Number(i),p=Number(c);if(!Number.isFinite(u)||!Number.isFinite(h)||!Number.isFinite(p)||h<1||h>12||p<1||p>31)return"Please select a valid start date.";const f=new Date(u,h-1,p);f.setHours(0,0,0,0);const m=new Date;if(m.setHours(0,0,0,0),f<=m)return"Start date must be in the future."}return Number(e.numberOfDays)<1?"Number of days must be at least 1.":Number(e.maxStudents)<1?"Maximum students must be at least 1.":!e.address?.street||!e.address.city||!e.address.state||!e.address.zipCode?"Please fill in all address fields.":Ts(e.pricePerPerson)<=0?"Please enter a valid price.":null},KS="modulepreload",QS=function(e){return"/"+e},bv={},Ci=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(p){return Promise.all(p.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");o=c(n.map(p=>{if(p=QS(p),p in bv)return;bv[p]=!0;const f=p.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":KS,f||(v.as="script"),v.crossOrigin="",v.href=p,h&&v.setAttribute("nonce",h),document.head.appendChild(v),f)return new Promise((y,w)=>{v.addEventListener("load",y),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function i(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},JS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ci(async()=>{const{default:r}=await Promise.resolve().then(()=>xa);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class jh extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class _v extends jh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Nv extends jh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Sv extends jh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Vf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Vf||(Vf={}));var XS=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(f){try{p(r.next(f))}catch(m){c(m)}}function h(f){try{p(r.throw(f))}catch(m){c(m)}}function p(f){f.done?i(f.value):o(f.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};class ZS{constructor(t,{headers:n={},customFetch:r,region:o=Vf.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=JS(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return XS(this,arguments,void 0,function*(n,r={}){var o;try{const{headers:i,method:c,body:u,signal:h}=r;let p={},{region:f}=r;f||(f=this.region);const m=new URL(`${this.url}/${n}`);f&&f!=="any"&&(p["x-region"]=f,m.searchParams.set("forceFunctionRegion",f));let v;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(p["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(p["Content-Type"]="application/json",v=JSON.stringify(u)));const y=yield this.fetch(m.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),i),body:v,signal:h}).catch(j=>{throw j.name==="AbortError"?j:new _v(j)}),w=y.headers.get("x-relay-error");if(w&&w==="true")throw new Nv(y);if(!y.ok)throw new Sv(y);let N=((o=y.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),b;return N==="application/json"?b=yield y.json():N==="application/octet-stream"?b=yield y.blob():N==="text/event-stream"?b=y:N==="multipart/form-data"?b=yield y.formData():b=yield y.text(),{data:b,error:null,response:y}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new _v(i)}:{data:null,error:i,response:i instanceof Sv||i instanceof Nv?i.context:void 0}}})}}var nn={},Uo={},zo={},Wo={},Ho={},Vo={},ej=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},da=ej();const tj=da.fetch,Fx=da.fetch.bind(da),Lx=da.Headers,nj=da.Request,rj=da.Response,xa=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lx,Request:nj,Response:rj,default:Fx,fetch:tj},Symbol.toStringTag,{value:"Module"})),sj=f2(xa);var Gl={},jv;function Bx(){if(jv)return Gl;jv=1,Object.defineProperty(Gl,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Gl.default=e,Gl}var Cv;function $x(){if(Cv)return Vo;Cv=1;var e=Vo&&Vo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Vo,"__esModule",{value:!0});const t=e(sj),n=e(Bx());class r{constructor(i){var c,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(c=i.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,c){return this.headers=new Headers(this.headers),this.headers.set(i,c),this}then(i,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var f,m,v,y;let w=null,N=null,b=null,j=p.status,k=p.statusText;if(p.ok){if(this.method!=="HEAD"){const T=await p.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?N=T:N=JSON.parse(T))}const A=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),L=(v=p.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");A&&L&&L.length>1&&(b=parseInt(L[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(w={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,b=null,j=406,k="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const A=await p.text();try{w=JSON.parse(A),Array.isArray(w)&&p.status===404&&(N=[],w=null,j=200,k="OK")}catch{p.status===404&&A===""?(j=204,k="No Content"):w={message:A}}if(w&&this.isMaybeSingle&&(!((y=w?.details)===null||y===void 0)&&y.includes("0 rows"))&&(w=null,j=200,k="OK"),w&&this.shouldThrowOnError)throw new n.default(w)}return{error:w,data:N,count:b,status:j,statusText:k}});return this.shouldThrowOnError||(h=h.catch(p=>{var f,m,v;return{error:{message:`${(f=p?.name)!==null&&f!==void 0?f:"FetchError"}: ${p?.message}`,details:`${(m=p?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(v=p?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(i,c)}returns(){return this}overrideTypes(){return this}}return Vo.default=r,Vo}var kv;function Ux(){if(kv)return Ho;kv=1;var e=Ho&&Ho.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ho,"__esModule",{value:!0});const t=e($x());class n extends t.default{select(o){let i=!1;const c=(o??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:i=!0,nullsFirst:c,foreignTable:u,referencedTable:h=u}={}){const p=h?`${h}.order`:"order",f=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${f?`${f},`:""}${o}.${i?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:i,referencedTable:c=i}={}){const u=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${o}`),this}range(o,i,{foreignTable:c,referencedTable:u=c}={}){const h=typeof u>"u"?"offset":`${u}.offset`,p=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(p,`${i-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:i=!1,settings:c=!1,buffers:u=!1,wal:h=!1,format:p="text"}={}){var f;const m=[o?"analyze":null,i?"verbose":null,c?"settings":null,u?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${v}"; options=${m};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Ho.default=n,Ho}var Ev;function Ch(){if(Ev)return Wo;Ev=1;var e=Wo&&Wo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wo,"__esModule",{value:!0});const t=e(Ux());class n extends t.default{eq(o,i){return this.url.searchParams.append(o,`eq.${i}`),this}neq(o,i){return this.url.searchParams.append(o,`neq.${i}`),this}gt(o,i){return this.url.searchParams.append(o,`gt.${i}`),this}gte(o,i){return this.url.searchParams.append(o,`gte.${i}`),this}lt(o,i){return this.url.searchParams.append(o,`lt.${i}`),this}lte(o,i){return this.url.searchParams.append(o,`lte.${i}`),this}like(o,i){return this.url.searchParams.append(o,`like.${i}`),this}likeAllOf(o,i){return this.url.searchParams.append(o,`like(all).{${i.join(",")}}`),this}likeAnyOf(o,i){return this.url.searchParams.append(o,`like(any).{${i.join(",")}}`),this}ilike(o,i){return this.url.searchParams.append(o,`ilike.${i}`),this}ilikeAllOf(o,i){return this.url.searchParams.append(o,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(o,i){return this.url.searchParams.append(o,`ilike(any).{${i.join(",")}}`),this}is(o,i){return this.url.searchParams.append(o,`is.${i}`),this}in(o,i){const c=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(o,`in.(${c})`),this}contains(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cs.{${i.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(i)}`),this}containedBy(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cd.{${i.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(i)}`),this}rangeGt(o,i){return this.url.searchParams.append(o,`sr.${i}`),this}rangeGte(o,i){return this.url.searchParams.append(o,`nxl.${i}`),this}rangeLt(o,i){return this.url.searchParams.append(o,`sl.${i}`),this}rangeLte(o,i){return this.url.searchParams.append(o,`nxr.${i}`),this}rangeAdjacent(o,i){return this.url.searchParams.append(o,`adj.${i}`),this}overlaps(o,i){return typeof i=="string"?this.url.searchParams.append(o,`ov.${i}`):this.url.searchParams.append(o,`ov.{${i.join(",")}}`),this}textSearch(o,i,{config:c,type:u}={}){let h="";u==="plain"?h="pl":u==="phrase"?h="ph":u==="websearch"&&(h="w");const p=c===void 0?"":`(${c})`;return this.url.searchParams.append(o,`${h}fts${p}.${i}`),this}match(o){return Object.entries(o).forEach(([i,c])=>{this.url.searchParams.append(i,`eq.${c}`)}),this}not(o,i,c){return this.url.searchParams.append(o,`not.${i}.${c}`),this}or(o,{foreignTable:i,referencedTable:c=i}={}){const u=c?`${c}.or`:"or";return this.url.searchParams.append(u,`(${o})`),this}filter(o,i,c){return this.url.searchParams.append(o,`${i}.${c}`),this}}return Wo.default=n,Wo}var Pv;function zx(){if(Pv)return zo;Pv=1;var e=zo&&zo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zo,"__esModule",{value:!0});const t=e(Ch());class n{constructor(o,{headers:i={},schema:c,fetch:u}){this.url=o,this.headers=new Headers(i),this.schema=c,this.fetch=u}select(o,i){const{head:c=!1,count:u}=i??{},h=c?"HEAD":"GET";let p=!1;const f=(o??"*").split("").map(m=>/\s/.test(m)&&!p?"":(m==='"'&&(p=!p),m)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:i,defaultToNull:c=!0}={}){var u;const h="POST";if(i&&this.headers.append("Prefer",`count=${i}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(p.length>0){const f=[...new Set(p)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(o,{onConflict:i,ignoreDuplicates:c=!1,count:u,defaultToNull:h=!0}={}){var p;const f="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const m=o.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(m.length>0){const v=[...new Set(m)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:i}={}){var c;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:o}={}){var i;const c="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return zo.default=n,zo}var Rv;function oj(){if(Rv)return Uo;Rv=1;var e=Uo&&Uo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Uo,"__esModule",{value:!0});const t=e(zx()),n=e(Ch());class r{constructor(i,{headers:c={},schema:u,fetch:h}={}){this.url=i,this.headers=new Headers(c),this.schemaName=u,this.fetch=h}from(i){const c=new URL(`${this.url}/${i}`);return new t.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,c={},{head:u=!1,get:h=!1,count:p}={}){var f;let m;const v=new URL(`${this.url}/rpc/${i}`);let y;u||h?(m=u?"HEAD":"GET",Object.entries(c).filter(([N,b])=>b!==void 0).map(([N,b])=>[N,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([N,b])=>{v.searchParams.append(N,b)})):(m="POST",y=c);const w=new Headers(this.headers);return p&&w.set("Prefer",`count=${p}`),new n.default({method:m,url:v,headers:w,schema:this.schemaName,body:y,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Uo.default=r,Uo}var Av;function aj(){if(Av)return nn;Av=1;var e=nn&&nn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(nn,"__esModule",{value:!0}),nn.PostgrestError=nn.PostgrestBuilder=nn.PostgrestTransformBuilder=nn.PostgrestFilterBuilder=nn.PostgrestQueryBuilder=nn.PostgrestClient=void 0;const t=e(oj());nn.PostgrestClient=t.default;const n=e(zx());nn.PostgrestQueryBuilder=n.default;const r=e(Ch());nn.PostgrestFilterBuilder=r.default;const o=e(Ux());nn.PostgrestTransformBuilder=o.default;const i=e($x());nn.PostgrestBuilder=i.default;const c=e(Bx());return nn.PostgrestError=c.default,nn.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:i.default,PostgrestError:c.default},nn}var ij=aj();const lj=Tc(ij),{PostgrestClient:cj,PostgrestQueryBuilder:CO,PostgrestFilterBuilder:kO,PostgrestTransformBuilder:EO,PostgrestBuilder:PO,PostgrestError:RO}=lj;class uj{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const dj="2.75.0",fj=`realtime-js/${dj}`,hj="1.0.0",qf=1e4,mj=1e3,pj=100;var mi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(mi||(mi={}));var Jt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Jt||(Jt={}));var or;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(or||(or={}));var Gf;(function(e){e.websocket="websocket"})(Gf||(Gf={}));var to;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(to||(to={}));class gj{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const o=n.getUint8(1),i=n.getUint8(2);let c=this.HEADER_LENGTH+2;const u=r.decode(t.slice(c,c+o));c=c+o;const h=r.decode(t.slice(c,c+i));c=c+i;const p=JSON.parse(r.decode(t.slice(c,t.byteLength)));return{ref:null,topic:u,event:h,payload:p}}}class Wx{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Pt||(Pt={}));const Tv=(e,t,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,c)=>(i[c]=vj(c,e,t,o),i),{}):{}},vj=(e,t,n,r)=>{const o=t.find(u=>u.name===e),i=o?.type,c=n[e];return i&&!r.includes(i)?Hx(i,c):Yf(c)},Hx=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return bj(t,n)}switch(e){case Pt.bool:return yj(t);case Pt.float4:case Pt.float8:case Pt.int2:case Pt.int4:case Pt.int8:case Pt.numeric:case Pt.oid:return xj(t);case Pt.json:case Pt.jsonb:return wj(t);case Pt.timestamp:return _j(t);case Pt.abstime:case Pt.date:case Pt.daterange:case Pt.int4range:case Pt.int8range:case Pt.money:case Pt.reltime:case Pt.text:case Pt.time:case Pt.timestamptz:case Pt.timetz:case Pt.tsrange:case Pt.tstzrange:return Yf(t);default:return Yf(t)}},Yf=e=>e,yj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},xj=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},wj=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},bj=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const c=e.slice(1,n);try{i=JSON.parse("["+c+"]")}catch{i=c?c.split(","):[]}return i.map(u=>Hx(t,u))}return e},_j=e=>typeof e=="string"?e.replace(" ","T"):e,Vx=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Zd{constructor(t,n,r={},o=qf){this.channel=t,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Iv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Iv||(Iv={}));class pi{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pi.syncState(this.state,o,i,c),this.pendingDiffs.forEach(h=>{this.state=pi.syncDiff(this.state,h,i,c)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=pi.syncDiff(this.state,o,i,c),u())}),this.onJoin((o,i,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:c})}),this.onLeave((o,i,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,o){const i=this.cloneDeep(t),c=this.transformState(n),u={},h={};return this.map(i,(p,f)=>{c[p]||(h[p]=f)}),this.map(c,(p,f)=>{const m=i[p];if(m){const v=f.map(b=>b.presence_ref),y=m.map(b=>b.presence_ref),w=f.filter(b=>y.indexOf(b.presence_ref)<0),N=m.filter(b=>v.indexOf(b.presence_ref)<0);w.length>0&&(u[p]=w),N.length>0&&(h[p]=N)}else u[p]=f}),this.syncDiff(i,{joins:u,leaves:h},r,o)}static syncDiff(t,n,r,o){const{joins:i,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(u,h)=>{var p;const f=(p=t[u])!==null&&p!==void 0?p:[];if(t[u]=this.cloneDeep(h),f.length>0){const m=t[u].map(y=>y.presence_ref),v=f.filter(y=>m.indexOf(y.presence_ref)<0);t[u].unshift(...v)}r(u,f,h)}),this.map(c,(u,h)=>{let p=t[u];if(!p)return;const f=h.map(m=>m.presence_ref);p=p.filter(m=>f.indexOf(m.presence_ref)<0),t[u]=p,o(u,p,h),p.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const o=t[r];return"metas"in o?n[r]=o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ov;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ov||(Ov={}));var gi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gi||(gi={}));var Ur;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ur||(Ur={}));class kh{constructor(t,n={config:{}},r){var o,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Zd(this,or.join,this.params,this.timeout),this.rejoinTimer=new Wx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Jt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(or.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new pi(this),this.broadcastEndpointURL=Vx(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,o,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Jt.closed){const{config:{broadcast:c,presence:u,private:h}}=this.params,p=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&o!==void 0?o:[],f=!!this.bindings[gi.PRESENCE]&&this.bindings[gi.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},v={broadcast:c,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>t?.(Ur.CHANNEL_ERROR,y)),this._onClose(()=>t?.(Ur.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var w;if(this.socket.setAuth(),y===void 0){t?.(Ur.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,b=(w=N?.length)!==null&&w!==void 0?w:0,j=[];for(let k=0;k<b;k++){const C=N[k],{filter:{event:A,schema:L,table:T,filter:B}}=C,P=y&&y[k];if(P&&P.event===A&&P.schema===L&&P.table===T&&P.filter===B)j.push(Object.assign(Object.assign({},C),{id:P.id}));else{this.unsubscribe(),this.state=Jt.errored,t?.(Ur.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(Ur.SUBSCRIBED);return}}).receive("error",y=>{this.state=Jt.errored,t?.(Ur.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ur.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Jt.joined&&t===gi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,o;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:c}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var c,u,h;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.ack)&&i("ok"),p.receive("ok",()=>i("ok")),p.receive("error",()=>i("error")),p.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Jt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(or.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new Zd(this,or.leave,{},t),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Jt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const o=new AbortController,i=setTimeout(()=>o.abort(),r),c=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(i),c}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Zd(this,t,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>pj){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var o,i;const c=t.toLocaleLowerCase(),{close:u,error:h,leave:p,join:f}=or;if(r&&[u,h,p,f].indexOf(c)>=0&&r!==this._joinRef())return;let v=this._onMessage(c,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(y=>{var w,N,b;return((w=y.filter)===null||w===void 0?void 0:w.event)==="*"||((b=(N=y.filter)===null||N===void 0?void 0:N.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===c}).map(y=>y.callback(v,r)):(i=this.bindings[c])===null||i===void 0||i.filter(y=>{var w,N,b,j,k,C;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in y){const A=y.id,L=(w=y.filter)===null||w===void 0?void 0:w.event;return A&&((N=n.ids)===null||N===void 0?void 0:N.includes(A))&&(L==="*"||L?.toLocaleLowerCase()===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const A=(k=(j=y?.filter)===null||j===void 0?void 0:j.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return A==="*"||A===((C=n?.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===c}).map(y=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:N,table:b,commit_timestamp:j,type:k,errors:C}=w;v=Object.assign(Object.assign({},{schema:N,table:b,commit_timestamp:j,eventType:k,new:{},old:{},errors:C}),this._getPayloadRecords(w))}y.callback(v,r)})}_isClosed(){return this.state===Jt.closed}_isJoined(){return this.state===Jt.joined}_isJoining(){return this.state===Jt.joining}_isLeaving(){return this.state===Jt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const o=t.toLocaleLowerCase(),i={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!(((i=o.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&kh.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(or.close,{},t)}_onError(t){this._on(or.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Jt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Tv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Tv(t.columns,t.old_record)),n}}const ef=()=>{},Yl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Nj=[1e3,2e3,5e3,1e4],Sj=1e4,jj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Cj{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qf,this.transport=null,this.heartbeatIntervalMs=Yl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ef,this.ref=0,this.reconnectTimer=null,this.logger=ef,this.conn=null,this.sendBuffer=[],this.serializer=new gj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...c)=>Ci(async()=>{const{default:u}=await Promise.resolve().then(()=>xa);return{default:u}},void 0).then(({default:u})=>u(...c)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...c)=>i(...c)},!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Gf.websocket}`,this.httpEndpoint=Vx(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uj.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hj}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case mi.connecting:return to.Connecting;case mi.open:return to.Open;case mi.closing:return to.Closing;default:return to.Closed}}isConnected(){return this.connectionState()===to.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new kh(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:o,ref:i}=t,c=()=>{this.encode(t,u=>{var h;(h=this.conn)===null||h===void 0||h.send(u)})};this.log("push",`${n} ${r} (${i})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(mj,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Yl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:c}=n,u=c?`(${c})`:"",h=i.status||"";this.log("receive",`${h} ${r} ${o} ${u}`.trim(),i),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(o,i,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(or.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${r}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([jj],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:fj};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(or.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Wx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,o,i,c,u,h,p,f;if(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:qf,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Yl.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(c=t?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(u=t?.heartbeatCallback)!==null&&u!==void 0?u:ef,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t?.reconnectAfterMs)!==null&&h!==void 0?h:(m=>Nj[m-1]||Sj),this.encode=(p=t?.encode)!==null&&p!==void 0?p:((m,v)=>v(JSON.stringify(m))),this.decode=(f=t?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class Eh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Gt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class kj extends Eh{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Kf extends Eh{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Ej=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(f){try{p(r.next(f))}catch(m){c(m)}}function h(f){try{p(r.throw(f))}catch(m){c(m)}}function p(f){f.done?i(f.value):o(f.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};const qx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ci(async()=>{const{default:r}=await Promise.resolve().then(()=>xa);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Pj=()=>Ej(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ci(()=>Promise.resolve().then(()=>xa),void 0)).Response:Response}),Qf=e=>{if(Array.isArray(e))return e.map(n=>Qf(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[o]=Qf(r)}),t},Rj=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var po=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(f){try{p(r.next(f))}catch(m){c(m)}}function h(f){try{p(r.throw(f))}catch(m){c(m)}}function p(f){f.done?i(f.value):o(f.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};const tf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Aj=(e,t,n)=>po(void 0,void 0,void 0,function*(){const r=yield Pj();e instanceof r&&!n?.noResolveJson?e.json().then(o=>{const i=e.status||500,c=o?.statusCode||i+"";t(new kj(tf(o),i,c))}).catch(o=>{t(new Kf(tf(o),o))}):t(new Kf(tf(e),e))}),Tj=(e,t,n,r)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!r?o:(Rj(r)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(r)):o.body=r,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),n))};function ki(e,t,n,r,o,i){return po(this,void 0,void 0,function*(){return new Promise((c,u)=>{e(n,Tj(t,r,o,i)).then(h=>{if(!h.ok)throw h;return r?.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>Aj(h,u,r))})})}function pc(e,t,n,r){return po(this,void 0,void 0,function*(){return ki(e,"GET",t,n,r)})}function xr(e,t,n,r,o){return po(this,void 0,void 0,function*(){return ki(e,"POST",t,r,o,n)})}function Jf(e,t,n,r,o){return po(this,void 0,void 0,function*(){return ki(e,"PUT",t,r,o,n)})}function Ij(e,t,n,r){return po(this,void 0,void 0,function*(){return ki(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Gx(e,t,n,r,o){return po(this,void 0,void 0,function*(){return ki(e,"DELETE",t,r,o,n)})}var Oj=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(f){try{p(r.next(f))}catch(m){c(m)}}function h(f){try{p(r.throw(f))}catch(m){c(m)}}function p(f){f.done?i(f.value):o(f.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};class Dj{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Oj(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gt(t))return{data:null,error:t};throw t}})}}var Mj=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(f){try{p(r.next(f))}catch(m){c(m)}}function h(f){try{p(r.throw(f))}catch(m){c(m)}}function p(f){f.done?i(f.value):o(f.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};class Fj{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new Dj(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return Mj(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gt(t))return{data:null,error:t};throw t}})}}var jn=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(f){try{p(r.next(f))}catch(m){c(m)}}function h(f){try{p(r.throw(f))}catch(m){c(m)}}function p(f){f.done?i(f.value):o(f.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};const Lj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Bj{constructor(t,n={},r,o){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=qx(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,o){return jn(this,void 0,void 0,function*(){try{let i;const c=Object.assign(Object.assign({},Dv),o);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",c.cacheControl),h&&i.append("metadata",this.encodeMetadata(h)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",c.cacheControl),h&&i.append("metadata",this.encodeMetadata(h))):(i=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,h&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o?.headers&&(u=Object.assign(Object.assign({},u),o.headers));const p=this._removeEmptyFolders(n),f=this._getFinalPath(p),m=yield(t=="PUT"?Jf:xr)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:u},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return jn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,o){return jn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),c=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${c}`);u.searchParams.set("token",n);try{let h;const p=Object.assign({upsert:Dv.upsert},o),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",p.cacheControl)):(h=r,f["cache-control"]=`max-age=${p.cacheControl}`,f["content-type"]=p.contentType);const m=yield Jf(this.fetch,u.toString(),h,{headers:f});return{data:{path:i,fullPath:m.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Gt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,n){return jn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const i=yield xr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),c=new URL(this.url+i.url),u=c.searchParams.get("token");if(!u)throw new Eh("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}})}update(t,n,r){return jn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return jn(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Gt(o))return{data:null,error:o};throw o}})}copy(t,n,r){return jn(this,void 0,void 0,function*(){try{return{data:{path:(yield xr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Gt(o))return{data:null,error:o};throw o}})}createSignedUrl(t,n,r){return jn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),i=yield xr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${c}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Gt(o))return{data:null,error:o};throw o}})}createSignedUrls(t,n,r){return jn(this,void 0,void 0,function*(){try{const o=yield xr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Gt(o))return{data:null,error:o};throw o}})}download(t,n){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(n?.transform||{}),c=i?`?${i}`:"",u=this._getFinalPath(t),h=()=>pc(this.fetch,`${this.url}/${o}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new Fj(h,this.shouldThrowOnError)}info(t){return jn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield pc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Qf(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}})}exists(t){return jn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Ij(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r)&&r instanceof Kf){const o=r.originalError;if([400,404].includes(o?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),o=[],i=n?.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&o.push(i);const u=typeof n?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(n?.transform||{});h!==""&&o.push(h);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${p}`)}}}remove(t){return jn(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gt(n))return{data:null,error:n};throw n}})}list(t,n,r){return jn(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Lj),n),{prefix:t||""});return{data:yield xr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Gt(o))return{data:null,error:o};throw o}})}listV2(t,n){return jn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield xr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const $j="2.75.0",Uj={"X-Client-Info":`storage-js/${$j}`};var qo=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(f){try{p(r.next(f))}catch(m){c(m)}}function h(f){try{p(r.throw(f))}catch(m){c(m)}}function p(f){f.done?i(f.value):o(f.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};class zj{constructor(t,n={},r,o){this.shouldThrowOnError=!1;const i=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uj),n),this.fetch=qx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return qo(this,void 0,void 0,function*(){try{return{data:yield pc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gt(t))return{data:null,error:t};throw t}})}getBucket(t){return qo(this,void 0,void 0,function*(){try{return{data:yield pc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gt(n))return{data:null,error:n};throw n}})}createBucket(t){return qo(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield xr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Gt(o))return{data:null,error:o};throw o}})}updateBucket(t,n){return qo(this,void 0,void 0,function*(){try{return{data:yield Jf(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return qo(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qo(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gt(n))return{data:null,error:n};throw n}})}}class Wj extends zj{constructor(t,n={},r,o){super(t,n,r,o)}from(t){return new Bj(this.url,this.headers,t,this.fetch)}}const Hj="2.75.0";let fi="";typeof Deno<"u"?fi="deno":typeof document<"u"?fi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fi="react-native":fi="node";const Vj={"X-Client-Info":`supabase-js-${fi}/${Hj}`},qj={headers:Vj},Gj={schema:"public"},Yj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Kj={};var Qj=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(f){try{p(r.next(f))}catch(m){c(m)}}function h(f){try{p(r.throw(f))}catch(m){c(m)}}function p(f){f.done?i(f.value):o(f.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};const Jj=e=>{let t;return e?t=e:typeof fetch>"u"?t=Fx:t=fetch,(...n)=>t(...n)},Xj=()=>typeof Headers>"u"?Lx:Headers,Zj=(e,t,n)=>{const r=Jj(n),o=Xj();return(i,c)=>Qj(void 0,void 0,void 0,function*(){var u;const h=(u=yield t())!==null&&u!==void 0?u:e;let p=new o(c?.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),r(i,Object.assign(Object.assign({},c),{headers:p}))})};var eC=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(f){try{p(r.next(f))}catch(m){c(m)}}function h(f){try{p(r.throw(f))}catch(m){c(m)}}function p(f){f.done?i(f.value):o(f.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};function tC(e){return e.endsWith("/")?e:e+"/"}function nC(e,t){var n,r;const{db:o,auth:i,realtime:c,global:u}=e,{db:h,auth:p,realtime:f,global:m}=t,v={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},p),i),realtime:Object.assign(Object.assign({},f),c),storage:{},global:Object.assign(Object.assign(Object.assign({},m),u),{headers:Object.assign(Object.assign({},(n=m?.headers)!==null&&n!==void 0?n:{}),(r=u?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>eC(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function rC(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tC(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Yx="2.75.0",na=30*1e3,Xf=3,nf=Xf*na,sC="http://localhost:9999",oC="supabase.auth.token",aC={"X-Client-Info":`gotrue-js/${Yx}`},Zf="X-Supabase-Api-Version",Kx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lC=600*1e3;class yi extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class cC extends yi{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function uC(e){return Qe(e)&&e.name==="AuthApiError"}class no extends yi{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Is extends yi{constructor(t,n,r,o){super(t,r,o),this.name=n,this.status=r}}class ws extends Is{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dC(e){return Qe(e)&&e.name==="AuthSessionMissingError"}class Go extends Is{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kl extends Is{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ql extends Is{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fC(e){return Qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Mv extends Is{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class eh extends Is{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function rf(e){return Qe(e)&&e.name==="AuthRetryableFetchError"}class Fv extends Is{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class th extends Is{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const gc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lv=` 	
\r=`.split(""),hC=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Lv.length;t+=1)e[Lv[t].charCodeAt(0)]=-2;for(let t=0;t<gc.length;t+=1)e[gc[t].charCodeAt(0)]=t;return e})();function Bv(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(gc[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(gc[r]),t.queuedBits-=6}}function Qx(e,t,n){const r=hC[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function $v(e){const t=[],n=c=>{t.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=c=>{gC(c,r,n)};for(let c=0;c<e.length;c+=1)Qx(e.charCodeAt(c),o,i);return t.join("")}function mC(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function pC(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}mC(r,t)}}function gC(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function oa(e){const t=[],n={queue:0,queuedBits:0},r=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)Qx(e.charCodeAt(o),n,r);return new Uint8Array(t)}function vC(e){const t=[];return pC(e,n=>t.push(n)),new Uint8Array(t)}function ro(e){const t=[],n={queue:0,queuedBits:0},r=o=>{t.push(o)};return e.forEach(o=>Bv(o,n,r)),Bv(null,n,r),t.join("")}function yC(e){return Math.round(Date.now()/1e3)+e}function xC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Dn=()=>typeof window<"u"&&typeof document<"u",Js={tested:!1,writable:!1},Jx=()=>{if(!Dn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Js.tested)return Js.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Js.tested=!0,Js.writable=!0}catch{Js.tested=!0,Js.writable=!1}return Js.writable};function wC(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,i)=>{t[i]=o})}catch{}return n.searchParams.forEach((r,o)=>{t[o]=r}),t}const Xx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ci(async()=>{const{default:r}=await Promise.resolve().then(()=>xa);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},bC=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ra=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Xs=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ys=async(e,t)=>{await e.removeItem(t)};class Bc{constructor(){this.promise=new Bc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Bc.promiseConstructor=Promise;function sf(e){const t=e.split(".");if(t.length!==3)throw new th("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!iC.test(t[r]))throw new th("JWT not in base64url format");return{header:JSON.parse($v(t[0])),payload:JSON.parse($v(t[1])),signature:oa(t[2]),raw:{header:t[0],payload:t[1]}}}async function _C(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function NC(e,t){return new Promise((r,o)=>{(async()=>{for(let i=0;i<1/0;i++)try{const c=await e(i);if(!t(i,null,c)){r(c);return}}catch(c){if(!t(i,c)){o(c);return}}})()})}function SC(e){return("0"+e.toString(16)).substr(-2)}function jC(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let i=0;i<56;i++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(t),Array.from(t,SC).join("")}async function CC(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")}async function kC(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await CC(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yo(e,t,n=!1){const r=jC();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await ra(e,`${t}-code-verifier`,o);const i=await kC(r);return[i,r===i?"plain":"s256"]}const EC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function PC(e){const t=e.headers.get(Zf);if(!t||!t.match(EC))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function RC(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function AC(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const TC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ko(e){if(!TC.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function of(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Uv(e){return JSON.parse(JSON.stringify(e))}var IC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Zs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),OC=[502,503,504];async function zv(e){var t;if(!bC(e))throw new eh(Zs(e),0);if(OC.includes(e.status))throw new eh(Zs(e),e.status);let n;try{n=await e.json()}catch(i){throw new no(Zs(i),i)}let r;const o=PC(e);if(o&&o.getTime()>=Kx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Fv(Zs(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ws}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,c)=>i&&typeof c=="string",!0))throw new Fv(Zs(n),e.status,n.weak_password.reasons);throw new cC(Zs(n),e.status||500,r)}const DC=(e,t,n,r)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function st(e,t,n,r){var o;const i=Object.assign({},r?.headers);i[Zf]||(i[Zf]=Kx["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const c=(o=r?.query)!==null&&o!==void 0?o:{};r?.redirectTo&&(c.redirect_to=r.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await MC(e,t,n+u,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(h):{data:Object.assign({},h),error:null}}async function MC(e,t,n,r,o,i){const c=DC(t,r,o,i);let u;try{u=await e(n,Object.assign({},c))}catch(h){throw console.error(h),new eh(Zs(h),0)}if(u.ok||await zv(u),r?.noResolveJson)return u;try{return await u.json()}catch(h){await zv(h)}}function nr(e){var t;let n=null;BC(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=yC(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Wv(e){const t=nr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function _s(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function FC(e){return{data:e,error:null}}function LC(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i}=e,c=IC(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i},h=Object.assign({},c);return{data:{properties:u,user:h},error:null}}function Hv(e){return e}function BC(e){return e.access_token&&e.refresh_token&&e.expires_in}const af=["global","local","others"];var $C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};class UC{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Xx(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=af[0]){if(af.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${af.join(", ")}`);try{return await st(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await st(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_s})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=$C(t,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r?.newEmail,delete o.newEmail),await st(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:LC,redirectTo:n?.redirectTo})}catch(n){if(Qe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await st(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_s})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,o,i,c,u,h;try{const p={nextPage:null,lastPage:0,total:0},f=await st(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&i!==void 0?i:""},xform:Hv});if(f.error)throw f.error;const m=await f.json(),v=(c=f.headers.get("x-total-count"))!==null&&c!==void 0?c:0,y=(h=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return y.length>0&&(y.forEach(w=>{const N=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);p[`${b}Page`]=N}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},m),p),error:null}}catch(p){if(Qe(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){Ko(t);try{return await st(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_s})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ko(t);try{return await st(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:_s})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ko(t);try{return await st(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:_s})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ko(t.userId);try{const{data:n,error:r}=await st(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ko(t.userId),Ko(t.id);try{return{data:await st(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,o,i,c,u,h;try{const p={nextPage:null,lastPage:0,total:0},f=await st(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&i!==void 0?i:""},xform:Hv});if(f.error)throw f.error;const m=await f.json(),v=(c=f.headers.get("x-total-count"))!==null&&c!==void 0?c:0,y=(h=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return y.length>0&&(y.forEach(w=>{const N=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);p[`${b}Page`]=N}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},m),p),error:null}}catch(p){if(Qe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await st(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await st(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await st(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await st(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}}function Vv(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Qo={debug:!!(globalThis&&Jx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zx extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class zC extends Zx{}async function WC(e,t,n){Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new zC(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Qo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function HC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function e0(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function VC(e){return parseInt(e,16)}function qC(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function GC(e){var t;const{chainId:n,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:c,notBefore:u,requestId:h,resources:p,scheme:f,uri:m,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=e0(e.address),w=f?`${f}://${r}`:r,N=e.statement?`${e.statement}
`:"",b=`${w} wants you to sign in with your Ethereum account:
${y}

${N}`;let j=`URI: ${m}
Version: ${v}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${i.toISOString()}`;if(o&&(j+=`
Expiration Time: ${o.toISOString()}`),u&&(j+=`
Not Before: ${u.toISOString()}`),h&&(j+=`
Request ID: ${h}`),p){let k=`
Resources:`;for(const C of p){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);k+=`
- ${C}`}j+=k}return`${b}
${j}`}class qt extends Error{constructor({message:t,code:n,cause:r,name:o}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=o??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class vc extends qt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function YC({error:e,options:t}){var n,r,o;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new qt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new qt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new qt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=i.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new qt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new qt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new qt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new qt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new qt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const c=window.location.hostname;if(n0(c)){if(i.rp.id!==c)return new qt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new qt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new qt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function KC({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new qt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new qt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(n0(r)){if(n.rpId!==r)return new qt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new qt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var t0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};class QC{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const JC=new QC;function XC(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,o=t0(e,["challenge","user","excludeCredentials"]),i=oa(t).buffer,c=Object.assign(Object.assign({},n),{id:oa(n.id).buffer}),u=Object.assign(Object.assign({},o),{challenge:i,user:c});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const p=r[h];u.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:oa(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function ZC(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=t0(e,["challenge","allowCredentials"]),o=oa(t).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];i.allowCredentials[c]=Object.assign(Object.assign({},u),{id:oa(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function ek(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ro(new Uint8Array(e.response.attestationObject)),clientDataJSON:ro(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function tk(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ro(new Uint8Array(o.authenticatorData)),clientDataJSON:ro(new Uint8Array(o.clientDataJSON)),signature:ro(new Uint8Array(o.signature)),userHandle:o.userHandle?ro(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function n0(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function qv(){var e,t;return!!(Dn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function nk(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vc("Browser returned unexpected credential type",t)}:{data:null,error:new vc("Empty credential response",t)}}catch(t){return{data:null,error:YC({error:t,options:e})}}}async function rk(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vc("Browser returned unexpected credential type",t)}:{data:null,error:new vc("Empty credential response",t)}}catch(t){return{data:null,error:KC({error:t,options:e})}}}const sk={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},ok={userVerification:"preferred",hints:["security-key"]};function yc(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of e)if(o)for(const i in o){const c=o[i];if(c!==void 0)if(Array.isArray(c))r[i]=c;else if(n(c))r[i]=c;else if(t(c)){const u=r[i];t(u)?r[i]=yc(u,c):r[i]=yc(c)}else r[i]=c}return r}function ak(e,t){return yc(sk,e,t||{})}function ik(e,t){return yc(ok,e,t||{})}class lk{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:o},i){try{const{data:c,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!c)return{data:null,error:u};const h=o??JC.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=ak(c.webauthn.credential_options.publicKey,i?.create),{data:f,error:m}=await nk({publicKey:p,signal:h});return f?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}case"request":{const p=ik(c.webauthn.credential_options.publicKey,i?.request),{data:f,error:m}=await rk(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:h}));return f?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}}}catch(c){return Qe(c)?{data:null,error:c}:{data:null,error:new no("Unexpected error in challenge",c)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}},i){if(!n)return{data:null,error:new yi("rpId is required for WebAuthn authentication")};try{if(!qv())return{data:null,error:new no("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:o},{request:i});if(!c)return{data:null,error:u};const{webauthn:h}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(c){return Qe(c)?{data:null,error:c}:{data:null,error:new no("Unexpected error in authenticate",c)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o},i){if(!n)return{data:null,error:new yi("rpId is required for WebAuthn registration")};try{if(!qv())return{data:null,error:new no("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this._enroll({friendlyName:t});if(!c)return await this.client.mfa.listFactors().then(f=>{var m;return(m=f.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:u};const{data:h,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:o},{create:i});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(c){return Qe(c)?{data:null,error:c}:{data:null,error:new no("Unexpected error in register",c)}}}}HC();const ck={url:sC,storageKey:oC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Gv(e,t,n){return await n()}const Jo={};class xi{get jwks(){var t,n;return(n=(t=Jo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Jo[this.storageKey]=Object.assign(Object.assign({},Jo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Jo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Jo[this.storageKey]=Object.assign(Object.assign({},Jo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xi.nextInstanceID,xi.nextInstanceID+=1,this.instanceID>0&&Dn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},ck),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new UC({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Xx(o.fetch),this.lock=o.lock||Gv,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Dn()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=WC:this.lock=Gv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new lk(this)},this.persistSession?(o.storage?this.storage=o.storage:Jx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vv(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Vv(this.memoryStorage)),Dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yx}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=wC(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Dn()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),fC(i)){const h=(t=i.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:c,redirectType:u}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Qe(n)?{error:n}:{error:new no("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,o;try{const i=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:nr}),{data:c,error:u}=i;if(u||!c)return{data:{user:null,session:null},error:u};const h=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(i){if(Qe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,o;try{let i;if("email"in t){const{email:f,password:m,options:v}=t;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await Yo(this.storage,this.storageKey)),i=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:f,password:m,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:y,code_challenge_method:w},xform:nr})}else if("phone"in t){const{phone:f,password:m,options:v}=t;i=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:m,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(o=v?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:nr})}else throw new Kl("You must provide either an email or phone number and a password");const{data:c,error:u}=i;if(u||!c)return{data:{user:null,session:null},error:u};const h=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(i){if(Qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:c,options:u}=t;n=await st(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Wv})}else if("phone"in t){const{phone:i,password:c,options:u}=t;n=await st(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Wv})}else throw new Kl("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Go}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(Qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,o,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,o,i,c,u,h,p,f,m,v;let y,w;if("message"in t)y=t.message,w=t.signature;else{const{chain:N,wallet:b,statement:j,options:k}=t;let C;if(Dn())if(typeof b=="object")C=b;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")C=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=b}const A=new URL((n=k?.url)!==null&&n!==void 0?n:window.location.href),L=await C.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=e0(L[0]);let B=(r=k?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!B){const I=await C.request({method:"eth_chainId"});B=VC(I)}const P={domain:A.host,address:T,statement:j,uri:A.href,version:"1",chainId:B,nonce:(o=k?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(c=(i=k?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(u=k?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(h=k?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=k?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(f=k?.signInWithEthereum)===null||f===void 0?void 0:f.resources};y=GC(P),w=await C.request({method:"personal_sign",params:[qC(y),T]})}try{const{data:N,error:b}=await st(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:w},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:nr});if(b)throw b;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Go}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:b})}catch(N){if(Qe(N))return{data:{user:null,session:null},error:N};throw N}}async signInWithSolana(t){var n,r,o,i,c,u,h,p,f,m,v,y;let w,N;if("message"in t)w=t.message,N=t.signature;else{const{chain:b,wallet:j,statement:k,options:C}=t;let A;if(Dn())if(typeof j=="object")A=j;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))A=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=j}const L=new URL((n=C?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in A&&A.signIn){const T=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C?.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),k?{statement:k}:null));let B;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")B=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)B=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)w=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),N=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${L.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(o=(r=C?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((i=C?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((c=C?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((h=C?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((p=C?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((m=(f=C?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||m===void 0)&&m.length?["Resources",...C.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const T=await A.signMessage(new TextEncoder().encode(w),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=T}}try{const{data:b,error:j}=await st(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:ro(N)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:nr});if(j)throw j;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Go}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:j})}catch(b){if(Qe(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const n=await Xs(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:i,error:c}=await st(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:nr});if(await ys(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Go}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:o??null}),error:c})}catch(i){if(Qe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:o,access_token:i,nonce:c}=t,u=await st(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:i,nonce:c,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:nr}),{data:h,error:p}=u;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Go}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(n){if(Qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,o,i,c;try{if("email"in t){const{email:u,options:h}=t;let p=null,f=null;this.flowType==="pkce"&&([p,f]=await Yo(this.storage,this.storageKey));const{error:m}=await st(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=h?.data)!==null&&n!==void 0?n:{},create_user:(r=h?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:f},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:u,options:h}=t,{data:p,error:f}=await st(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(i=h?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(c=h?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:f}}throw new Kl("You must provide either an email or phone number.")}catch(u){if(Qe(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let o,i;"options"in t&&(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:u}=await st(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:o,xform:nr});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,p=c.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(o){if(Qe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var n,r,o;try{let i=null,c=null;return this.flowType==="pkce"&&([i,c]=await Yo(this.storage,this.storageKey)),await st(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:c}),headers:this.headers,xform:FC})}catch(i){if(Qe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ws;const{error:o}=await st(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(Qe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:o,options:i}=t,{error:c}=await st(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in t){const{phone:r,type:o,options:i}=t,{data:c,error:u}=await st(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new Kl("You must provide either an email or phone number and a type")}catch(n){if(Qe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<nf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const c=await Xs(this.userStorage,this.storageKey+"-user");c?.user?t.user=c.user:t.user=of()}if(this.storage.isServer&&t.user){let c=this.suppressGetSessionWarning;t=new Proxy(t,{get:(h,p,f)=>(!c&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,f))})}return{data:{session:t},error:null}}const{data:o,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await st(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_s}):await this._useSession(async n=>{var r,o,i;const{data:c,error:u}=n;if(u)throw u;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ws}:await st(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&i!==void 0?i:void 0,xform:_s})})}catch(n){if(Qe(n))return dC(n)&&(await this._removeSession(),await ys(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:o,error:i}=r;if(i)throw i;if(!o.session)throw new ws;const c=o.session;let u=null,h=null;this.flowType==="pkce"&&t.email!=null&&([u,h]=await Yo(this.storage,this.storageKey));const{data:p,error:f}=await st(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:h}),jwt:c.access_token,xform:_s});if(f)throw f;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ws;const n=Date.now()/1e3;let r=n,o=!0,i=null;const{payload:c}=sf(t.access_token);if(c.exp&&(r=c.exp,o=r<=n),o){const{data:u,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:h}=await this._getUser(t.access_token);if(h)throw h;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Qe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:c,error:u}=n;if(u)throw u;t=(r=c.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new ws;const{data:o,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Qe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Dn())throw new Ql("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ql(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Mv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ql("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Mv("No code detected.");const{data:k,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:i,refresh_token:c,expires_in:u,expires_at:h,token_type:p}=t;if(!i||!u||!c||!p)throw new Ql("No session defined in URL");const f=Math.round(Date.now()/1e3),m=parseInt(u);let v=f+m;h&&(v=parseInt(h));const y=v-f;y*1e3<=na&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const w=v-m;f-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,f):f-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,f);const{data:N,error:b}=await this._getUser(i);if(b)throw b;const j={provider_token:r,provider_refresh_token:o,access_token:i,expires_in:m,expires_at:v,refresh_token:c,token_type:p,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:t.type},error:null}}catch(r){if(Qe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Xs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:i}=n;if(i)return{error:i};const c=(r=o.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:u}=await this.admin.signOut(c,t);if(u&&!(uC(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await ys(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=xC(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,o;try{const{data:{session:i},error:c}=n;if(c)throw c;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await Yo(this.storage,this.storageKey,!0));try{return await st(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Qe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:o}=await this._useSession(async i=>{var c,u,h,p,f;const{data:m,error:v}=i;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await st(this.fetch,"GET",y,{headers:this.headers,jwt:(f=(p=m.session)===null||p===void 0?void 0:p.access_token)!==null&&f!==void 0?f:void 0})});if(o)throw o;return Dn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:t.provider,url:r?.url},error:null}}catch(r){if(Qe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:o,data:{session:i}}=n;if(o)throw o;const{options:c,provider:u,token:h,access_token:p,nonce:f}=t,m=await st(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:h,access_token:p,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:nr}),{data:v,error:y}=m;return y?{data:{user:null,session:null},error:y}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new Go}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y})}catch(o){if(Qe(o))return{data:{user:null,session:null},error:o};throw o}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,o;const{data:i,error:c}=n;if(c)throw c;return await st(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await NC(async o=>(o>0&&await _C(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await st(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:nr})),(o,i)=>{const c=200*Math.pow(2,o);return i&&rf(i)&&Date.now()+c-r<na})}catch(r){if(this._debug(n,"error",r),Qe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Dn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Xs(this.storage,this.storageKey);if(o&&this.userStorage){let c=await Xs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await ra(this.userStorage,this.storageKey+"-user",c)),o.user=(t=c?.user)!==null&&t!==void 0?t:of()}else if(o&&!o.user&&!o.user){const c=await Xs(this.storage,this.storageKey+"-user");c&&c?.user?(o.user=c.user,await ys(this.storage,this.storageKey+"-user"),await ra(this.storage,this.storageKey,o)):o.user=of()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const i=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<nf;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${nf}s`),i){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),rf(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:u}=await this._getUser(o.access_token);!u&&c?.user?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ws;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Bc;const{data:i,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!i.session)throw new ws;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(o,"error",i),Qe(i)){const c={data:null,error:i};return rf(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,n,r=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(h){i.push(h)}});if(await Promise.all(c),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ra(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const i=Uv(o);await ra(this.storage,this.storageKey,i)}else{const o=Uv(n);await ra(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await ys(this.storage,this.storageKey),await ys(this.storage,this.storageKey+"-code-verifier"),await ys(this.storage,this.storageKey+"-user"),this.userStorage&&await ys(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Dn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),na);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-t)/na);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${na}ms, refresh threshold is ${Xf} ticks`),o<=Xf&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Zx)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,c]=await Yo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(u.toString())}if(r?.queryParams){const i=new URLSearchParams(r.queryParams);o.push(i.toString())}return r?.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:o,error:i}=n;return i?{data:null,error:i}:await st(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,o;const{data:i,error:c}=n;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:p}=await st(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&h.type==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:i}=n;if(i)return{data:null,error:i};const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?ek(t.webauthn.credential_response):tk(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:h}=await st(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:i}=n;if(i)return{data:null,error:i};const c=await st(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:u}=c;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:XC(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:ZC(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Qe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const o={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n?.factors)!==null&&t!==void 0?t:[])o.all.push(i),i.status==="verified"&&o[i.factor_type].push(i);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:o},error:i}=t;if(i)return{data:null,error:i};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=sf(o.access_token);let u=null;c.aal&&(u=c.aal);let h=u;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(h="aal2");const f=c.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+lC>o)return r;const{data:i,error:c}=await st(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=o,r=i.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:w}=await this.getSession();if(w||!y.session)return{data:null,error:w};r=y.session.access_token}const{header:o,payload:i,signature:c,raw:{header:u,payload:h}}=sf(r);n?.allowExpired||RC(i.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:o,signature:c},error:null}}const f=AC(o.alg),m=await crypto.subtle.importKey("jwk",p,f,!0,["verify"]);if(!await crypto.subtle.verify(f,m,c,vC(`${u}.${h}`)))throw new th("Invalid JWT signature");return{data:{claims:i,header:o,signature:c},error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}}xi.nextInstanceID=0;const uk=xi;class dk extends uk{constructor(t){super(t)}}var fk=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function u(f){try{p(r.next(f))}catch(m){c(m)}}function h(f){try{p(r.throw(f))}catch(m){c(m)}}function p(f){f.done?i(f.value):o(f.value).then(u,h)}p((r=r.apply(e,t||[])).next())})};class hk{constructor(t,n,r){var o,i,c;this.supabaseUrl=t,this.supabaseKey=n;const u=rC(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:Gj,realtime:Kj,auth:Object.assign(Object.assign({},Yj),{storageKey:h}),global:qj},f=nC(r??{},p);this.storageKey=(o=f.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=f.auth)!==null&&c!==void 0?c:{},this.headers,f.global.fetch),this.fetch=Zj(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new cj(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Wj(this.storageUrl.href,this.headers,this.fetch,r?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new ZS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return fk(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:c,flowType:u,lock:h,debug:p},f,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dk({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),f),storageKey:c,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:i,flowType:u,lock:h,debug:p,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Cj(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mk=(e,t,n)=>new hk(e,t,n);function pk(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}pk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const gk="https://czdzjdujojcjluqcdchq.supabase.co",vk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6ZHpqZHVqb2pjamx1cWNkY2hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MjM2MjksImV4cCI6MjA3NDM5OTYyOX0.kS7ZOxQgPvXW7b1mU3OKcAhsnTVBqWqdDXXvUUxxB2M",Ce=mk(gk,vk);function yk(e,t){return t.forEach((function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach((function(r){if(r!=="default"&&!(r in e)){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}}))})),Object.freeze(e)}function r0(e,t){return new Promise((function(n,r){let o;return xk(e).then((function(i){try{return o=i,n(new Blob([t.slice(0,2),o,t.slice(2)],{type:"image/jpeg"}))}catch(c){return r(c)}}),r)}))}const xk=e=>new Promise(((t,n)=>{const r=new FileReader;r.addEventListener("load",(({target:{result:o}})=>{const i=new DataView(o);let c=0;if(i.getUint16(c)!==65496)return n("not a valid JPEG");for(c+=2;;){const u=i.getUint16(c);if(u===65498)break;const h=i.getUint16(c+2);if(u===65505&&i.getUint32(c+4)===1165519206){const p=c+10;let f;switch(i.getUint16(p)){case 18761:f=!0;break;case 19789:f=!1;break;default:return n("TIFF header contains invalid endian")}if(i.getUint16(p+2,f)!==42)return n("TIFF header contains invalid version");const m=i.getUint32(p+4,f),v=p+m+2+12*i.getUint16(p+m,f);for(let y=p+m+2;y<v;y+=12)if(i.getUint16(y,f)==274){if(i.getUint16(y+2,f)!==3)return n("Orientation data type is invalid");if(i.getUint32(y+4,f)!==1)return n("Orientation data count is invalid");i.setUint16(y+8,1,f);break}return t(o.slice(c,c+2+h))}c+=2+h}return t(new Blob)})),r.readAsArrayBuffer(e)}));var xc={},wk={get exports(){return xc},set exports(e){xc=e}};(function(e){var t,n,r={};wk.exports=r,r.parse=function(o,i){for(var c=r.bin.readUshort,u=r.bin.readUint,h=0,p={},f=new Uint8Array(o),m=f.length-4;u(f,m)!=101010256;)m--;h=m,h+=4;var v=c(f,h+=4);c(f,h+=2);var y=u(f,h+=2),w=u(f,h+=4);h+=4,h=w;for(var N=0;N<v;N++){u(f,h),h+=4,h+=4,h+=4,u(f,h+=4),y=u(f,h+=4);var b=u(f,h+=4),j=c(f,h+=4),k=c(f,h+2),C=c(f,h+4);h+=6;var A=u(f,h+=8);h+=4,h+=j+k+C,r._readLocal(f,A,p,y,b,i)}return p},r._readLocal=function(o,i,c,u,h,p){var f=r.bin.readUshort,m=r.bin.readUint;m(o,i),f(o,i+=4),f(o,i+=2);var v=f(o,i+=2);m(o,i+=2),m(o,i+=4),i+=4;var y=f(o,i+=8),w=f(o,i+=2);i+=2;var N=r.bin.readUTF8(o,i,y);if(i+=y,i+=w,p)c[N]={size:h,csize:u};else{var b=new Uint8Array(o.buffer,i);if(v==0)c[N]=new Uint8Array(b.buffer.slice(i,i+u));else{if(v!=8)throw"unknown compression method: "+v;var j=new Uint8Array(h);r.inflateRaw(b,j),c[N]=j}}},r.inflateRaw=function(o,i){return r.F.inflate(o,i)},r.inflate=function(o,i){return o[0],o[1],r.inflateRaw(new Uint8Array(o.buffer,o.byteOffset+2,o.length-6),i)},r.deflate=function(o,i){i==null&&(i={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*o.length));u[c]=120,u[c+1]=156,c+=2,c=r.F.deflateRaw(o,u,c,i.level);var h=r.adler(o,0,o.length);return u[c+0]=h>>>24&255,u[c+1]=h>>>16&255,u[c+2]=h>>>8&255,u[c+3]=h>>>0&255,new Uint8Array(u.buffer,0,c+4)},r.deflateRaw=function(o,i){i==null&&(i={level:6});var c=new Uint8Array(50+Math.floor(1.1*o.length)),u=r.F.deflateRaw(o,c,u,i.level);return new Uint8Array(c.buffer,0,u)},r.encode=function(o,i){i==null&&(i=!1);var c=0,u=r.bin.writeUint,h=r.bin.writeUshort,p={};for(var f in o){var m=!r._noNeed(f)&&!i,v=o[f],y=r.crc.crc(v,0,v.length);p[f]={cpr:m,usize:v.length,crc:y,file:m?r.deflateRaw(v):v}}for(var f in p)c+=p[f].file.length+30+46+2*r.bin.sizeUTF8(f);c+=22;var w=new Uint8Array(c),N=0,b=[];for(var f in p){var j=p[f];b.push(N),N=r._writeHeader(w,N,f,j,0)}var k=0,C=N;for(var f in p)j=p[f],b.push(N),N=r._writeHeader(w,N,f,j,1,b[k++]);var A=N-C;return u(w,N,101010256),N+=4,h(w,N+=4,k),h(w,N+=2,k),u(w,N+=2,A),u(w,N+=4,C),N+=4,N+=2,w.buffer},r._noNeed=function(o){var i=o.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},r._writeHeader=function(o,i,c,u,h,p){var f=r.bin.writeUint,m=r.bin.writeUshort,v=u.file;return f(o,i,h==0?67324752:33639248),i+=4,h==1&&(i+=2),m(o,i,20),m(o,i+=2,0),m(o,i+=2,u.cpr?8:0),f(o,i+=2,0),f(o,i+=4,u.crc),f(o,i+=4,v.length),f(o,i+=4,u.usize),m(o,i+=4,r.bin.sizeUTF8(c)),m(o,i+=2,0),i+=2,h==1&&(i+=2,i+=2,f(o,i+=6,p),i+=4),i+=r.bin.writeUTF8(o,i,c),h==0&&(o.set(v,i),i+=v.length),i},r.crc={table:(function(){for(var o=new Uint32Array(256),i=0;i<256;i++){for(var c=i,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;o[i]=c}return o})(),update:function(o,i,c,u){for(var h=0;h<u;h++)o=r.crc.table[255&(o^i[c+h])]^o>>>8;return o},crc:function(o,i,c){return 4294967295^r.crc.update(4294967295,o,i,c)}},r.adler=function(o,i,c){for(var u=1,h=0,p=i,f=i+c;p<f;){for(var m=Math.min(p+5552,f);p<m;)h+=u+=o[p++];u%=65521,h%=65521}return h<<16|u},r.bin={readUshort:function(o,i){return o[i]|o[i+1]<<8},writeUshort:function(o,i,c){o[i]=255&c,o[i+1]=c>>8&255},readUint:function(o,i){return 16777216*o[i+3]+(o[i+2]<<16|o[i+1]<<8|o[i])},writeUint:function(o,i,c){o[i]=255&c,o[i+1]=c>>8&255,o[i+2]=c>>16&255,o[i+3]=c>>24&255},readASCII:function(o,i,c){for(var u="",h=0;h<c;h++)u+=String.fromCharCode(o[i+h]);return u},writeASCII:function(o,i,c){for(var u=0;u<c.length;u++)o[i+u]=c.charCodeAt(u)},pad:function(o){return o.length<2?"0"+o:o},readUTF8:function(o,i,c){for(var u,h="",p=0;p<c;p++)h+="%"+r.bin.pad(o[i+p].toString(16));try{u=decodeURIComponent(h)}catch{return r.bin.readASCII(o,i,c)}return u},writeUTF8:function(o,i,c){for(var u=c.length,h=0,p=0;p<u;p++){var f=c.charCodeAt(p);if((4294967168&f)==0)o[i+h]=f,h++;else if((4294965248&f)==0)o[i+h]=192|f>>6,o[i+h+1]=128|f>>0&63,h+=2;else if((4294901760&f)==0)o[i+h]=224|f>>12,o[i+h+1]=128|f>>6&63,o[i+h+2]=128|f>>0&63,h+=3;else{if((4292870144&f)!=0)throw"e";o[i+h]=240|f>>18,o[i+h+1]=128|f>>12&63,o[i+h+2]=128|f>>6&63,o[i+h+3]=128|f>>0&63,h+=4}}return h},sizeUTF8:function(o){for(var i=o.length,c=0,u=0;u<i;u++){var h=o.charCodeAt(u);if((4294967168&h)==0)c++;else if((4294965248&h)==0)c+=2;else if((4294901760&h)==0)c+=3;else{if((4292870144&h)!=0)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(o,i,c,u){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],p=r.F.U,f=r.F._goodIndex;r.F._hash;var m=r.F._putsE,v=0,y=c<<3,w=0,N=o.length;if(u==0){for(;v<N;)m(i,y,v+(H=Math.min(65535,N-v))==N?1:0),y=r.F._copyExact(o,v,H,i,y+8),v+=H;return y>>>3}var b=p.lits,j=p.strt,k=p.prev,C=0,A=0,L=0,T=0,B=0,P=0;for(N>2&&(j[P=r.F._hash(o,0)]=0),v=0;v<N;v++){if(B=P,v+1<N-2){P=r.F._hash(o,v+1);var I=v+1&32767;k[I]=j[P],j[P]=I}if(w<=v){(C>14e3||A>26697)&&N-v>100&&(w<v&&(b[C]=v-w,C+=2,w=v),y=r.F._writeBlock(v==N-1||w==N?1:0,b,C,T,o,L,v-L,i,y),C=A=T=0,L=v);var $=0;v<N-2&&($=r.F._bestMatch(o,v,k,B,Math.min(h[2],N-v),h[3]));var H=$>>>16,G=65535&$;if($!=0){G=65535&$;var K=f(H=$>>>16,p.of0);p.lhst[257+K]++;var V=f(G,p.df0);p.dhst[V]++,T+=p.exb[K]+p.dxb[V],b[C]=H<<23|v-w,b[C+1]=G<<16|K<<8|V,C+=2,w=v+H}else p.lhst[o[v]]++;A++}}for(L==v&&o.length!=0||(w<v&&(b[C]=v-w,C+=2,w=v),y=r.F._writeBlock(1,b,C,T,o,L,v-L,i,y),C=0,A=0,C=A=T=0,L=v);(7&y)!=0;)y++;return y>>>3},r.F._bestMatch=function(o,i,c,u,h,p){var f=32767&i,m=c[f],v=f-m+32768&32767;if(m==f||u!=r.F._hash(o,i-v))return 0;for(var y=0,w=0,N=Math.min(32767,i);v<=N&&--p!=0&&m!=f;){if(y==0||o[i+y]==o[i+y-v]){var b=r.F._howLong(o,i,v);if(b>y){if(w=v,(y=b)>=h)break;v+2<b&&(b=v+2);for(var j=0,k=0;k<b-2;k++){var C=i-v+k+32768&32767,A=C-c[C]+32768&32767;A>j&&(j=A,m=C)}}}v+=(f=m)-(m=c[f])+32768&32767}return y<<16|w},r.F._howLong=function(o,i,c){if(o[i]!=o[i-c]||o[i+1]!=o[i+1-c]||o[i+2]!=o[i+2-c])return 0;var u=i,h=Math.min(o.length,i+258);for(i+=3;i<h&&o[i]==o[i-c];)i++;return i-u},r.F._hash=function(o,i){return(o[i]<<8|o[i+1])+(o[i+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(o,i,c,u,h,p,f,m,v){var y,w,N,b,j,k,C,A,L,T=r.F.U,B=r.F._putsF,P=r.F._putsE;T.lhst[256]++,w=(y=r.F.getTrees())[0],N=y[1],b=y[2],j=y[3],k=y[4],C=y[5],A=y[6],L=y[7];var I=32+((v+3&7)==0?0:8-(v+3&7))+(f<<3),$=u+r.F.contSize(T.fltree,T.lhst)+r.F.contSize(T.fdtree,T.dhst),H=u+r.F.contSize(T.ltree,T.lhst)+r.F.contSize(T.dtree,T.dhst);H+=14+3*C+r.F.contSize(T.itree,T.ihst)+(2*T.ihst[16]+3*T.ihst[17]+7*T.ihst[18]);for(var G=0;G<286;G++)T.lhst[G]=0;for(G=0;G<30;G++)T.dhst[G]=0;for(G=0;G<19;G++)T.ihst[G]=0;var K=I<$&&I<H?0:$<H?1:2;if(B(m,v,o),B(m,v+1,K),v+=3,K==0){for(;(7&v)!=0;)v++;v=r.F._copyExact(h,p,f,m,v)}else{var V,J;if(K==1&&(V=T.fltree,J=T.fdtree),K==2){r.F.makeCodes(T.ltree,w),r.F.revCodes(T.ltree,w),r.F.makeCodes(T.dtree,N),r.F.revCodes(T.dtree,N),r.F.makeCodes(T.itree,b),r.F.revCodes(T.itree,b),V=T.ltree,J=T.dtree,P(m,v,j-257),P(m,v+=5,k-1),P(m,v+=5,C-4),v+=4;for(var R=0;R<C;R++)P(m,v+3*R,T.itree[1+(T.ordr[R]<<1)]);v+=3*C,v=r.F._codeTiny(A,T.itree,m,v),v=r.F._codeTiny(L,T.itree,m,v)}for(var E=p,D=0;D<c;D+=2){for(var W=i[D],F=W>>>23,M=E+(8388607&W);E<M;)v=r.F._writeLit(h[E++],V,m,v);if(F!=0){var U=i[D+1],te=U>>16,Q=U>>8&255,ee=255&U;P(m,v=r.F._writeLit(257+Q,V,m,v),F-T.of0[Q]),v+=T.exb[Q],B(m,v=r.F._writeLit(ee,J,m,v),te-T.df0[ee]),v+=T.dxb[ee],E+=F}}v=r.F._writeLit(256,V,m,v)}return v},r.F._copyExact=function(o,i,c,u,h){var p=h>>>3;return u[p]=c,u[p+1]=c>>>8,u[p+2]=255-u[p],u[p+3]=255-u[p+1],p+=4,u.set(new Uint8Array(o.buffer,i,c),p),h+(c+4<<3)},r.F.getTrees=function(){for(var o=r.F.U,i=r.F._hufTree(o.lhst,o.ltree,15),c=r.F._hufTree(o.dhst,o.dtree,15),u=[],h=r.F._lenCodes(o.ltree,u),p=[],f=r.F._lenCodes(o.dtree,p),m=0;m<u.length;m+=2)o.ihst[u[m]]++;for(m=0;m<p.length;m+=2)o.ihst[p[m]]++;for(var v=r.F._hufTree(o.ihst,o.itree,7),y=19;y>4&&o.itree[1+(o.ordr[y-1]<<1)]==0;)y--;return[i,c,v,h,f,y,u,p]},r.F.getSecond=function(o){for(var i=[],c=0;c<o.length;c+=2)i.push(o[c+1]);return i},r.F.nonZero=function(o){for(var i="",c=0;c<o.length;c+=2)o[c+1]!=0&&(i+=(c>>1)+",");return i},r.F.contSize=function(o,i){for(var c=0,u=0;u<i.length;u++)c+=i[u]*o[1+(u<<1)];return c},r.F._codeTiny=function(o,i,c,u){for(var h=0;h<o.length;h+=2){var p=o[h],f=o[h+1];u=r.F._writeLit(p,i,c,u);var m=p==16?2:p==17?3:7;p>15&&(r.F._putsE(c,u,f,m),u+=m)}return u},r.F._lenCodes=function(o,i){for(var c=o.length;c!=2&&o[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var h=o[u+1],p=u+3<c?o[u+3]:-1,f=u+5<c?o[u+5]:-1,m=u==0?-1:o[u-1];if(h==0&&p==h&&f==h){for(var v=u+5;v+2<c&&o[v+2]==h;)v+=2;(y=Math.min(v+1-u>>>1,138))<11?i.push(17,y-3):i.push(18,y-11),u+=2*y-2}else if(h==m&&p==h&&f==h){for(v=u+5;v+2<c&&o[v+2]==h;)v+=2;var y=Math.min(v+1-u>>>1,6);i.push(16,y-3),u+=2*y-2}else i.push(h,0)}return c>>>1},r.F._hufTree=function(o,i,c){var u=[],h=o.length,p=i.length,f=0;for(f=0;f<p;f+=2)i[f]=0,i[f+1]=0;for(f=0;f<h;f++)o[f]!=0&&u.push({lit:f,f:o[f]});var m=u.length,v=u.slice(0);if(m==0)return 0;if(m==1){var y=u[0].lit;return v=y==0?1:0,i[1+(y<<1)]=1,i[1+(v<<1)]=1,1}u.sort((function(A,L){return A.f-L.f}));var w=u[0],N=u[1],b=0,j=1,k=2;for(u[0]={lit:-1,f:w.f+N.f,l:w,r:N,d:0};j!=m-1;)w=b!=j&&(k==m||u[b].f<u[k].f)?u[b++]:u[k++],N=b!=j&&(k==m||u[b].f<u[k].f)?u[b++]:u[k++],u[j++]={lit:-1,f:w.f+N.f,l:w,r:N};var C=r.F.setDepth(u[j-1],0);for(C>c&&(r.F.restrictDepth(v,c,C),C=c),f=0;f<m;f++)i[1+(v[f].lit<<1)]=v[f].d;return C},r.F.setDepth=function(o,i){return o.lit!=-1?(o.d=i,i):Math.max(r.F.setDepth(o.l,i+1),r.F.setDepth(o.r,i+1))},r.F.restrictDepth=function(o,i,c){var u=0,h=1<<c-i,p=0;for(o.sort((function(m,v){return v.d==m.d?m.f-v.f:v.d-m.d})),u=0;u<o.length&&o[u].d>i;u++){var f=o[u].d;o[u].d=i,p+=h-(1<<c-f)}for(p>>>=c-i;p>0;)(f=o[u].d)<i?(o[u].d++,p-=1<<i-f-1):u++;for(;u>=0;u--)o[u].d==i&&p<0&&(o[u].d--,p++);p!=0&&console.log("debt left")},r.F._goodIndex=function(o,i){var c=0;return i[16|c]<=o&&(c|=16),i[8|c]<=o&&(c|=8),i[4|c]<=o&&(c|=4),i[2|c]<=o&&(c|=2),i[1|c]<=o&&(c|=1),c},r.F._writeLit=function(o,i,c,u){return r.F._putsF(c,u,i[o<<1]),u+i[1+(o<<1)]},r.F.inflate=function(o,i){var c=Uint8Array;if(o[0]==3&&o[1]==0)return i||new c(0);var u=r.F,h=u._bitsF,p=u._bitsE,f=u._decodeTiny,m=u.makeCodes,v=u.codes2map,y=u._get17,w=u.U,N=i==null;N&&(i=new c(o.length>>>2<<3));for(var b,j,k=0,C=0,A=0,L=0,T=0,B=0,P=0,I=0,$=0;k==0;)if(k=h(o,$,1),C=h(o,$+1,2),$+=3,C!=0){if(N&&(i=r.F._check(i,I+(1<<17))),C==1&&(b=w.flmap,j=w.fdmap,B=511,P=31),C==2){A=p(o,$,5)+257,L=p(o,$+5,5)+1,T=p(o,$+10,4)+4,$+=14;for(var H=0;H<38;H+=2)w.itree[H]=0,w.itree[H+1]=0;var G=1;for(H=0;H<T;H++){var K=p(o,$+3*H,3);w.itree[1+(w.ordr[H]<<1)]=K,K>G&&(G=K)}$+=3*T,m(w.itree,G),v(w.itree,G,w.imap),b=w.lmap,j=w.dmap,$=f(w.imap,(1<<G)-1,A+L,o,$,w.ttree);var V=u._copyOut(w.ttree,0,A,w.ltree);B=(1<<V)-1;var J=u._copyOut(w.ttree,A,L,w.dtree);P=(1<<J)-1,m(w.ltree,V),v(w.ltree,V,b),m(w.dtree,J),v(w.dtree,J,j)}for(;;){var R=b[y(o,$)&B];$+=15&R;var E=R>>>4;if(!(E>>>8))i[I++]=E;else{if(E==256)break;var D=I+E-254;if(E>264){var W=w.ldef[E-257];D=I+(W>>>3)+p(o,$,7&W),$+=7&W}var F=j[y(o,$)&P];$+=15&F;var M=F>>>4,U=w.ddef[M],te=(U>>>4)+h(o,$,15&U);for($+=15&U,N&&(i=r.F._check(i,I+(1<<17)));I<D;)i[I]=i[I++-te],i[I]=i[I++-te],i[I]=i[I++-te],i[I]=i[I++-te];I=D}}}else{(7&$)!=0&&($+=8-(7&$));var Q=4+($>>>3),ee=o[Q-4]|o[Q-3]<<8;N&&(i=r.F._check(i,I+ee)),i.set(new c(o.buffer,o.byteOffset+Q,ee),I),$=Q+ee<<3,I+=ee}return i.length==I?i:i.slice(0,I)},r.F._check=function(o,i){var c=o.length;if(i<=c)return o;var u=new Uint8Array(Math.max(c<<1,i));return u.set(o,0),u},r.F._decodeTiny=function(o,i,c,u,h,p){for(var f=r.F._bitsE,m=r.F._get17,v=0;v<c;){var y=o[m(u,h)&i];h+=15&y;var w=y>>>4;if(w<=15)p[v]=w,v++;else{var N=0,b=0;w==16?(b=3+f(u,h,2),h+=2,N=p[v-1]):w==17?(b=3+f(u,h,3),h+=3):w==18&&(b=11+f(u,h,7),h+=7);for(var j=v+b;v<j;)p[v]=N,v++}}return h},r.F._copyOut=function(o,i,c,u){for(var h=0,p=0,f=u.length>>>1;p<c;){var m=o[p+i];u[p<<1]=0,u[1+(p<<1)]=m,m>h&&(h=m),p++}for(;p<f;)u[p<<1]=0,u[1+(p<<1)]=0,p++;return h},r.F.makeCodes=function(o,i){for(var c,u,h,p,f=r.F.U,m=o.length,v=f.bl_count,y=0;y<=i;y++)v[y]=0;for(y=1;y<m;y+=2)v[o[y]]++;var w=f.next_code;for(c=0,v[0]=0,u=1;u<=i;u++)c=c+v[u-1]<<1,w[u]=c;for(h=0;h<m;h+=2)(p=o[h+1])!=0&&(o[h]=w[p],w[p]++)},r.F.codes2map=function(o,i,c){for(var u=o.length,h=r.F.U.rev15,p=0;p<u;p+=2)if(o[p+1]!=0)for(var f=p>>1,m=o[p+1],v=f<<4|m,y=i-m,w=o[p]<<y,N=w+(1<<y);w!=N;)c[h[w]>>>15-i]=v,w++},r.F.revCodes=function(o,i){for(var c=r.F.U.rev15,u=15-i,h=0;h<o.length;h+=2){var p=o[h]<<i-o[h+1];o[h]=c[p]>>>u}},r.F._putsE=function(o,i,c){c<<=7&i;var u=i>>>3;o[u]|=c,o[u+1]|=c>>>8},r.F._putsF=function(o,i,c){c<<=7&i;var u=i>>>3;o[u]|=c,o[u+1]|=c>>>8,o[u+2]|=c>>>16},r.F._bitsE=function(o,i,c){return(o[i>>>3]|o[1+(i>>>3)]<<8)>>>(7&i)&(1<<c)-1},r.F._bitsF=function(o,i,c){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16)>>>(7&i)&(1<<c)-1},r.F._get17=function(o,i){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16)>>>(7&i)},r.F._get25=function(o,i){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16|o[3+(i>>>3)]<<24)>>>(7&i)},r.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var o=r.F.U,i=0;i<32768;i++){var c=i;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,o.rev15[i]=(c>>>16|c<<16)>>>17}function u(h,p,f){for(;p--!=0;)h.push(0,f)}for(i=0;i<32;i++)o.ldef[i]=o.of0[i]<<3|o.exb[i],o.ddef[i]=o.df0[i]<<4|o.dxb[i];u(o.fltree,144,8),u(o.fltree,112,9),u(o.fltree,24,7),u(o.fltree,8,8),r.F.makeCodes(o.fltree,9),r.F.codes2map(o.fltree,9,o.flmap),r.F.revCodes(o.fltree,9),u(o.fdtree,32,5),r.F.makeCodes(o.fdtree,5),r.F.codes2map(o.fdtree,5,o.fdmap),r.F.revCodes(o.fdtree,5),u(o.itree,19,0),u(o.ltree,286,0),u(o.dtree,30,0),u(o.ttree,320,0)})()})();var bk=yk({__proto__:null,default:xc},[xc]);const rr=(function(){var e={nextZero(f,m){for(;f[m]!=0;)m++;return m},readUshort:(f,m)=>f[m]<<8|f[m+1],writeUshort(f,m,v){f[m]=v>>8&255,f[m+1]=255&v},readUint:(f,m)=>16777216*f[m]+(f[m+1]<<16|f[m+2]<<8|f[m+3]),writeUint(f,m,v){f[m]=v>>24&255,f[m+1]=v>>16&255,f[m+2]=v>>8&255,f[m+3]=255&v},readASCII(f,m,v){let y="";for(let w=0;w<v;w++)y+=String.fromCharCode(f[m+w]);return y},writeASCII(f,m,v){for(let y=0;y<v.length;y++)f[m+y]=v.charCodeAt(y)},readBytes(f,m,v){const y=[];for(let w=0;w<v;w++)y.push(f[m+w]);return y},pad:f=>f.length<2?`0${f}`:f,readUTF8(f,m,v){let y,w="";for(let N=0;N<v;N++)w+=`%${e.pad(f[m+N].toString(16))}`;try{y=decodeURIComponent(w)}catch{return e.readASCII(f,m,v)}return y}};function t(f,m,v,y){const w=m*v,N=i(y),b=Math.ceil(m*N/8),j=new Uint8Array(4*w),k=new Uint32Array(j.buffer),{ctype:C}=y,{depth:A}=y,L=e.readUshort;if(C==6){const W=w<<2;if(A==8)for(var T=0;T<W;T+=4)j[T]=f[T],j[T+1]=f[T+1],j[T+2]=f[T+2],j[T+3]=f[T+3];if(A==16)for(T=0;T<W;T++)j[T]=f[T<<1]}else if(C==2){const W=y.tabs.tRNS;if(W==null){if(A==8)for(T=0;T<w;T++){var B=3*T;k[T]=255<<24|f[B+2]<<16|f[B+1]<<8|f[B]}if(A==16)for(T=0;T<w;T++)B=6*T,k[T]=255<<24|f[B+4]<<16|f[B+2]<<8|f[B]}else{var P=W[0];const F=W[1],M=W[2];if(A==8)for(T=0;T<w;T++){var I=T<<2;B=3*T,k[T]=255<<24|f[B+2]<<16|f[B+1]<<8|f[B],f[B]==P&&f[B+1]==F&&f[B+2]==M&&(j[I+3]=0)}if(A==16)for(T=0;T<w;T++)I=T<<2,B=6*T,k[T]=255<<24|f[B+4]<<16|f[B+2]<<8|f[B],L(f,B)==P&&L(f,B+2)==F&&L(f,B+4)==M&&(j[I+3]=0)}}else if(C==3){const W=y.tabs.PLTE,F=y.tabs.tRNS,M=F?F.length:0;if(A==1)for(var $=0;$<v;$++){var H=$*b,G=$*m;for(T=0;T<m;T++){I=G+T<<2;var K=3*(V=f[H+(T>>3)]>>7-((7&T)<<0)&1);j[I]=W[K],j[I+1]=W[K+1],j[I+2]=W[K+2],j[I+3]=V<M?F[V]:255}}if(A==2)for($=0;$<v;$++)for(H=$*b,G=$*m,T=0;T<m;T++)I=G+T<<2,K=3*(V=f[H+(T>>2)]>>6-((3&T)<<1)&3),j[I]=W[K],j[I+1]=W[K+1],j[I+2]=W[K+2],j[I+3]=V<M?F[V]:255;if(A==4)for($=0;$<v;$++)for(H=$*b,G=$*m,T=0;T<m;T++)I=G+T<<2,K=3*(V=f[H+(T>>1)]>>4-((1&T)<<2)&15),j[I]=W[K],j[I+1]=W[K+1],j[I+2]=W[K+2],j[I+3]=V<M?F[V]:255;if(A==8)for(T=0;T<w;T++){var V;I=T<<2,K=3*(V=f[T]),j[I]=W[K],j[I+1]=W[K+1],j[I+2]=W[K+2],j[I+3]=V<M?F[V]:255}}else if(C==4){if(A==8)for(T=0;T<w;T++){I=T<<2;var J=f[R=T<<1];j[I]=J,j[I+1]=J,j[I+2]=J,j[I+3]=f[R+1]}if(A==16)for(T=0;T<w;T++){var R;I=T<<2,J=f[R=T<<2],j[I]=J,j[I+1]=J,j[I+2]=J,j[I+3]=f[R+2]}}else if(C==0)for(P=y.tabs.tRNS?y.tabs.tRNS:-1,$=0;$<v;$++){const W=$*b,F=$*m;if(A==1)for(var E=0;E<m;E++){var D=(J=255*(f[W+(E>>>3)]>>>7-(7&E)&1))==255*P?0:255;k[F+E]=D<<24|J<<16|J<<8|J}else if(A==2)for(E=0;E<m;E++)D=(J=85*(f[W+(E>>>2)]>>>6-((3&E)<<1)&3))==85*P?0:255,k[F+E]=D<<24|J<<16|J<<8|J;else if(A==4)for(E=0;E<m;E++)D=(J=17*(f[W+(E>>>1)]>>>4-((1&E)<<2)&15))==17*P?0:255,k[F+E]=D<<24|J<<16|J<<8|J;else if(A==8)for(E=0;E<m;E++)D=(J=f[W+E])==P?0:255,k[F+E]=D<<24|J<<16|J<<8|J;else if(A==16)for(E=0;E<m;E++)J=f[W+(E<<1)],D=L(f,W+(E<<1))==P?0:255,k[F+E]=D<<24|J<<16|J<<8|J}return j}function n(f,m,v,y){const w=i(f),N=Math.ceil(v*w/8),b=new Uint8Array((N+1+f.interlace)*y);return m=f.tabs.CgBI?o(m,b):r(m,b),f.interlace==0?m=c(m,f,0,v,y):f.interlace==1&&(m=(function(k,C){const A=C.width,L=C.height,T=i(C),B=T>>3,P=Math.ceil(A*T/8),I=new Uint8Array(L*P);let $=0;const H=[0,0,4,0,2,0,1],G=[0,4,0,2,0,1,0],K=[8,8,8,4,4,2,2],V=[8,8,4,4,2,2,1];let J=0;for(;J<7;){const E=K[J],D=V[J];let W=0,F=0,M=H[J];for(;M<L;)M+=E,F++;let U=G[J];for(;U<A;)U+=D,W++;const te=Math.ceil(W*T/8);c(k,C,$,W,F);let Q=0,ee=H[J];for(;ee<L;){let ce=G[J],X=$+Q*te<<3;for(;ce<A;){var R;if(T==1&&(R=(R=k[X>>3])>>7-(7&X)&1,I[ee*P+(ce>>3)]|=R<<7-((7&ce)<<0)),T==2&&(R=(R=k[X>>3])>>6-(7&X)&3,I[ee*P+(ce>>2)]|=R<<6-((3&ce)<<1)),T==4&&(R=(R=k[X>>3])>>4-(7&X)&15,I[ee*P+(ce>>1)]|=R<<4-((1&ce)<<2)),T>=8){const ie=ee*P+ce*B;for(let fe=0;fe<B;fe++)I[ie+fe]=k[(X>>3)+fe]}X+=T,ce+=D}Q++,ee+=E}W*F!=0&&($+=F*(1+te)),J+=1}return I})(m,f)),m}function r(f,m){return o(new Uint8Array(f.buffer,2,f.length-6),m)}var o=(function(){const f={H:{}};return f.H.N=function(m,v){const y=Uint8Array;let w,N,b=0,j=0,k=0,C=0,A=0,L=0,T=0,B=0,P=0;if(m[0]==3&&m[1]==0)return v||new y(0);const I=f.H,$=I.b,H=I.e,G=I.R,K=I.n,V=I.A,J=I.Z,R=I.m,E=v==null;for(E&&(v=new y(m.length>>>2<<5));b==0;)if(b=$(m,P,1),j=$(m,P+1,2),P+=3,j!=0){if(E&&(v=f.H.W(v,B+(1<<17))),j==1&&(w=R.J,N=R.h,L=511,T=31),j==2){k=H(m,P,5)+257,C=H(m,P+5,5)+1,A=H(m,P+10,4)+4,P+=14;let W=1;for(var D=0;D<38;D+=2)R.Q[D]=0,R.Q[D+1]=0;for(D=0;D<A;D++){const U=H(m,P+3*D,3);R.Q[1+(R.X[D]<<1)]=U,U>W&&(W=U)}P+=3*A,K(R.Q,W),V(R.Q,W,R.u),w=R.w,N=R.d,P=G(R.u,(1<<W)-1,k+C,m,P,R.v);const F=I.V(R.v,0,k,R.C);L=(1<<F)-1;const M=I.V(R.v,k,C,R.D);T=(1<<M)-1,K(R.C,F),V(R.C,F,w),K(R.D,M),V(R.D,M,N)}for(;;){const W=w[J(m,P)&L];P+=15&W;const F=W>>>4;if(!(F>>>8))v[B++]=F;else{if(F==256)break;{let M=B+F-254;if(F>264){const ce=R.q[F-257];M=B+(ce>>>3)+H(m,P,7&ce),P+=7&ce}const U=N[J(m,P)&T];P+=15&U;const te=U>>>4,Q=R.c[te],ee=(Q>>>4)+$(m,P,15&Q);for(P+=15&Q;B<M;)v[B]=v[B++-ee],v[B]=v[B++-ee],v[B]=v[B++-ee],v[B]=v[B++-ee];B=M}}}}else{(7&P)!=0&&(P+=8-(7&P));const W=4+(P>>>3),F=m[W-4]|m[W-3]<<8;E&&(v=f.H.W(v,B+F)),v.set(new y(m.buffer,m.byteOffset+W,F),B),P=W+F<<3,B+=F}return v.length==B?v:v.slice(0,B)},f.H.W=function(m,v){const y=m.length;if(v<=y)return m;const w=new Uint8Array(y<<1);return w.set(m,0),w},f.H.R=function(m,v,y,w,N,b){const j=f.H.e,k=f.H.Z;let C=0;for(;C<y;){const A=m[k(w,N)&v];N+=15&A;const L=A>>>4;if(L<=15)b[C]=L,C++;else{let T=0,B=0;L==16?(B=3+j(w,N,2),N+=2,T=b[C-1]):L==17?(B=3+j(w,N,3),N+=3):L==18&&(B=11+j(w,N,7),N+=7);const P=C+B;for(;C<P;)b[C]=T,C++}}return N},f.H.V=function(m,v,y,w){let N=0,b=0;const j=w.length>>>1;for(;b<y;){const k=m[b+v];w[b<<1]=0,w[1+(b<<1)]=k,k>N&&(N=k),b++}for(;b<j;)w[b<<1]=0,w[1+(b<<1)]=0,b++;return N},f.H.n=function(m,v){const y=f.H.m,w=m.length;let N,b,j,k;const C=y.j;for(var A=0;A<=v;A++)C[A]=0;for(A=1;A<w;A+=2)C[m[A]]++;const L=y.K;for(N=0,C[0]=0,b=1;b<=v;b++)N=N+C[b-1]<<1,L[b]=N;for(j=0;j<w;j+=2)k=m[j+1],k!=0&&(m[j]=L[k],L[k]++)},f.H.A=function(m,v,y){const w=m.length,N=f.H.m.r;for(let b=0;b<w;b+=2)if(m[b+1]!=0){const j=b>>1,k=m[b+1],C=j<<4|k,A=v-k;let L=m[b]<<A;const T=L+(1<<A);for(;L!=T;)y[N[L]>>>15-v]=C,L++}},f.H.l=function(m,v){const y=f.H.m.r,w=15-v;for(let N=0;N<m.length;N+=2){const b=m[N]<<v-m[N+1];m[N]=y[b]>>>w}},f.H.M=function(m,v,y){y<<=7&v;const w=v>>>3;m[w]|=y,m[w+1]|=y>>>8},f.H.I=function(m,v,y){y<<=7&v;const w=v>>>3;m[w]|=y,m[w+1]|=y>>>8,m[w+2]|=y>>>16},f.H.e=function(m,v,y){return(m[v>>>3]|m[1+(v>>>3)]<<8)>>>(7&v)&(1<<y)-1},f.H.b=function(m,v,y){return(m[v>>>3]|m[1+(v>>>3)]<<8|m[2+(v>>>3)]<<16)>>>(7&v)&(1<<y)-1},f.H.Z=function(m,v){return(m[v>>>3]|m[1+(v>>>3)]<<8|m[2+(v>>>3)]<<16)>>>(7&v)},f.H.i=function(m,v){return(m[v>>>3]|m[1+(v>>>3)]<<8|m[2+(v>>>3)]<<16|m[3+(v>>>3)]<<24)>>>(7&v)},f.H.m=(function(){const m=Uint16Array,v=Uint32Array;return{K:new m(16),j:new m(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new m(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new m(512),_:[],h:new m(32),$:[],w:new m(32768),C:[],v:[],d:new m(32768),D:[],u:new m(512),Q:[],r:new m(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new m(65536),g:new m(32768)}})(),(function(){const m=f.H.m;for(var v=0;v<32768;v++){let w=v;w=(2863311530&w)>>>1|(1431655765&w)<<1,w=(3435973836&w)>>>2|(858993459&w)<<2,w=(4042322160&w)>>>4|(252645135&w)<<4,w=(4278255360&w)>>>8|(16711935&w)<<8,m.r[v]=(w>>>16|w<<16)>>>17}function y(w,N,b){for(;N--!=0;)w.push(0,b)}for(v=0;v<32;v++)m.q[v]=m.S[v]<<3|m.T[v],m.c[v]=m.p[v]<<4|m.z[v];y(m._,144,8),y(m._,112,9),y(m._,24,7),y(m._,8,8),f.H.n(m._,9),f.H.A(m._,9,m.J),f.H.l(m._,9),y(m.$,32,5),f.H.n(m.$,5),f.H.A(m.$,5,m.h),f.H.l(m.$,5),y(m.Q,19,0),y(m.C,286,0),y(m.D,30,0),y(m.v,320,0)})(),f.H.N})();function i(f){return[1,null,3,1,2,null,4][f.ctype]*f.depth}function c(f,m,v,y,w){let N=i(m);const b=Math.ceil(y*N/8);let j,k;N=Math.ceil(N/8);let C=f[v],A=0;if(C>1&&(f[v]=[0,0,1][C-2]),C==3)for(A=N;A<b;A++)f[A+1]=f[A+1]+(f[A+1-N]>>>1)&255;for(let L=0;L<w;L++)if(j=v+L*b,k=j+L+1,C=f[k-1],A=0,C==0)for(;A<b;A++)f[j+A]=f[k+A];else if(C==1){for(;A<N;A++)f[j+A]=f[k+A];for(;A<b;A++)f[j+A]=f[k+A]+f[j+A-N]}else if(C==2)for(;A<b;A++)f[j+A]=f[k+A]+f[j+A-b];else if(C==3){for(;A<N;A++)f[j+A]=f[k+A]+(f[j+A-b]>>>1);for(;A<b;A++)f[j+A]=f[k+A]+(f[j+A-b]+f[j+A-N]>>>1)}else{for(;A<N;A++)f[j+A]=f[k+A]+u(0,f[j+A-b],0);for(;A<b;A++)f[j+A]=f[k+A]+u(f[j+A-N],f[j+A-b],f[j+A-N-b])}return f}function u(f,m,v){const y=f+m-v,w=y-f,N=y-m,b=y-v;return w*w<=N*N&&w*w<=b*b?f:N*N<=b*b?m:v}function h(f,m,v){v.width=e.readUint(f,m),m+=4,v.height=e.readUint(f,m),m+=4,v.depth=f[m],m++,v.ctype=f[m],m++,v.compress=f[m],m++,v.filter=f[m],m++,v.interlace=f[m],m++}function p(f,m,v,y,w,N,b,j,k){const C=Math.min(m,w),A=Math.min(v,N);let L=0,T=0;for(let J=0;J<A;J++)for(let R=0;R<C;R++)if(b>=0&&j>=0?(L=J*m+R<<2,T=(j+J)*w+b+R<<2):(L=(-j+J)*m-b+R<<2,T=J*w+R<<2),k==0)y[T]=f[L],y[T+1]=f[L+1],y[T+2]=f[L+2],y[T+3]=f[L+3];else if(k==1){var B=f[L+3]*.00392156862745098,P=f[L]*B,I=f[L+1]*B,$=f[L+2]*B,H=y[T+3]*(1/255),G=y[T]*H,K=y[T+1]*H,V=y[T+2]*H;const E=1-B,D=B+H*E,W=D==0?0:1/D;y[T+3]=255*D,y[T+0]=(P+G*E)*W,y[T+1]=(I+K*E)*W,y[T+2]=($+V*E)*W}else if(k==2)B=f[L+3],P=f[L],I=f[L+1],$=f[L+2],H=y[T+3],G=y[T],K=y[T+1],V=y[T+2],B==H&&P==G&&I==K&&$==V?(y[T]=0,y[T+1]=0,y[T+2]=0,y[T+3]=0):(y[T]=P,y[T+1]=I,y[T+2]=$,y[T+3]=B);else if(k==3){if(B=f[L+3],P=f[L],I=f[L+1],$=f[L+2],H=y[T+3],G=y[T],K=y[T+1],V=y[T+2],B==H&&P==G&&I==K&&$==V)continue;if(B<220&&H>20)return!1}return!0}return{decode:function(m){const v=new Uint8Array(m);let y=8;const w=e,N=w.readUshort,b=w.readUint,j={tabs:{},frames:[]},k=new Uint8Array(v.length);let C,A=0,L=0;const T=[137,80,78,71,13,10,26,10];for(var B=0;B<8;B++)if(v[B]!=T[B])throw"The input is not a PNG file!";for(;y<v.length;){const J=w.readUint(v,y);y+=4;const R=w.readASCII(v,y,4);if(y+=4,R=="IHDR")h(v,y,j);else if(R=="iCCP"){for(var P=y;v[P]!=0;)P++;w.readASCII(v,y,P-y),v[P+1];const E=v.slice(P+2,y+J);let D=null;try{D=r(E)}catch{D=o(E)}j.tabs[R]=D}else if(R=="CgBI")j.tabs[R]=v.slice(y,y+4);else if(R=="IDAT"){for(B=0;B<J;B++)k[A+B]=v[y+B];A+=J}else if(R=="acTL")j.tabs[R]={num_frames:b(v,y),num_plays:b(v,y+4)},C=new Uint8Array(v.length);else if(R=="fcTL"){L!=0&&((V=j.frames[j.frames.length-1]).data=n(j,C.slice(0,L),V.rect.width,V.rect.height),L=0);const E={x:b(v,y+12),y:b(v,y+16),width:b(v,y+4),height:b(v,y+8)};let D=N(v,y+22);D=N(v,y+20)/(D==0?100:D);const W={rect:E,delay:Math.round(1e3*D),dispose:v[y+24],blend:v[y+25]};j.frames.push(W)}else if(R=="fdAT"){for(B=0;B<J-4;B++)C[L+B]=v[y+B+4];L+=J-4}else if(R=="pHYs")j.tabs[R]=[w.readUint(v,y),w.readUint(v,y+4),v[y+8]];else if(R=="cHRM")for(j.tabs[R]=[],B=0;B<8;B++)j.tabs[R].push(w.readUint(v,y+4*B));else if(R=="tEXt"||R=="zTXt"){j.tabs[R]==null&&(j.tabs[R]={});var I=w.nextZero(v,y),$=w.readASCII(v,y,I-y),H=y+J-I-1;if(R=="tEXt")K=w.readASCII(v,I+1,H);else{var G=r(v.slice(I+2,I+2+H));K=w.readUTF8(G,0,G.length)}j.tabs[R][$]=K}else if(R=="iTXt"){j.tabs[R]==null&&(j.tabs[R]={}),I=0,P=y,I=w.nextZero(v,P),$=w.readASCII(v,P,I-P);const E=v[P=I+1];var K;v[P+1],P+=2,I=w.nextZero(v,P),w.readASCII(v,P,I-P),P=I+1,I=w.nextZero(v,P),w.readUTF8(v,P,I-P),H=J-((P=I+1)-y),E==0?K=w.readUTF8(v,P,H):(G=r(v.slice(P,P+H)),K=w.readUTF8(G,0,G.length)),j.tabs[R][$]=K}else if(R=="PLTE")j.tabs[R]=w.readBytes(v,y,J);else if(R=="hIST"){const E=j.tabs.PLTE.length/3;for(j.tabs[R]=[],B=0;B<E;B++)j.tabs[R].push(N(v,y+2*B))}else if(R=="tRNS")j.ctype==3?j.tabs[R]=w.readBytes(v,y,J):j.ctype==0?j.tabs[R]=N(v,y):j.ctype==2&&(j.tabs[R]=[N(v,y),N(v,y+2),N(v,y+4)]);else if(R=="gAMA")j.tabs[R]=w.readUint(v,y)/1e5;else if(R=="sRGB")j.tabs[R]=v[y];else if(R=="bKGD")j.ctype==0||j.ctype==4?j.tabs[R]=[N(v,y)]:j.ctype==2||j.ctype==6?j.tabs[R]=[N(v,y),N(v,y+2),N(v,y+4)]:j.ctype==3&&(j.tabs[R]=v[y]);else if(R=="IEND")break;y+=J,w.readUint(v,y),y+=4}var V;return L!=0&&((V=j.frames[j.frames.length-1]).data=n(j,C.slice(0,L),V.rect.width,V.rect.height)),j.data=n(j,k,j.width,j.height),delete j.compress,delete j.interlace,delete j.filter,j},toRGBA8:function(m){const v=m.width,y=m.height;if(m.tabs.acTL==null)return[t(m.data,v,y,m).buffer];const w=[];m.frames[0].data==null&&(m.frames[0].data=m.data);const N=v*y*4,b=new Uint8Array(N),j=new Uint8Array(N),k=new Uint8Array(N);for(let A=0;A<m.frames.length;A++){const L=m.frames[A],T=L.rect.x,B=L.rect.y,P=L.rect.width,I=L.rect.height,$=t(L.data,P,I,m);if(A!=0)for(var C=0;C<N;C++)k[C]=b[C];if(L.blend==0?p($,P,I,b,v,y,T,B,0):L.blend==1&&p($,P,I,b,v,y,T,B,1),w.push(b.buffer.slice(0)),L.dispose!=0){if(L.dispose==1)p(j,P,I,b,v,y,T,B,0);else if(L.dispose==2)for(C=0;C<N;C++)b[C]=k[C]}}return w},_paeth:u,_copyTile:p,_bin:e}})();(function(){const{_copyTile:e}=rr,{_bin:t}=rr,n=rr._paeth;var r={table:(function(){const P=new Uint32Array(256);for(let I=0;I<256;I++){let $=I;for(let H=0;H<8;H++)1&$?$=3988292384^$>>>1:$>>>=1;P[I]=$}return P})(),update(P,I,$,H){for(let G=0;G<H;G++)P=r.table[255&(P^I[$+G])]^P>>>8;return P},crc:(P,I,$)=>4294967295^r.update(4294967295,P,I,$)};function o(P,I,$,H){I[$]+=P[0]*H>>4,I[$+1]+=P[1]*H>>4,I[$+2]+=P[2]*H>>4,I[$+3]+=P[3]*H>>4}function i(P){return Math.max(0,Math.min(255,P))}function c(P,I){const $=P[0]-I[0],H=P[1]-I[1],G=P[2]-I[2],K=P[3]-I[3];return $*$+H*H+G*G+K*K}function u(P,I,$,H,G,K,V){V==null&&(V=1);const J=H.length,R=[];for(var E=0;E<J;E++){const ee=H[E];R.push([ee>>>0&255,ee>>>8&255,ee>>>16&255,ee>>>24&255])}for(E=0;E<J;E++){let ee=4294967295;for(var D=0,W=0;W<J;W++){var F=c(R[E],R[W]);W!=E&&F<ee&&(ee=F,D=W)}}const M=new Uint32Array(G.buffer),U=new Int16Array(I*$*4),te=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(E=0;E<te.length;E++)te[E]=255*((te[E]+.5)/16-.5);for(let ee=0;ee<$;ee++)for(let ce=0;ce<I;ce++){var Q;E=4*(ee*I+ce),V!=2?Q=[i(P[E]+U[E]),i(P[E+1]+U[E+1]),i(P[E+2]+U[E+2]),i(P[E+3]+U[E+3])]:(F=te[4*(3&ee)+(3&ce)],Q=[i(P[E]+F),i(P[E+1]+F),i(P[E+2]+F),i(P[E+3]+F)]),D=0;let X=16777215;for(W=0;W<J;W++){const se=c(Q,R[W]);se<X&&(X=se,D=W)}const ie=R[D],fe=[Q[0]-ie[0],Q[1]-ie[1],Q[2]-ie[2],Q[3]-ie[3]];V==1&&(ce!=I-1&&o(fe,U,E+4,7),ee!=$-1&&(ce!=0&&o(fe,U,E+4*I-4,3),o(fe,U,E+4*I,5),ce!=I-1&&o(fe,U,E+4*I+4,1))),K[E>>2]=D,M[E>>2]=H[D]}}function h(P,I,$,H,G){G==null&&(G={});const{crc:K}=r,V=t.writeUint,J=t.writeUshort,R=t.writeASCII;let E=8;const D=P.frames.length>1;let W,F=!1,M=33+(D?20:0);if(G.sRGB!=null&&(M+=13),G.pHYs!=null&&(M+=21),G.iCCP!=null&&(W=pako.deflate(G.iCCP),M+=21+W.length+4),P.ctype==3){for(var U=P.plte.length,te=0;te<U;te++)P.plte[te]>>>24!=255&&(F=!0);M+=8+3*U+4+(F?8+1*U+4:0)}for(var Q=0;Q<P.frames.length;Q++)D&&(M+=38),M+=(ie=P.frames[Q]).cimg.length+12,Q!=0&&(M+=4);M+=12;const ee=new Uint8Array(M),ce=[137,80,78,71,13,10,26,10];for(te=0;te<8;te++)ee[te]=ce[te];if(V(ee,E,13),E+=4,R(ee,E,"IHDR"),E+=4,V(ee,E,I),E+=4,V(ee,E,$),E+=4,ee[E]=P.depth,E++,ee[E]=P.ctype,E++,ee[E]=0,E++,ee[E]=0,E++,ee[E]=0,E++,V(ee,E,K(ee,E-17,17)),E+=4,G.sRGB!=null&&(V(ee,E,1),E+=4,R(ee,E,"sRGB"),E+=4,ee[E]=G.sRGB,E++,V(ee,E,K(ee,E-5,5)),E+=4),G.iCCP!=null){const fe=13+W.length;V(ee,E,fe),E+=4,R(ee,E,"iCCP"),E+=4,R(ee,E,"ICC profile"),E+=11,E+=2,ee.set(W,E),E+=W.length,V(ee,E,K(ee,E-(fe+4),fe+4)),E+=4}if(G.pHYs!=null&&(V(ee,E,9),E+=4,R(ee,E,"pHYs"),E+=4,V(ee,E,G.pHYs[0]),E+=4,V(ee,E,G.pHYs[1]),E+=4,ee[E]=G.pHYs[2],E++,V(ee,E,K(ee,E-13,13)),E+=4),D&&(V(ee,E,8),E+=4,R(ee,E,"acTL"),E+=4,V(ee,E,P.frames.length),E+=4,V(ee,E,G.loop!=null?G.loop:0),E+=4,V(ee,E,K(ee,E-12,12)),E+=4),P.ctype==3){for(V(ee,E,3*(U=P.plte.length)),E+=4,R(ee,E,"PLTE"),E+=4,te=0;te<U;te++){const fe=3*te,se=P.plte[te],he=255&se,Ee=se>>>8&255,Se=se>>>16&255;ee[E+fe+0]=he,ee[E+fe+1]=Ee,ee[E+fe+2]=Se}if(E+=3*U,V(ee,E,K(ee,E-3*U-4,3*U+4)),E+=4,F){for(V(ee,E,U),E+=4,R(ee,E,"tRNS"),E+=4,te=0;te<U;te++)ee[E+te]=P.plte[te]>>>24&255;E+=U,V(ee,E,K(ee,E-U-4,U+4)),E+=4}}let X=0;for(Q=0;Q<P.frames.length;Q++){var ie=P.frames[Q];D&&(V(ee,E,26),E+=4,R(ee,E,"fcTL"),E+=4,V(ee,E,X++),E+=4,V(ee,E,ie.rect.width),E+=4,V(ee,E,ie.rect.height),E+=4,V(ee,E,ie.rect.x),E+=4,V(ee,E,ie.rect.y),E+=4,J(ee,E,H[Q]),E+=2,J(ee,E,1e3),E+=2,ee[E]=ie.dispose,E++,ee[E]=ie.blend,E++,V(ee,E,K(ee,E-30,30)),E+=4);const fe=ie.cimg;V(ee,E,(U=fe.length)+(Q==0?0:4)),E+=4;const se=E;R(ee,E,Q==0?"IDAT":"fdAT"),E+=4,Q!=0&&(V(ee,E,X++),E+=4),ee.set(fe,E),E+=U,V(ee,E,K(ee,se,E-se)),E+=4}return V(ee,E,0),E+=4,R(ee,E,"IEND"),E+=4,V(ee,E,K(ee,E-4,4)),E+=4,ee.buffer}function p(P,I,$){for(let H=0;H<P.frames.length;H++){const G=P.frames[H];G.rect.width;const K=G.rect.height,V=new Uint8Array(K*G.bpl+K);G.cimg=y(G.img,K,G.bpp,G.bpl,V,I,$)}}function f(P,I,$,H,G){const K=G[0],V=G[1],J=G[2],R=G[3],E=G[4],D=G[5];let W=6,F=8,M=255;for(var U=0;U<P.length;U++){const ye=new Uint8Array(P[U]);for(var te=ye.length,Q=0;Q<te;Q+=4)M&=ye[Q+3]}const ee=M!=255,ce=(function(_e,pe,me,Te,Je,Ue){const ke=[];for(var He=0;He<_e.length;He++){const Ge=new Uint8Array(_e[He]),_t=new Uint32Array(Ge.buffer);var tt;let q=0,re=0,je=pe,Re=me,qe=Te?1:0;if(He!=0){const Le=Ue||Te||He==1||ke[He-2].dispose!=0?1:2;let Xe=0,Oe=1e9;for(let lt=0;lt<Le;lt++){var yt=new Uint8Array(_e[He-1-lt]);const Dt=new Uint32Array(_e[He-1-lt]);let wt=pe,Mt=me,ze=-1,ft=-1;for(let Nt=0;Nt<me;Nt++)for(let Wt=0;Wt<pe;Wt++)_t[Pe=Nt*pe+Wt]!=Dt[Pe]&&(Wt<wt&&(wt=Wt),Wt>ze&&(ze=Wt),Nt<Mt&&(Mt=Nt),Nt>ft&&(ft=Nt));ze==-1&&(wt=Mt=ze=ft=0),Je&&((1&wt)==1&&wt--,(1&Mt)==1&&Mt--);const xt=(ze-wt+1)*(ft-Mt+1);xt<Oe&&(Oe=xt,Xe=lt,q=wt,re=Mt,je=ze-wt+1,Re=ft-Mt+1)}yt=new Uint8Array(_e[He-1-Xe]),Xe==1&&(ke[He-1].dispose=2),tt=new Uint8Array(je*Re*4),e(yt,pe,me,tt,je,Re,-q,-re,0),qe=e(Ge,pe,me,tt,je,Re,-q,-re,3)?1:0,qe==1?v(Ge,pe,me,tt,{x:q,y:re,width:je,height:Re}):e(Ge,pe,me,tt,je,Re,-q,-re,0)}else tt=Ge.slice(0);ke.push({rect:{x:q,y:re,width:je,height:Re},img:tt,blend:qe,dispose:0})}if(Te)for(He=0;He<ke.length;He++){if((dt=ke[He]).blend==1)continue;const Ge=dt.rect,_t=ke[He-1].rect,q=Math.min(Ge.x,_t.x),re=Math.min(Ge.y,_t.y),je={x:q,y:re,width:Math.max(Ge.x+Ge.width,_t.x+_t.width)-q,height:Math.max(Ge.y+Ge.height,_t.y+_t.height)-re};ke[He-1].dispose=1,He-1!=0&&m(_e,pe,me,ke,He-1,je,Je),m(_e,pe,me,ke,He,je,Je)}let Ct=0;if(_e.length!=1)for(var Pe=0;Pe<ke.length;Pe++){var dt;Ct+=(dt=ke[Pe]).rect.width*dt.rect.height}return ke})(P,I,$,K,V,J),X={},ie=[],fe=[];if(H!=0){const ye=[];for(Q=0;Q<ce.length;Q++)ye.push(ce[Q].img.buffer);const _e=(function(Je){let Ue=0;for(var ke=0;ke<Je.length;ke++)Ue+=Je[ke].byteLength;const He=new Uint8Array(Ue);let tt=0;for(ke=0;ke<Je.length;ke++){const yt=new Uint8Array(Je[ke]),Ct=yt.length;for(let Pe=0;Pe<Ct;Pe+=4){let dt=yt[Pe],Ge=yt[Pe+1],_t=yt[Pe+2];const q=yt[Pe+3];q==0&&(dt=Ge=_t=0),He[tt+Pe]=dt,He[tt+Pe+1]=Ge,He[tt+Pe+2]=_t,He[tt+Pe+3]=q}tt+=Ct}return He.buffer})(ye),pe=N(_e,H);for(Q=0;Q<pe.plte.length;Q++)ie.push(pe.plte[Q].est.rgba);let me=0;for(Q=0;Q<ce.length;Q++){const Te=(he=ce[Q]).img.length;var se=new Uint8Array(pe.inds.buffer,me>>2,Te>>2);fe.push(se);const Je=new Uint8Array(pe.abuf,me,Te);D&&u(he.img,he.rect.width,he.rect.height,ie,Je,se),he.img.set(Je),me+=Te}}else for(U=0;U<ce.length;U++){var he=ce[U];const ye=new Uint32Array(he.img.buffer);var Ee=he.rect.width;for(te=ye.length,se=new Uint8Array(te),fe.push(se),Q=0;Q<te;Q++){const _e=ye[Q];if(Q!=0&&_e==ye[Q-1])se[Q]=se[Q-1];else if(Q>Ee&&_e==ye[Q-Ee])se[Q]=se[Q-Ee];else{let pe=X[_e];if(pe==null&&(X[_e]=pe=ie.length,ie.push(_e),ie.length>=300))break;se[Q]=pe}}}const Se=ie.length;for(Se<=256&&E==0&&(F=Se<=2?1:Se<=4?2:Se<=16?4:8,F=Math.max(F,R)),U=0;U<ce.length;U++){(he=ce[U]).rect.x,he.rect.y,Ee=he.rect.width;const ye=he.rect.height;let _e=he.img;new Uint32Array(_e.buffer);let pe=4*Ee,me=4;if(Se<=256&&E==0){pe=Math.ceil(F*Ee/8);var z=new Uint8Array(pe*ye);const Te=fe[U];for(let Je=0;Je<ye;Je++){Q=Je*pe;const Ue=Je*Ee;if(F==8)for(var de=0;de<Ee;de++)z[Q+de]=Te[Ue+de];else if(F==4)for(de=0;de<Ee;de++)z[Q+(de>>1)]|=Te[Ue+de]<<4-4*(1&de);else if(F==2)for(de=0;de<Ee;de++)z[Q+(de>>2)]|=Te[Ue+de]<<6-2*(3&de);else if(F==1)for(de=0;de<Ee;de++)z[Q+(de>>3)]|=Te[Ue+de]<<7-1*(7&de)}_e=z,W=3,me=1}else if(ee==0&&ce.length==1){z=new Uint8Array(Ee*ye*3);const Te=Ee*ye;for(Q=0;Q<Te;Q++){const Je=3*Q,Ue=4*Q;z[Je]=_e[Ue],z[Je+1]=_e[Ue+1],z[Je+2]=_e[Ue+2]}_e=z,W=2,me=3,pe=3*Ee}he.img=_e,he.bpl=pe,he.bpp=me}return{ctype:W,depth:F,plte:ie,frames:ce}}function m(P,I,$,H,G,K,V){const J=Uint8Array,R=Uint32Array,E=new J(P[G-1]),D=new R(P[G-1]),W=G+1<P.length?new J(P[G+1]):null,F=new J(P[G]),M=new R(F.buffer);let U=I,te=$,Q=-1,ee=-1;for(let X=0;X<K.height;X++)for(let ie=0;ie<K.width;ie++){const fe=K.x+ie,se=K.y+X,he=se*I+fe,Ee=M[he];Ee==0||H[G-1].dispose==0&&D[he]==Ee&&(W==null||W[4*he+3]!=0)||(fe<U&&(U=fe),fe>Q&&(Q=fe),se<te&&(te=se),se>ee&&(ee=se))}Q==-1&&(U=te=Q=ee=0),V&&((1&U)==1&&U--,(1&te)==1&&te--),K={x:U,y:te,width:Q-U+1,height:ee-te+1};const ce=H[G];ce.rect=K,ce.blend=1,ce.img=new Uint8Array(K.width*K.height*4),H[G-1].dispose==0?(e(E,I,$,ce.img,K.width,K.height,-K.x,-K.y,0),v(F,I,$,ce.img,K)):e(F,I,$,ce.img,K.width,K.height,-K.x,-K.y,0)}function v(P,I,$,H,G){e(P,I,$,H,G.width,G.height,-G.x,-G.y,2)}function y(P,I,$,H,G,K,V){const J=[];let R,E=[0,1,2,3,4];K!=-1?E=[K]:(I*H>5e5||$==1)&&(E=[0]),V&&(R={level:0});const D=bk;for(var W=0;W<E.length;W++){for(let U=0;U<I;U++)w(G,P,U,H,$,E[W]);J.push(D.deflate(G,R))}let F,M=1e9;for(W=0;W<J.length;W++)J[W].length<M&&(F=W,M=J[W].length);return J[F]}function w(P,I,$,H,G,K){const V=$*H;let J=V+$;if(P[J]=K,J++,K==0)if(H<500)for(var R=0;R<H;R++)P[J+R]=I[V+R];else P.set(new Uint8Array(I.buffer,V,H),J);else if(K==1){for(R=0;R<G;R++)P[J+R]=I[V+R];for(R=G;R<H;R++)P[J+R]=I[V+R]-I[V+R-G]+256&255}else if($==0){for(R=0;R<G;R++)P[J+R]=I[V+R];if(K==2)for(R=G;R<H;R++)P[J+R]=I[V+R];if(K==3)for(R=G;R<H;R++)P[J+R]=I[V+R]-(I[V+R-G]>>1)+256&255;if(K==4)for(R=G;R<H;R++)P[J+R]=I[V+R]-n(I[V+R-G],0,0)+256&255}else{if(K==2)for(R=0;R<H;R++)P[J+R]=I[V+R]+256-I[V+R-H]&255;if(K==3){for(R=0;R<G;R++)P[J+R]=I[V+R]+256-(I[V+R-H]>>1)&255;for(R=G;R<H;R++)P[J+R]=I[V+R]+256-(I[V+R-H]+I[V+R-G]>>1)&255}if(K==4){for(R=0;R<G;R++)P[J+R]=I[V+R]+256-n(0,I[V+R-H],0)&255;for(R=G;R<H;R++)P[J+R]=I[V+R]+256-n(I[V+R-G],I[V+R-H],I[V+R-G-H])&255}}}function N(P,I){const $=new Uint8Array(P),H=$.slice(0),G=new Uint32Array(H.buffer),K=b(H,I),V=K[0],J=K[1],R=$.length,E=new Uint8Array(R>>2);let D;if($.length<2e7)for(var W=0;W<R;W+=4)D=j(V,F=$[W]*(1/255),M=$[W+1]*(1/255),U=$[W+2]*(1/255),te=$[W+3]*(1/255)),E[W>>2]=D.ind,G[W>>2]=D.est.rgba;else for(W=0;W<R;W+=4){var F=$[W]*.00392156862745098,M=$[W+1]*(1/255),U=$[W+2]*(1/255),te=$[W+3]*(1/255);for(D=V;D.left;)D=k(D.est,F,M,U,te)<=0?D.left:D.right;E[W>>2]=D.ind,G[W>>2]=D.est.rgba}return{abuf:H.buffer,inds:E,plte:J}}function b(P,I,$){$==null&&($=1e-4);const H=new Uint32Array(P.buffer),G={i0:0,i1:P.length,bst:null,est:null,tdst:0,left:null,right:null};G.bst=L(P,G.i0,G.i1),G.est=T(G.bst);const K=[G];for(;K.length<I;){let J=0,R=0;for(var V=0;V<K.length;V++)K[V].est.L>J&&(J=K[V].est.L,R=V);if(J<$)break;const E=K[R],D=C(P,H,E.i0,E.i1,E.est.e,E.est.eMq255);if(E.i0>=D||E.i1<=D){E.est.L=0;continue}const W={i0:E.i0,i1:D,bst:null,est:null,tdst:0,left:null,right:null};W.bst=L(P,W.i0,W.i1),W.est=T(W.bst);const F={i0:D,i1:E.i1,bst:null,est:null,tdst:0,left:null,right:null};for(F.bst={R:[],m:[],N:E.bst.N-W.bst.N},V=0;V<16;V++)F.bst.R[V]=E.bst.R[V]-W.bst.R[V];for(V=0;V<4;V++)F.bst.m[V]=E.bst.m[V]-W.bst.m[V];F.est=T(F.bst),E.left=W,E.right=F,K[R]=W,K.push(F)}for(K.sort(((J,R)=>R.bst.N-J.bst.N)),V=0;V<K.length;V++)K[V].ind=V;return[G,K]}function j(P,I,$,H,G){if(P.left==null)return P.tdst=(function(W,F,M,U,te){const Q=F-W[0],ee=M-W[1],ce=U-W[2],X=te-W[3];return Q*Q+ee*ee+ce*ce+X*X})(P.est.q,I,$,H,G),P;const K=k(P.est,I,$,H,G);let V=P.left,J=P.right;K>0&&(V=P.right,J=P.left);const R=j(V,I,$,H,G);if(R.tdst<=K*K)return R;const E=j(J,I,$,H,G);return E.tdst<R.tdst?E:R}function k(P,I,$,H,G){const{e:K}=P;return K[0]*I+K[1]*$+K[2]*H+K[3]*G-P.eMq}function C(P,I,$,H,G,K){for(H-=4;$<H;){for(;A(P,$,G)<=K;)$+=4;for(;A(P,H,G)>K;)H-=4;if($>=H)break;const V=I[$>>2];I[$>>2]=I[H>>2],I[H>>2]=V,$+=4,H-=4}for(;A(P,$,G)>K;)$-=4;return $+4}function A(P,I,$){return P[I]*$[0]+P[I+1]*$[1]+P[I+2]*$[2]+P[I+3]*$[3]}function L(P,I,$){const H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G=[0,0,0,0],K=$-I>>2;for(let V=I;V<$;V+=4){const J=P[V]*.00392156862745098,R=P[V+1]*(1/255),E=P[V+2]*(1/255),D=P[V+3]*(1/255);G[0]+=J,G[1]+=R,G[2]+=E,G[3]+=D,H[0]+=J*J,H[1]+=J*R,H[2]+=J*E,H[3]+=J*D,H[5]+=R*R,H[6]+=R*E,H[7]+=R*D,H[10]+=E*E,H[11]+=E*D,H[15]+=D*D}return H[4]=H[1],H[8]=H[2],H[9]=H[6],H[12]=H[3],H[13]=H[7],H[14]=H[11],{R:H,m:G,N:K}}function T(P){const{R:I}=P,{m:$}=P,{N:H}=P,G=$[0],K=$[1],V=$[2],J=$[3],R=H==0?0:1/H,E=[I[0]-G*G*R,I[1]-G*K*R,I[2]-G*V*R,I[3]-G*J*R,I[4]-K*G*R,I[5]-K*K*R,I[6]-K*V*R,I[7]-K*J*R,I[8]-V*G*R,I[9]-V*K*R,I[10]-V*V*R,I[11]-V*J*R,I[12]-J*G*R,I[13]-J*K*R,I[14]-J*V*R,I[15]-J*J*R],D=E,W=B;let F=[Math.random(),Math.random(),Math.random(),Math.random()],M=0,U=0;if(H!=0)for(let Q=0;Q<16&&(F=W.multVec(D,F),U=Math.sqrt(W.dot(F,F)),F=W.sml(1/U,F),!(Q!=0&&Math.abs(U-M)<1e-9));Q++)M=U;const te=[G*R,K*R,V*R,J*R];return{Cov:E,q:te,e:F,L:M,eMq255:W.dot(W.sml(255,te),F),eMq:W.dot(F,te),rgba:(Math.round(255*te[3])<<24|Math.round(255*te[2])<<16|Math.round(255*te[1])<<8|Math.round(255*te[0])<<0)>>>0}}var B={multVec:(P,I)=>[P[0]*I[0]+P[1]*I[1]+P[2]*I[2]+P[3]*I[3],P[4]*I[0]+P[5]*I[1]+P[6]*I[2]+P[7]*I[3],P[8]*I[0]+P[9]*I[1]+P[10]*I[2]+P[11]*I[3],P[12]*I[0]+P[13]*I[1]+P[14]*I[2]+P[15]*I[3]],dot:(P,I)=>P[0]*I[0]+P[1]*I[1]+P[2]*I[2]+P[3]*I[3],sml:(P,I)=>[P*I[0],P*I[1],P*I[2],P*I[3]]};rr.encode=function(I,$,H,G,K,V,J){G==null&&(G=0),J==null&&(J=!1);const R=f(I,$,H,G,[!1,!1,!1,0,J,!1]);return p(R,-1),h(R,$,H,K,V)},rr.encodeLL=function(I,$,H,G,K,V,J,R){const E={ctype:0+(G==1?0:2)+(K==0?0:4),depth:V,frames:[]},D=(G+K)*V,W=D*$;for(let F=0;F<I.length;F++)E.frames.push({rect:{x:0,y:0,width:$,height:H},img:new Uint8Array(I[F]),blend:0,dispose:1,bpp:Math.ceil(D/8),bpl:Math.ceil(W/8)});return p(E,0,!0),h(E,$,H,J,R)},rr.encode.compress=f,rr.encode.dither=u,rr.quantize=N,rr.quantize.getKDtree=b,rr.quantize.getNearest=j})();const s0={toArrayBuffer(e,t){const n=e.width,r=e.height,o=n<<2,i=e.getContext("2d").getImageData(0,0,n,r),c=new Uint32Array(i.data.buffer),u=(32*n+31)/32<<2,h=u*r,p=122+h,f=new ArrayBuffer(p),m=new DataView(f),v=1<<20;let y,w,N,b,j=v,k=0,C=0,A=0;function L(P){m.setUint16(C,P,!0),C+=2}function T(P){m.setUint32(C,P,!0),C+=4}function B(P){C+=P}L(19778),T(p),B(4),T(122),T(108),T(n),T(-r>>>0),L(1),L(32),T(3),T(h),T(2835),T(2835),B(8),T(16711680),T(65280),T(255),T(4278190080),T(1466527264),(function P(){for(;k<r&&j>0;){for(b=122+k*u,y=0;y<o;)j--,w=c[A++],N=w>>>24,m.setUint32(b+y,w<<8|N),y+=4;k++}A<c.length?(j=v,setTimeout(P,s0._dly)):t(f)})()},toBlob(e,t){this.toArrayBuffer(e,(n=>{t(new Blob([n],{type:"image/bmp"}))}))},_dly:9};var kn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},_k={[kn.CHROME]:16384,[kn.FIREFOX]:11180,[kn.DESKTOP_SAFARI]:16384,[kn.IE]:8192,[kn.IOS]:4096,[kn.ETC]:8192};const Ph=typeof window<"u",o0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,wc=Ph&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Nk=(Ph||o0)&&(wc&&wc.getOriginalSymbol(window,"File")||typeof File<"u"&&File),a0=(Ph||o0)&&(wc&&wc.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Rh(e,t,n=Date.now()){return new Promise((r=>{const o=e.split(","),i=o[0].match(/:(.*?);/)[1],c=globalThis.atob(o[1]);let u=c.length;const h=new Uint8Array(u);for(;u--;)h[u]=c.charCodeAt(u);const p=new Blob([h],{type:i});p.name=t,p.lastModified=n,r(p)}))}function i0(e){return new Promise(((t,n)=>{const r=new a0;r.onload=()=>t(r.result),r.onerror=o=>n(o),r.readAsDataURL(e)}))}function l0(e){return new Promise(((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=o=>n(o),r.src=e}))}function so(){if(so.cachedResult!==void 0)return so.cachedResult;let e=kn.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=kn.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=kn.IOS:/Safari/i.test(t)?e=kn.DESKTOP_SAFARI:/Firefox/i.test(t)?e=kn.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=kn.IE),so.cachedResult=e,so.cachedResult}function c0(e,t){const n=so(),r=_k[n];let o=e,i=t,c=o*i;const u=o>i?i/o:o/i;for(;c>r*r;){const h=(r+o)/2,p=(r+i)/2;h<p?(i=p,o=p*u):(i=h*u,o=h),c=o*i}return{width:o,height:i}}function $c(e,t){let n,r;try{if(n=new OffscreenCanvas(e,t),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=e,n.height=t,[n,r]}function u0(e,t){const{width:n,height:r}=c0(e.width,e.height),[o,i]=$c(n,r);return t&&/jpe?g/.test(t)&&(i.fillStyle="white",i.fillRect(0,0,o.width,o.height)),i.drawImage(e,0,0,o.width,o.height),o}function ic(){return ic.cachedResult!==void 0||(ic.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),ic.cachedResult}function bc(e,t={}){return new Promise((function(n,r){let o,i;var c=function(){try{return i=u0(o,t.fileType||e.type),n([o,i])}catch(h){return r(h)}},u=function(h){try{var p=function(f){try{throw f}catch(m){return r(m)}};try{let f;return i0(e).then((function(m){try{return f=m,l0(f).then((function(v){try{return o=v,(function(){try{return c()}catch(y){return r(y)}})()}catch(y){return p(y)}}),p)}catch(v){return p(v)}}),p)}catch(f){p(f)}}catch(f){return r(f)}};try{if(ic()||[kn.DESKTOP_SAFARI,kn.MOBILE_SAFARI].includes(so()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(h){try{return o=h,c()}catch{return u()}}),u)}catch{u()}}))}function _c(e,t,n,r,o=1){return new Promise((function(i,c){let u;if(t==="image/png"){let p,f,m;return p=e.getContext("2d"),{data:f}=p.getImageData(0,0,e.width,e.height),m=rr.encode([f.buffer],e.width,e.height,4096*o),u=new Blob([m],{type:t}),u.name=n,u.lastModified=r,h.call(this)}{let p=function(){return h.call(this)};if(t==="image/bmp")return new Promise((f=>s0.toBlob(e,f))).then(function(f){try{return u=f,u.name=n,u.lastModified=r,p.call(this)}catch(m){return c(m)}}.bind(this),c);{let f=function(){return p.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:o}).then(function(m){try{return u=m,u.name=n,u.lastModified=r,f.call(this)}catch(v){return c(v)}}.bind(this),c);{let m;return m=e.toDataURL(t,o),Rh(m,n,r).then(function(v){try{return u=v,f.call(this)}catch(y){return c(y)}}.bind(this),c)}}}function h(){return i(u)}}))}function wr(e){e.width=0,e.height=0}function sa(){return new Promise((function(e,t){let n,r,o,i;return sa.cachedResult!==void 0?e(sa.cachedResult):Rh("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return n=c,bc(n).then((function(u){try{return r=u[1],_c(r,n.type,n.name,n.lastModified).then((function(h){try{return o=h,wr(r),bc(o).then((function(p){try{return i=p[0],sa.cachedResult=i.width===1&&i.height===2,e(sa.cachedResult)}catch(f){return t(f)}}),t)}catch(p){return t(p)}}),t)}catch(h){return t(h)}}),t)}catch(u){return t(u)}}),t)}))}function d0(e){return new Promise(((t,n)=>{const r=new a0;r.onload=o=>{const i=new DataView(o.target.result);if(i.getUint16(0,!1)!=65496)return t(-2);const c=i.byteLength;let u=2;for(;u<c;){if(i.getUint16(u+2,!1)<=8)return t(-1);const h=i.getUint16(u,!1);if(u+=2,h==65505){if(i.getUint32(u+=2,!1)!=1165519206)return t(-1);const p=i.getUint16(u+=6,!1)==18761;u+=i.getUint32(u+4,p);const f=i.getUint16(u,p);u+=2;for(let m=0;m<f;m++)if(i.getUint16(u+12*m,p)==274)return t(i.getUint16(u+12*m+8,p))}else{if((65280&h)!=65280)break;u+=i.getUint16(u,!1)}}return t(-1)},r.onerror=o=>n(o),r.readAsArrayBuffer(e)}))}function f0(e,t){const{width:n}=e,{height:r}=e,{maxWidthOrHeight:o}=t;let i,c=e;return isFinite(o)&&(n>o||r>o)&&([c,i]=$c(n,r),n>r?(c.width=o,c.height=r/n*o):(c.width=n/r*o,c.height=o),i.drawImage(e,0,0,c.width,c.height),wr(e)),c}function h0(e,t){const{width:n}=e,{height:r}=e,[o,i]=$c(n,r);switch(t>4&&t<9?(o.width=r,o.height=n):(o.width=n,o.height=r),t){case 2:i.transform(-1,0,0,1,n,0);break;case 3:i.transform(-1,0,0,-1,n,r);break;case 4:i.transform(1,0,0,-1,0,r);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,r,0);break;case 7:i.transform(0,-1,-1,0,r,n);break;case 8:i.transform(0,-1,1,0,0,n)}return i.drawImage(e,0,0,n,r),wr(e),o}function Yv(e,t,n=0){return new Promise((function(r,o){let i,c,u,h,p,f,m,v,y,w,N,b,j,k,C,A,L,T,B,P;function I(H=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;i+=H,t.onProgress(Math.min(i,100))}function $(H){if(t.signal&&t.signal.aborted)throw t.signal.reason;i=Math.min(Math.max(H,i),100),t.onProgress(i)}return i=n,c=t.maxIteration||10,u=1024*t.maxSizeMB*1024,I(),bc(e,t).then(function(H){try{return[,h]=H,I(),p=f0(h,t),I(),new Promise((function(G,K){var V;if(!(V=t.exifOrientation))return d0(e).then(function(R){try{return V=R,J.call(this)}catch(E){return K(E)}}.bind(this),K);function J(){return G(V)}return J.call(this)})).then(function(G){try{return f=G,I(),sa().then(function(K){try{return m=K?p:h0(p,f),I(),v=t.initialQuality||1,y=t.fileType||e.type,_c(m,y,e.name,e.lastModified,v).then(function(V){try{{let R=function(){if(c--&&(C>u||C>j)){let D,W;return D=P?.95*B.width:B.width,W=P?.95*B.height:B.height,[L,T]=$c(D,W),T.drawImage(B,0,0,D,W),v*=y==="image/png"?.85:.95,_c(L,y,e.name,e.lastModified,v).then((function(F){try{return A=F,wr(B),B=L,C=A.size,$(Math.min(99,Math.floor((k-C)/(k-u)*100))),R}catch(M){return o(M)}}),o)}return[1]},E=function(){return wr(B),wr(L),wr(p),wr(m),wr(h),$(100),r(A)};if(w=V,I(),N=w.size>u,b=w.size>e.size,!N&&!b)return $(100),r(w);var J;return j=e.size,k=w.size,C=k,B=m,P=!t.alwaysKeepResolution&&N,(J=function(D){for(;D;){if(D.then)return void D.then(J,o);try{if(D.pop){if(D.length)return D.pop()?E.call(this):D;D=R}else D=D.call(this)}catch(W){return o(W)}}}.bind(this))(R)}}catch(R){return o(R)}}.bind(this),o)}catch(V){return o(V)}}.bind(this),o)}catch(K){return o(K)}}.bind(this),o)}catch(G){return o(G)}}.bind(this),o)}))}const Sk=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let lf;function jk(e,t){return new Promise(((n,r)=>{lf||(lf=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(Sk));const o=new Worker(lf);o.addEventListener("message",(function(c){if(t.signal&&t.signal.aborted)o.terminate();else if(c.data.progress===void 0){if(c.data.error)return r(new Error(c.data.error)),void o.terminate();n(c.data.file),o.terminate()}else t.onProgress(c.data.progress)})),o.addEventListener("error",r),t.signal&&t.signal.addEventListener("abort",(()=>{r(t.signal.reason),o.terminate()})),o.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function hn(e,t){return new Promise((function(n,r){let o,i,c,u,h,p;if(o={...t},c=0,{onProgress:u}=o,o.maxSizeMB=o.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof o.useWebWorker!="boolean"||o.useWebWorker,delete o.useWebWorker,o.onProgress=y=>{c=y,typeof u=="function"&&u(c)},!(e instanceof Blob||e instanceof Nk))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return r(new Error("The file given is not an image"));if(p=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||p)return Yv(e,o).then(function(y){try{return i=y,v.call(this)}catch(w){return r(w)}}.bind(this),r);var f=function(){try{return v.call(this)}catch(y){return r(y)}}.bind(this),m=function(y){try{return Yv(e,o).then((function(w){try{return i=w,f()}catch(N){return r(N)}}),r)}catch(w){return r(w)}};try{return o.libURL=o.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",jk(e,o).then((function(y){try{return i=y,f()}catch{return m()}}),m)}catch{m()}function v(){try{i.name=e.name,i.lastModified=e.lastModified}catch{}try{o.preserveExif&&e.type==="image/jpeg"&&(!o.fileType||o.fileType&&o.fileType===e.type)&&(i=r0(e,i))}catch{}return n(i)}}))}hn.getDataUrlFromFile=i0,hn.getFilefromDataUrl=Rh,hn.loadImage=l0,hn.drawImageInCanvas=u0,hn.drawFileInCanvas=bc,hn.canvasToFile=_c,hn.getExifOrientation=d0,hn.handleMaxWidthOrHeight=f0,hn.followExifOrientation=h0,hn.cleanupCanvasMemory=wr,hn.isAutoOrientationInBrowser=sa,hn.approximateBelowMaximumCanvasSizeOfBrowser=c0,hn.copyExifWithoutOrientation=r0,hn.getBrowserName=so,hn.version="2.0.2";const Ck=e=>({processFiles:async t=>{const n=[];for(const[r,o]of t.entries()){let i=o;try{i=await hn(i,{maxSizeMB:e.maxSizeMB??1.5,maxWidthOrHeight:1600,useWebWorker:!0})}catch{}const c=`${e.prefix}/${Date.now()}-${r}-${i.name}`,{error:u}=await Ce.storage.from(e.bucket).upload(c,i,{cacheControl:"3600",upsert:!1});if(u)throw u;const{data:{publicUrl:h}}=Ce.storage.from(e.bucket).getPublicUrl(c);n.push(h)}return n},remove:async t=>{const n=t.split(`${e.bucket}/`)[1];n&&await Ce.storage.from(e.bucket).remove([n])}}),kk=({value:e,onChange:t,adapter:n,maxPhotos:r=8,className:o})=>{const i=_.useRef(null),[c,u]=_.useState(!1),h=async f=>{const m=f.target.files;if(m){if(e.length>=r){we.info(`You can only upload up to ${r} photos.`);return}u(!0);try{const v=r-e.length,y=Array.from(m).slice(0,v),w=await n.processFiles(y);w.length>0&&t([...e,...w])}catch(v){console.error(v),we.error("Upload failed. Please try again.")}finally{u(!1),i.current&&(i.current.value="")}}},p=async f=>{const m=e[f];t(e.filter((v,y)=>y!==f));try{n.remove&&await n.remove(m)}catch{console.warn("Failed to remove file:",m)}};return l.jsxs("div",{className:rt("space-y-3",o),children:[l.jsxs(nt,{className:"text-[#2d3d1f]",children:["Upload Photos (max ",r,")"]}),e.length>0&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:e.map((f,m)=>l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:f,alt:`photo ${m}`,className:"w-full h-24 object-cover rounded-lg border border-[#a8b892]"}),l.jsx(ue,{type:"button",size:"sm",variant:"destructive",onClick:()=>p(m),className:"absolute top-1 right-1 w-6 h-6 p-0 opacity-100 md:opacity-0 md:group-hover:opacity-100 bg-red-500 hover:bg-red-600",children:l.jsx(Cs,{className:"w-3 h-3"})})]},m))}),e.length<r&&l.jsxs("div",{className:"border-2 border-dashed border-[#a8b892] rounded-lg p-6 text-center bg-white hover:border-[#556B2F] transition-colors",children:[l.jsx(xh,{className:"w-12 h-12 text-[#556B2F] mx-auto mb-4"}),l.jsxs("p",{className:"text-[#3c4f21] mb-2",children:["Add photos of your homestead and class area",e.length>0&&l.jsxs("span",{className:"block text-sm text-[#556B2F] mt-1",children:[e.length,"/",r," uploaded"]})]}),l.jsxs(ue,{type:"button",className:"bg-[#556B2F] text-[#f8f9f6] hover:bg-[#3c4f21]",disabled:c,onClick:()=>!c&&i.current?.click(),children:[l.jsx(bh,{className:"w-4 h-4 mr-2"}),c?"Uploading...":"Choose Photos"]}),l.jsx("input",{ref:i,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:h})]}),e.length>=r&&l.jsx("div",{className:"p-4 bg-[#f8f9f6] border border-[#a8b892] rounded-lg text-center",children:l.jsxs("p",{className:"text-[#3c4f21]",children:["Maximum of ",r," photos reached"]})})]})};function Kv(e,[t,n]){return Math.min(n,Math.max(t,e))}function m0(e){const t=e+"CollectionProvider",[n,r]=Cr(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=N=>{const{scope:b,children:j}=N,k=be.useRef(null),C=be.useRef(new Map).current;return l.jsx(o,{scope:b,itemMap:C,collectionRef:k,children:j})};c.displayName=t;const u=e+"CollectionSlot",h=oo(u),p=be.forwardRef((N,b)=>{const{scope:j,children:k}=N,C=i(u,j),A=kt(b,C.collectionRef);return l.jsx(h,{ref:A,children:k})});p.displayName=u;const f=e+"CollectionItemSlot",m="data-radix-collection-item",v=oo(f),y=be.forwardRef((N,b)=>{const{scope:j,children:k,...C}=N,A=be.useRef(null),L=kt(b,A),T=i(f,j);return be.useEffect(()=>(T.itemMap.set(A,{ref:A,...C}),()=>void T.itemMap.delete(A))),l.jsx(v,{[m]:"",ref:L,children:k})});y.displayName=f;function w(N){const b=i(e+"CollectionConsumer",N);return be.useCallback(()=>{const k=b.collectionRef.current;if(!k)return[];const C=Array.from(k.querySelectorAll(`[${m}]`));return Array.from(b.itemMap.values()).sort((T,B)=>C.indexOf(T.ref.current)-C.indexOf(B.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:c,Slot:p,ItemSlot:y},w,r]}var Ek=_.createContext(void 0);function Ah(e){const t=_.useContext(Ek);return e||t||"ltr"}function Vr(e){const t=_.useRef(e);return _.useEffect(()=>{t.current=e}),_.useMemo(()=>(...n)=>t.current?.(...n),[])}function Pk(e,t=globalThis?.document){const n=Vr(e);_.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Rk="DismissableLayer",nh="dismissableLayer.update",Ak="dismissableLayer.pointerDownOutside",Tk="dismissableLayer.focusOutside",Qv,p0=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Uc=_.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:c,onDismiss:u,...h}=e,p=_.useContext(p0),[f,m]=_.useState(null),v=f?.ownerDocument??globalThis?.document,[,y]=_.useState({}),w=kt(t,B=>m(B)),N=Array.from(p.layers),[b]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),j=N.indexOf(b),k=f?N.indexOf(f):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,A=k>=j,L=Dk(B=>{const P=B.target,I=[...p.branches].some($=>$.contains(P));!A||I||(o?.(B),c?.(B),B.defaultPrevented||u?.())},v),T=Mk(B=>{const P=B.target;[...p.branches].some($=>$.contains(P))||(i?.(B),c?.(B),B.defaultPrevented||u?.())},v);return Pk(B=>{k===p.layers.size-1&&(r?.(B),!B.defaultPrevented&&u&&(B.preventDefault(),u()))},v),_.useEffect(()=>{if(f)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(Qv=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(f)),p.layers.add(f),Jv(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Qv)}},[f,v,n,p]),_.useEffect(()=>()=>{f&&(p.layers.delete(f),p.layersWithOutsidePointerEventsDisabled.delete(f),Jv())},[f,p]),_.useEffect(()=>{const B=()=>y({});return document.addEventListener(nh,B),()=>document.removeEventListener(nh,B)},[]),l.jsx(ot.div,{...h,ref:w,style:{pointerEvents:C?A?"auto":"none":void 0,...e.style},onFocusCapture:at(e.onFocusCapture,T.onFocusCapture),onBlurCapture:at(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:at(e.onPointerDownCapture,L.onPointerDownCapture)})});Uc.displayName=Rk;var Ik="DismissableLayerBranch",Ok=_.forwardRef((e,t)=>{const n=_.useContext(p0),r=_.useRef(null),o=kt(t,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),l.jsx(ot.div,{...e,ref:o})});Ok.displayName=Ik;function Dk(e,t=globalThis?.document){const n=Vr(e),r=_.useRef(!1),o=_.useRef(()=>{});return _.useEffect(()=>{const i=u=>{if(u.target&&!r.current){let h=function(){g0(Ak,n,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=h,t.addEventListener("click",o.current,{once:!0})):h()}else t.removeEventListener("click",o.current);r.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Mk(e,t=globalThis?.document){const n=Vr(e),r=_.useRef(!1);return _.useEffect(()=>{const o=i=>{i.target&&!r.current&&g0(Tk,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Jv(){const e=new CustomEvent(nh);document.dispatchEvent(e)}function g0(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?TS(o,i):o.dispatchEvent(i)}var cf=0;function Th(){_.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Xv()),document.body.insertAdjacentElement("beforeend",e[1]??Xv()),cf++,()=>{cf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),cf--}},[])}function Xv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var uf="focusScope.autoFocusOnMount",df="focusScope.autoFocusOnUnmount",Zv={bubbles:!1,cancelable:!0},Fk="FocusScope",zc=_.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...c}=e,[u,h]=_.useState(null),p=Vr(o),f=Vr(i),m=_.useRef(null),v=kt(t,N=>h(N)),y=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let N=function(C){if(y.paused||!u)return;const A=C.target;u.contains(A)?m.current=A:bs(m.current,{select:!0})},b=function(C){if(y.paused||!u)return;const A=C.relatedTarget;A!==null&&(u.contains(A)||bs(m.current,{select:!0}))},j=function(C){if(document.activeElement===document.body)for(const L of C)L.removedNodes.length>0&&bs(u)};document.addEventListener("focusin",N),document.addEventListener("focusout",b);const k=new MutationObserver(j);return u&&k.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",b),k.disconnect()}}},[r,u,y.paused]),_.useEffect(()=>{if(u){ty.add(y);const N=document.activeElement;if(!u.contains(N)){const j=new CustomEvent(uf,Zv);u.addEventListener(uf,p),u.dispatchEvent(j),j.defaultPrevented||(Lk(Wk(v0(u)),{select:!0}),document.activeElement===N&&bs(u))}return()=>{u.removeEventListener(uf,p),setTimeout(()=>{const j=new CustomEvent(df,Zv);u.addEventListener(df,f),u.dispatchEvent(j),j.defaultPrevented||bs(N??document.body,{select:!0}),u.removeEventListener(df,f),ty.remove(y)},0)}}},[u,p,f,y]);const w=_.useCallback(N=>{if(!n&&!r||y.paused)return;const b=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,j=document.activeElement;if(b&&j){const k=N.currentTarget,[C,A]=Bk(k);C&&A?!N.shiftKey&&j===A?(N.preventDefault(),n&&bs(C,{select:!0})):N.shiftKey&&j===C&&(N.preventDefault(),n&&bs(A,{select:!0})):j===k&&N.preventDefault()}},[n,r,y.paused]);return l.jsx(ot.div,{tabIndex:-1,...c,ref:v,onKeyDown:w})});zc.displayName=Fk;function Lk(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(bs(r,{select:t}),document.activeElement!==n)return}function Bk(e){const t=v0(e),n=ey(t,e),r=ey(t.reverse(),e);return[n,r]}function v0(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ey(e,t){for(const n of e)if(!$k(n,{upTo:t}))return n}function $k(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Uk(e){return e instanceof HTMLInputElement&&"select"in e}function bs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Uk(e)&&t&&e.select()}}var ty=zk();function zk(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=ny(e,t),e.unshift(t)},remove(t){e=ny(e,t),e[0]?.resume()}}}function ny(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Wk(e){return e.filter(t=>t.tagName!=="A")}var Hk=ox[" useId ".trim().toString()]||(()=>{}),Vk=0;function Wr(e){const[t,n]=_.useState(Hk());return Xt(()=>{n(r=>r??String(Vk++))},[e]),e||(t?`radix-${t}`:"")}const qk=["top","right","bottom","left"],Es=Math.min,Mn=Math.max,Nc=Math.round,Jl=Math.floor,Nr=e=>({x:e,y:e}),Gk={left:"right",right:"left",bottom:"top",top:"bottom"},Yk={start:"end",end:"start"};function rh(e,t,n){return Mn(e,Es(t,n))}function qr(e,t){return typeof e=="function"?e(t):e}function Gr(e){return e.split("-")[0]}function wa(e){return e.split("-")[1]}function Ih(e){return e==="x"?"y":"x"}function Oh(e){return e==="y"?"height":"width"}const Kk=new Set(["top","bottom"]);function br(e){return Kk.has(Gr(e))?"y":"x"}function Dh(e){return Ih(br(e))}function Qk(e,t,n){n===void 0&&(n=!1);const r=wa(e),o=Dh(e),i=Oh(o);let c=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(c=Sc(c)),[c,Sc(c)]}function Jk(e){const t=Sc(e);return[sh(e),t,sh(t)]}function sh(e){return e.replace(/start|end/g,t=>Yk[t])}const ry=["left","right"],sy=["right","left"],Xk=["top","bottom"],Zk=["bottom","top"];function eE(e,t,n){switch(e){case"top":case"bottom":return n?t?sy:ry:t?ry:sy;case"left":case"right":return t?Xk:Zk;default:return[]}}function tE(e,t,n,r){const o=wa(e);let i=eE(Gr(e),n==="start",r);return o&&(i=i.map(c=>c+"-"+o),t&&(i=i.concat(i.map(sh)))),i}function Sc(e){return e.replace(/left|right|bottom|top/g,t=>Gk[t])}function nE(e){return{top:0,right:0,bottom:0,left:0,...e}}function y0(e){return typeof e!="number"?nE(e):{top:e,right:e,bottom:e,left:e}}function jc(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function oy(e,t,n){let{reference:r,floating:o}=e;const i=br(t),c=Dh(t),u=Oh(c),h=Gr(t),p=i==="y",f=r.x+r.width/2-o.width/2,m=r.y+r.height/2-o.height/2,v=r[u]/2-o[u]/2;let y;switch(h){case"top":y={x:f,y:r.y-o.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-o.width,y:m};break;default:y={x:r.x,y:r.y}}switch(wa(t)){case"start":y[c]-=v*(n&&p?-1:1);break;case"end":y[c]+=v*(n&&p?-1:1);break}return y}const rE=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:c}=n,u=i.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(t));let p=await c.getElementRects({reference:e,floating:t,strategy:o}),{x:f,y:m}=oy(p,r,h),v=r,y={},w=0;for(let N=0;N<u.length;N++){const{name:b,fn:j}=u[N],{x:k,y:C,data:A,reset:L}=await j({x:f,y:m,initialPlacement:r,placement:v,strategy:o,middlewareData:y,rects:p,platform:c,elements:{reference:e,floating:t}});f=k??f,m=C??m,y={...y,[b]:{...y[b],...A}},L&&w<=50&&(w++,typeof L=="object"&&(L.placement&&(v=L.placement),L.rects&&(p=L.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:o}):L.rects),{x:f,y:m}=oy(p,v,h)),N=-1)}return{x:f,y:m,placement:v,strategy:o,middlewareData:y}};async function wi(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:i,rects:c,elements:u,strategy:h}=e,{boundary:p="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:v=!1,padding:y=0}=qr(t,e),w=y0(y),b=u[v?m==="floating"?"reference":"floating":m],j=jc(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:p,rootBoundary:f,strategy:h})),k=m==="floating"?{x:r,y:o,width:c.floating.width,height:c.floating.height}:c.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),A=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},L=jc(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:k,offsetParent:C,strategy:h}):k);return{top:(j.top-L.top+w.top)/A.y,bottom:(L.bottom-j.bottom+w.bottom)/A.y,left:(j.left-L.left+w.left)/A.x,right:(L.right-j.right+w.right)/A.x}}const sE=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:c,elements:u,middlewareData:h}=t,{element:p,padding:f=0}=qr(e,t)||{};if(p==null)return{};const m=y0(f),v={x:n,y:r},y=Dh(o),w=Oh(y),N=await c.getDimensions(p),b=y==="y",j=b?"top":"left",k=b?"bottom":"right",C=b?"clientHeight":"clientWidth",A=i.reference[w]+i.reference[y]-v[y]-i.floating[w],L=v[y]-i.reference[y],T=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let B=T?T[C]:0;(!B||!await(c.isElement==null?void 0:c.isElement(T)))&&(B=u.floating[C]||i.floating[w]);const P=A/2-L/2,I=B/2-N[w]/2-1,$=Es(m[j],I),H=Es(m[k],I),G=$,K=B-N[w]-H,V=B/2-N[w]/2+P,J=rh(G,V,K),R=!h.arrow&&wa(o)!=null&&V!==J&&i.reference[w]/2-(V<G?$:H)-N[w]/2<0,E=R?V<G?V-G:V-K:0;return{[y]:v[y]+E,data:{[y]:J,centerOffset:V-J-E,...R&&{alignmentOffset:E}},reset:R}}}),oE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:c,initialPlacement:u,platform:h,elements:p}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:N=!0,...b}=qr(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const j=Gr(o),k=br(u),C=Gr(u)===u,A=await(h.isRTL==null?void 0:h.isRTL(p.floating)),L=v||(C||!N?[Sc(u)]:Jk(u)),T=w!=="none";!v&&T&&L.push(...tE(u,N,w,A));const B=[u,...L],P=await wi(t,b),I=[];let $=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&I.push(P[j]),m){const V=Qk(o,c,A);I.push(P[V[0]],P[V[1]])}if($=[...$,{placement:o,overflows:I}],!I.every(V=>V<=0)){var H,G;const V=(((H=i.flip)==null?void 0:H.index)||0)+1,J=B[V];if(J&&(!(m==="alignment"?k!==br(J):!1)||$.every(D=>br(D.placement)===k?D.overflows[0]>0:!0)))return{data:{index:V,overflows:$},reset:{placement:J}};let R=(G=$.filter(E=>E.overflows[0]<=0).sort((E,D)=>E.overflows[1]-D.overflows[1])[0])==null?void 0:G.placement;if(!R)switch(y){case"bestFit":{var K;const E=(K=$.filter(D=>{if(T){const W=br(D.placement);return W===k||W==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(W=>W>0).reduce((W,F)=>W+F,0)]).sort((D,W)=>D[1]-W[1])[0])==null?void 0:K[0];E&&(R=E);break}case"initialPlacement":R=u;break}if(o!==R)return{reset:{placement:R}}}return{}}}};function ay(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function iy(e){return qk.some(t=>e[t]>=0)}const aE=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=qr(e,t);switch(r){case"referenceHidden":{const i=await wi(t,{...o,elementContext:"reference"}),c=ay(i,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:iy(c)}}}case"escaped":{const i=await wi(t,{...o,altBoundary:!0}),c=ay(i,n.floating);return{data:{escapedOffsets:c,escaped:iy(c)}}}default:return{}}}}},x0=new Set(["left","top"]);async function iE(e,t){const{placement:n,platform:r,elements:o}=e,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),c=Gr(n),u=wa(n),h=br(n)==="y",p=x0.has(c)?-1:1,f=i&&h?-1:1,m=qr(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof w=="number"&&(y=u==="end"?w*-1:w),h?{x:y*f,y:v*p}:{x:v*p,y:y*f}}const lE=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:c,middlewareData:u}=t,h=await iE(t,e);return c===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:o+h.x,y:i+h.y,data:{...h,placement:c}}}}},cE=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:c=!1,limiter:u={fn:b=>{let{x:j,y:k}=b;return{x:j,y:k}}},...h}=qr(e,t),p={x:n,y:r},f=await wi(t,h),m=br(Gr(o)),v=Ih(m);let y=p[v],w=p[m];if(i){const b=v==="y"?"top":"left",j=v==="y"?"bottom":"right",k=y+f[b],C=y-f[j];y=rh(k,y,C)}if(c){const b=m==="y"?"top":"left",j=m==="y"?"bottom":"right",k=w+f[b],C=w-f[j];w=rh(k,w,C)}const N=u.fn({...t,[v]:y,[m]:w});return{...N,data:{x:N.x-n,y:N.y-r,enabled:{[v]:i,[m]:c}}}}}},uE=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:i,middlewareData:c}=t,{offset:u=0,mainAxis:h=!0,crossAxis:p=!0}=qr(e,t),f={x:n,y:r},m=br(o),v=Ih(m);let y=f[v],w=f[m];const N=qr(u,t),b=typeof N=="number"?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(h){const C=v==="y"?"height":"width",A=i.reference[v]-i.floating[C]+b.mainAxis,L=i.reference[v]+i.reference[C]-b.mainAxis;y<A?y=A:y>L&&(y=L)}if(p){var j,k;const C=v==="y"?"width":"height",A=x0.has(Gr(o)),L=i.reference[m]-i.floating[C]+(A&&((j=c.offset)==null?void 0:j[m])||0)+(A?0:b.crossAxis),T=i.reference[m]+i.reference[C]+(A?0:((k=c.offset)==null?void 0:k[m])||0)-(A?b.crossAxis:0);w<L?w=L:w>T&&(w=T)}return{[v]:y,[m]:w}}}},dE=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:c,elements:u}=t,{apply:h=()=>{},...p}=qr(e,t),f=await wi(t,p),m=Gr(o),v=wa(o),y=br(o)==="y",{width:w,height:N}=i.floating;let b,j;m==="top"||m==="bottom"?(b=m,j=v===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(j=m,b=v==="end"?"top":"bottom");const k=N-f.top-f.bottom,C=w-f.left-f.right,A=Es(N-f[b],k),L=Es(w-f[j],C),T=!t.middlewareData.shift;let B=A,P=L;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=C),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(B=k),T&&!v){const $=Mn(f.left,0),H=Mn(f.right,0),G=Mn(f.top,0),K=Mn(f.bottom,0);y?P=w-2*($!==0||H!==0?$+H:Mn(f.left,f.right)):B=N-2*(G!==0||K!==0?G+K:Mn(f.top,f.bottom))}await h({...t,availableWidth:P,availableHeight:B});const I=await c.getDimensions(u.floating);return w!==I.width||N!==I.height?{reset:{rects:!0}}:{}}}};function Wc(){return typeof window<"u"}function ba(e){return w0(e)?(e.nodeName||"").toLowerCase():"#document"}function Fn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function kr(e){var t;return(t=(w0(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function w0(e){return Wc()?e instanceof Node||e instanceof Fn(e).Node:!1}function lr(e){return Wc()?e instanceof Element||e instanceof Fn(e).Element:!1}function Sr(e){return Wc()?e instanceof HTMLElement||e instanceof Fn(e).HTMLElement:!1}function ly(e){return!Wc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Fn(e).ShadowRoot}const fE=new Set(["inline","contents"]);function Ei(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=cr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!fE.has(o)}const hE=new Set(["table","td","th"]);function mE(e){return hE.has(ba(e))}const pE=[":popover-open",":modal"];function Hc(e){return pE.some(t=>{try{return e.matches(t)}catch{return!1}})}const gE=["transform","translate","scale","rotate","perspective"],vE=["transform","translate","scale","rotate","perspective","filter"],yE=["paint","layout","strict","content"];function Mh(e){const t=Fh(),n=lr(e)?cr(e):e;return gE.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||vE.some(r=>(n.willChange||"").includes(r))||yE.some(r=>(n.contain||"").includes(r))}function xE(e){let t=Ps(e);for(;Sr(t)&&!fa(t);){if(Mh(t))return t;if(Hc(t))return null;t=Ps(t)}return null}function Fh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wE=new Set(["html","body","#document"]);function fa(e){return wE.has(ba(e))}function cr(e){return Fn(e).getComputedStyle(e)}function Vc(e){return lr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ps(e){if(ba(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ly(e)&&e.host||kr(e);return ly(t)?t.host:t}function b0(e){const t=Ps(e);return fa(t)?e.ownerDocument?e.ownerDocument.body:e.body:Sr(t)&&Ei(t)?t:b0(t)}function bi(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=b0(e),i=o===((r=e.ownerDocument)==null?void 0:r.body),c=Fn(o);if(i){const u=oh(c);return t.concat(c,c.visualViewport||[],Ei(o)?o:[],u&&n?bi(u):[])}return t.concat(o,bi(o,[],n))}function oh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _0(e){const t=cr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Sr(e),i=o?e.offsetWidth:n,c=o?e.offsetHeight:r,u=Nc(n)!==i||Nc(r)!==c;return u&&(n=i,r=c),{width:n,height:r,$:u}}function Lh(e){return lr(e)?e:e.contextElement}function aa(e){const t=Lh(e);if(!Sr(t))return Nr(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=_0(t);let c=(i?Nc(n.width):n.width)/r,u=(i?Nc(n.height):n.height)/o;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const bE=Nr(0);function N0(e){const t=Fn(e);return!Fh()||!t.visualViewport?bE:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _E(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Fn(e)?!1:t}function lo(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=Lh(e);let c=Nr(1);t&&(r?lr(r)&&(c=aa(r)):c=aa(e));const u=_E(i,n,r)?N0(i):Nr(0);let h=(o.left+u.x)/c.x,p=(o.top+u.y)/c.y,f=o.width/c.x,m=o.height/c.y;if(i){const v=Fn(i),y=r&&lr(r)?Fn(r):r;let w=v,N=oh(w);for(;N&&r&&y!==w;){const b=aa(N),j=N.getBoundingClientRect(),k=cr(N),C=j.left+(N.clientLeft+parseFloat(k.paddingLeft))*b.x,A=j.top+(N.clientTop+parseFloat(k.paddingTop))*b.y;h*=b.x,p*=b.y,f*=b.x,m*=b.y,h+=C,p+=A,w=Fn(N),N=oh(w)}}return jc({width:f,height:m,x:h,y:p})}function qc(e,t){const n=Vc(e).scrollLeft;return t?t.left+n:lo(kr(e)).left+n}function S0(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-qc(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function NE(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i=o==="fixed",c=kr(r),u=t?Hc(t.floating):!1;if(r===c||u&&i)return n;let h={scrollLeft:0,scrollTop:0},p=Nr(1);const f=Nr(0),m=Sr(r);if((m||!m&&!i)&&((ba(r)!=="body"||Ei(c))&&(h=Vc(r)),Sr(r))){const y=lo(r);p=aa(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const v=c&&!m&&!i?S0(c,h):Nr(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-h.scrollLeft*p.x+f.x+v.x,y:n.y*p.y-h.scrollTop*p.y+f.y+v.y}}function SE(e){return Array.from(e.getClientRects())}function jE(e){const t=kr(e),n=Vc(e),r=e.ownerDocument.body,o=Mn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Mn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+qc(e);const u=-n.scrollTop;return cr(r).direction==="rtl"&&(c+=Mn(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:c,y:u}}const cy=25;function CE(e,t){const n=Fn(e),r=kr(e),o=n.visualViewport;let i=r.clientWidth,c=r.clientHeight,u=0,h=0;if(o){i=o.width,c=o.height;const f=Fh();(!f||f&&t==="fixed")&&(u=o.offsetLeft,h=o.offsetTop)}const p=qc(r);if(p<=0){const f=r.ownerDocument,m=f.body,v=getComputedStyle(m),y=f.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,w=Math.abs(r.clientWidth-m.clientWidth-y);w<=cy&&(i-=w)}else p<=cy&&(i+=p);return{width:i,height:c,x:u,y:h}}const kE=new Set(["absolute","fixed"]);function EE(e,t){const n=lo(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=Sr(e)?aa(e):Nr(1),c=e.clientWidth*i.x,u=e.clientHeight*i.y,h=o*i.x,p=r*i.y;return{width:c,height:u,x:h,y:p}}function uy(e,t,n){let r;if(t==="viewport")r=CE(e,n);else if(t==="document")r=jE(kr(e));else if(lr(t))r=EE(t,n);else{const o=N0(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return jc(r)}function j0(e,t){const n=Ps(e);return n===t||!lr(n)||fa(n)?!1:cr(n).position==="fixed"||j0(n,t)}function PE(e,t){const n=t.get(e);if(n)return n;let r=bi(e,[],!1).filter(u=>lr(u)&&ba(u)!=="body"),o=null;const i=cr(e).position==="fixed";let c=i?Ps(e):e;for(;lr(c)&&!fa(c);){const u=cr(c),h=Mh(c);!h&&u.position==="fixed"&&(o=null),(i?!h&&!o:!h&&u.position==="static"&&!!o&&kE.has(o.position)||Ei(c)&&!h&&j0(e,c))?r=r.filter(f=>f!==c):o=u,c=Ps(c)}return t.set(e,r),r}function RE(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const c=[...n==="clippingAncestors"?Hc(t)?[]:PE(t,this._c):[].concat(n),r],u=c[0],h=c.reduce((p,f)=>{const m=uy(t,f,o);return p.top=Mn(m.top,p.top),p.right=Es(m.right,p.right),p.bottom=Es(m.bottom,p.bottom),p.left=Mn(m.left,p.left),p},uy(t,u,o));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function AE(e){const{width:t,height:n}=_0(e);return{width:t,height:n}}function TE(e,t,n){const r=Sr(t),o=kr(t),i=n==="fixed",c=lo(e,!0,i,t);let u={scrollLeft:0,scrollTop:0};const h=Nr(0);function p(){h.x=qc(o)}if(r||!r&&!i)if((ba(t)!=="body"||Ei(o))&&(u=Vc(t)),r){const y=lo(t,!0,i,t);h.x=y.x+t.clientLeft,h.y=y.y+t.clientTop}else o&&p();i&&!r&&o&&p();const f=o&&!r&&!i?S0(o,u):Nr(0),m=c.left+u.scrollLeft-h.x-f.x,v=c.top+u.scrollTop-h.y-f.y;return{x:m,y:v,width:c.width,height:c.height}}function ff(e){return cr(e).position==="static"}function dy(e,t){if(!Sr(e)||cr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return kr(e)===n&&(n=n.ownerDocument.body),n}function C0(e,t){const n=Fn(e);if(Hc(e))return n;if(!Sr(e)){let o=Ps(e);for(;o&&!fa(o);){if(lr(o)&&!ff(o))return o;o=Ps(o)}return n}let r=dy(e,t);for(;r&&mE(r)&&ff(r);)r=dy(r,t);return r&&fa(r)&&ff(r)&&!Mh(r)?n:r||xE(e)||n}const IE=async function(e){const t=this.getOffsetParent||C0,n=this.getDimensions,r=await n(e.floating);return{reference:TE(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function OE(e){return cr(e).direction==="rtl"}const DE={convertOffsetParentRelativeRectToViewportRelativeRect:NE,getDocumentElement:kr,getClippingRect:RE,getOffsetParent:C0,getElementRects:IE,getClientRects:SE,getDimensions:AE,getScale:aa,isElement:lr,isRTL:OE};function k0(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ME(e,t){let n=null,r;const o=kr(e);function i(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),i();const p=e.getBoundingClientRect(),{left:f,top:m,width:v,height:y}=p;if(u||t(),!v||!y)return;const w=Jl(m),N=Jl(o.clientWidth-(f+v)),b=Jl(o.clientHeight-(m+y)),j=Jl(f),C={rootMargin:-w+"px "+-N+"px "+-b+"px "+-j+"px",threshold:Mn(0,Es(1,h))||1};let A=!0;function L(T){const B=T[0].intersectionRatio;if(B!==h){if(!A)return c();B?c(!1,B):r=setTimeout(()=>{c(!1,1e-7)},1e3)}B===1&&!k0(p,e.getBoundingClientRect())&&c(),A=!1}try{n=new IntersectionObserver(L,{...C,root:o.ownerDocument})}catch{n=new IntersectionObserver(L,C)}n.observe(e)}return c(!0),i}function FE(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,p=Lh(e),f=o||i?[...p?bi(p):[],...bi(t)]:[];f.forEach(j=>{o&&j.addEventListener("scroll",n,{passive:!0}),i&&j.addEventListener("resize",n)});const m=p&&u?ME(p,n):null;let v=-1,y=null;c&&(y=new ResizeObserver(j=>{let[k]=j;k&&k.target===p&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(t)})),n()}),p&&!h&&y.observe(p),y.observe(t));let w,N=h?lo(e):null;h&&b();function b(){const j=lo(e);N&&!k0(N,j)&&n(),N=j,w=requestAnimationFrame(b)}return n(),()=>{var j;f.forEach(k=>{o&&k.removeEventListener("scroll",n),i&&k.removeEventListener("resize",n)}),m?.(),(j=y)==null||j.disconnect(),y=null,h&&cancelAnimationFrame(w)}}const LE=lE,BE=cE,$E=oE,UE=dE,zE=aE,fy=sE,WE=uE,HE=(e,t,n)=>{const r=new Map,o={platform:DE,...n},i={...o.platform,_c:r};return rE(e,t,{...o,platform:i})};var VE=typeof document<"u",qE=function(){},lc=VE?_.useLayoutEffect:qE;function Cc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Cc(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&e.$$typeof)&&!Cc(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function E0(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function hy(e,t){const n=E0(e);return Math.round(t*n)/n}function hf(e){const t=_.useRef(e);return lc(()=>{t.current=e}),t}function GE(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:c}={},transform:u=!0,whileElementsMounted:h,open:p}=e,[f,m]=_.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,y]=_.useState(r);Cc(v,r)||y(r);const[w,N]=_.useState(null),[b,j]=_.useState(null),k=_.useCallback(D=>{D!==T.current&&(T.current=D,N(D))},[]),C=_.useCallback(D=>{D!==B.current&&(B.current=D,j(D))},[]),A=i||w,L=c||b,T=_.useRef(null),B=_.useRef(null),P=_.useRef(f),I=h!=null,$=hf(h),H=hf(o),G=hf(p),K=_.useCallback(()=>{if(!T.current||!B.current)return;const D={placement:t,strategy:n,middleware:v};H.current&&(D.platform=H.current),HE(T.current,B.current,D).then(W=>{const F={...W,isPositioned:G.current!==!1};V.current&&!Cc(P.current,F)&&(P.current=F,ji.flushSync(()=>{m(F)}))})},[v,t,n,H,G]);lc(()=>{p===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,m(D=>({...D,isPositioned:!1})))},[p]);const V=_.useRef(!1);lc(()=>(V.current=!0,()=>{V.current=!1}),[]),lc(()=>{if(A&&(T.current=A),L&&(B.current=L),A&&L){if($.current)return $.current(A,L,K);K()}},[A,L,K,$,I]);const J=_.useMemo(()=>({reference:T,floating:B,setReference:k,setFloating:C}),[k,C]),R=_.useMemo(()=>({reference:A,floating:L}),[A,L]),E=_.useMemo(()=>{const D={position:n,left:0,top:0};if(!R.floating)return D;const W=hy(R.floating,f.x),F=hy(R.floating,f.y);return u?{...D,transform:"translate("+W+"px, "+F+"px)",...E0(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:F}},[n,u,R.floating,f.x,f.y]);return _.useMemo(()=>({...f,update:K,refs:J,elements:R,floatingStyles:E}),[f,K,J,R,E])}const YE=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?fy({element:r.current,padding:o}).fn(n):{}:r?fy({element:r,padding:o}).fn(n):{}}}},KE=(e,t)=>({...LE(e),options:[e,t]}),QE=(e,t)=>({...BE(e),options:[e,t]}),JE=(e,t)=>({...WE(e),options:[e,t]}),XE=(e,t)=>({...$E(e),options:[e,t]}),ZE=(e,t)=>({...UE(e),options:[e,t]}),e5=(e,t)=>({...zE(e),options:[e,t]}),t5=(e,t)=>({...YE(e),options:[e,t]});var n5="Arrow",P0=_.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...i}=e;return l.jsx(ot.svg,{...i,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});P0.displayName=n5;var r5=P0,Bh="Popper",[R0,Gc]=Cr(Bh),[s5,A0]=R0(Bh),T0=e=>{const{__scopePopper:t,children:n}=e,[r,o]=_.useState(null);return l.jsx(s5,{scope:t,anchor:r,onAnchorChange:o,children:n})};T0.displayName=Bh;var I0="PopperAnchor",O0=_.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,i=A0(I0,n),c=_.useRef(null),u=kt(t,c),h=_.useRef(null);return _.useEffect(()=>{const p=h.current;h.current=r?.current||c.current,p!==h.current&&i.onAnchorChange(h.current)}),r?null:l.jsx(ot.div,{...o,ref:u})});O0.displayName=I0;var $h="PopperContent",[o5,a5]=R0($h),D0=_.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:y="optimized",onPlaced:w,...N}=e,b=A0($h,n),[j,k]=_.useState(null),C=kt(t,X=>k(X)),[A,L]=_.useState(null),T=Nh(A),B=T?.width??0,P=T?.height??0,I=r+(i!=="center"?"-"+i:""),$=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},H=Array.isArray(p)?p:[p],G=H.length>0,K={padding:$,boundary:H.filter(l5),altBoundary:G},{refs:V,floatingStyles:J,placement:R,isPositioned:E,middlewareData:D}=GE({strategy:"fixed",placement:I,whileElementsMounted:(...X)=>FE(...X,{animationFrame:y==="always"}),elements:{reference:b.anchor},middleware:[KE({mainAxis:o+P,alignmentAxis:c}),h&&QE({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?JE():void 0,...K}),h&&XE({...K}),ZE({...K,apply:({elements:X,rects:ie,availableWidth:fe,availableHeight:se})=>{const{width:he,height:Ee}=ie.reference,Se=X.floating.style;Se.setProperty("--radix-popper-available-width",`${fe}px`),Se.setProperty("--radix-popper-available-height",`${se}px`),Se.setProperty("--radix-popper-anchor-width",`${he}px`),Se.setProperty("--radix-popper-anchor-height",`${Ee}px`)}}),A&&t5({element:A,padding:u}),c5({arrowWidth:B,arrowHeight:P}),v&&e5({strategy:"referenceHidden",...K})]}),[W,F]=L0(R),M=Vr(w);Xt(()=>{E&&M?.()},[E,M]);const U=D.arrow?.x,te=D.arrow?.y,Q=D.arrow?.centerOffset!==0,[ee,ce]=_.useState();return Xt(()=>{j&&ce(window.getComputedStyle(j).zIndex)},[j]),l.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:E?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[D.transformOrigin?.x,D.transformOrigin?.y].join(" "),...D.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:l.jsx(o5,{scope:n,placedSide:W,onArrowChange:L,arrowX:U,arrowY:te,shouldHideArrow:Q,children:l.jsx(ot.div,{"data-side":W,"data-align":F,...N,ref:C,style:{...N.style,animation:E?void 0:"none"}})})})});D0.displayName=$h;var M0="PopperArrow",i5={top:"bottom",right:"left",bottom:"top",left:"right"},F0=_.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,i=a5(M0,r),c=i5[i.placedSide];return l.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:l.jsx(r5,{...o,ref:n,style:{...o.style,display:"block"}})})});F0.displayName=M0;function l5(e){return e!==null}var c5=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:o}=t,c=o.arrow?.centerOffset!==0,u=c?0:e.arrowWidth,h=c?0:e.arrowHeight,[p,f]=L0(n),m={start:"0%",center:"50%",end:"100%"}[f],v=(o.arrow?.x??0)+u/2,y=(o.arrow?.y??0)+h/2;let w="",N="";return p==="bottom"?(w=c?m:`${v}px`,N=`${-h}px`):p==="top"?(w=c?m:`${v}px`,N=`${r.floating.height+h}px`):p==="right"?(w=`${-h}px`,N=c?m:`${y}px`):p==="left"&&(w=`${r.floating.width+h}px`,N=c?m:`${y}px`),{data:{x:w,y:N}}}});function L0(e){const[t,n="center"]=e.split("-");return[t,n]}var B0=T0,Uh=O0,$0=D0,U0=F0,u5="Portal",Yc=_.forwardRef((e,t)=>{const{container:n,...r}=e,[o,i]=_.useState(!1);Xt(()=>i(!0),[]);const c=n||o&&globalThis?.document?.body;return c?Cx.createPortal(l.jsx(ot.div,{...r,ref:t}),c):null});Yc.displayName=u5;var z0=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),d5="VisuallyHidden",W0=_.forwardRef((e,t)=>l.jsx(ot.span,{...e,ref:t,style:{...z0,...e.style}}));W0.displayName=d5;var f5=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xo=new WeakMap,Xl=new WeakMap,Zl={},mf=0,H0=function(e){return e&&(e.host||H0(e.parentNode))},h5=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=H0(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},m5=function(e,t,n,r){var o=h5(t,Array.isArray(e)?e:[e]);Zl[n]||(Zl[n]=new WeakMap);var i=Zl[n],c=[],u=new Set,h=new Set(o),p=function(m){!m||u.has(m)||(u.add(m),p(m.parentNode))};o.forEach(p);var f=function(m){!m||h.has(m)||Array.prototype.forEach.call(m.children,function(v){if(u.has(v))f(v);else try{var y=v.getAttribute(r),w=y!==null&&y!=="false",N=(Xo.get(v)||0)+1,b=(i.get(v)||0)+1;Xo.set(v,N),i.set(v,b),c.push(v),N===1&&w&&Xl.set(v,!0),b===1&&v.setAttribute(n,"true"),w||v.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",v,j)}})};return f(t),u.clear(),mf++,function(){c.forEach(function(m){var v=Xo.get(m)-1,y=i.get(m)-1;Xo.set(m,v),i.set(m,y),v||(Xl.has(m)||m.removeAttribute(r),Xl.delete(m)),y||m.removeAttribute(n)}),mf--,mf||(Xo=new WeakMap,Xo=new WeakMap,Xl=new WeakMap,Zl={})}},zh=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=f5(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),m5(r,o,n,"aria-hidden")):function(){return null}},ah=function(e,t){return ah=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},ah(e,t)};function p5(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ah(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Rt=function(){return Rt=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Rt.apply(this,arguments)};function V0(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function g5(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var cc="right-scroll-bar-position",uc="width-before-scroll-bar",v5="with-scroll-bars-hidden",y5="--removed-body-scroll-bar-size";function pf(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function x5(e,t){var n=_.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var w5=typeof window<"u"?_.useLayoutEffect:_.useEffect,my=new WeakMap;function b5(e,t){var n=x5(null,function(r){return e.forEach(function(o){return pf(o,r)})});return w5(function(){var r=my.get(n);if(r){var o=new Set(r),i=new Set(e),c=n.current;o.forEach(function(u){i.has(u)||pf(u,null)}),i.forEach(function(u){o.has(u)||pf(u,c)})}my.set(n,e)},[e]),n}function _5(e){return e}function N5(e,t){t===void 0&&(t=_5);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var c=t(i,r);return n.push(c),function(){n=n.filter(function(u){return u!==c})}},assignSyncMedium:function(i){for(r=!0;n.length;){var c=n;n=[],c.forEach(i)}n={push:function(u){return i(u)},filter:function(){return n}}},assignMedium:function(i){r=!0;var c=[];if(n.length){var u=n;n=[],u.forEach(i),c=n}var h=function(){var f=c;c=[],f.forEach(i)},p=function(){return Promise.resolve().then(h)};p(),n={push:function(f){c.push(f),p()},filter:function(f){return c=c.filter(f),n}}}};return o}function S5(e){e===void 0&&(e={});var t=N5(null);return t.options=Rt({async:!0,ssr:!1},e),t}var q0=function(e){var t=e.sideCar,n=V0(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Rt({},n))};q0.isSideCarExport=!0;function j5(e,t){return e.useMedium(t),q0}var G0=S5(),gf=function(){},Kc=_.forwardRef(function(e,t){var n=_.useRef(null),r=_.useState({onScrollCapture:gf,onWheelCapture:gf,onTouchMoveCapture:gf}),o=r[0],i=r[1],c=e.forwardProps,u=e.children,h=e.className,p=e.removeScrollBar,f=e.enabled,m=e.shards,v=e.sideCar,y=e.noRelative,w=e.noIsolation,N=e.inert,b=e.allowPinchZoom,j=e.as,k=j===void 0?"div":j,C=e.gapMode,A=V0(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=v,T=b5([n,t]),B=Rt(Rt({},A),o);return _.createElement(_.Fragment,null,f&&_.createElement(L,{sideCar:G0,removeScrollBar:p,shards:m,noRelative:y,noIsolation:w,inert:N,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:C}),c?_.cloneElement(_.Children.only(u),Rt(Rt({},B),{ref:T})):_.createElement(k,Rt({},B,{className:h,ref:T}),u))});Kc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kc.classNames={fullWidth:uc,zeroRight:cc};var C5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function k5(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=C5();return t&&e.setAttribute("nonce",t),e}function E5(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function P5(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var R5=function(){var e=0,t=null;return{add:function(n){e==0&&(t=k5())&&(E5(t,n),P5(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},A5=function(){var e=R5();return function(t,n){_.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Y0=function(){var e=A5(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},T5={left:0,top:0,right:0,gap:0},vf=function(e){return parseInt(e||"",10)||0},I5=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[vf(n),vf(r),vf(o)]},O5=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return T5;var t=I5(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},D5=Y0(),ia="data-scroll-locked",M5=function(e,t,n,r){var o=e.left,i=e.top,c=e.right,u=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(v5,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(ia,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cc,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(uc,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(cc," .").concat(cc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(uc," .").concat(uc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ia,`] {
    `).concat(y5,": ").concat(u,`px;
  }
`)},py=function(){var e=parseInt(document.body.getAttribute(ia)||"0",10);return isFinite(e)?e:0},F5=function(){_.useEffect(function(){return document.body.setAttribute(ia,(py()+1).toString()),function(){var e=py()-1;e<=0?document.body.removeAttribute(ia):document.body.setAttribute(ia,e.toString())}},[])},L5=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;F5();var i=_.useMemo(function(){return O5(o)},[o]);return _.createElement(D5,{styles:M5(i,!t,o,n?"":"!important")})},ih=!1;if(typeof window<"u")try{var ec=Object.defineProperty({},"passive",{get:function(){return ih=!0,!0}});window.addEventListener("test",ec,ec),window.removeEventListener("test",ec,ec)}catch{ih=!1}var Zo=ih?{passive:!1}:!1,B5=function(e){return e.tagName==="TEXTAREA"},K0=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!B5(e)&&n[t]==="visible")},$5=function(e){return K0(e,"overflowY")},U5=function(e){return K0(e,"overflowX")},gy=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Q0(e,r);if(o){var i=J0(e,r),c=i[1],u=i[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},z5=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},W5=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Q0=function(e,t){return e==="v"?$5(t):U5(t)},J0=function(e,t){return e==="v"?z5(t):W5(t)},H5=function(e,t){return e==="h"&&t==="rtl"?-1:1},V5=function(e,t,n,r,o){var i=H5(e,window.getComputedStyle(t).direction),c=i*r,u=n.target,h=t.contains(u),p=!1,f=c>0,m=0,v=0;do{if(!u)break;var y=J0(e,u),w=y[0],N=y[1],b=y[2],j=N-b-i*w;(w||j)&&Q0(e,u)&&(m+=j,v+=w);var k=u.parentNode;u=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!h&&u!==document.body||h&&(t.contains(u)||t===u));return(f&&Math.abs(m)<1||!f&&Math.abs(v)<1)&&(p=!0),p},tc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},vy=function(e){return[e.deltaX,e.deltaY]},yy=function(e){return e&&"current"in e?e.current:e},q5=function(e,t){return e[0]===t[0]&&e[1]===t[1]},G5=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Y5=0,ea=[];function K5(e){var t=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),o=_.useState(Y5++)[0],i=_.useState(Y0)[0],c=_.useRef(e);_.useEffect(function(){c.current=e},[e]),_.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var N=g5([e.lockRef.current],(e.shards||[]).map(yy),!0).filter(Boolean);return N.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),N.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var u=_.useCallback(function(N,b){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!c.current.allowPinchZoom;var j=tc(N),k=n.current,C="deltaX"in N?N.deltaX:k[0]-j[0],A="deltaY"in N?N.deltaY:k[1]-j[1],L,T=N.target,B=Math.abs(C)>Math.abs(A)?"h":"v";if("touches"in N&&B==="h"&&T.type==="range")return!1;var P=gy(B,T);if(!P)return!0;if(P?L=B:(L=B==="v"?"h":"v",P=gy(B,T)),!P)return!1;if(!r.current&&"changedTouches"in N&&(C||A)&&(r.current=L),!L)return!0;var I=r.current||L;return V5(I,b,N,I==="h"?C:A)},[]),h=_.useCallback(function(N){var b=N;if(!(!ea.length||ea[ea.length-1]!==i)){var j="deltaY"in b?vy(b):tc(b),k=t.current.filter(function(L){return L.name===b.type&&(L.target===b.target||b.target===L.shadowParent)&&q5(L.delta,j)})[0];if(k&&k.should){b.cancelable&&b.preventDefault();return}if(!k){var C=(c.current.shards||[]).map(yy).filter(Boolean).filter(function(L){return L.contains(b.target)}),A=C.length>0?u(b,C[0]):!c.current.noIsolation;A&&b.cancelable&&b.preventDefault()}}},[]),p=_.useCallback(function(N,b,j,k){var C={name:N,delta:b,target:j,should:k,shadowParent:Q5(j)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(A){return A!==C})},1)},[]),f=_.useCallback(function(N){n.current=tc(N),r.current=void 0},[]),m=_.useCallback(function(N){p(N.type,vy(N),N.target,u(N,e.lockRef.current))},[]),v=_.useCallback(function(N){p(N.type,tc(N),N.target,u(N,e.lockRef.current))},[]);_.useEffect(function(){return ea.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",h,Zo),document.addEventListener("touchmove",h,Zo),document.addEventListener("touchstart",f,Zo),function(){ea=ea.filter(function(N){return N!==i}),document.removeEventListener("wheel",h,Zo),document.removeEventListener("touchmove",h,Zo),document.removeEventListener("touchstart",f,Zo)}},[]);var y=e.removeScrollBar,w=e.inert;return _.createElement(_.Fragment,null,w?_.createElement(i,{styles:G5(o)}):null,y?_.createElement(L5,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Q5(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const J5=j5(G0,K5);var Qc=_.forwardRef(function(e,t){return _.createElement(Kc,Rt({},e,{ref:t,sideCar:J5}))});Qc.classNames=Kc.classNames;var X5=[" ","Enter","ArrowUp","ArrowDown"],Z5=[" ","Enter"],co="Select",[Jc,Xc,eP]=m0(co),[_a]=Cr(co,[eP,Gc]),Zc=Gc(),[tP,Os]=_a(co),[nP,rP]=_a(co),X0=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:i,value:c,defaultValue:u,onValueChange:h,dir:p,name:f,autoComplete:m,disabled:v,required:y,form:w}=e,N=Zc(t),[b,j]=_.useState(null),[k,C]=_.useState(null),[A,L]=_.useState(!1),T=Ah(p),[B,P]=ks({prop:r,defaultProp:o??!1,onChange:i,caller:co}),[I,$]=ks({prop:c,defaultProp:u,onChange:h,caller:co}),H=_.useRef(null),G=b?w||!!b.closest("form"):!0,[K,V]=_.useState(new Set),J=Array.from(K).map(R=>R.props.value).join(";");return l.jsx(B0,{...N,children:l.jsxs(tP,{required:y,scope:t,trigger:b,onTriggerChange:j,valueNode:k,onValueNodeChange:C,valueNodeHasChildren:A,onValueNodeHasChildrenChange:L,contentId:Wr(),value:I,onValueChange:$,open:B,onOpenChange:P,dir:T,triggerPointerDownPosRef:H,disabled:v,children:[l.jsx(Jc.Provider,{scope:t,children:l.jsx(nP,{scope:e.__scopeSelect,onNativeOptionAdd:_.useCallback(R=>{V(E=>new Set(E).add(R))},[]),onNativeOptionRemove:_.useCallback(R=>{V(E=>{const D=new Set(E);return D.delete(R),D})},[]),children:n})}),G?l.jsxs(ww,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:m,value:I,onChange:R=>$(R.target.value),disabled:v,form:w,children:[I===void 0?l.jsx("option",{value:""}):null,Array.from(K)]},J):null]})})};X0.displayName=co;var Z0="SelectTrigger",ew=_.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,i=Zc(n),c=Os(Z0,n),u=c.disabled||r,h=kt(t,c.onTriggerChange),p=Xc(n),f=_.useRef("touch"),[m,v,y]=_w(N=>{const b=p().filter(C=>!C.disabled),j=b.find(C=>C.value===c.value),k=Nw(b,N,j);k!==void 0&&c.onValueChange(k.value)}),w=N=>{u||(c.onOpenChange(!0),y()),N&&(c.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)})};return l.jsx(Uh,{asChild:!0,...i,children:l.jsx(ot.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":bw(c.value)?"":void 0,...o,ref:h,onClick:at(o.onClick,N=>{N.currentTarget.focus(),f.current!=="mouse"&&w(N)}),onPointerDown:at(o.onPointerDown,N=>{f.current=N.pointerType;const b=N.target;b.hasPointerCapture(N.pointerId)&&b.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&N.pointerType==="mouse"&&(w(N),N.preventDefault())}),onKeyDown:at(o.onKeyDown,N=>{const b=m.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&v(N.key),!(b&&N.key===" ")&&X5.includes(N.key)&&(w(),N.preventDefault())})})})});ew.displayName=Z0;var tw="SelectValue",nw=_.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:i,placeholder:c="",...u}=e,h=Os(tw,n),{onValueNodeHasChildrenChange:p}=h,f=i!==void 0,m=kt(t,h.onValueNodeChange);return Xt(()=>{p(f)},[p,f]),l.jsx(ot.span,{...u,ref:m,style:{pointerEvents:"none"},children:bw(h.value)?l.jsx(l.Fragment,{children:c}):i})});nw.displayName=tw;var sP="SelectIcon",rw=_.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return l.jsx(ot.span,{"aria-hidden":!0,...o,ref:t,children:r||""})});rw.displayName=sP;var oP="SelectPortal",sw=e=>l.jsx(Yc,{asChild:!0,...e});sw.displayName=oP;var uo="SelectContent",ow=_.forwardRef((e,t)=>{const n=Os(uo,e.__scopeSelect),[r,o]=_.useState();if(Xt(()=>{o(new DocumentFragment)},[]),!n.open){const i=r;return i?ji.createPortal(l.jsx(aw,{scope:e.__scopeSelect,children:l.jsx(Jc.Slot,{scope:e.__scopeSelect,children:l.jsx("div",{children:e.children})})}),i):null}return l.jsx(iw,{...e,ref:t})});ow.displayName=uo;var sr=10,[aw,Ds]=_a(uo),aP="SelectContentImpl",iP=oo("SelectContent.RemoveScroll"),iw=_.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:i,onPointerDownOutside:c,side:u,sideOffset:h,align:p,alignOffset:f,arrowPadding:m,collisionBoundary:v,collisionPadding:y,sticky:w,hideWhenDetached:N,avoidCollisions:b,...j}=e,k=Os(uo,n),[C,A]=_.useState(null),[L,T]=_.useState(null),B=kt(t,X=>A(X)),[P,I]=_.useState(null),[$,H]=_.useState(null),G=Xc(n),[K,V]=_.useState(!1),J=_.useRef(!1);_.useEffect(()=>{if(C)return zh(C)},[C]),Th();const R=_.useCallback(X=>{const[ie,...fe]=G().map(Ee=>Ee.ref.current),[se]=fe.slice(-1),he=document.activeElement;for(const Ee of X)if(Ee===he||(Ee?.scrollIntoView({block:"nearest"}),Ee===ie&&L&&(L.scrollTop=0),Ee===se&&L&&(L.scrollTop=L.scrollHeight),Ee?.focus(),document.activeElement!==he))return},[G,L]),E=_.useCallback(()=>R([P,C]),[R,P,C]);_.useEffect(()=>{K&&E()},[K,E]);const{onOpenChange:D,triggerPointerDownPosRef:W}=k;_.useEffect(()=>{if(C){let X={x:0,y:0};const ie=se=>{X={x:Math.abs(Math.round(se.pageX)-(W.current?.x??0)),y:Math.abs(Math.round(se.pageY)-(W.current?.y??0))}},fe=se=>{X.x<=10&&X.y<=10?se.preventDefault():C.contains(se.target)||D(!1),document.removeEventListener("pointermove",ie),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",fe,{capture:!0})}}},[C,D,W]),_.useEffect(()=>{const X=()=>D(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[D]);const[F,M]=_w(X=>{const ie=G().filter(he=>!he.disabled),fe=ie.find(he=>he.ref.current===document.activeElement),se=Nw(ie,X,fe);se&&setTimeout(()=>se.ref.current.focus())}),U=_.useCallback((X,ie,fe)=>{const se=!J.current&&!fe;(k.value!==void 0&&k.value===ie||se)&&(I(X),se&&(J.current=!0))},[k.value]),te=_.useCallback(()=>C?.focus(),[C]),Q=_.useCallback((X,ie,fe)=>{const se=!J.current&&!fe;(k.value!==void 0&&k.value===ie||se)&&H(X)},[k.value]),ee=r==="popper"?lh:lw,ce=ee===lh?{side:u,sideOffset:h,align:p,alignOffset:f,arrowPadding:m,collisionBoundary:v,collisionPadding:y,sticky:w,hideWhenDetached:N,avoidCollisions:b}:{};return l.jsx(aw,{scope:n,content:C,viewport:L,onViewportChange:T,itemRefCallback:U,selectedItem:P,onItemLeave:te,itemTextRefCallback:Q,focusSelectedItem:E,selectedItemText:$,position:r,isPositioned:K,searchRef:F,children:l.jsx(Qc,{as:iP,allowPinchZoom:!0,children:l.jsx(zc,{asChild:!0,trapped:k.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:at(o,X=>{k.trigger?.focus({preventScroll:!0}),X.preventDefault()}),children:l.jsx(Uc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:l.jsx(ee,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:X=>X.preventDefault(),...j,...ce,onPlaced:()=>V(!0),ref:B,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:at(j.onKeyDown,X=>{const ie=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!ie&&X.key.length===1&&M(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let se=G().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(X.key)&&(se=se.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const he=X.target,Ee=se.indexOf(he);se=se.slice(Ee+1)}setTimeout(()=>R(se)),X.preventDefault()}})})})})})})});iw.displayName=aP;var lP="SelectItemAlignedPosition",lw=_.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,i=Os(uo,n),c=Ds(uo,n),[u,h]=_.useState(null),[p,f]=_.useState(null),m=kt(t,B=>f(B)),v=Xc(n),y=_.useRef(!1),w=_.useRef(!0),{viewport:N,selectedItem:b,selectedItemText:j,focusSelectedItem:k}=c,C=_.useCallback(()=>{if(i.trigger&&i.valueNode&&u&&p&&N&&b&&j){const B=i.trigger.getBoundingClientRect(),P=p.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),$=j.getBoundingClientRect();if(i.dir!=="rtl"){const he=$.left-P.left,Ee=I.left-he,Se=B.left-Ee,z=B.width+Se,de=Math.max(z,P.width),ye=window.innerWidth-sr,_e=Kv(Ee,[sr,Math.max(sr,ye-de)]);u.style.minWidth=z+"px",u.style.left=_e+"px"}else{const he=P.right-$.right,Ee=window.innerWidth-I.right-he,Se=window.innerWidth-B.right-Ee,z=B.width+Se,de=Math.max(z,P.width),ye=window.innerWidth-sr,_e=Kv(Ee,[sr,Math.max(sr,ye-de)]);u.style.minWidth=z+"px",u.style.right=_e+"px"}const H=v(),G=window.innerHeight-sr*2,K=N.scrollHeight,V=window.getComputedStyle(p),J=parseInt(V.borderTopWidth,10),R=parseInt(V.paddingTop,10),E=parseInt(V.borderBottomWidth,10),D=parseInt(V.paddingBottom,10),W=J+R+K+D+E,F=Math.min(b.offsetHeight*5,W),M=window.getComputedStyle(N),U=parseInt(M.paddingTop,10),te=parseInt(M.paddingBottom,10),Q=B.top+B.height/2-sr,ee=G-Q,ce=b.offsetHeight/2,X=b.offsetTop+ce,ie=J+R+X,fe=W-ie;if(ie<=Q){const he=H.length>0&&b===H[H.length-1].ref.current;u.style.bottom="0px";const Ee=p.clientHeight-N.offsetTop-N.offsetHeight,Se=Math.max(ee,ce+(he?te:0)+Ee+E),z=ie+Se;u.style.height=z+"px"}else{const he=H.length>0&&b===H[0].ref.current;u.style.top="0px";const Se=Math.max(Q,J+N.offsetTop+(he?U:0)+ce)+fe;u.style.height=Se+"px",N.scrollTop=ie-Q+N.offsetTop}u.style.margin=`${sr}px 0`,u.style.minHeight=F+"px",u.style.maxHeight=G+"px",r?.(),requestAnimationFrame(()=>y.current=!0)}},[v,i.trigger,i.valueNode,u,p,N,b,j,i.dir,r]);Xt(()=>C(),[C]);const[A,L]=_.useState();Xt(()=>{p&&L(window.getComputedStyle(p).zIndex)},[p]);const T=_.useCallback(B=>{B&&w.current===!0&&(C(),k?.(),w.current=!1)},[C,k]);return l.jsx(uP,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:y,onScrollButtonChange:T,children:l.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:l.jsx(ot.div,{...o,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});lw.displayName=lP;var cP="SelectPopperPosition",lh=_.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=sr,...i}=e,c=Zc(n);return l.jsx($0,{...c,...i,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});lh.displayName=cP;var[uP,Wh]=_a(uo,{}),ch="SelectViewport",cw=_.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,i=Ds(ch,n),c=Wh(ch,n),u=kt(t,i.onViewportChange),h=_.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(Jc.Slot,{scope:n,children:l.jsx(ot.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:at(o.onScroll,p=>{const f=p.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:v}=c;if(v?.current&&m){const y=Math.abs(h.current-f.scrollTop);if(y>0){const w=window.innerHeight-sr*2,N=parseFloat(m.style.minHeight),b=parseFloat(m.style.height),j=Math.max(N,b);if(j<w){const k=j+y,C=Math.min(w,k),A=k-C;m.style.height=C+"px",m.style.bottom==="0px"&&(f.scrollTop=A>0?A:0,m.style.justifyContent="flex-end")}}}h.current=f.scrollTop})})})]})});cw.displayName=ch;var uw="SelectGroup",[dP,fP]=_a(uw),hP=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Wr();return l.jsx(dP,{scope:n,id:o,children:l.jsx(ot.div,{role:"group","aria-labelledby":o,...r,ref:t})})});hP.displayName=uw;var dw="SelectLabel",mP=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=fP(dw,n);return l.jsx(ot.div,{id:o.id,...r,ref:t})});mP.displayName=dw;var kc="SelectItem",[pP,fw]=_a(kc),hw=_.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:i,...c}=e,u=Os(kc,n),h=Ds(kc,n),p=u.value===r,[f,m]=_.useState(i??""),[v,y]=_.useState(!1),w=kt(t,k=>h.itemRefCallback?.(k,r,o)),N=Wr(),b=_.useRef("touch"),j=()=>{o||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(pP,{scope:n,value:r,disabled:o,textId:N,isSelected:p,onItemTextChange:_.useCallback(k=>{m(C=>C||(k?.textContent??"").trim())},[]),children:l.jsx(Jc.ItemSlot,{scope:n,value:r,disabled:o,textValue:f,children:l.jsx(ot.div,{role:"option","aria-labelledby":N,"data-highlighted":v?"":void 0,"aria-selected":p&&v,"data-state":p?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...c,ref:w,onFocus:at(c.onFocus,()=>y(!0)),onBlur:at(c.onBlur,()=>y(!1)),onClick:at(c.onClick,()=>{b.current!=="mouse"&&j()}),onPointerUp:at(c.onPointerUp,()=>{b.current==="mouse"&&j()}),onPointerDown:at(c.onPointerDown,k=>{b.current=k.pointerType}),onPointerMove:at(c.onPointerMove,k=>{b.current=k.pointerType,o?h.onItemLeave?.():b.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:at(c.onPointerLeave,k=>{k.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:at(c.onKeyDown,k=>{h.searchRef?.current!==""&&k.key===" "||(Z5.includes(k.key)&&j(),k.key===" "&&k.preventDefault())})})})})});hw.displayName=kc;var hi="SelectItemText",mw=_.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...i}=e,c=Os(hi,n),u=Ds(hi,n),h=fw(hi,n),p=rP(hi,n),[f,m]=_.useState(null),v=kt(t,j=>m(j),h.onItemTextChange,j=>u.itemTextRefCallback?.(j,h.value,h.disabled)),y=f?.textContent,w=_.useMemo(()=>l.jsx("option",{value:h.value,disabled:h.disabled,children:y},h.value),[h.disabled,h.value,y]),{onNativeOptionAdd:N,onNativeOptionRemove:b}=p;return Xt(()=>(N(w),()=>b(w)),[N,b,w]),l.jsxs(l.Fragment,{children:[l.jsx(ot.span,{id:h.textId,...i,ref:v}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?ji.createPortal(i.children,c.valueNode):null]})});mw.displayName=hi;var pw="SelectItemIndicator",gw=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return fw(pw,n).isSelected?l.jsx(ot.span,{"aria-hidden":!0,...r,ref:t}):null});gw.displayName=pw;var uh="SelectScrollUpButton",vw=_.forwardRef((e,t)=>{const n=Ds(uh,e.__scopeSelect),r=Wh(uh,e.__scopeSelect),[o,i]=_.useState(!1),c=kt(t,r.onScrollButtonChange);return Xt(()=>{if(n.viewport&&n.isPositioned){let u=function(){const p=h.scrollTop>0;i(p)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),o?l.jsx(xw,{...e,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});vw.displayName=uh;var dh="SelectScrollDownButton",yw=_.forwardRef((e,t)=>{const n=Ds(dh,e.__scopeSelect),r=Wh(dh,e.__scopeSelect),[o,i]=_.useState(!1),c=kt(t,r.onScrollButtonChange);return Xt(()=>{if(n.viewport&&n.isPositioned){let u=function(){const p=h.scrollHeight-h.clientHeight,f=Math.ceil(h.scrollTop)<p;i(f)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),o?l.jsx(xw,{...e,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});yw.displayName=dh;var xw=_.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,i=Ds("SelectScrollButton",n),c=_.useRef(null),u=Xc(n),h=_.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return _.useEffect(()=>()=>h(),[h]),Xt(()=>{u().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),l.jsx(ot.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:at(o.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:at(o.onPointerMove,()=>{i.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:at(o.onPointerLeave,()=>{h()})})}),gP="SelectSeparator",vP=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return l.jsx(ot.div,{"aria-hidden":!0,...r,ref:t})});vP.displayName=gP;var fh="SelectArrow",yP=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Zc(n),i=Os(fh,n),c=Ds(fh,n);return i.open&&c.position==="popper"?l.jsx(U0,{...o,...r,ref:t}):null});yP.displayName=fh;var xP="SelectBubbleInput",ww=_.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const o=_.useRef(null),i=kt(r,o),c=_h(t);return _.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==t&&f){const m=new Event("change",{bubbles:!0});f.call(u,t),u.dispatchEvent(m)}},[c,t]),l.jsx(ot.select,{...n,style:{...z0,...n.style},ref:i,defaultValue:t})});ww.displayName=xP;function bw(e){return e===""||e===void 0}function _w(e){const t=Vr(e),n=_.useRef(""),r=_.useRef(0),o=_.useCallback(c=>{const u=n.current+c;t(u),(function h(p){n.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>h(""),1e3))})(u)},[t]),i=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,i]}function Nw(e,t,n){const o=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let c=wP(e,Math.max(i,0));o.length===1&&(c=c.filter(p=>p!==n));const h=c.find(p=>p.textValue.toLowerCase().startsWith(o.toLowerCase()));return h!==n?h:void 0}function wP(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var bP=X0,_P=ew,NP=nw,SP=rw,jP=sw,CP=ow,kP=cw,EP=hw,PP=mw,RP=gw,AP=vw,TP=yw;function Hh({...e}){return l.jsx(bP,{"data-slot":"select",...e})}function Vh({...e}){return l.jsx(NP,{"data-slot":"select-value",...e})}function qh({className:e,size:t="default",children:n,...r}){return l.jsxs(_P,{"data-slot":"select-trigger","data-size":t,className:rt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,l.jsx(SP,{asChild:!0,children:l.jsx(_x,{className:"size-4 opacity-50"})})]})}function Gh({className:e,children:t,position:n="popper",...r}){return l.jsx(jP,{children:l.jsxs(CP,{"data-slot":"select-content",className:rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-[var(--radix-select-content-available-height)] min-w-[8rem] origin-[var(--radix-select-content-transform-origin)] overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[l.jsx(IP,{}),l.jsx(kP,{className:rt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),l.jsx(OP,{})]})})}function Yh({className:e,children:t,...n}){return l.jsxs(EP,{"data-slot":"select-item",className:rt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[l.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:l.jsx(RP,{children:l.jsx(io,{className:"size-4"})})}),l.jsx(PP,{children:t})]})}function IP({className:e,...t}){return l.jsx(AP,{"data-slot":"select-scroll-up-button",className:rt("flex cursor-default items-center justify-center py-1",e),...t,children:l.jsx(xN,{className:"size-4"})})}function OP({className:e,...t}){return l.jsx(TP,{"data-slot":"select-scroll-down-button",className:rt("flex cursor-default items-center justify-center py-1",e),...t,children:l.jsx(_x,{className:"size-4"})})}const DP=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}];function MP({value:e,onChange:t}){const n=(o,i)=>t({...e,[o]:i}),r="mt-1 h-10 bg-white text-[#1f2b15] border-[0.5px] border-[#d1d5db] px-3 focus:border-black focus:ring-0 focus-visible:ring-4 focus-visible:ring-[#c54a2c]/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white";return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(nt,{children:"Street Address"}),l.jsx(bt,{className:r,value:e.street,onChange:o=>n("street",o.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx(nt,{children:"City"}),l.jsx(bt,{className:r,value:e.city,onChange:o=>n("city",o.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx(nt,{children:"State"}),l.jsxs(Hh,{value:e.state,onValueChange:o=>n("state",o),children:[l.jsx(qh,{className:rt(r,"[&>span]:truncate"),children:l.jsx(Vh,{placeholder:"State"})}),l.jsx(Gh,{children:DP.map(o=>l.jsxs(Yh,{value:o.code,children:[o.code," - ",o.name]},o.code))})]})]}),l.jsxs("div",{children:[l.jsx(nt,{children:"ZIP/Postal Code"}),l.jsx(bt,{className:r,value:e.zipCode,onChange:o=>n("zipCode",o.target.value),required:!0})]})]})}function pt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Bn(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function yn(e,t){const n=pt(e);return isNaN(t)?Bn(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function ur(e,t){const n=pt(e);if(isNaN(t))return Bn(e,NaN);if(!t)return n;const r=n.getDate(),o=Bn(e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const i=o.getDate();return r>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}const Kh=6048e5,FP=864e5;let LP={};function Pi(){return LP}function jr(e,t){const n=Pi(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=pt(e),i=o.getDay(),c=(i<r?7:0)+i-r;return o.setDate(o.getDate()-c),o.setHours(0,0,0,0),o}function fo(e){return jr(e,{weekStartsOn:1})}function Sw(e){const t=pt(e),n=t.getFullYear(),r=Bn(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=fo(r),i=Bn(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const c=fo(i);return t.getTime()>=o.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}function ha(e){const t=pt(e);return t.setHours(0,0,0,0),t}function Ec(e){const t=pt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function _r(e,t){const n=ha(e),r=ha(t),o=+n-Ec(n),i=+r-Ec(r);return Math.round((o-i)/FP)}function BP(e){const t=Sw(e),n=Bn(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),fo(n)}function hh(e,t){const n=t*7;return yn(e,n)}function $P(e,t){return ur(e,t*12)}function UP(e){let t;return e.forEach(function(n){const r=pt(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function zP(e){let t;return e.forEach(n=>{const r=pt(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function En(e,t){const n=ha(e),r=ha(t);return+n==+r}function Qh(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function WP(e){if(!Qh(e)&&typeof e!="number")return!1;const t=pt(e);return!isNaN(Number(t))}function _i(e,t){const n=pt(e),r=pt(t),o=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return o*12+i}function HP(e,t,n){const r=jr(e,n),o=jr(t,n),i=+r-Ec(r),c=+o-Ec(o);return Math.round((i-c)/Kh)}function Jh(e){const t=pt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Pn(e){const t=pt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function jw(e){const t=pt(e),n=Bn(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Xh(e,t){const n=Pi(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=pt(e),i=o.getDay(),c=(i<r?-7:0)+6-(i-r);return o.setDate(o.getDate()+c),o.setHours(23,59,59,999),o}function Cw(e){return Xh(e,{weekStartsOn:1})}const VP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qP=(e,t,n)=>{let r;const o=VP[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function yf(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const GP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},YP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},KP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QP={date:yf({formats:GP,defaultWidth:"full"}),time:yf({formats:YP,defaultWidth:"full"}),dateTime:yf({formats:KP,defaultWidth:"full"})},JP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},XP=(e,t,n,r)=>JP[e];function ai(e){return(t,n)=>{const r=n?.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,u=n?.width?String(n.width):c;o=e.formattingValues[u]||e.formattingValues[c]}else{const c=e.defaultWidth,u=n?.width?String(n.width):e.defaultWidth;o=e.values[u]||e.values[c]}const i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}const ZP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},e4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},t4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},n4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},r4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},s4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},o4=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},a4={ordinalNumber:o4,era:ai({values:ZP,defaultWidth:"wide"}),quarter:ai({values:e4,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ai({values:t4,defaultWidth:"wide"}),day:ai({values:n4,defaultWidth:"wide"}),dayPeriod:ai({values:r4,defaultWidth:"wide",formattingValues:s4,defaultFormattingWidth:"wide"})};function ii(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;const c=i[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(u)?l4(u,m=>m.test(c)):i4(u,m=>m.test(c));let p;p=e.valueCallback?e.valueCallback(h):h,p=n.valueCallback?n.valueCallback(p):p;const f=t.slice(c.length);return{value:p,rest:f}}}function i4(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function l4(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function c4(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],i=t.match(e.parsePattern);if(!i)return null;let c=e.valueCallback?e.valueCallback(i[0]):i[0];c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(o.length);return{value:c,rest:u}}}const u4=/^(\d+)(th|st|nd|rd)?/i,d4=/\d+/i,f4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},h4={any:[/^b/i,/^(a|c)/i]},m4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},p4={any:[/1/i,/2/i,/3/i,/4/i]},g4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},v4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},y4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},x4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},w4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},b4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_4={ordinalNumber:c4({matchPattern:u4,parsePattern:d4,valueCallback:e=>parseInt(e,10)}),era:ii({matchPatterns:f4,defaultMatchWidth:"wide",parsePatterns:h4,defaultParseWidth:"any"}),quarter:ii({matchPatterns:m4,defaultMatchWidth:"wide",parsePatterns:p4,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ii({matchPatterns:g4,defaultMatchWidth:"wide",parsePatterns:v4,defaultParseWidth:"any"}),day:ii({matchPatterns:y4,defaultMatchWidth:"wide",parsePatterns:x4,defaultParseWidth:"any"}),dayPeriod:ii({matchPatterns:w4,defaultMatchWidth:"any",parsePatterns:b4,defaultParseWidth:"any"})},kw={code:"en-US",formatDistance:qP,formatLong:QP,formatRelative:XP,localize:a4,match:_4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function N4(e){const t=pt(e);return _r(t,jw(t))+1}function Ew(e){const t=pt(e),n=+fo(t)-+BP(t);return Math.round(n/Kh)+1}function Pw(e,t){const n=pt(e),r=n.getFullYear(),o=Pi(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,c=Bn(e,0);c.setFullYear(r+1,0,i),c.setHours(0,0,0,0);const u=jr(c,t),h=Bn(e,0);h.setFullYear(r,0,i),h.setHours(0,0,0,0);const p=jr(h,t);return n.getTime()>=u.getTime()?r+1:n.getTime()>=p.getTime()?r:r-1}function S4(e,t){const n=Pi(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=Pw(e,t),i=Bn(e,0);return i.setFullYear(o,0,r),i.setHours(0,0,0,0),jr(i,t)}function Rw(e,t){const n=pt(e),r=+jr(n,t)-+S4(n,t);return Math.round(r/Kh)+1}function jt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const xs={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return jt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):jt(n+1,2)},d(e,t){return jt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return jt(e.getHours()%12||12,t.length)},H(e,t){return jt(e.getHours(),t.length)},m(e,t){return jt(e.getMinutes(),t.length)},s(e,t){return jt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return jt(o,t.length)}},ta={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xy={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return xs.y(e,t)},Y:function(e,t,n,r){const o=Pw(e,r),i=o>0?o:1-o;if(t==="YY"){const c=i%100;return jt(c,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):jt(i,t.length)},R:function(e,t){const n=Sw(e);return jt(n,t.length)},u:function(e,t){const n=e.getFullYear();return jt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return jt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return jt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return xs.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return jt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=Rw(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):jt(o,t.length)},I:function(e,t,n){const r=Ew(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):jt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):xs.d(e,t)},D:function(e,t,n){const r=N4(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):jt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return jt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return jt(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return jt(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=ta.noon:r===0?o=ta.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=ta.evening:r>=12?o=ta.afternoon:r>=4?o=ta.morning:o=ta.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return xs.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):xs.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):jt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):jt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):xs.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):xs.s(e,t)},S:function(e,t){return xs.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return by(r);case"XXXX":case"XX":return eo(r);case"XXXXX":case"XXX":default:return eo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return by(r);case"xxxx":case"xx":return eo(r);case"xxxxx":case"xxx":default:return eo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+wy(r,":");case"OOOO":default:return"GMT"+eo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+wy(r,":");case"zzzz":default:return"GMT"+eo(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return jt(r,t.length)},T:function(e,t,n){const r=e.getTime();return jt(r,t.length)}};function wy(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),i=r%60;return i===0?n+String(o):n+String(o)+t+jt(i,2)}function by(e,t){return e%60===0?(e>0?"-":"+")+jt(Math.abs(e)/60,2):eo(e,t)}function eo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=jt(Math.trunc(r/60),2),i=jt(r%60,2);return n+o+t+i}const _y=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Aw=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},j4=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return _y(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",_y(r,t)).replace("{{time}}",Aw(o,t))},C4={p:Aw,P:j4},k4=/^D+$/,E4=/^Y+$/,P4=["D","DD","YY","YYYY"];function R4(e){return k4.test(e)}function A4(e){return E4.test(e)}function T4(e,t,n){const r=I4(e,t,n);if(console.warn(r),P4.includes(e))throw new RangeError(r)}function I4(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const O4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,M4=/^'([^]*?)'?$/,F4=/''/g,L4=/[a-zA-Z]/;function go(e,t,n){const r=Pi(),o=n?.locale??r.locale??kw,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,c=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,u=pt(e);if(!WP(u))throw new RangeError("Invalid time value");let h=t.match(D4).map(f=>{const m=f[0];if(m==="p"||m==="P"){const v=C4[m];return v(f,o.formatLong)}return f}).join("").match(O4).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const m=f[0];if(m==="'")return{isToken:!1,value:B4(f)};if(xy[m])return{isToken:!0,value:f};if(m.match(L4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:f}});o.localize.preprocessor&&(h=o.localize.preprocessor(u,h));const p={firstWeekContainsDate:i,weekStartsOn:c,locale:o};return h.map(f=>{if(!f.isToken)return f.value;const m=f.value;(!n?.useAdditionalWeekYearTokens&&A4(m)||!n?.useAdditionalDayOfYearTokens&&R4(m))&&T4(m,t,String(e));const v=xy[m[0]];return v(u,m,o.localize,p)}).join("")}function B4(e){const t=e.match(M4);return t?t[1].replace(F4,"'"):e}function $4(e){const t=pt(e),n=t.getFullYear(),r=t.getMonth(),o=Bn(e,0);return o.setFullYear(n,r+1,0),o.setHours(0,0,0,0),o.getDate()}function U4(e){return Math.trunc(+pt(e)/1e3)}function z4(e){const t=pt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function W4(e,t){return HP(z4(e),Pn(e),t)+1}function mh(e,t){const n=pt(e),r=pt(t);return n.getTime()>r.getTime()}function Tw(e,t){const n=pt(e),r=pt(t);return+n<+r}function Zh(e,t){const n=pt(e),r=pt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function H4(e,t){const n=pt(e),r=pt(t);return n.getFullYear()===r.getFullYear()}function xf(e,t){return yn(e,-t)}function wf(e,t){const n=pt(e),r=n.getFullYear(),o=n.getDate(),i=Bn(e,0);i.setFullYear(r,t,15),i.setHours(0,0,0,0);const c=$4(i);return n.setMonth(t,Math.min(o,c)),n}function Ny(e,t){const n=pt(e);return isNaN(+n)?Bn(e,NaN):(n.setFullYear(t),n)}var Ze=function(){return Ze=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ze.apply(this,arguments)};function V4(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function Iw(e,t,n){for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function Ri(e){return e.mode==="multiple"}function Ai(e){return e.mode==="range"}function eu(e){return e.mode==="single"}var q4={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function G4(e,t){return go(e,"LLLL y",t)}function Y4(e,t){return go(e,"d",t)}function K4(e,t){return go(e,"LLLL",t)}function Q4(e){return"".concat(e)}function J4(e,t){return go(e,"cccccc",t)}function X4(e,t){return go(e,"yyyy",t)}var Z4=Object.freeze({__proto__:null,formatCaption:G4,formatDay:Y4,formatMonthCaption:K4,formatWeekNumber:Q4,formatWeekdayName:J4,formatYearCaption:X4}),eR=function(e,t,n){return go(e,"do MMMM (EEEE)",n)},tR=function(){return"Month: "},nR=function(){return"Go to next month"},rR=function(){return"Go to previous month"},sR=function(e,t){return go(e,"cccc",t)},oR=function(e){return"Week n. ".concat(e)},aR=function(){return"Year: "},iR=Object.freeze({__proto__:null,labelDay:eR,labelMonthDropdown:tR,labelNext:nR,labelPrevious:rR,labelWeekNumber:oR,labelWeekday:sR,labelYearDropdown:aR});function lR(){var e="buttons",t=q4,n=kw,r={},o={},i=1,c={},u=new Date;return{captionLayout:e,classNames:t,formatters:Z4,labels:iR,locale:n,modifiersClassNames:r,modifiers:o,numberOfMonths:i,styles:c,today:u,mode:"default"}}function cR(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,o=e.toMonth,i=e.fromDate,c=e.toDate;return r?i=Pn(r):t&&(i=new Date(t,0,1)),o?c=Jh(o):n&&(c=new Date(n,11,31)),{fromDate:i?ha(i):void 0,toDate:c?ha(c):void 0}}var Ow=_.createContext(void 0);function uR(e){var t,n=e.initialProps,r=lR(),o=cR(n),i=o.fromDate,c=o.toDate,u=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;u!=="buttons"&&(!i||!c)&&(u="buttons");var h;(eu(n)||Ri(n)||Ai(n))&&(h=n.onSelect);var p=Ze(Ze(Ze({},r),n),{captionLayout:u,classNames:Ze(Ze({},r.classNames),n.classNames),components:Ze({},n.components),formatters:Ze(Ze({},r.formatters),n.formatters),fromDate:i,labels:Ze(Ze({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Ze(Ze({},r.modifiers),n.modifiers),modifiersClassNames:Ze(Ze({},r.modifiersClassNames),n.modifiersClassNames),onSelect:h,styles:Ze(Ze({},r.styles),n.styles),toDate:c});return l.jsx(Ow.Provider,{value:p,children:e.children})}function At(){var e=_.useContext(Ow);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Dw(e){var t=At(),n=t.locale,r=t.classNames,o=t.styles,i=t.formatters.formatCaption;return l.jsx("div",{className:r.caption_label,style:o.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:n})})}function dR(e){return l.jsx("svg",Ze({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:l.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Mw(e){var t,n,r=e.onChange,o=e.value,i=e.children,c=e.caption,u=e.className,h=e.style,p=At(),f=(n=(t=p.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:dR;return l.jsxs("div",{className:u,style:h,children:[l.jsx("span",{className:p.classNames.vhidden,children:e["aria-label"]}),l.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:p.classNames.dropdown,style:p.styles.dropdown,value:o,onChange:r,children:i}),l.jsxs("div",{className:p.classNames.caption_label,style:p.styles.caption_label,"aria-hidden":"true",children:[c,l.jsx(f,{className:p.classNames.dropdown_icon,style:p.styles.dropdown_icon})]})]})}function fR(e){var t,n=At(),r=n.fromDate,o=n.toDate,i=n.styles,c=n.locale,u=n.formatters.formatMonthCaption,h=n.classNames,p=n.components,f=n.labels.labelMonthDropdown;if(!r)return l.jsx(l.Fragment,{});if(!o)return l.jsx(l.Fragment,{});var m=[];if(H4(r,o))for(var v=Pn(r),y=r.getMonth();y<=o.getMonth();y++)m.push(wf(v,y));else for(var v=Pn(new Date),y=0;y<=11;y++)m.push(wf(v,y));var w=function(b){var j=Number(b.target.value),k=wf(Pn(e.displayMonth),j);e.onChange(k)},N=(t=p?.Dropdown)!==null&&t!==void 0?t:Mw;return l.jsx(N,{name:"months","aria-label":f(),className:h.dropdown_month,style:i.dropdown_month,onChange:w,value:e.displayMonth.getMonth(),caption:u(e.displayMonth,{locale:c}),children:m.map(function(b){return l.jsx("option",{value:b.getMonth(),children:u(b,{locale:c})},b.getMonth())})})}function hR(e){var t,n=e.displayMonth,r=At(),o=r.fromDate,i=r.toDate,c=r.locale,u=r.styles,h=r.classNames,p=r.components,f=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,v=[];if(!o)return l.jsx(l.Fragment,{});if(!i)return l.jsx(l.Fragment,{});for(var y=o.getFullYear(),w=i.getFullYear(),N=y;N<=w;N++)v.push(Ny(jw(new Date),N));var b=function(k){var C=Ny(Pn(n),Number(k.target.value));e.onChange(C)},j=(t=p?.Dropdown)!==null&&t!==void 0?t:Mw;return l.jsx(j,{name:"years","aria-label":m(),className:h.dropdown_year,style:u.dropdown_year,onChange:b,value:n.getFullYear(),caption:f(n,{locale:c}),children:v.map(function(k){return l.jsx("option",{value:k.getFullYear(),children:f(k,{locale:c})},k.getFullYear())})})}function mR(e,t){var n=_.useState(e),r=n[0],o=n[1],i=t===void 0?r:t;return[i,o]}function pR(e){var t=e.month,n=e.defaultMonth,r=e.today,o=t||n||r||new Date,i=e.toDate,c=e.fromDate,u=e.numberOfMonths,h=u===void 0?1:u;if(i&&_i(i,o)<0){var p=-1*(h-1);o=ur(i,p)}return c&&_i(o,c)<0&&(o=c),Pn(o)}function gR(){var e=At(),t=pR(e),n=mR(t,e.month),r=n[0],o=n[1],i=function(c){var u;if(!e.disableNavigation){var h=Pn(c);o(h),(u=e.onMonthChange)===null||u===void 0||u.call(e,h)}};return[r,i]}function vR(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,o=Pn(e),i=Pn(ur(o,r)),c=_i(i,o),u=[],h=0;h<c;h++){var p=ur(o,h);u.push(p)}return n&&(u=u.reverse()),u}function yR(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,o=t.numberOfMonths,i=o===void 0?1:o,c=r?i:1,u=Pn(e);if(!n)return ur(u,c);var h=_i(n,e);if(!(h<i))return ur(u,c)}}function xR(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,o=t.numberOfMonths,i=o===void 0?1:o,c=r?i:1,u=Pn(e);if(!n)return ur(u,-c);var h=_i(u,n);if(!(h<=0))return ur(u,-c)}}var Fw=_.createContext(void 0);function wR(e){var t=At(),n=gR(),r=n[0],o=n[1],i=vR(r,t),c=yR(r,t),u=xR(r,t),h=function(m){return i.some(function(v){return Zh(m,v)})},p=function(m,v){h(m)||(v&&Tw(m,v)?o(ur(m,1+t.numberOfMonths*-1)):o(m))},f={currentMonth:r,displayMonths:i,goToMonth:o,goToDate:p,previousMonth:u,nextMonth:c,isDateDisplayed:h};return l.jsx(Fw.Provider,{value:f,children:e.children})}function Ti(){var e=_.useContext(Fw);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Sy(e){var t,n=At(),r=n.classNames,o=n.styles,i=n.components,c=Ti().goToMonth,u=function(f){c(ur(f,e.displayIndex?-e.displayIndex:0))},h=(t=i?.CaptionLabel)!==null&&t!==void 0?t:Dw,p=l.jsx(h,{id:e.id,displayMonth:e.displayMonth});return l.jsxs("div",{className:r.caption_dropdowns,style:o.caption_dropdowns,children:[l.jsx("div",{className:r.vhidden,children:p}),l.jsx(fR,{onChange:u,displayMonth:e.displayMonth}),l.jsx(hR,{onChange:u,displayMonth:e.displayMonth})]})}function bR(e){return l.jsx("svg",Ze({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:l.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function _R(e){return l.jsx("svg",Ze({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:l.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Pc=_.forwardRef(function(e,t){var n=At(),r=n.classNames,o=n.styles,i=[r.button_reset,r.button];e.className&&i.push(e.className);var c=i.join(" "),u=Ze(Ze({},o.button_reset),o.button);return e.style&&Object.assign(u,e.style),l.jsx("button",Ze({},e,{ref:t,type:"button",className:c,style:u}))});function NR(e){var t,n,r=At(),o=r.dir,i=r.locale,c=r.classNames,u=r.styles,h=r.labels,p=h.labelPrevious,f=h.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return l.jsx(l.Fragment,{});var v=p(e.previousMonth,{locale:i}),y=[c.nav_button,c.nav_button_previous].join(" "),w=f(e.nextMonth,{locale:i}),N=[c.nav_button,c.nav_button_next].join(" "),b=(t=m?.IconRight)!==null&&t!==void 0?t:_R,j=(n=m?.IconLeft)!==null&&n!==void 0?n:bR;return l.jsxs("div",{className:c.nav,style:u.nav,children:[!e.hidePrevious&&l.jsx(Pc,{name:"previous-month","aria-label":v,className:y,style:u.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:o==="rtl"?l.jsx(b,{className:c.nav_icon,style:u.nav_icon}):l.jsx(j,{className:c.nav_icon,style:u.nav_icon})}),!e.hideNext&&l.jsx(Pc,{name:"next-month","aria-label":w,className:N,style:u.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:o==="rtl"?l.jsx(j,{className:c.nav_icon,style:u.nav_icon}):l.jsx(b,{className:c.nav_icon,style:u.nav_icon})})]})}function jy(e){var t=At().numberOfMonths,n=Ti(),r=n.previousMonth,o=n.nextMonth,i=n.goToMonth,c=n.displayMonths,u=c.findIndex(function(w){return Zh(e.displayMonth,w)}),h=u===0,p=u===c.length-1,f=t>1&&(h||!p),m=t>1&&(p||!h),v=function(){r&&i(r)},y=function(){o&&i(o)};return l.jsx(NR,{displayMonth:e.displayMonth,hideNext:f,hidePrevious:m,nextMonth:o,previousMonth:r,onPreviousClick:v,onNextClick:y})}function SR(e){var t,n=At(),r=n.classNames,o=n.disableNavigation,i=n.styles,c=n.captionLayout,u=n.components,h=(t=u?.CaptionLabel)!==null&&t!==void 0?t:Dw,p;return o?p=l.jsx(h,{id:e.id,displayMonth:e.displayMonth}):c==="dropdown"?p=l.jsx(Sy,{displayMonth:e.displayMonth,id:e.id}):c==="dropdown-buttons"?p=l.jsxs(l.Fragment,{children:[l.jsx(Sy,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),l.jsx(jy,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):p=l.jsxs(l.Fragment,{children:[l.jsx(h,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),l.jsx(jy,{displayMonth:e.displayMonth,id:e.id})]}),l.jsx("div",{className:r.caption,style:i.caption,children:p})}function jR(e){var t=At(),n=t.footer,r=t.styles,o=t.classNames.tfoot;return n?l.jsx("tfoot",{className:o,style:r.tfoot,children:l.jsx("tr",{children:l.jsx("td",{colSpan:8,children:n})})}):l.jsx(l.Fragment,{})}function CR(e,t,n){for(var r=n?fo(new Date):jr(new Date,{locale:e,weekStartsOn:t}),o=[],i=0;i<7;i++){var c=yn(r,i);o.push(c)}return o}function kR(){var e=At(),t=e.classNames,n=e.styles,r=e.showWeekNumber,o=e.locale,i=e.weekStartsOn,c=e.ISOWeek,u=e.formatters.formatWeekdayName,h=e.labels.labelWeekday,p=CR(o,i,c);return l.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&l.jsx("td",{style:n.head_cell,className:t.head_cell}),p.map(function(f,m){return l.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":h(f,{locale:o}),children:u(f,{locale:o})},m)})]})}function ER(){var e,t=At(),n=t.classNames,r=t.styles,o=t.components,i=(e=o?.HeadRow)!==null&&e!==void 0?e:kR;return l.jsx("thead",{style:r.head,className:n.head,children:l.jsx(i,{})})}function PR(e){var t=At(),n=t.locale,r=t.formatters.formatDay;return l.jsx(l.Fragment,{children:r(e.date,{locale:n})})}var em=_.createContext(void 0);function RR(e){if(!Ri(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return l.jsx(em.Provider,{value:t,children:e.children})}return l.jsx(AR,{initialProps:e.initialProps,children:e.children})}function AR(e){var t=e.initialProps,n=e.children,r=t.selected,o=t.min,i=t.max,c=function(p,f,m){var v,y;(v=t.onDayClick)===null||v===void 0||v.call(t,p,f,m);var w=!!(f.selected&&o&&r?.length===o);if(!w){var N=!!(!f.selected&&i&&r?.length===i);if(!N){var b=r?Iw([],r):[];if(f.selected){var j=b.findIndex(function(k){return En(p,k)});b.splice(j,1)}else b.push(p);(y=t.onSelect)===null||y===void 0||y.call(t,b,p,f,m)}}},u={disabled:[]};r&&u.disabled.push(function(p){var f=i&&r.length>i-1,m=r.some(function(v){return En(v,p)});return!!(f&&!m)});var h={selected:r,onDayClick:c,modifiers:u};return l.jsx(em.Provider,{value:h,children:n})}function tm(){var e=_.useContext(em);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function TR(e,t){var n=t||{},r=n.from,o=n.to;return r&&o?En(o,e)&&En(r,e)?void 0:En(o,e)?{from:o,to:void 0}:En(r,e)?void 0:mh(r,e)?{from:e,to:o}:{from:r,to:e}:o?mh(e,o)?{from:o,to:e}:{from:e,to:o}:r?Tw(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var nm=_.createContext(void 0);function IR(e){if(!Ai(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l.jsx(nm.Provider,{value:t,children:e.children})}return l.jsx(OR,{initialProps:e.initialProps,children:e.children})}function OR(e){var t=e.initialProps,n=e.children,r=t.selected,o=r||{},i=o.from,c=o.to,u=t.min,h=t.max,p=function(y,w,N){var b,j;(b=t.onDayClick)===null||b===void 0||b.call(t,y,w,N);var k=TR(y,r);(j=t.onSelect)===null||j===void 0||j.call(t,k,y,w,N)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(f.range_start=[i],c?(f.range_end=[c],En(i,c)||(f.range_middle=[{after:i,before:c}])):f.range_end=[i]):c&&(f.range_start=[c],f.range_end=[c]),u&&(i&&!c&&f.disabled.push({after:xf(i,u-1),before:yn(i,u-1)}),i&&c&&f.disabled.push({after:i,before:yn(i,u-1)}),!i&&c&&f.disabled.push({after:xf(c,u-1),before:yn(c,u-1)})),h){if(i&&!c&&(f.disabled.push({before:yn(i,-h+1)}),f.disabled.push({after:yn(i,h-1)})),i&&c){var m=_r(c,i)+1,v=h-m;f.disabled.push({before:xf(i,v)}),f.disabled.push({after:yn(c,v)})}!i&&c&&(f.disabled.push({before:yn(c,-h+1)}),f.disabled.push({after:yn(c,h-1)}))}return l.jsx(nm.Provider,{value:{selected:r,onDayClick:p,modifiers:f},children:n})}function rm(){var e=_.useContext(nm);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function dc(e){return Array.isArray(e)?Iw([],e):e!==void 0?[e]:[]}function DR(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],o=n[1];t[r]=dc(o)}),t}var dr;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(dr||(dr={}));var MR=dr.Selected,Lr=dr.Disabled,FR=dr.Hidden,LR=dr.Today,bf=dr.RangeEnd,_f=dr.RangeMiddle,Nf=dr.RangeStart,BR=dr.Outside;function $R(e,t,n){var r,o=(r={},r[MR]=dc(e.selected),r[Lr]=dc(e.disabled),r[FR]=dc(e.hidden),r[LR]=[e.today],r[bf]=[],r[_f]=[],r[Nf]=[],r[BR]=[],r);return e.fromDate&&o[Lr].push({before:e.fromDate}),e.toDate&&o[Lr].push({after:e.toDate}),Ri(e)?o[Lr]=o[Lr].concat(t.modifiers[Lr]):Ai(e)&&(o[Lr]=o[Lr].concat(n.modifiers[Lr]),o[Nf]=n.modifiers[Nf],o[_f]=n.modifiers[_f],o[bf]=n.modifiers[bf]),o}var Lw=_.createContext(void 0);function UR(e){var t=At(),n=tm(),r=rm(),o=$R(t,n,r),i=DR(t.modifiers),c=Ze(Ze({},o),i);return l.jsx(Lw.Provider,{value:c,children:e.children})}function Bw(){var e=_.useContext(Lw);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function zR(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function WR(e){return!!(e&&typeof e=="object"&&"from"in e)}function HR(e){return!!(e&&typeof e=="object"&&"after"in e)}function VR(e){return!!(e&&typeof e=="object"&&"before"in e)}function qR(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function GR(e,t){var n,r=t.from,o=t.to;if(r&&o){var i=_r(o,r)<0;i&&(n=[o,r],r=n[0],o=n[1]);var c=_r(e,r)>=0&&_r(o,e)>=0;return c}return o?En(o,e):r?En(r,e):!1}function YR(e){return Qh(e)}function KR(e){return Array.isArray(e)&&e.every(Qh)}function QR(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(YR(n))return En(e,n);if(KR(n))return n.includes(e);if(WR(n))return GR(e,n);if(qR(n))return n.dayOfWeek.includes(e.getDay());if(zR(n)){var r=_r(n.before,e),o=_r(n.after,e),i=r>0,c=o<0,u=mh(n.before,n.after);return u?c&&i:i||c}return HR(n)?_r(e,n.after)>0:VR(n)?_r(n.before,e)>0:typeof n=="function"?n(e):!1})}function sm(e,t,n){var r=Object.keys(t).reduce(function(i,c){var u=t[c];return QR(e,u)&&i.push(c),i},[]),o={};return r.forEach(function(i){return o[i]=!0}),n&&!Zh(e,n)&&(o.outside=!0),o}function JR(e,t){for(var n=Pn(e[0]),r=Jh(e[e.length-1]),o,i,c=n;c<=r;){var u=sm(c,t),h=!u.disabled&&!u.hidden;if(!h){c=yn(c,1);continue}if(u.selected)return c;u.today&&!i&&(i=c),o||(o=c),c=yn(c,1)}return i||o}var XR=365;function $w(e,t){var n=t.moveBy,r=t.direction,o=t.context,i=t.modifiers,c=t.retry,u=c===void 0?{count:0,lastFocused:e}:c,h=o.weekStartsOn,p=o.fromDate,f=o.toDate,m=o.locale,v={day:yn,week:hh,month:ur,year:$P,startOfWeek:function(b){return o.ISOWeek?fo(b):jr(b,{locale:m,weekStartsOn:h})},endOfWeek:function(b){return o.ISOWeek?Cw(b):Xh(b,{locale:m,weekStartsOn:h})}},y=v[n](e,r==="after"?1:-1);r==="before"&&p?y=UP([p,y]):r==="after"&&f&&(y=zP([f,y]));var w=!0;if(i){var N=sm(y,i);w=!N.disabled&&!N.hidden}return w?y:u.count>XR?u.lastFocused:$w(y,{moveBy:n,direction:r,context:o,modifiers:i,retry:Ze(Ze({},u),{count:u.count+1})})}var Uw=_.createContext(void 0);function ZR(e){var t=Ti(),n=Bw(),r=_.useState(),o=r[0],i=r[1],c=_.useState(),u=c[0],h=c[1],p=JR(t.displayMonths,n),f=o??(u&&t.isDateDisplayed(u))?u:p,m=function(){h(o),i(void 0)},v=function(b){i(b)},y=At(),w=function(b,j){if(o){var k=$w(o,{moveBy:b,direction:j,context:y,modifiers:n});En(o,k)||(t.goToDate(k,o),v(k))}},N={focusedDay:o,focusTarget:f,blur:m,focus:v,focusDayAfter:function(){return w("day","after")},focusDayBefore:function(){return w("day","before")},focusWeekAfter:function(){return w("week","after")},focusWeekBefore:function(){return w("week","before")},focusMonthBefore:function(){return w("month","before")},focusMonthAfter:function(){return w("month","after")},focusYearBefore:function(){return w("year","before")},focusYearAfter:function(){return w("year","after")},focusStartOfWeek:function(){return w("startOfWeek","before")},focusEndOfWeek:function(){return w("endOfWeek","after")}};return l.jsx(Uw.Provider,{value:N,children:e.children})}function om(){var e=_.useContext(Uw);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function eA(e,t){var n=Bw(),r=sm(e,n,t);return r}var am=_.createContext(void 0);function tA(e){if(!eu(e.initialProps)){var t={selected:void 0};return l.jsx(am.Provider,{value:t,children:e.children})}return l.jsx(nA,{initialProps:e.initialProps,children:e.children})}function nA(e){var t=e.initialProps,n=e.children,r=function(i,c,u){var h,p,f;if((h=t.onDayClick)===null||h===void 0||h.call(t,i,c,u),c.selected&&!t.required){(p=t.onSelect)===null||p===void 0||p.call(t,void 0,i,c,u);return}(f=t.onSelect)===null||f===void 0||f.call(t,i,i,c,u)},o={selected:t.selected,onDayClick:r};return l.jsx(am.Provider,{value:o,children:n})}function zw(){var e=_.useContext(am);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function rA(e,t){var n=At(),r=zw(),o=tm(),i=rm(),c=om(),u=c.focusDayAfter,h=c.focusDayBefore,p=c.focusWeekAfter,f=c.focusWeekBefore,m=c.blur,v=c.focus,y=c.focusMonthBefore,w=c.focusMonthAfter,N=c.focusYearBefore,b=c.focusYearAfter,j=c.focusStartOfWeek,k=c.focusEndOfWeek,C=function(E){var D,W,F,M;eu(n)?(D=r.onDayClick)===null||D===void 0||D.call(r,e,t,E):Ri(n)?(W=o.onDayClick)===null||W===void 0||W.call(o,e,t,E):Ai(n)?(F=i.onDayClick)===null||F===void 0||F.call(i,e,t,E):(M=n.onDayClick)===null||M===void 0||M.call(n,e,t,E)},A=function(E){var D;v(e),(D=n.onDayFocus)===null||D===void 0||D.call(n,e,t,E)},L=function(E){var D;m(),(D=n.onDayBlur)===null||D===void 0||D.call(n,e,t,E)},T=function(E){var D;(D=n.onDayMouseEnter)===null||D===void 0||D.call(n,e,t,E)},B=function(E){var D;(D=n.onDayMouseLeave)===null||D===void 0||D.call(n,e,t,E)},P=function(E){var D;(D=n.onDayPointerEnter)===null||D===void 0||D.call(n,e,t,E)},I=function(E){var D;(D=n.onDayPointerLeave)===null||D===void 0||D.call(n,e,t,E)},$=function(E){var D;(D=n.onDayTouchCancel)===null||D===void 0||D.call(n,e,t,E)},H=function(E){var D;(D=n.onDayTouchEnd)===null||D===void 0||D.call(n,e,t,E)},G=function(E){var D;(D=n.onDayTouchMove)===null||D===void 0||D.call(n,e,t,E)},K=function(E){var D;(D=n.onDayTouchStart)===null||D===void 0||D.call(n,e,t,E)},V=function(E){var D;(D=n.onDayKeyUp)===null||D===void 0||D.call(n,e,t,E)},J=function(E){var D;switch(E.key){case"ArrowLeft":E.preventDefault(),E.stopPropagation(),n.dir==="rtl"?u():h();break;case"ArrowRight":E.preventDefault(),E.stopPropagation(),n.dir==="rtl"?h():u();break;case"ArrowDown":E.preventDefault(),E.stopPropagation(),p();break;case"ArrowUp":E.preventDefault(),E.stopPropagation(),f();break;case"PageUp":E.preventDefault(),E.stopPropagation(),E.shiftKey?N():y();break;case"PageDown":E.preventDefault(),E.stopPropagation(),E.shiftKey?b():w();break;case"Home":E.preventDefault(),E.stopPropagation(),j();break;case"End":E.preventDefault(),E.stopPropagation(),k();break}(D=n.onDayKeyDown)===null||D===void 0||D.call(n,e,t,E)},R={onClick:C,onFocus:A,onBlur:L,onKeyDown:J,onKeyUp:V,onMouseEnter:T,onMouseLeave:B,onPointerEnter:P,onPointerLeave:I,onTouchCancel:$,onTouchEnd:H,onTouchMove:G,onTouchStart:K};return R}function sA(){var e=At(),t=zw(),n=tm(),r=rm(),o=eu(e)?t.selected:Ri(e)?n.selected:Ai(e)?r.selected:void 0;return o}function oA(e){return Object.values(dr).includes(e)}function aA(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var o=e.modifiersClassNames[r];if(o)n.push(o);else if(oA(r)){var i=e.classNames["day_".concat(r)];i&&n.push(i)}}),n}function iA(e,t){var n=Ze({},e.styles.day);return Object.keys(t).forEach(function(r){var o;n=Ze(Ze({},n),(o=e.modifiersStyles)===null||o===void 0?void 0:o[r])}),n}function lA(e,t,n){var r,o,i,c=At(),u=om(),h=eA(e,t),p=rA(e,h),f=sA(),m=!!(c.onDayClick||c.mode!=="default");_.useEffect(function(){var T;h.outside||u.focusedDay&&m&&En(u.focusedDay,e)&&((T=n.current)===null||T===void 0||T.focus())},[u.focusedDay,e,n,m,h.outside]);var v=aA(c,h).join(" "),y=iA(c,h),w=!!(h.outside&&!c.showOutsideDays||h.hidden),N=(i=(o=c.components)===null||o===void 0?void 0:o.DayContent)!==null&&i!==void 0?i:PR,b=l.jsx(N,{date:e,displayMonth:t,activeModifiers:h}),j={style:y,className:v,children:b,role:"gridcell"},k=u.focusTarget&&En(u.focusTarget,e)&&!h.outside,C=u.focusedDay&&En(u.focusedDay,e),A=Ze(Ze(Ze({},j),(r={disabled:h.disabled,role:"gridcell"},r["aria-selected"]=h.selected,r.tabIndex=C||k?0:-1,r)),p),L={isButton:m,isHidden:w,activeModifiers:h,selectedDays:f,buttonProps:A,divProps:j};return L}function cA(e){var t=_.useRef(null),n=lA(e.date,e.displayMonth,t);return n.isHidden?l.jsx("div",{role:"gridcell"}):n.isButton?l.jsx(Pc,Ze({name:"day",ref:t},n.buttonProps)):l.jsx("div",Ze({},n.divProps))}function uA(e){var t=e.number,n=e.dates,r=At(),o=r.onWeekNumberClick,i=r.styles,c=r.classNames,u=r.locale,h=r.labels.labelWeekNumber,p=r.formatters.formatWeekNumber,f=p(Number(t),{locale:u});if(!o)return l.jsx("span",{className:c.weeknumber,style:i.weeknumber,children:f});var m=h(Number(t),{locale:u}),v=function(y){o(t,n,y)};return l.jsx(Pc,{name:"week-number","aria-label":m,className:c.weeknumber,style:i.weeknumber,onClick:v,children:f})}function dA(e){var t,n,r=At(),o=r.styles,i=r.classNames,c=r.showWeekNumber,u=r.components,h=(t=u?.Day)!==null&&t!==void 0?t:cA,p=(n=u?.WeekNumber)!==null&&n!==void 0?n:uA,f;return c&&(f=l.jsx("td",{className:i.cell,style:o.cell,children:l.jsx(p,{number:e.weekNumber,dates:e.dates})})),l.jsxs("tr",{className:i.row,style:o.row,children:[f,e.dates.map(function(m){return l.jsx("td",{className:i.cell,style:o.cell,role:"presentation",children:l.jsx(h,{displayMonth:e.displayMonth,date:m})},U4(m))})]})}function Cy(e,t,n){for(var r=n?.ISOWeek?Cw(t):Xh(t,n),o=n?.ISOWeek?fo(e):jr(e,n),i=_r(r,o),c=[],u=0;u<=i;u++)c.push(yn(o,u));var h=c.reduce(function(p,f){var m=n?.ISOWeek?Ew(f):Rw(f,n),v=p.find(function(y){return y.weekNumber===m});return v?(v.dates.push(f),p):(p.push({weekNumber:m,dates:[f]}),p)},[]);return h}function fA(e,t){var n=Cy(Pn(e),Jh(e),t);if(t?.useFixedWeeks){var r=W4(e,t);if(r<6){var o=n[n.length-1],i=o.dates[o.dates.length-1],c=hh(i,6-r),u=Cy(hh(i,1),c,t);n.push.apply(n,u)}}return n}function hA(e){var t,n,r,o=At(),i=o.locale,c=o.classNames,u=o.styles,h=o.hideHead,p=o.fixedWeeks,f=o.components,m=o.weekStartsOn,v=o.firstWeekContainsDate,y=o.ISOWeek,w=fA(e.displayMonth,{useFixedWeeks:!!p,ISOWeek:y,locale:i,weekStartsOn:m,firstWeekContainsDate:v}),N=(t=f?.Head)!==null&&t!==void 0?t:ER,b=(n=f?.Row)!==null&&n!==void 0?n:dA,j=(r=f?.Footer)!==null&&r!==void 0?r:jR;return l.jsxs("table",{id:e.id,className:c.table,style:u.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!h&&l.jsx(N,{}),l.jsx("tbody",{className:c.tbody,style:u.tbody,children:w.map(function(k){return l.jsx(b,{displayMonth:e.displayMonth,dates:k.dates,weekNumber:k.weekNumber},k.weekNumber)})}),l.jsx(j,{displayMonth:e.displayMonth})]})}function mA(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var pA=mA()?_.useLayoutEffect:_.useEffect,Sf=!1,gA=0;function ky(){return"react-day-picker-".concat(++gA)}function vA(e){var t,n=e??(Sf?ky():null),r=_.useState(n),o=r[0],i=r[1];return pA(function(){o===null&&i(ky())},[]),_.useEffect(function(){Sf===!1&&(Sf=!0)},[]),(t=e??o)!==null&&t!==void 0?t:void 0}function yA(e){var t,n,r=At(),o=r.dir,i=r.classNames,c=r.styles,u=r.components,h=Ti().displayMonths,p=vA(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[i.month],v=c.month,y=e.displayIndex===0,w=e.displayIndex===h.length-1,N=!y&&!w;o==="rtl"&&(t=[y,w],w=t[0],y=t[1]),y&&(m.push(i.caption_start),v=Ze(Ze({},v),c.caption_start)),w&&(m.push(i.caption_end),v=Ze(Ze({},v),c.caption_end)),N&&(m.push(i.caption_between),v=Ze(Ze({},v),c.caption_between));var b=(n=u?.Caption)!==null&&n!==void 0?n:SR;return l.jsxs("div",{className:m.join(" "),style:v,children:[l.jsx(b,{id:p,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),l.jsx(hA,{id:f,"aria-labelledby":p,displayMonth:e.displayMonth})]},e.displayIndex)}function xA(e){var t=At(),n=t.classNames,r=t.styles;return l.jsx("div",{className:n.months,style:r.months,children:e.children})}function wA(e){var t,n,r=e.initialProps,o=At(),i=om(),c=Ti(),u=_.useState(!1),h=u[0],p=u[1];_.useEffect(function(){o.initialFocus&&i.focusTarget&&(h||(i.focus(i.focusTarget),p(!0)))},[o.initialFocus,h,i.focus,i.focusTarget,i]);var f=[o.classNames.root,o.className];o.numberOfMonths>1&&f.push(o.classNames.multiple_months),o.showWeekNumber&&f.push(o.classNames.with_weeknumber);var m=Ze(Ze({},o.styles.root),o.style),v=Object.keys(r).filter(function(w){return w.startsWith("data-")}).reduce(function(w,N){var b;return Ze(Ze({},w),(b={},b[N]=r[N],b))},{}),y=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:xA;return l.jsx("div",Ze({className:f.join(" "),style:m,dir:o.dir,id:o.id,nonce:r.nonce,title:r.title,lang:r.lang},v,{children:l.jsx(y,{children:c.displayMonths.map(function(w,N){return l.jsx(yA,{displayIndex:N,displayMonth:w},N)})})}))}function bA(e){var t=e.children,n=V4(e,["children"]);return l.jsx(uR,{initialProps:n,children:l.jsx(wR,{children:l.jsx(tA,{initialProps:n,children:l.jsx(RR,{initialProps:n,children:l.jsx(IR,{initialProps:n,children:l.jsx(UR,{children:l.jsx(ZR,{children:t})})})})})})})}function _A(e){return l.jsx(bA,Ze({},e,{children:l.jsx(wA,{initialProps:e})}))}function NA({className:e,classNames:t,showOutsideDays:n=!0,...r}){return l.jsx(_A,{showOutsideDays:n,className:rt("p-3",e),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:rt(zf({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:rt("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:rt(zf({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:o,...i})=>l.jsx(Oc,{className:rt("size-4",o),...i}),IconRight:({className:o,...i})=>l.jsx(Dc,{className:rt("size-4",o),...i})},...r})}var tu="Popover",[Ww]=Cr(tu,[Gc]),Ii=Gc(),[SA,Ms]=Ww(tu),Hw=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:c=!1}=e,u=Ii(t),h=_.useRef(null),[p,f]=_.useState(!1),[m,v]=ks({prop:r,defaultProp:o??!1,onChange:i,caller:tu});return l.jsx(B0,{...u,children:l.jsx(SA,{scope:t,contentId:Wr(),triggerRef:h,open:m,onOpenChange:v,onOpenToggle:_.useCallback(()=>v(y=>!y),[v]),hasCustomAnchor:p,onCustomAnchorAdd:_.useCallback(()=>f(!0),[]),onCustomAnchorRemove:_.useCallback(()=>f(!1),[]),modal:c,children:n})})};Hw.displayName=tu;var Vw="PopoverAnchor",jA=_.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Ms(Vw,n),i=Ii(n),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=o;return _.useEffect(()=>(c(),()=>u()),[c,u]),l.jsx(Uh,{...i,...r,ref:t})});jA.displayName=Vw;var qw="PopoverTrigger",Gw=_.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Ms(qw,n),i=Ii(n),c=kt(t,o.triggerRef),u=l.jsx(ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Xw(o.open),...r,ref:c,onClick:at(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?u:l.jsx(Uh,{asChild:!0,...i,children:u})});Gw.displayName=qw;var im="PopoverPortal",[CA,kA]=Ww(im,{forceMount:void 0}),Yw=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,i=Ms(im,t);return l.jsx(CA,{scope:t,forceMount:n,children:l.jsx(As,{present:n||i.open,children:l.jsx(Yc,{asChild:!0,container:o,children:r})})})};Yw.displayName=im;var ma="PopoverContent",Kw=_.forwardRef((e,t)=>{const n=kA(ma,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,i=Ms(ma,e.__scopePopover);return l.jsx(As,{present:r||i.open,children:i.modal?l.jsx(PA,{...o,ref:t}):l.jsx(RA,{...o,ref:t})})});Kw.displayName=ma;var EA=oo("PopoverContent.RemoveScroll"),PA=_.forwardRef((e,t)=>{const n=Ms(ma,e.__scopePopover),r=_.useRef(null),o=kt(t,r),i=_.useRef(!1);return _.useEffect(()=>{const c=r.current;if(c)return zh(c)},[]),l.jsx(Qc,{as:EA,allowPinchZoom:!0,children:l.jsx(Qw,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(e.onCloseAutoFocus,c=>{c.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:at(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,h=u.button===0&&u.ctrlKey===!0,p=u.button===2||h;i.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:at(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),RA=_.forwardRef((e,t)=>{const n=Ms(ma,e.__scopePopover),r=_.useRef(!1),o=_.useRef(!1);return l.jsx(Qw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=i.target;n.triggerRef.current?.contains(c)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),Qw=_.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:f,...m}=e,v=Ms(ma,n),y=Ii(n);return Th(),l.jsx(zc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:l.jsx(Uc,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:f,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:p,onDismiss:()=>v.onOpenChange(!1),children:l.jsx($0,{"data-state":Xw(v.open),role:"dialog",id:v.contentId,...y,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Jw="PopoverClose",AA=_.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Ms(Jw,n);return l.jsx(ot.button,{type:"button",...r,ref:t,onClick:at(e.onClick,()=>o.onOpenChange(!1))})});AA.displayName=Jw;var TA="PopoverArrow",IA=_.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Ii(n);return l.jsx(U0,{...o,...r,ref:t})});IA.displayName=TA;function Xw(e){return e?"open":"closed"}var OA=Hw,DA=Gw,MA=Yw,FA=Kw;function Ey({...e}){return l.jsx(OA,{"data-slot":"popover",...e})}function Py({...e}){return l.jsx(DA,{"data-slot":"popover-trigger",...e})}function Ry({className:e,align:t="center",sideOffset:n=4,...r}){return l.jsx(MA,{children:l.jsx(FA,{"data-slot":"popover-content",align:t,sideOffset:n,className:rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const Zw={weekday:"long",year:"numeric",month:"long",day:"numeric"},LA={year:"numeric",month:"short",day:"numeric"},BA=e=>{if(!e)return null;const[t,n,r]=e.split("-"),o=Number(t),i=Number(n),c=Number(r);return Number.isNaN(o)||Number.isNaN(i)||Number.isNaN(c)?null:new Date(o,i-1,c)},Ay=(e,t=Zw,n="en-US")=>{const r=BA(e);return r?r.toLocaleDateString(n,t):""},Oi=(e,t,n=Zw,r="en-US")=>{const o=Ay(e,n,r);if(!o)return"";const i=Ay(t,n,r);return!i||!t||t===e?o:`${o}  ${i}`},la=(e,t,n="en-US")=>Oi(e,t,LA,n),nu=e=>{if(!e)return"Select time";const[t,n]=e.split(":").map(Number),r=new Date;return r.setHours(t,n),r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},$A=()=>{const e=[];for(let t=0;t<24;t++)for(let n=0;n<60;n+=30){const r=`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`,o=nu(r);e.push({value:r,display:o})}return e},UA=({date:e,onDateChange:t,time:n,onTimeChange:r,minDate:o})=>{const[i,c]=_.useState(!1),[u,h]=_.useState(!1),f=(v=>{if(!v)return;const[y,w,N]=v.split("-").map(Number);return new Date(y,w-1,N)})(e),m=v=>v?v.split("-").reverse().join("/"):"Select a date";return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(nt,{className:"text-[#2d3d1f]",children:"Start Date"}),l.jsxs(Ey,{open:i,onOpenChange:c,children:[l.jsx(Py,{asChild:!0,children:l.jsxs(ue,{variant:"outline",className:rt("w-full justify-start text-left font-normal mt-1 bg-white text-[#1f2b15]",!e&&"text-muted-foreground"),children:[l.jsx(mn,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:m(e)})]})}),l.jsx(Ry,{className:"w-auto p-0",align:"start",children:l.jsx(NA,{mode:"single",selected:f,onSelect:v=>{if(!v)return;const y=v.getFullYear(),w=String(v.getMonth()+1).padStart(2,"0"),N=String(v.getDate()).padStart(2,"0");t(`${y}-${w}-${N}`),c(!1)},disabled:v=>!!o&&v<o})})]})]}),l.jsxs("div",{children:[l.jsx(nt,{className:"text-[#2d3d1f]",children:"Start Time"}),l.jsxs(Ey,{open:u,onOpenChange:h,children:[l.jsx(Py,{asChild:!0,children:l.jsxs(ue,{variant:"outline",className:rt("w-full justify-start text-left font-normal mt-1 bg-white text-[#1f2b15]",!n&&"text-muted-foreground"),children:[l.jsx(ya,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:nu(n)})]})}),l.jsx(Ry,{className:"w-64 p-0",align:"start",children:l.jsx("div",{className:"max-h-60 overflow-y-auto grid gap-1 p-2",children:$A().map(v=>l.jsx(ue,{variant:n===v.value?"default":"ghost",className:rt("justify-start font-normal",n===v.value?"bg-[#556B2F] text-white hover:bg-[#3c4f21]":"hover:bg-[#f8f9f6]"),onClick:()=>{r(v.value),h(!1)},children:v.display},v.value))})})]})]})]})},ph=(e,t)=>{if(!e)return"";const n=typeof t=="string"?parseInt(t,10):Math.trunc(t),r=Number.isFinite(n)&&n>0?n:1,[o,i,c]=e.split("-"),u=Number(o),h=Number(i),p=Number(c);if(Number.isNaN(u)||Number.isNaN(h)||Number.isNaN(p)||h<1||h>12||p<1||p>31)return e;const f=new Date(Date.UTC(u,h-1,p));return f.setUTCDate(f.getUTCDate()+(r-1)),f.toISOString().slice(0,10)},Ty=(e,t)=>{const n=t?.startDate??"",r=t?.numberOfDays??1,o=t?.endDate??(n?ph(n,r):"");return{title:t?.title??"",shortSummary:t?.shortSummary??"",startDate:n,startTime:t?.startTime??"",endDate:o,numberOfDays:String(r??1),hoursPerDay:t?.hoursPerDay?String(t.hoursPerDay):"",pricePerPerson:t?.pricePerPerson?(t.pricePerPerson/100).toFixed(2):"",maxStudents:String(t?.maxStudents??1),address:{street:t?.address?.street??"",city:t?.address?.city??"",state:t?.address?.state??"",zipCode:t?.address?.zipCode??""},instructorName:t?.instructorName??e?.name??"",minimumAge:String(t?.minimumAge??0),instructorBio:t?.instructorBio??e?.bio??"",advisories:t?.advisories??"",houseRules:t?.houseRules??"",photos:Array.isArray(t?.photos)?t.photos:[],auto_approve:t?.auto_approve??!1,hostId:t?.hostId??e?.id??"",host_id:t?.host_id??t?.hostId??e?.id??"",hostName:t?.hostName??e?.name??""}};function Iy({onSubmit:e,onCancel:t,user:n,initialData:r=null,mode:o="create"}){const i=o==="relaunch",[c,u]=_.useState(()=>Ty(n,r)),[h,p]=_.useState(!1);_.useEffect(()=>{u(Ty(n,r))},[r,n?.id,n?.name,n?.bio]);const f=(b,j)=>u(k=>{const C={...k,[b]:j};return(b==="startDate"||b==="numberOfDays")&&(C.endDate=ph(C.startDate,C.numberOfDays)),C}),m=b=>{if(b.preventDefault(),h)return we.info("Please wait for photos to finish uploading.");const j=YS(c,{requireFutureDate:i});if(j)return we.warning(j);const k=Number(c.numberOfDays),C=Number(c.maxStudents),A=Ts(c.pricePerPerson.trim()),L=Number(c.minimumAge||0),T=c.endDate||(c.startDate?ph(c.startDate,c.numberOfDays):""),B={...c,endDate:T,numberOfDays:k,hoursPerDay:c.hoursPerDay?Number(c.hoursPerDay):void 0,maxStudents:C,pricePerPerson:A,minimumAge:L};o==="edit"&&r?.id&&(B.id=r.id),e(B)},v=new Date;v.setDate(v.getDate()+1);const y=o==="edit"?void 0:v,w=Ck({bucket:"class-photos",prefix:c.hostId||n?.id||"anonymous"}),N="mt-1 w-full";return l.jsx("div",{className:"max-w-4xl mx-auto p-6",children:l.jsxs(We,{className:"bg-white border-[#a8b892] shadow-lg",children:[l.jsxs(vt,{className:"bg-[#556B2F] text-[#f8f9f6] rounded-t-lg",children:[l.jsx(mt,{className:"text-2xl text-white",children:o==="edit"?"Edit Class":i?"Relaunch Class":"Create a Class"}),l.jsx("p",{className:"text-[#a8b892]",children:o==="edit"?"Update your class details to keep students informed.":i?"We copied your class detailsset a new future date before relaunching.":"Share your homesteading knowledge with the community"})]}),l.jsxs(Ve,{className:"p-6",children:[i&&l.jsx("div",{className:"mb-6 rounded-md border border-yellow-300 bg-yellow-50 p-4 text-sm text-yellow-900",children:"Choose a new future start date and time before submitting to relaunch this class."}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"title",className:"text-[#2d3d1f]",children:"Title"}),l.jsx(bt,{id:"title",type:"text",value:c.title,onChange:b=>f("title",b.target.value),required:!0,className:N,placeholder:"e.g., Intro to Permaculture"})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"shortSummary",children:"Description (max 500 characters)"}),l.jsx(Gn,{id:"shortSummary",value:c.shortSummary,onChange:b=>f("shortSummary",b.target.value),maxLength:500,required:!0,className:N,placeholder:"What will students learn in this class?"}),l.jsxs("p",{className:"text-sm text-[#3c4f21] mt-1",children:[c.shortSummary.length,"/500 characters"]})]}),l.jsx(UA,{date:c.startDate,onDateChange:b=>f("startDate",b),time:c.startTime,onTimeChange:b=>f("startTime",b),minDate:y}),c.startDate&&c.endDate&&l.jsxs("p",{className:"text-sm text-[#556B2F]",children:["Your class runs from ",Oi(c.startDate,c.endDate),"."]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"numberOfDays",children:"Number of Days"}),l.jsx(bt,{id:"numberOfDays",type:"number",min:"1",value:c.numberOfDays,onChange:b=>f("numberOfDays",b.target.value),required:!0,className:N})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"hoursPerDay",children:"Hours per Day (optional)"}),l.jsx(bt,{id:"hoursPerDay",type:"number",min:"1",max:"12",step:"0.5",value:c.hoursPerDay,onChange:b=>f("hoursPerDay",b.target.value),className:N,placeholder:"e.g., 4"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"pricePerPerson",children:"Price per Person (USD)"}),l.jsx(bt,{id:"pricePerPerson",type:"number",step:"0.01",value:c.pricePerPerson,onChange:b=>f("pricePerPerson",b.target.value),required:!0,className:N})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"maxStudents",children:"Max Students"}),l.jsx(bt,{id:"maxStudents",type:"number",min:"1",value:c.maxStudents,onChange:b=>f("maxStudents",b.target.value),required:!0,className:N})]})]}),l.jsxs("div",{children:[l.jsx(nt,{className:"text-[#2d3d1f] mb-3 block",children:"Class Location"}),l.jsx("p",{className:"text-sm text-[#556B2F] mb-3 italic",children:"Only city and state will be shown publicly. Full address is shared with confirmed students."}),l.jsx(MP,{value:c.address,onChange:b=>f("address",b)})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"instructorName",children:"Instructor Name"}),l.jsx(bt,{id:"instructorName",value:c.instructorName,onChange:b=>f("instructorName",b.target.value),required:!0,className:N})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"minimumAge",children:"Minimum Age"}),l.jsx(bt,{id:"minimumAge",type:"number",min:"0",value:c.minimumAge,onChange:b=>f("minimumAge",b.target.value),className:N})]})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"instructorBio",children:"Instructor Bio"}),l.jsx(Gn,{id:"instructorBio",value:c.instructorBio,onChange:b=>f("instructorBio",b.target.value),className:N})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"advisories",children:"Advisories"}),l.jsx(Gn,{id:"advisories",value:c.advisories,onChange:b=>f("advisories",b.target.value),className:N})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"houseRules",children:"House Rules"}),l.jsx(Gn,{id:"houseRules",value:c.houseRules,onChange:b=>f("houseRules",b.target.value),className:N})]})]}),l.jsx(kk,{value:c.photos,onChange:b=>f("photos",b),adapter:w,maxPhotos:8}),l.jsxs("div",{className:"border-t border-[#a8b892] pt-6",children:[l.jsx(nt,{className:"mb-4 block",children:"Booking Settings"}),l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(Mx,{id:"auto_approve",checked:c.auto_approve,onCheckedChange:b=>f("auto_approve",b===!0),className:"mt-1 border border-black data-[state=checked]:bg-[#556B2F]"}),l.jsxs("div",{className:"space-y-1 text-sm text-[#556B2F]",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"When enabled:"})," Students book instantly with automatic confirmation."]}),l.jsxs("p",{children:[l.jsx("strong",{children:"When disabled:"})," You must manually approve or decline bookings."]})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-[#a8b892]",children:[l.jsx(ue,{type:"submit",className:"flex-1 bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",disabled:h,children:o==="edit"?"Save Changes":"Create Class"}),l.jsx(ue,{type:"button",variant:"outline",onClick:t,className:"flex-1 border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",children:"Cancel"})]})]})]})]})})}const zA=ux("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function an({className:e,variant:t,asChild:n=!1,...r}){const o=n?ix:"span";return l.jsx(o,{"data-slot":"badge",className:rt(zA({variant:t}),e),...r})}const WA="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Yn(e){const[t,n]=_.useState(!1),r=()=>{n(!0)},{src:o,alt:i,style:c,className:u,...h}=e;return t?l.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${u??""}`,style:c,children:l.jsx("div",{className:"flex items-center justify-center w-full h-full",children:l.jsx("img",{src:WA,alt:"Error loading image",...h,"data-original-url":o})})}):l.jsx("img",{src:o,alt:i,className:u,style:c,...h,onError:r})}async function HA(e,t,n,r){const{data:o,error:i}=await Ce.functions.invoke("create-checkout-session",{body:{class_id:e,user_id:t,qty:n,student_names:r}});if(i)throw new Error(i.message||"Could not start checkout");const c=o?.url;if(!c)throw new Error("Checkout URL missing from response");window.location.href=c}function eb({classData:e,user:t,onClose:n,onBookingSuccess:r,initialAvailableSpots:o}){const[i,c]=_.useState(1),[u,h]=_.useState([""]),[p,f]=_.useState(!1),[m,v]=_.useState(!1),[y,w]=_.useState(null),[N,b]=_.useState(typeof o=="number"?Math.max(0,o):null),[j,k]=_.useState(!1),C=8,A=Ts(e.pricePerPerson),L=A*i,T=Math.round(L*(C/100)),B=L+T,P=R=>(Number(R||0)/100).toFixed(2),I=(()=>{const R=N;return typeof R=="number"?Math.max(0,Math.min(R,e.maxStudents)):e.maxStudents})(),$=I>0,H=R=>{h(E=>{const D=[...E];for(;D.length<R;)D.push("");for(;D.length>R;)D.pop();return D})},G=R=>{if(!$)return;const E=Math.max(1,Math.min(R,I));c(E),H(E)};_.useEffect(()=>{if(N!=null){if(!$){c(1),H(1);return}c(R=>{const E=Math.max(1,Math.min(R,I));return E!==R&&H(E),E})}},[N,$,I]),_.useEffect(()=>{let R=!1;return(async()=>{try{k(!0);const{data:D,error:W}=await Ce.rpc("available_spots",{class_uuid:e.id});R||(W?(console.warn("Failed to load available spots:",W),b(null)):b(typeof D=="number"?Math.max(0,D):null))}catch(D){R||(console.warn("Failed to load available spots:",D),b(null))}finally{R||k(!1)}})(),()=>{R=!0}},[e.id]);const K=(R,E)=>{const D=[...u];D[R]=E,h(D)},V=()=>$&&i>0&&i<=I&&u.every(R=>R.trim().length>0)&&p,J=async()=>{if(V()){v(!0),w(null);try{const{data:{session:R},error:E}=await Ce.auth.getSession();if(E||!R?.user)throw new Error("Authentication required. Please sign in again.");const D=R.user.id,W=u.map(F=>F.trim()).filter(Boolean).slice(0,i);if(!$){w("This class is fully booked.");return}if(i>I){w(I===1?"Only 1 seat remains for this class.":`Only ${I} seats remain for this class.`);return}await HA(e.id,D,i,W)}catch(R){console.error("Booking error:",R),w(R?.message||"An error occurred while starting your checkout. Please try again.")}finally{v(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(We,{className:"bg-[#ffffff] border-[#a8b892] max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsx(vt,{className:"bg-[#556B2F] text-[#f8f9f6]",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs(mt,{className:"text-xl mb-2 text-[#f8f9f6]",children:["Book: ",e.title]}),l.jsxs("p",{className:"text-[#a8b892]",children:["with ",e.instructorName]})]}),l.jsx(ue,{variant:"ghost",size:"sm",onClick:n,className:"text-[#f8f9f6] hover:bg-[#6B7F3F]",children:l.jsx(Ln,{className:"w-4 h-4"})})]})}),l.jsxs(Ve,{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"bg-[#f8f9f6] rounded-lg p-4 space-y-2",children:[l.jsx("h4",{className:"font-semibold text-[#2d3d1f] mb-3",children:"Class Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(mn,{className:"w-4 h-4 text-[#556B2F]"}),l.jsx("span",{children:Oi(e.startDate,e.endDate)})]}),e.startTime&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ya,{className:"w-4 h-4 text-[#556B2F]"}),l.jsx("span",{children:nu(e.startTime)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(vi,{className:"w-4 h-4 text-[#556B2F]"}),l.jsxs("span",{children:["$",P(A)," per person"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Si,{className:"w-4 h-4 text-[#556B2F]"}),l.jsxs("span",{children:[e.address.city,", ",e.address.state]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-[#2d3d1f]",children:"Student Information"}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"studentCount",children:"Number of Students"}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(ue,{type:"button",variant:"outline",size:"sm",onClick:()=>G(i-1),disabled:!$||i<=1,className:"w-8 h-8 p-0",children:"-"}),l.jsx(bt,{id:"studentCount",type:"number",min:"1",max:Math.max(1,I),value:i,onChange:R=>G(parseInt(R.target.value)||1),className:"w-20 text-center",disabled:!$}),l.jsx(ue,{type:"button",variant:"outline",size:"sm",onClick:()=>G(i+1),disabled:!$||i>=I,className:"w-8 h-8 p-0",children:"+"}),l.jsx("span",{className:"text-sm text-[#556B2F] ml-2",children:j?"Checking availability...":$?I===1?"Only 1 seat left":`${I} seats left`:"No seats remaining"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(nt,{children:"Student Names"}),u.map((R,E)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ar,{className:"w-4 h-4 text-[#556B2F]"}),l.jsx(bt,{placeholder:`Student ${E+1} name`,value:R,onChange:D=>K(E,D.target.value),className:"flex-1",required:!0})]},E))]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"font-semibold text-[#2d3d1f]",children:"Cost Breakdown"}),l.jsxs("div",{className:"bg-[#f8f9f6] rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{children:["Class fee (",i,"  $",P(A),")"]}),l.jsxs("span",{children:["$",P(L)]})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{children:["HERD service fee (",C,"%)"]}),l.jsxs("span",{children:["$",P(T)]})]}),l.jsxs("div",{className:"border-t border-[#a8b892] pt-2 flex justify-between font-semibold",children:[l.jsx("span",{children:"Total"}),l.jsxs("span",{children:["$",P(B)]})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"font-semibold text-[#2d3d1f]",children:"Liability Agreement"}),l.jsx("div",{className:"bg-[#fff8e1] border border-[#f9cc33] rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(ZN,{className:"w-5 h-5 text-[#f39c12] flex-shrink-0 mt-0.5"}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Mx,{id:"liability",checked:p,onCheckedChange:R=>f(R===!0),className:"mt-1"}),l.jsx(nt,{htmlFor:"liability",className:"text-sm cursor-pointer",children:"By checking this box, I acknowledge that I understand the risks involved in this homesteading class and release both HERD and the class host from any liability for injuries or damages that may occur during the class activities. I participate at my own risk and agree to follow all safety instructions provided by the host."})]})})]})})]}),y&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:l.jsx("p",{className:"text-red-800 text-sm",children:y})}),l.jsx("div",{className:"pt-4 border-t border-[#a8b892]",children:l.jsx(ue,{onClick:J,disabled:!V()||m,className:"w-full bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",size:"lg",children:m?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):e.auto_approve?`Book Now - $${P(B)}`:`Request Booking - $${P(B)}`})})]})]})})}function VA({classes:e,onNavigate:t,user:n,onRequireAuth:r,onSelectClass:o,favorites:i,onToggleFavorite:c}){const[u,h]=_.useState(""),[p,f]=_.useState(null),m=e.filter(b=>b.title.toLowerCase().includes(u.toLowerCase())||b.shortSummary.toLowerCase().includes(u.toLowerCase())||b.instructorName.toLowerCase().includes(u.toLowerCase())),v=b=>la(b.startDate,b.endDate)||"Date TBD",y=b=>typeof b=="string"?b:`${b.city}, ${b.state}`,w=()=>{f(null)},N=({cls:b})=>{const j=i.includes(b.id),k=T=>{T.stopPropagation(),c(b.id)},C=b.hostRatingCount??b.hostProfile?.ratingCount??0,A=(()=>{if(typeof b.hostRatingAverage=="number")return b.hostRatingAverage;const T=b.hostProfile?.ratingAverage;return typeof T=="number"?T:null})(),L=A!==null&&Number.isFinite(A)&&C>0;return l.jsxs(We,{className:"bg-[#ffffff] border-[#a8b892] shadow-lg hover:shadow-xl transition-all cursor-pointer overflow-hidden",onClick:()=>o(b),children:[l.jsxs("div",{className:"relative w-full h-48 md:h-52 bg-gray-100",children:[b.photos&&b.photos.length>0?l.jsx(Yn,{src:b.photos[0],alt:b.title,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#f8f9f6] to-[#e8e9e6] flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-[#556B2F]",children:[l.jsx(mo,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm opacity-70",children:"No photo available"})]})}),l.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2",children:[l.jsx(an,{className:"bg-[#556B2F] text-[#f8f9f6] hover:bg-[#556B2F]",children:ir(b.pricePerPerson,{withCurrency:!0})}),l.jsx(ue,{type:"button",variant:"ghost",size:"icon",onClick:k,className:"h-9 w-9 rounded-full bg-white/80 text-[#c54a2c] hover:bg-white","aria-pressed":j,"aria-label":j?"Remove from favorites":"Add to favorites",children:j?l.jsx(Ns,{className:"h-5 w-5 fill-current"}):l.jsx(Ns,{className:"h-5 w-5"})})]})]}),l.jsx(vt,{className:"pb-3",children:l.jsx(mt,{className:"text-lg text-[#2d3d1f] leading-tight",children:b.title})}),l.jsxs(Ve,{className:"space-y-3",children:[l.jsx("p",{className:"text-[#3c4f21] text-sm line-clamp-2",children:b.shortSummary}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-[#3c4f21]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(mn,{className:"w-4 h-4 text-[#556B2F] flex-shrink-0"}),l.jsx("span",{className:"truncate",children:v(b)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ya,{className:"w-4 h-4 text-[#556B2F] flex-shrink-0"}),l.jsx("span",{className:"truncate",children:b.startTime?nu(b.startTime):`${b.numberOfDays} day${b.numberOfDays>1?"s":""}`})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ar,{className:"w-4 h-4 text-[#556B2F] flex-shrink-0"}),l.jsxs("span",{className:"truncate",children:["Max ",b.maxStudents," students"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Si,{className:"w-4 h-4 text-[#556B2F] flex-shrink-0"}),l.jsx("span",{className:"truncate",children:y(b.address)})]})]}),l.jsxs("div",{className:"pt-2 border-t border-[#a8b892] space-y-1",children:[l.jsxs("p",{className:"text-sm text-[#3c4f21] truncate",children:[l.jsx("span",{className:"font-medium",children:"Instructor:"})," ",b.instructorName]}),L?l.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#3c4f21]",children:[l.jsx(Fc,{className:"w-4 h-4 text-[#f2b01e]"}),l.jsxs("span",{children:[A.toFixed(1)," (",C," review",C===1?"":"s",")"]})]}):l.jsx("p",{className:"text-sm text-[#6b7c5b]",children:"No reviews yet"})]})]})]})};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-[#2d3d1f] mb-2",children:"Homesteading Classes"}),l.jsx("p",{className:"text-[#3c4f21]",children:"Discover hands-on learning opportunities in your community"})]}),l.jsxs(ue,{onClick:()=>{n?n.stripeConnected?t("create-class"):(we.warning("You need to connect your Stripe account before creating classes. Please complete your profile setup."),t("profile")):r()},className:"bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:[l.jsx(ca,{className:"w-4 h-4 mr-2"}),n?n.stripeConnected?"Create Class":"Setup Stripe to Teach":"Sign In to Teach"]})]})}),l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"relative max-w-md",children:[l.jsx(jx,{className:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-[#556B2F] h-4 w-4"}),l.jsx(bt,{type:"text",placeholder:"Search classes...",value:u,onChange:b=>h(b.target.value),className:"pl-12 !pl-12 pr-4 bg-[#ffffff] border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F]"})]})}),m.length===0?l.jsx(We,{className:"bg-[#ffffff] border-[#a8b892] p-12 text-center",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-xl text-[#2d3d1f]",children:e.length===0?"No classes available yet":"No classes match your search"}),l.jsx("p",{className:"text-[#3c4f21]",children:e.length===0?"Be the first to create a class and share your homesteading knowledge!":"Try adjusting your search terms or browse all available classes."}),l.jsxs(ue,{onClick:()=>{n?n.stripeConnected?t("create-class"):(we.warning("You need to connect your Stripe account before creating classes. Please complete your profile setup."),t("profile")):r()},className:"bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:[l.jsx(ca,{className:"w-4 h-4 mr-2"}),n?n.stripeConnected?"Create the First Class":"Setup Stripe to Create Class":"Sign In to Create Class"]})]})}):l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(b=>l.jsx(N,{cls:b},b.id))}),p&&n&&l.jsx(eb,{classData:p,user:n,onClose:()=>f(null),onBookingSuccess:w})]})}function qA({classData:e,user:t,onClose:n,onMessageSent:r}){const[o,i]=_.useState(""),[c,u]=_.useState(!1),h=async()=>{if(o.trim()){u(!0);try{const{data:{user:p},error:f}=await Ce.auth.getUser();if(f||!p){we.warning("Please log in to send messages.");return}const m=e.id;let v=e.hostId||e.host_id;const y=p.id;if(!v){console.log(" host_id missing, fetching from classes table...");const{data:C,error:A}=await Ce.from("classes").select("host_id").eq("id",m).single();if(A||!C?.host_id){console.error(" Could not fetch host_id:",A),we.error("Could not determine the host for this class."),u(!1);return}v=C.host_id,console.log(" host_id fetched:",v)}if(!v||!y){console.error(" hostId or guestId still undefined",{hostId:v,guestId:y}),we.error("Internal error: missing user or host ID."),u(!1);return}const w=`and(host_id.eq.${v},guest_id.eq.${y}),and(host_id.eq.${y},guest_id.eq.${v})`;console.log(" Querying conversations with filter:",w);const{data:N,error:b}=await Ce.from("conversations").select("id").eq("class_id",m).or(w).limit(1).maybeSingle();if(b)throw b;let j=N?.id;if(!j){console.log(" Creating new conversation...");const{data:C,error:A}=await Ce.from("conversations").insert({class_id:m,host_id:v,guest_id:y,last_message_at:new Date().toISOString()}).select("id").single();if(A)throw A;j=C.id,console.log(" Conversation created:",j)}j&&window.dispatchEvent(new CustomEvent("herd-conversation-ready",{detail:{conversationId:j,classId:m}}));const{error:k}=await Ce.from("messages").insert({conversation_id:j,sender_id:p.id,content:o.trim()});if(k)throw k;console.log(" Message sent successfully"),window.dispatchEvent(new CustomEvent("herd-message-sent")),r(),n()}catch(p){console.error(" Error sending message:",p),we.error("Failed to send message. Please try again.")}finally{u(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs(We,{className:"w-full max-w-lg bg-white",children:[l.jsxs(vt,{className:"border-b",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(mt,{className:"text-[#3c4f21] flex items-center gap-2",children:[l.jsx(pn,{className:"h-5 w-5"}),"Message ",e.hostName||e.instructorName||"Host"]}),l.jsx(ue,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",children:l.jsx(Ln,{className:"h-4 w-4"})})]}),l.jsxs("p",{className:"text-sm text-[#556B2F]",children:["Re: ",e.title]})]}),l.jsx(Ve,{className:"p-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-[#3c4f21] mb-2",children:"Your message:"}),l.jsx(Gn,{placeholder:"Type your message here...",value:o,onChange:p=>i(p.target.value),rows:4,className:"w-full resize-none",disabled:c})]}),l.jsxs("div",{className:"flex gap-3 justify-end",children:[l.jsx(ue,{variant:"outline",onClick:n,disabled:c,children:"Cancel"}),l.jsx(ue,{onClick:h,disabled:!o.trim()||c,className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",children:c?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Mc,{className:"h-4 w-4 mr-2"}),"Send Message"]})})]})]})})]})})}var ru="Dialog",[tb]=Cr(ru),[GA,fr]=tb(ru),nb=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:c=!0}=e,u=_.useRef(null),h=_.useRef(null),[p,f]=ks({prop:r,defaultProp:o??!1,onChange:i,caller:ru});return l.jsx(GA,{scope:t,triggerRef:u,contentRef:h,contentId:Wr(),titleId:Wr(),descriptionId:Wr(),open:p,onOpenChange:f,onOpenToggle:_.useCallback(()=>f(m=>!m),[f]),modal:c,children:n})};nb.displayName=ru;var rb="DialogTrigger",sb=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=fr(rb,n),i=kt(t,o.triggerRef);return l.jsx(ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":um(o.open),...r,ref:i,onClick:at(e.onClick,o.onOpenToggle)})});sb.displayName=rb;var lm="DialogPortal",[YA,ob]=tb(lm,{forceMount:void 0}),ab=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,i=fr(lm,t);return l.jsx(YA,{scope:t,forceMount:n,children:_.Children.map(r,c=>l.jsx(As,{present:n||i.open,children:l.jsx(Yc,{asChild:!0,container:o,children:c})}))})};ab.displayName=lm;var Rc="DialogOverlay",ib=_.forwardRef((e,t)=>{const n=ob(Rc,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=fr(Rc,e.__scopeDialog);return i.modal?l.jsx(As,{present:r||i.open,children:l.jsx(QA,{...o,ref:t})}):null});ib.displayName=Rc;var KA=oo("DialogOverlay.RemoveScroll"),QA=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=fr(Rc,n);return l.jsx(Qc,{as:KA,allowPinchZoom:!0,shards:[o.contentRef],children:l.jsx(ot.div,{"data-state":um(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ho="DialogContent",lb=_.forwardRef((e,t)=>{const n=ob(ho,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=fr(ho,e.__scopeDialog);return l.jsx(As,{present:r||i.open,children:i.modal?l.jsx(JA,{...o,ref:t}):l.jsx(XA,{...o,ref:t})})});lb.displayName=ho;var JA=_.forwardRef((e,t)=>{const n=fr(ho,e.__scopeDialog),r=_.useRef(null),o=kt(t,n.contentRef,r);return _.useEffect(()=>{const i=r.current;if(i)return zh(i)},[]),l.jsx(cb,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(e.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:at(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&i.preventDefault()}),onFocusOutside:at(e.onFocusOutside,i=>i.preventDefault())})}),XA=_.forwardRef((e,t)=>{const n=fr(ho,e.__scopeDialog),r=_.useRef(!1),o=_.useRef(!1);return l.jsx(cb,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=i.target;n.triggerRef.current?.contains(c)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),cb=_.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...c}=e,u=fr(ho,n),h=_.useRef(null),p=kt(t,h);return Th(),l.jsxs(l.Fragment,{children:[l.jsx(zc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:l.jsx(Uc,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":um(u.open),...c,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(ZA,{titleId:u.titleId}),l.jsx(tT,{contentRef:h,descriptionId:u.descriptionId})]})]})}),cm="DialogTitle",ub=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=fr(cm,n);return l.jsx(ot.h2,{id:o.titleId,...r,ref:t})});ub.displayName=cm;var db="DialogDescription",fb=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=fr(db,n);return l.jsx(ot.p,{id:o.descriptionId,...r,ref:t})});fb.displayName=db;var hb="DialogClose",mb=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=fr(hb,n);return l.jsx(ot.button,{type:"button",...r,ref:t,onClick:at(e.onClick,()=>o.onOpenChange(!1))})});mb.displayName=hb;function um(e){return e?"open":"closed"}var pb="DialogTitleWarning",[AO,gb]=DS(pb,{contentName:ho,titleName:cm,docsSlug:"dialog"}),ZA=({titleId:e})=>{const t=gb(pb),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return _.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},eT="DialogDescriptionWarning",tT=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${gb(eT).contentName}}.`;return _.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},vb=nb,nT=sb,yb=ab,xb=ib,wb=lb,bb=ub,_b=fb,Nb=mb;function rT({...e}){return l.jsx(vb,{"data-slot":"dialog",...e})}function sT({...e}){return l.jsx(yb,{"data-slot":"dialog-portal",...e})}const Sb=_.forwardRef(({className:e,...t},n)=>l.jsx(xb,{ref:n,"data-slot":"dialog-overlay",className:rt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t}));Sb.displayName="DialogOverlay";const jb=_.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(sT,{"data-slot":"dialog-portal",children:[l.jsx(Sb,{}),l.jsxs(wb,{ref:r,"data-slot":"dialog-content",className:rt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,l.jsxs(Nb,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[l.jsx(Ln,{}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));jb.displayName="DialogContent";function oT({className:e,...t}){return l.jsx(bb,{"data-slot":"dialog-title",className:rt("text-lg leading-none font-semibold",e),...t})}function aT({className:e,...t}){return l.jsx(_b,{"data-slot":"dialog-description",className:rt("text-muted-foreground text-sm",e),...t})}const nc=(e,t)=>e.length?t<0?e.length-1:t>=e.length?0:t:0;function Cb({photos:e,open:t,startIndex:n=0,onClose:r,title:o,onIndexChange:i}){const c=_.useMemo(()=>Array.isArray(e)?e.filter(Boolean):[],[e]),[u,h]=_.useState(()=>nc(c,n));_.useLayoutEffect(()=>{t&&h(nc(c,n))},[t,n,c]);const p=_.useCallback(()=>{h(y=>nc(c,y+1))},[c]),f=_.useCallback(()=>{h(y=>nc(c,y-1))},[c]);if(_.useEffect(()=>{if(!t)return;const y=w=>{c.length&&(w.key==="ArrowRight"?(w.preventDefault(),p()):w.key==="ArrowLeft"&&(w.preventDefault(),f()))};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[t,p,f,c.length]),_.useEffect(()=>{!i||!t||i(u)},[u,i,t]),!c.length)return null;const m=c[u]??c[0],v=c.length>1;return l.jsx(rT,{open:t,onOpenChange:y=>y?void 0:r(),children:l.jsxs(jb,{className:"max-w-[90vw] sm:max-w-[85vw] md:max-w-[80vw] lg:max-w-[70vw] xl:max-w-[65vw] w-full border-none bg-transparent p-0 shadow-none [&>button]:text-white","aria-describedby":void 0,children:[l.jsxs(W0,{children:[l.jsx(oT,{children:o||"Photo Lightbox"}),l.jsx(aT,{children:"Use arrow keys or buttons to navigate between photos."})]}),l.jsxs("div",{className:"relative flex h-[80vh] w-full items-center justify-center overflow-hidden rounded-lg bg-black",children:[v&&l.jsx(ue,{variant:"ghost",size:"icon",onClick:f,className:"absolute left-4 z-10 size-10 rounded-full bg-black/50 text-white transition hover:bg-black/70",children:l.jsx(Oc,{className:"size-6"})}),l.jsx("img",{src:m,alt:o?`${o} photo ${u+1}`:`Photo ${u+1}`,className:"max-h-full max-w-full object-contain"},`${u}-${m}`),v&&l.jsx(ue,{variant:"ghost",size:"icon",onClick:p,className:"absolute right-4 z-10 size-10 rounded-full bg-black/50 text-white transition hover:bg-black/70",children:l.jsx(Dc,{className:"size-6"})}),l.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 rounded-full bg-black/60 px-4 py-1 text-xs font-medium text-white",children:[u+1," / ",c.length]})]})]})})}function iT(e,t){const[n,r]=_.useState(null),[o,i]=_.useState(!1),c=_.useCallback(async()=>{if(!e||!t){r(null);return}i(!0);try{let u=null;const{data:h,error:p,status:f}=await Ce.from("conversations").select("id").eq("class_id",e).eq("guest_id",t).limit(1).maybeSingle();if(p&&f!==406&&console.warn("useExistingConversation guest lookup error",p),h?.id&&(u=h.id),!u){const{data:m,error:v,status:y}=await Ce.from("conversations").select("id").eq("class_id",e).eq("host_id",t).limit(1).maybeSingle();v&&y!==406&&console.warn("useExistingConversation host lookup error",v),m?.id&&(u=m.id)}r(u)}catch(u){console.error("useExistingConversation failed",u),r(null)}finally{i(!1)}},[e,t]);return _.useEffect(()=>{c()},[c]),_.useEffect(()=>{if(!e)return;const u=h=>{const p=h;p.detail?.classId===e&&p.detail?.conversationId&&r(p.detail.conversationId)};return window.addEventListener("herd-conversation-ready",u),()=>window.removeEventListener("herd-conversation-ready",u)},[e]),{conversationId:n,loading:o,refresh:c}}function lT({classData:e,user:t,onNavigate:n,onRequireAuth:r,onViewHost:o,favorites:i,onToggleFavorite:c,onOpenConversation:u}){const[h,p]=_.useState(0),[f,m]=_.useState(null),[v,y]=_.useState(null),[w,N]=_.useState(!0),[b,j]=_.useState(!1),[k,C]=_.useState(null),[A,L]=_.useState(!1),T=Ts(e.pricePerPerson),B=ir(T,{withCurrency:!0}),P=se=>{if(!se)return"";const[he,Ee]=se.split(":"),Se=parseInt(he),z=Se>=12?"PM":"AM";return`${Se%12||12}:${Ee} ${z}`},I=se=>typeof se=="string"?se:`${se.city}, ${se.state}`,$=se=>{t?m(se):r()},H=()=>{m(null),ie()},G=e.hostId||e.host_id||e.instructorId,{conversationId:K,refresh:V}=iT(e.id,t?.id),J=se=>{if(!t){r();return}j(!0)},R=()=>{we.success(`Message sent to ${e.instructorName}! You can continue the conversation in your dashboard messages.`),V(),setTimeout(()=>{V()},500)};_.useEffect(()=>{const se=()=>{V(),setTimeout(()=>{V()},500)};return window.addEventListener("herd-message-sent",se),()=>window.removeEventListener("herd-message-sent",se)},[V]);const E=()=>{e.photos&&e.photos.length>1&&p(se=>se===e.photos.length-1?0:se+1)},D=()=>{e.photos&&e.photos.length>1&&p(se=>se===0?e.photos.length-1:se-1)},W=se=>p(se),F=e.photos&&e.photos.length>1,M=i.includes(e.id),U=()=>{c(e.id)},te=se=>{p(se),L(!0)},Q=e.hostRatingCount??e.hostProfile?.ratingCount??0,ee=(()=>{if(typeof e.hostRatingAverage=="number")return e.hostRatingAverage;const se=e.hostProfile?.ratingAverage;return typeof se=="number"?se:null})(),ce=ee!==null&&Number.isFinite(ee)&&Q>0,X=se=>{(se.key==="Enter"||se.key===" ")&&(se.preventDefault(),te(h))},ie=_.useCallback(async()=>{try{N(!0);const{data:se,error:he}=await Ce.rpc("available_spots",{class_uuid:e.id});if(he)throw he;y(typeof se=="number"?se:null)}catch(se){console.warn("Failed to fetch available spots (RPC):",se?.message||se),y(null)}finally{N(!1)}},[e.id]);_.useEffect(()=>{ie()},[ie,e.maxStudents]),_.useEffect(()=>{let se=!1;const he=e.instructorAvatar;return(async()=>{if(!he){se||C(null);return}if(/^https?:\/\//i.test(he)){se||C(he);return}const{data:Se,error:z}=await Ce.storage.from("avatars").createSignedUrl(he,3600*24*7);se||(z?(console.error("Failed to create signed URL for instructor avatar:",z.message??z),C(null)):C(Se?.signedUrl??null))})(),()=>{se=!0}},[e.instructorAvatar]);const fe=()=>{e?.instructorId&&o?.(e.instructorId,e)};return l.jsxs("div",{className:"min-h-screen bg-[#f8f9f6]",children:[l.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[l.jsx("div",{className:"mb-6",children:l.jsxs(ue,{variant:"ghost",onClick:()=>n("classes"),className:"text-[#556B2F] hover:bg-[#e8e9e6] hover:text-[#3c4f21]",children:[l.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Back to Classes"]})}),l.jsx("div",{className:"mb-8",children:l.jsx("div",{className:"relative bg-gray-100 rounded-lg overflow-hidden",children:e.photos&&e.photos.length>0?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative w-full h-64 md:h-96 cursor-zoom-in outline-none",role:"button",tabIndex:0,"aria-label":"Open photo gallery",onClick:()=>te(h),onKeyDown:X,children:[l.jsx(Yn,{src:e.photos[h],alt:`${e.title} - Image ${h+1}`,className:"w-full h-full object-cover"}),F&&l.jsxs(l.Fragment,{children:[l.jsx(ue,{variant:"ghost",size:"sm",onClick:se=>{se.stopPropagation(),D()},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white hover:bg-black/70",children:l.jsx(Oc,{className:"w-5 h-5"})}),l.jsx(ue,{variant:"ghost",size:"sm",onClick:se=>{se.stopPropagation(),E()},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white hover:bg-black/70",children:l.jsx(Dc,{className:"w-5 h-5"})})]}),F&&l.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:[h+1," / ",e.photos.length]}),l.jsx("div",{className:"absolute top-4 right-4",children:l.jsx(an,{className:"bg-[#556B2F] text-[#f8f9f6] hover:bg-[#556B2F] text-lg px-3 py-1",children:B})})]}),F&&l.jsx("div",{className:"flex gap-2 p-4 bg-white/90 overflow-x-auto",children:e.photos.map((se,he)=>l.jsx("button",{onClick:()=>W(he),className:`flex-shrink-0 w-16 h-16 rounded overflow-hidden border-2 transition-all ${he===h?"border-[#556B2F] shadow-md":"border-gray-300 hover:border-[#a8b892]"}`,children:l.jsx(Yn,{src:se,alt:`${e.title} - Thumbnail ${he+1}`,className:"w-full h-full object-cover"})},he))})]}):l.jsx("div",{className:"w-full h-64 md:h-96 bg-gradient-to-br from-[#f8f9f6] to-[#e8e9e6] flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-[#556B2F]",children:[l.jsx(mo,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),l.jsx("p",{className:"text-lg opacity-70",children:"No photos available"})]})})})}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"md:col-span-2 space-y-8",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[k&&l.jsx(Yn,{src:k,alt:`${e.instructorName??"Instructor"} headshot`,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover border-2 border-[#a8b892] shadow-sm"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsx("h1",{className:"text-3xl font-bold text-[#2d3d1f] mb-2",children:e.title}),l.jsx(ue,{type:"button",variant:"ghost",size:"icon",onClick:U,className:"h-10 w-10 rounded-full bg-[#f8f1ef] text-[#c54a2c] hover:bg-[#f1dcd6]","aria-pressed":M,"aria-label":M?"Remove class from favorites":"Add class to favorites",children:M?l.jsx(Ns,{className:"h-5 w-5 fill-current"}):l.jsx(Ns,{className:"h-5 w-5"})})]}),l.jsxs("p",{className:"text-lg text-[#556B2F]",children:["with"," ",l.jsx("button",{type:"button",onClick:fe,className:"underline underline-offset-2 decoration-[#a8b892] hover:text-[#3c4f21]",children:e.instructorName})]}),ce?l.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-[#3c4f21]",children:[l.jsx(Fc,{className:"w-4 h-4 text-[#f2b01e]"}),l.jsxs("span",{children:[ee.toFixed(1)," (",Q," review",Q===1?"":"s",")"]})]}):l.jsx("div",{className:"mt-2 text-sm text-[#6b7c5b]",children:"No reviews yet"})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-[#2d3d1f] mb-3",children:"About This Class"}),l.jsx("p",{className:"text-[#3c4f21] leading-relaxed",children:e.shortSummary})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-[#2d3d1f] mb-3",children:"About the Instructor"}),l.jsx("p",{className:"text-[#3c4f21] leading-relaxed",children:e.instructorBio})]}),e.advisories&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-[#2d3d1f] mb-3",children:"Important Information"}),l.jsx("p",{className:"text-[#3c4f21] leading-relaxed",children:e.advisories})]}),e.houseRules&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-[#2d3d1f] mb-3",children:"House Rules"}),l.jsx("p",{className:"text-[#3c4f21] leading-relaxed",children:e.houseRules})]})]}),l.jsx("div",{className:"space-y-6",children:l.jsxs(We,{className:"bg-[#ffffff] border-[#a8b892] sticky top-6",children:[l.jsx(vt,{children:l.jsx(mt,{className:"text-[#2d3d1f]",children:"Class Details"})}),l.jsxs(Ve,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(mn,{className:"w-5 h-5 text-[#556B2F] flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-[#2d3d1f]",children:Oi(e.startDate,e.endDate)}),e.startTime&&l.jsx("div",{className:"text-sm text-[#556B2F]",children:P(e.startTime)})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ya,{className:"w-5 h-5 text-[#556B2F] flex-shrink-0"}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium text-[#2d3d1f]",children:[e.numberOfDays," day",e.numberOfDays>1?"s":""]}),e.hoursPerDay&&l.jsxs("div",{className:"text-sm text-[#556B2F]",children:[e.hoursPerDay," hours/day"]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(vi,{className:"w-5 h-5 text-[#556B2F] flex-shrink-0"}),l.jsx("div",{children:l.jsxs("div",{className:"font-medium text-[#2d3d1f]",children:[B," per person"]})})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ar,{className:"w-5 h-5 text-[#556B2F] flex-shrink-0"}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium text-[#2d3d1f]",children:["Max ",e.maxStudents," students"]}),w?l.jsx("div",{className:"text-sm text-[#556B2F] animate-pulse",children:"Loading spots..."}):v!==null?l.jsx("div",{className:`text-sm ${v>0?"text-[#556B2F]":"text-[#c54a2c]"}`,children:v>0?`${v} spot${v!==1?"s":""} available`:"Fully booked"}):l.jsx("div",{className:"text-sm text-[#888]",children:"Spots info unavailable"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Si,{className:"w-5 h-5 text-[#556B2F] flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-[#2d3d1f]",children:I(e.address)}),l.jsx("div",{className:"text-xs text-[#556B2F] mt-1 italic",children:"Full address provided upon booking confirmation"})]})]})]}),l.jsxs("div",{className:"pt-4 border-t border-[#a8b892]",children:[l.jsx("h4",{className:"font-semibold text-[#2d3d1f] mb-2",children:"Requirements"}),l.jsxs("p",{className:"text-sm text-[#3c4f21]",children:[l.jsx("span",{className:"font-medium",children:"Minimum Age:"})," ",e.minimumAge," years"]})]}),l.jsxs("div",{className:"pt-4 border-t border-[#a8b892] space-y-3",children:[l.jsx(ue,{onClick:()=>$(e),className:"w-full bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6] disabled:bg-gray-400 disabled:cursor-not-allowed",size:"lg",disabled:v===0,children:v===0?"Fully Booked":t?e.auto_approve?"Book This Class":"Request Booking":"Sign In to Book"}),t&&G&&G!==t.id&&(K?l.jsxs(ue,{onClick:()=>{if(u)u(K,e);else{const se=new URLSearchParams;se.set("page","dashboard"),se.set("tab","messages"),se.set("conversation",K),se.set("class",e.id),se.set("class_title",e.title),window.location.href=`${window.location.origin}?${se.toString()}`}},variant:"outline",className:"w-full border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",size:"lg",children:[l.jsx(pn,{className:"h-4 w-4 mr-2"}),"Go to Conversation"]}):l.jsxs(ue,{onClick:()=>J(),variant:"outline",className:"w-full border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",size:"lg",children:[l.jsx(pn,{className:"h-4 w-4 mr-2"}),"Message Host"]}))]})]})]})})]})]}),l.jsx(Cb,{photos:e.photos??[],open:A,startIndex:h,onClose:()=>L(!1),onIndexChange:se=>p(se),title:e.title}),f&&t&&l.jsx(eb,{classData:f,user:t,initialAvailableSpots:v,onClose:()=>m(null),onBookingSuccess:H}),b&&t&&l.jsx(qA,{classData:e,user:t,onClose:()=>j(!1),onMessageSent:R})]})}function cT(e,t){return Oi(e,t)||"Date TBD"}function uT(e){if(!e)return"";const[t,n]=e.split(":"),r=parseInt(t??"0",10),o=r>=12?"PM":"AM";return`${r%12||12}:${n??"00"} ${o}`}function dT(e,t){const n=[typeof e?.instructor_name=="string"?e.instructor_name:"",typeof e?.host_name=="string"?e.host_name:"",typeof t?.full_name=="string"?t.full_name:""];for(const r of n)if(r&&r.trim().length>0)return r.trim();return t?.full_name??"Instructor"}function fT(e,t){const n=dT(e,t),r=e?.host_profile??t??null;return{id:e.id,title:e.title,shortSummary:e.short_summary??"",startDate:e.start_date??"",startTime:e.start_time??"",endDate:e.end_date??e.start_date??"",numberOfDays:e.number_of_days??1,hoursPerDay:e.hours_per_day??void 0,pricePerPerson:Ts(e.price_per_person_cents??0),maxStudents:e.max_students??0,address:{street:e.address_street??"",city:e.address_city??"",state:e.address_state??"",zipCode:e.address_zip??"",country:e.address_country??""},instructorName:n,hostId:e.host_id,host_id:e.host_id,hostName:n,instructorId:e.host_id,minimumAge:e.minimum_age??0,instructorBio:e.instructor_bio??"",instructorAvatar:r?.avatar_url??null,advisories:e.advisories??"",houseRules:e.house_rules??"",photos:e.photos??[],auto_approve:!!e.auto_approve,createdAt:e.created_at??new Date().toISOString(),hostProfile:r?{fullName:r.full_name??"",farmName:r.farm_name??"",bio:r.bio??"",avatarUrl:r.avatar_url??null}:null}}function hT(e){if(!e)return"??";const t=e.trim().split(" ");return t.length===0?"??":t.length===1?t[0][0]?.toUpperCase()??"??":`${t[0][0]??""}${t[t.length-1][0]??""}`.toUpperCase()}function mT({hostId:e,currentUser:t,onNavigate:n,onSelectClass:r}){const[o,i]=_.useState(null),[c,u]=_.useState(null),[h,p]=_.useState([]),[f,m]=_.useState(!0),[v,y]=_.useState(null);_.useEffect(()=>{let N=!1;return(async()=>{m(!0),y(null);try{const{data:j,error:k}=await Ce.from("profiles").select("id, full_name, farm_name, bio, avatar_url").eq("id",e).maybeSingle();if(k)throw k;if(!j)throw new Error("Host profile not found.");N||i(j);const C=j.avatar_url;if(C)if(/^https?:\/\//i.test(C))N||u(C);else{const{data:P,error:I}=await Ce.storage.from("avatars").createSignedUrl(C,604800);I?(console.error("Failed to create signed avatar URL:",I.message??I),N||u(null)):N||u(P?.signedUrl??null)}else N||u(null);const A=new Date().toISOString().split("T")[0],{data:L,error:T}=await Ce.from("classes").select(`
            *,
            host_profile:profiles!classes_host_id_fkey(full_name, farm_name, bio, avatar_url)
          `).eq("host_id",e).gte("start_date",A).order("start_date",{ascending:!0});if(T)throw T;const B=(L??[]).map(P=>fT(P,j));N||p(B)}catch(j){console.error("Failed to load host profile:",j?.message||j),N||(y(j?.message||"Unable to load host profile right now."),p([]),i(null),u(null))}finally{N||m(!1)}})(),()=>{N=!0}},[e]);const w=_.useMemo(()=>h.slice().sort((N,b)=>{const j=new Date(`${N.startDate}T${N.startTime||"00:00"}`).getTime(),k=new Date(`${b.startDate}T${b.startTime||"00:00"}`).getTime();return j-k}),[h]);return f?l.jsx("div",{className:"min-h-screen bg-[#f8f9f6] flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#556B2F] mx-auto mb-4"}),l.jsx("p",{className:"text-[#556B2F]",children:"Loading host profile..."})]})}):v||!o?l.jsx("div",{className:"min-h-screen bg-[#f8f9f6] flex items-center justify-center p-6",children:l.jsxs(We,{className:"max-w-md w-full border-[#c54a2c]",children:[l.jsx(vt,{children:l.jsx(mt,{className:"text-[#c54a2c]",children:"Host Not Available"})}),l.jsxs(Ve,{className:"space-y-4 text-[#3c4f21]",children:[l.jsx("p",{children:v??"We could not find details for this host."}),l.jsx(ue,{onClick:()=>n("classes"),className:"bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:"Return to Classes"})]})]})}):l.jsx("div",{className:"min-h-screen bg-[#f8f9f6]",children:l.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(ue,{variant:"ghost",onClick:()=>n("classes"),className:"text-[#556B2F] hover:bg-[#e8e9e6] hover:text-[#3c4f21]",children:[l.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Back to Classes"]}),t?.id===o.id&&l.jsx(ue,{variant:"outline",onClick:()=>n("dashboard"),className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",children:"Manage Classes"})]}),l.jsx(We,{className:"border-[#a8b892] bg-white",children:l.jsxs(Ve,{className:"flex flex-col items-center text-center py-10 px-6 space-y-4",children:[c?l.jsx(Yn,{src:c,alt:`${o.full_name} avatar`,className:"w-20 h-20 rounded-full object-cover border-2 border-[#a8b892] shadow"}):l.jsx("div",{className:"w-20 h-20 rounded-full bg-[#e8e9e6] flex items-center justify-center text-xl font-semibold text-[#556B2F] border-2 border-[#a8b892] shadow",children:hT(o.full_name)}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("h1",{className:"text-2xl font-bold text-[#2d3d1f]",children:o.full_name}),o.farm_name&&l.jsx("p",{className:"text-[#556B2F] font-medium",children:o.farm_name})]}),o.bio&&l.jsx("p",{className:"text-[#3c4f21] max-w-2xl leading-relaxed",children:o.bio})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold text-[#2d3d1f]",children:"Classes Offered"}),l.jsxs("span",{className:"text-sm text-[#556B2F]",children:[w.length," upcoming class",w.length===1?"":"es"]})]}),w.length===0?l.jsx(We,{className:"border-dashed border-2 border-[#a8b892] bg-white",children:l.jsxs(Ve,{className:"py-12 text-center space-y-2",children:[l.jsx("h3",{className:"text-lg text-[#2d3d1f] font-medium",children:"No upcoming classes yet"}),l.jsxs("p",{className:"text-[#556B2F] text-sm",children:["Check back soon to see new sessions from ",o.full_name.split(" ")[0]??"this host","."]})]})}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:w.map(N=>l.jsxs(We,{className:"border-[#a8b892] bg-white hover:shadow-lg transition-shadow cursor-pointer flex flex-col",onClick:()=>r(N),children:[N.photos&&N.photos.length>0?l.jsx(Yn,{src:N.photos[0],alt:N.title,className:"h-40 w-full object-cover"}):l.jsx("div",{className:"h-40 w-full bg-gradient-to-br from-[#f8f9f6] to-[#e8e9e6] flex items-center justify-center",children:l.jsx("div",{className:"text-center text-[#556B2F]",children:l.jsx("span",{className:"block text-sm opacity-70",children:"No photo available"})})}),l.jsxs(vt,{className:"pb-2",children:[l.jsx(mt,{className:"text-lg text-[#2d3d1f]",children:N.title}),l.jsx("p",{className:"text-sm text-[#556B2F] line-clamp-2",children:N.shortSummary})]}),l.jsxs(Ve,{className:"space-y-3 text-sm text-[#3c4f21] flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(mn,{className:"w-4 h-4 text-[#556B2F]"}),l.jsx("span",{children:cT(N.startDate,N.endDate)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ya,{className:"w-4 h-4 text-[#556B2F]"}),l.jsxs("span",{children:[N.startTime?uT(N.startTime):`${N.numberOfDays} day${N.numberOfDays>1?"s":""}`,N.hoursPerDay?`  ${N.hoursPerDay} hour${N.hoursPerDay>1?"s":""}/day`:""]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ar,{className:"w-4 h-4 text-[#556B2F]"}),l.jsxs("span",{children:["Maximum ",N.maxStudents," students"]})]})]}),l.jsx("div",{className:"px-6 pb-6",children:l.jsxs(ue,{className:"w-full bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:["View Class  ",ir(N.pricePerPerson,{withCurrency:!0})]})})]},N.id))})]})]})})}function pT({photos:e,onPhotosChange:t,maxPhotos:n=5,className:r=""}){const[o,i]=_.useState(!1),c=_.useRef(null),u=m=>new Promise((v,y)=>{const w=new FileReader;w.onload=N=>{const b=new Image;b.onload=()=>{const j=document.createElement("canvas"),k=j.getContext("2d"),C=800,A=600;let{width:L,height:T}=b;if(L>C||T>A){const P=Math.min(C/L,A/T);L*=P,T*=P}j.width=L,j.height=T,k.drawImage(b,0,0,L,T);const B=j.toDataURL("image/jpeg",.85);v(B)},b.onerror=()=>{y(new Error("Failed to load image"))},b.src=N.target?.result},w.onerror=()=>{y(new Error("Failed to read file"))},w.readAsDataURL(m)}),h=async m=>{const v=Array.from(m.target.files||[]);if(v.length!==0){if(e.length+v.length>n){we.warning(`You can only add up to ${n} photos total.`);return}i(!0);try{const y=[];for(const w of v){if(!w.type.startsWith("image/")){we.info("Please select only image files.");continue}const N=await u(w);y.push(N)}t([...e,...y])}catch(y){console.error("Error processing images:",y),we.error("Failed to process one or more images. Please try again.")}finally{i(!1),c.current&&(c.current.value="")}}},p=m=>{const v=e.filter((y,w)=>w!==m);t(v)},f=()=>{c.current?.click()};return l.jsxs("div",{className:`space-y-3 ${r}`,children:[e.length<n&&l.jsxs("div",{className:"border-2 border-dashed border-[#a8b892] rounded-lg p-4 text-center",children:[l.jsx(ue,{type:"button",variant:"outline",onClick:f,disabled:o,className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Processing..."]}):l.jsxs(l.Fragment,{children:[l.jsx(bh,{className:"h-4 w-4 mr-2"}),"Add Photo",e.length>0?"s":""]})}),l.jsx("p",{className:"text-xs text-[#556B2F] mt-2",children:"JPG, PNG, GIF, WebP  larger files may take longer to process"}),l.jsxs("p",{className:"text-xs text-[#6b7280]",children:[e.length,"/",n," photos"]})]}),e.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#556B2F]",children:[l.jsx(mo,{className:"w-4 h-4"}),l.jsxs("span",{children:[e.length," photo",e.length>1?"s":""]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.map((m,v)=>l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:m,alt:`Preview ${v+1}`,className:"w-full h-24 object-cover rounded-lg border border-[#a8b892]"}),l.jsx(ue,{type:"button",variant:"destructive",size:"sm",onClick:()=>p(v),className:"absolute top-1 right-1 h-6 w-6 p-0 opacity-100 transition-opacity md:opacity-0 md:group-hover:opacity-100",title:"Remove photo","aria-label":`Remove photo ${v+1}`,children:l.jsx(Ln,{className:"h-3 w-3"})})]},v))})]}),l.jsx("input",{ref:c,type:"file",accept:"image/*",multiple:!0,onChange:h,className:"hidden"})]})}const Oy=["General Discussion","Tips & Tricks","Equipment Sharing","Local Events","Questions & Help","Success Stories","For Sale/Trade","Weather & Seasonal"],gT=e=>({"General Discussion":"bg-[#556B2F] text-[#f8f9f6]","Tips & Tricks":"bg-[#c54a2c] text-[#f8f9f6]","Equipment Sharing":"bg-[#a8b892] text-[#2d3d1f]","Local Events":"bg-[#8b7355] text-[#f8f9f6]","Questions & Help":"bg-[#6b8ba3] text-[#f8f9f6]","Success Stories":"bg-[#689c3a] text-[#f8f9f6]","For Sale/Trade":"bg-[#b8674a] text-[#f8f9f6]","Weather & Seasonal":"bg-[#7a6b8a] text-[#f8f9f6]"})[e]||"bg-[#556B2F] text-[#f8f9f6]";function Dy({posts:e,onCreatePost:t,onDeletePost:n,onSelectPost:r,user:o,onRequireAuth:i}){const[c,u]=_.useState(!1),[h,p]=_.useState("all"),[f,m]=_.useState({title:"",content:"",author:o?.name||"",category:"General Discussion",photos:[]}),v=_.useMemo(()=>h==="all"?e:e.filter(k=>(k.category||"General Discussion")===h),[e,h]),y=k=>{m(C=>({...C,photos:k}))},w=(k,C)=>{const A=e.find(B=>B.id===k),T=o?.isAdmin&&A?.authorId!==o?.id?`Are you sure you want to delete "${C}" by ${A?.author}? This action cannot be undone.`:`Are you sure you want to delete "${C}"? This action cannot be undone.`;window.confirm(T)&&n(k)},N=k=>{if(k.preventDefault(),!o){i();return}t(f),m({title:"",content:"",author:o.name,category:"General Discussion",photos:[]}),u(!1)},b=k=>{r(k)},j=(k,C)=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),b(C))};return l.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-[#2d3d1f] mb-2",children:"Community Bulletin Board"}),l.jsx("p",{className:"text-[#3c4f21]",children:"Share knowledge, ask questions, and connect with fellow homesteaders"})]}),l.jsxs(ue,{onClick:()=>o?u(!0):i(),className:"bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:[l.jsx(ca,{className:"w-4 h-4 mr-2"}),"Create Post"]})]}),l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(ue,{variant:h==="all"?"default":"outline",size:"sm",onClick:()=>p("all"),className:h==="all"?"bg-[#556B2F] text-[#f8f9f6] hover:bg-[#556B2F]":"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-[#f8f9f6]",children:"All Posts"}),Oy.map(k=>l.jsx(ue,{variant:h===k?"default":"outline",size:"sm",onClick:()=>p(k),className:h===k?"bg-[#556B2F] text-[#f8f9f6] hover:bg-[#556B2F]":"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-[#f8f9f6]",children:k},k))]})}),c&&o&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(We,{className:"bg-[#ffffff] border-[#a8b892] max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[l.jsx(vt,{className:"bg-[#556B2F] text-[#f8f9f6]",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(mt,{children:"Create New Post"}),l.jsx(ue,{variant:"ghost",size:"sm",onClick:()=>u(!1),className:"text-[#f8f9f6] hover:bg-[#6B7F3F]",children:""})]})}),l.jsx(Ve,{className:"p-6",children:l.jsxs("form",{onSubmit:N,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"author",className:"text-[#2d3d1f]",children:"Your Name"}),l.jsx(bt,{id:"author",type:"text",value:o.name,disabled:!0,className:"mt-1 bg-gray-100 border-[#a8b892]"})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"category",className:"text-[#2d3d1f]",children:"Category"}),l.jsxs(Hh,{value:f.category,onValueChange:k=>m(C=>({...C,category:k})),children:[l.jsx(qh,{className:"mt-1 border-[#b8674a] bg-[#fbeae4] text-[#4c1f12] focus:border-[#c54a2c] focus:ring-[#c54a2c]/40",children:l.jsx(Vh,{})}),l.jsx(Gh,{className:"bg-[#fdf4f1] border-[#c54a2c]",children:Oy.map(k=>l.jsx(Yh,{value:k,className:"text-[#4c1f12] focus:bg-[#fde0d8] focus:text-[#4c1f12] data-[state=checked]:bg-[#fcd5ca] data-[state=checked]:text-[#4c1f12]",children:k},k))})]})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"title",className:"text-[#2d3d1f]",children:"Title"}),l.jsx(bt,{id:"title",type:"text",value:f.title,onChange:k=>m(C=>({...C,title:k.target.value})),required:!0,className:"mt-1 bg-[#ffffff] border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F]",placeholder:"What's your post about?"})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"content",className:"text-[#2d3d1f]",children:"Content"}),l.jsx(Gn,{id:"content",value:f.content,onChange:k=>m(C=>({...C,content:k.target.value})),required:!0,className:"mt-1 bg-[#ffffff] border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F] resize-none",rows:6,placeholder:"Share your thoughts, questions, or information..."})]}),l.jsxs("div",{children:[l.jsx(nt,{className:"text-[#2d3d1f]",children:"Photos (Optional - Up to 5)"}),l.jsx("div",{className:"mt-2",children:l.jsx(pT,{photos:f.photos,onPhotosChange:y,maxPhotos:5})})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx(ue,{type:"submit",className:"flex-1 bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:"Create Post"}),l.jsx(ue,{type:"button",variant:"outline",onClick:()=>u(!1),className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-[#f8f9f6]",children:"Cancel"})]})]})})]})}),v.length===0?l.jsxs(We,{className:"bg-[#ffffff] border-[#a8b892] p-12 text-center",children:[l.jsx(pn,{className:"h-12 w-12 text-[#a8b892] mx-auto mb-4"}),l.jsx("h3",{className:"text-[#2d3d1f] mb-2",children:h==="all"?"No posts yet":`No posts in ${h}`}),l.jsx("p",{className:"text-[#3c4f21] mb-4",children:"Be the first to share something with the community!"}),l.jsxs(ue,{onClick:()=>o?u(!0):i(),className:"bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:[l.jsx(ca,{className:"w-4 h-4 mr-2"}),"Create First Post"]})]}):l.jsx("div",{className:"grid gap-6",children:v.map(k=>{const C=k.photos&&k.photos.length>0?k.photos[0]:null,A=k.author?.trim().length?k.author.trim():"Community Member",L=o&&(o.isAdmin||k.authorId===o.id);return l.jsxs(We,{role:"button",tabIndex:0,onClick:()=>b(k),onKeyDown:T=>j(T,k),className:"bg-[#ffffff] border-[#a8b892] shadow-sm hover:shadow-xl transition-all cursor-pointer focus-visible:outline focus-visible:outline-2 focus-visible:outline-[#556B2F]",children:[l.jsxs("div",{className:"relative",children:[C?l.jsx("img",{src:C,alt:`${k.title} cover`,className:"w-full h-56 object-cover"}):l.jsx("div",{className:"w-full h-56 bg-[#f8f9f6] flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-[#556B2F]",children:[l.jsx(mo,{className:"w-12 h-12 mx-auto mb-2 opacity-60"}),l.jsx("p",{className:"text-sm opacity-70",children:"No photo"})]})}),l.jsx("div",{className:"absolute top-4 left-4",children:l.jsxs(an,{className:`${gT(k.category)} px-3 py-1 flex items-center gap-1`,children:[l.jsx(wh,{className:"w-3 h-3"}),k.category||"General Discussion"]})}),L&&l.jsx(ue,{variant:"ghost",size:"icon",onClick:T=>{T.stopPropagation(),w(k.id,k.title)},className:"absolute top-3 right-3 h-9 w-9 rounded-full bg-black/50 text-white hover:bg-black/70",title:o.isAdmin&&k.authorId!==o.id?"Delete post (Admin privileges)":"Delete post",children:l.jsx(Cs,{className:"w-4 h-4"})})]}),l.jsxs(Ve,{className:"p-5 space-y-3",children:[l.jsx(mt,{className:"text-xl text-[#2d3d1f]",children:k.title}),l.jsxs("p",{className:"text-sm text-[#556B2F] flex items-center gap-2",children:[l.jsx(ua,{className:"w-4 h-4"}),A]})]})]},k.id)})})]})}function vT({post:e,user:t,onClose:n,onMessageSent:r}){const[o,i]=_.useState(""),[c,u]=_.useState(!1),h=async()=>{if(o.trim()){u(!0);try{const{data:{user:p},error:f}=await Ce.auth.getUser();if(f||!p){we.warning("Please log in to send messages."),u(!1);return}const m=e.authorId;if(!m){we.error("Unable to find the author for this post."),u(!1);return}if(m===p.id){we.info("You cannot send a message to yourself."),u(!1);return}const v=new Date().toISOString(),y=`and(host_id.eq.${m},guest_id.eq.${p.id},class_id.is.null),and(host_id.eq.${p.id},guest_id.eq.${m},class_id.is.null)`,{data:w,error:N}=await Ce.from("conversations").select("id, class_id").or(y).limit(1).maybeSingle();if(N)throw N;let b=w?.id;if(b)await Ce.from("conversations").update({last_message_at:v,updated_at:v}).eq("id",b);else{const{data:C,error:A}=await Ce.from("conversations").insert({class_id:null,host_id:m,guest_id:p.id,last_message_at:v,updated_at:v}).select("id").single();if(A)throw A;b=C.id}const j=`[Bulletin] ${e.title}

${o.trim()}`,{error:k}=await Ce.from("messages").insert({conversation_id:b,sender_id:p.id,content:j});if(k)throw k;window.dispatchEvent(new CustomEvent("herd-message-sent")),we.success("Message sent!"),r(),n()}catch(p){console.error("Error sending bulletin message:",p),we.error("Failed to send message. Please try again.")}finally{u(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs(We,{className:"w-full max-w-lg bg-white",children:[l.jsxs(vt,{className:"border-b",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(mt,{className:"text-[#3c4f21] flex items-center gap-2",children:[l.jsx(pn,{className:"h-5 w-5"}),"Message ",e.author||"Community Member"]}),l.jsx(ue,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",children:l.jsx(Ln,{className:"h-4 w-4"})})]}),l.jsxs("p",{className:"text-sm text-[#556B2F]",children:["Re: ",e.title]})]}),l.jsxs(Ve,{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-[#3c4f21] mb-2",children:"Your message:"}),l.jsx(Gn,{placeholder:"Type your message here...",value:o,onChange:p=>i(p.target.value),rows:4,className:"w-full resize-none",disabled:c})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(ue,{variant:"outline",onClick:n,disabled:c,children:"Cancel"}),l.jsx(ue,{onClick:h,disabled:!o.trim()||c,className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",children:c?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Mc,{className:"h-4 w-4 mr-2"}),"Send Message"]})})]})]})]})})}const yT=e=>({"General Discussion":"bg-[#556B2F] text-[#f8f9f6]","Tips & Tricks":"bg-[#c54a2c] text-[#f8f9f6]","Equipment Sharing":"bg-[#a8b892] text-[#2d3d1f]","Local Events":"bg-[#8b7355] text-[#f8f9f6]","Questions & Help":"bg-[#6b8ba3] text-[#f8f9f6]","Success Stories":"bg-[#689c3a] text-[#f8f9f6]","For Sale/Trade":"bg-[#b8674a] text-[#f8f9f6]","Weather & Seasonal":"bg-[#7a6b8a] text-[#f8f9f6]"})[e]||"bg-[#556B2F] text-[#f8f9f6]",xT=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),wT=["General Discussion","Tips & Tricks","Equipment Sharing","Local Events","Questions & Help","Success Stories","For Sale/Trade","Weather & Seasonal"];function bT({post:e,user:t,onBack:n,onDeletePost:r,onRequireAuth:o,onUpdatePost:i}){const[c,u]=_.useState(!1),[h,p]=_.useState(0),[f,m]=_.useState(!1),[v,y]=_.useState(!1),[w,N]=_.useState(e.title),[b,j]=_.useState(e.content),[k,C]=_.useState(e.category||"General Discussion"),[A,L]=_.useState(!1),[T,B]=_.useState(null);_.useEffect(()=>{N(e.title),j(e.content),C(e.category||"General Discussion")},[e.id,e.title,e.content,e.category]);const P=e.photos??[],I=P.length>0,$=P.length>1;_.useEffect(()=>{p(0)},[e.id,P.length]);const H=Q=>{p(Q),u(!0)},G=()=>{$&&p(Q=>(Q+1)%P.length)},K=()=>{$&&p(Q=>(Q-1+P.length)%P.length)},V=Q=>{(Q.key==="Enter"||Q.key===" ")&&(Q.preventDefault(),H(h))},J=e.author?.trim().length?e.author.trim():"Community Member",R=e.category||"General Discussion",E=t&&(t.isAdmin||e.authorId===t.id),D=t&&e.authorId&&t.id!==e.authorId,W=t&&(t.isAdmin||e.authorId===t.id),F=!v&&(!e.authorId||!t||t.id!==e.authorId),M=()=>{const Q=E&&t?.isAdmin&&e.authorId!==t?.id?`Are you sure you want to delete "${e.title}" by ${J}? This action cannot be undone.`:`Are you sure you want to delete "${e.title}"? This action cannot be undone.`;window.confirm(Q)&&r(e.id)},U=()=>{if(!t){o();return}D&&m(!0)},te=async Q=>{if(Q.preventDefault(),!t){o();return}if(!w.trim()){B("Title is required.");return}if(!b.trim()){B("Content is required.");return}L(!0),B(null);const ee=await i(e.id,{title:w.trim(),content:b.trim(),category:k});L(!1),ee&&y(!1)};return l.jsxs("div",{className:"min-h-screen bg-[#f8f9f6]",children:[l.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:[l.jsxs(ue,{variant:"ghost",onClick:n,className:"text-[#556B2F] hover:bg-[#e8e9e6] hover:text-[#3c4f21] flex items-center gap-2",children:[l.jsx(Ni,{className:"w-4 h-4"}),"Back to Bulletins"]}),I?l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"relative bg-gray-100 rounded-lg overflow-hidden",children:l.jsxs("div",{className:"relative w-full h-64 md:h-96 cursor-zoom-in outline-none",role:"button",tabIndex:0,"aria-label":"Open photo gallery",onClick:()=>H(h),onKeyDown:V,children:[l.jsx(Yn,{src:P[h],alt:`${e.title} - Image ${h+1}`,className:"w-full h-full object-cover"}),$&&l.jsxs(l.Fragment,{children:[l.jsx(ue,{variant:"ghost",size:"sm",onClick:Q=>{Q.stopPropagation(),K()},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white hover:bg-black/70",children:l.jsx(Oc,{className:"w-5 h-5"})}),l.jsx(ue,{variant:"ghost",size:"sm",onClick:Q=>{Q.stopPropagation(),G()},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white hover:bg-black/70",children:l.jsx(Dc,{className:"w-5 h-5"})})]}),$&&l.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/60 text-white px-3 py-1 rounded-full text-sm",children:[h+1," / ",P.length]})]})}),$&&l.jsx("div",{className:"flex gap-2 p-4 bg-white/90 overflow-x-auto",children:P.map((Q,ee)=>l.jsx("button",{onClick:()=>p(ee),className:`flex-shrink-0 w-16 h-16 rounded overflow-hidden border-2 transition-all ${ee===h?"border-[#556B2F] shadow-md":"border-gray-300 hover:border-[#a8b892]"}`,children:l.jsx(Yn,{src:Q,alt:`${e.title} - Thumbnail ${ee+1}`,className:"w-full h-full object-cover"})},`${Q}-${ee}`))})]}):l.jsx("div",{className:"mb-6 h-64 md:h-96 w-full bg-gradient-to-br from-[#f8f9f6] to-[#e8e9e6] flex items-center justify-center rounded-lg",children:l.jsxs("div",{className:"text-center text-[#556B2F]",children:[l.jsx(mo,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),l.jsx("p",{className:"text-lg opacity-70",children:"No photos available"})]})}),l.jsxs(We,{className:"bg-white border-[#a8b892] shadow-lg",children:[l.jsxs(vt,{className:"space-y-3",children:[l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[l.jsxs(an,{className:`${yT(R)} px-3 py-1 flex items-center gap-1`,children:[l.jsx(wh,{className:"w-3 h-3"}),R]}),l.jsxs("div",{className:"flex items-center gap-2",children:[W&&l.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>{v?(y(!1),B(null),N(e.title),j(e.content),C(e.category||"General Discussion")):y(!0)},className:"border-[#556B2F] text-[#556B2F] hover:bg-[#f0f4ea]",children:[l.jsx(Wf,{className:"w-4 h-4 mr-1"}),v?"Cancel Edit":"Edit Post"]}),E&&l.jsxs(ue,{variant:"ghost",size:"sm",onClick:M,className:"text-[#c54a2c] hover:text-[#b8432a] hover:bg-[#fef2f2]",children:[l.jsx(Cs,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),l.jsx(mt,{className:"text-2xl text-[#2d3d1f]",children:v?"Edit Bulletin":e.title}),l.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-[#556B2F]",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(ua,{className:"w-4 h-4"}),J]}),l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(mn,{className:"w-4 h-4"}),xT(e.createdAt)]})]})]}),l.jsx(Ve,{className:"space-y-6",children:v?l.jsxs("form",{onSubmit:te,className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-3",children:[l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"edit-title",children:"Title"}),l.jsx(bt,{id:"edit-title",value:w,onChange:Q=>N(Q.target.value),className:"mt-1",required:!0})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"edit-category",children:"Category"}),l.jsxs(Hh,{value:k,onValueChange:Q=>C(Q),children:[l.jsx(qh,{id:"edit-category",className:"mt-1",children:l.jsx(Vh,{})}),l.jsx(Gh,{children:wT.map(Q=>l.jsx(Yh,{value:Q,children:Q},Q))})]})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"edit-content",children:"Content"}),l.jsx(Gn,{id:"edit-content",value:b,onChange:Q=>j(Q.target.value),className:"mt-1",rows:8,required:!0})]})]}),T&&l.jsx("p",{className:"text-sm text-red-600",children:T}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsx(ue,{type:"submit",disabled:A,className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",children:A?"Saving...":"Save Changes"}),l.jsx(ue,{type:"button",variant:"outline",onClick:()=>{y(!1),B(null),N(e.title),j(e.content),C(e.category||"General Discussion")},children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[e.content&&l.jsx("div",{className:"rounded-lg bg-[#f8f9f6] p-5 text-[#3c4f21] whitespace-pre-wrap",children:e.content}),F&&l.jsx("div",{className:"flex flex-wrap gap-3",children:l.jsxs(ue,{onClick:U,className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white flex items-center gap-2",children:[l.jsx(pn,{className:"w-4 h-4"}),"Send Message"]})})]})})]})]}),l.jsx(Cb,{photos:P,open:c,startIndex:h,onClose:()=>u(!1),onIndexChange:Q=>p(Q),title:e.title}),f&&t&&D&&l.jsx(vT,{post:e,user:t,onClose:()=>m(!1),onMessageSent:()=>m(!1)})]})}function _T({...e}){return l.jsx(vb,{"data-slot":"sheet",...e})}function NT({...e}){return l.jsx(nT,{"data-slot":"sheet-trigger",...e})}function ST({...e}){return l.jsx(yb,{"data-slot":"sheet-portal",...e})}const kb=_.forwardRef(({className:e,...t},n)=>l.jsx(xb,{ref:n,"data-slot":"sheet-overlay",className:rt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t}));kb.displayName="SheetOverlay";function jT({className:e,children:t,side:n="right",...r}){return l.jsxs(ST,{children:[l.jsx(kb,{}),l.jsxs(wb,{"data-slot":"sheet-content",className:rt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[t,l.jsxs(Nb,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[l.jsx(Ln,{className:"size-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function CT({className:e,...t}){return l.jsx(bb,{"data-slot":"sheet-title",className:rt("text-foreground font-semibold",e),...t})}function kT({className:e,...t}){return l.jsx(_b,{"data-slot":"sheet-description",className:rt("text-muted-foreground text-sm",e),...t})}function ET({currentPage:e,onNavigate:t,user:n,onSignOut:r,onShowAuth:o}){const[i,c]=_.useState(!1),u=f=>{t(f),c(!1)},h=()=>{r(),c(!1)},p=()=>{o(),c(!1)};return l.jsx("nav",{className:"bg-[#556B2F] shadow-lg",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsx("div",{className:"flex items-center",children:l.jsx("button",{onClick:()=>u("home"),className:"text-2xl font-bold text-[#f8f9f6] hover:text-[#a8b892] transition-colors duration-200",children:"HERD"})}),l.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs(ue,{variant:e==="classes"?"secondary":"ghost",onClick:()=>t("classes"),className:`${e==="classes"?"bg-[#f8f9f6] text-[#556B2F] hover:bg-[#f0f2ed]":"text-[#f8f9f6] hover:bg-[#6B7F3F] hover:text-[#f8f9f6]"}`,children:[l.jsx(ao,{className:"w-4 h-4 mr-2"}),"Classes"]}),l.jsxs(ue,{variant:e==="create-class"?"secondary":"ghost",onClick:()=>t("create-class"),className:`${e==="create-class"?"bg-[#f8f9f6] text-[#556B2F] hover:bg-[#f0f2ed]":"text-[#f8f9f6] hover:bg-[#6B7F3F] hover:text-[#f8f9f6]"}`,children:[l.jsx(mv,{className:"w-4 h-4 mr-2"}),n&&!n.stripeConnected?"Setup Stripe":"Teach"]}),l.jsxs(ue,{variant:e==="bulletin"?"secondary":"ghost",onClick:()=>t("bulletin"),className:`${e==="bulletin"?"bg-[#f8f9f6] text-[#556B2F] hover:bg-[#f0f2ed]":"text-[#f8f9f6] hover:bg-[#6B7F3F] hover:text-[#f8f9f6]"}`,children:[l.jsx(pn,{className:"w-4 h-4 mr-2"}),"Bulletin"]}),n&&l.jsxs(ue,{variant:e==="dashboard"?"secondary":"ghost",onClick:()=>t("dashboard"),className:`${e==="dashboard"?"bg-[#f8f9f6] text-[#556B2F] hover:bg-[#f0f2ed]":"text-[#f8f9f6] hover:bg-[#6B7F3F] hover:text-[#f8f9f6]"}`,children:[l.jsx(gv,{className:"w-4 h-4 mr-2"}),"Dashboard"]})]}),n?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs(ue,{variant:e==="profile"?"secondary":"ghost",onClick:()=>t("profile"),className:`${e==="profile"?"bg-[#f8f9f6] text-[#556B2F] hover:bg-[#f0f2ed]":"text-[#f8f9f6] hover:bg-[#6B7F3F] hover:text-[#f8f9f6]"}`,children:[l.jsx(ua,{className:"w-4 h-4 mr-2"}),n.name]}),l.jsx(ue,{variant:"ghost",onClick:r,className:"text-[#f8f9f6] hover:bg-[#6B7F3F] hover:text-[#f8f9f6]",children:l.jsx(vv,{className:"w-4 h-4"})})]}):l.jsx(ue,{variant:"secondary",onClick:o,className:"bg-[#f8f9f6] text-[#556B2F] hover:bg-[#f0f2ed]",children:"Sign In"})]}),l.jsx("div",{className:"md:hidden",children:l.jsxs(_T,{open:i,onOpenChange:c,children:[l.jsx(NT,{asChild:!0,children:l.jsx(ue,{variant:"ghost",size:"sm",className:"text-[#f8f9f6] hover:bg-[#6B7F3F] hover:text-[#f8f9f6]",children:l.jsx(MN,{className:"w-6 h-6"})})}),l.jsxs(jT,{side:"right",className:"w-80 bg-[#f8f9f6] border-l border-[#556B2F]/20",children:[l.jsx(CT,{className:"sr-only",children:"Navigation Menu"}),l.jsx(kT,{className:"sr-only",children:"Access navigation links and user account options"}),l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsx("div",{className:"flex items-center justify-between pb-6 border-b border-[#556B2F]/20",children:l.jsx("button",{onClick:()=>u("home"),className:"text-2xl font-bold text-[#556B2F] hover:text-[#3c4f21] transition-colors duration-200",children:"HERD"})}),l.jsx("div",{className:"flex-1 py-6",children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs(ue,{variant:e==="classes"?"default":"ghost",onClick:()=>u("classes"),className:`w-full justify-start h-12 ${e==="classes"?"bg-[#556B2F] text-[#f8f9f6] hover:bg-[#3c4f21]":"text-[#556B2F] hover:bg-[#556B2F]/10"}`,children:[l.jsx(ao,{className:"w-5 h-5 mr-3"}),"Classes"]}),l.jsxs(ue,{variant:e==="create-class"?"default":"ghost",onClick:()=>u("create-class"),className:`w-full justify-start h-12 ${e==="create-class"?"bg-[#556B2F] text-[#f8f9f6] hover:bg-[#3c4f21]":"text-[#556B2F] hover:bg-[#556B2F]/10"}`,children:[l.jsx(mv,{className:"w-5 h-5 mr-3"}),n&&!n.stripeConnected?"Setup Stripe":"Teach"]}),l.jsxs(ue,{variant:e==="bulletin"?"default":"ghost",onClick:()=>u("bulletin"),className:`w-full justify-start h-12 ${e==="bulletin"?"bg-[#556B2F] text-[#f8f9f6] hover:bg-[#3c4f21]":"text-[#556B2F] hover:bg-[#556B2F]/10"}`,children:[l.jsx(pn,{className:"w-5 h-5 mr-3"}),"Bulletin"]}),n&&l.jsxs(ue,{variant:e==="dashboard"?"default":"ghost",onClick:()=>u("dashboard"),className:`w-full justify-start h-12 ${e==="dashboard"?"bg-[#556B2F] text-[#f8f9f6] hover:bg-[#3c4f21]":"text-[#556B2F] hover:bg-[#556B2F]/10"}`,children:[l.jsx(gv,{className:"w-5 h-5 mr-3"}),"Dashboard"]}),n&&l.jsxs(ue,{variant:e==="profile"?"default":"ghost",onClick:()=>u("profile"),className:`w-full justify-start h-12 ${e==="profile"?"bg-[#556B2F] text-[#f8f9f6] hover:bg-[#3c4f21]":"text-[#556B2F] hover:bg-[#556B2F]/10"}`,children:[l.jsx(ua,{className:"w-5 h-5 mr-3"}),"Profile"]})]})}),l.jsx("div",{className:"pt-6 border-t border-[#556B2F]/20",children:n?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"px-3 py-2 bg-[#556B2F]/5 rounded-lg",children:[l.jsx("p",{className:"text-sm text-[#556B2F]/70",children:"Signed in as"}),l.jsx("p",{className:"font-medium text-[#556B2F]",children:n.name})]}),l.jsxs(ue,{variant:"outline",onClick:h,className:"w-full justify-start h-12 border-[#556B2F]/20 text-[#556B2F] hover:bg-[#556B2F]/10",children:[l.jsx(vv,{className:"w-5 h-5 mr-3"}),"Sign Out"]})]}):l.jsx(ue,{variant:"default",onClick:p,className:"w-full h-12 bg-[#556B2F] text-[#f8f9f6] hover:bg-[#3c4f21]",children:"Sign In"})})]})]})]})})]})})})}function PT({value:e,onChange:t,size:n=28}){return l.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(r=>l.jsx("button",{type:"button",onClick:()=>t(r),title:`${r} star${r>1?"s":""}`,className:"p-0.5","aria-label":`Set rating to ${r}`,children:l.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:r<=e?"currentColor":"none",stroke:"currentColor",className:r<=e?"text-yellow-500":"text-gray-400",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M11.48 3.499a.562.562 0 011.04 0l2.017 5.143a.563.563 0 00.475.353l5.514.401a.562.562 0 01.319.98l-4.204 3.62a.563.563 0 00-.182.557l1.285 5.407a.562.562 0 01-.84.61l-4.727-2.77a.563.563 0 00-.586 0l-4.727 2.77a.562.562 0 01-.84-.61l1.285-5.407a.563.563 0 00-.182-.557l-4.204-3.62a.562.562 0 01.319-.98l5.514-.401a.563.563 0 00.475-.353L11.48 3.5z"})})},r))})}const RT="https://czdzjdujojcjluqcdchq.functions.supabase.co",jf="You have already reviewed this host for this class";function AT(){const e=_.useMemo(()=>typeof window>"u"?"":new URLSearchParams(window.location.search).get("token")||"",[]),[t,n]=_.useState(0),[r,o]=_.useState(""),[i,c]=_.useState(!1),[u,h]=_.useState(null);if(_.useEffect(()=>{if(u?.ok&&typeof window<"u"){const f=window.setTimeout(()=>{window.location.href="/dashboard/guestview/mybookings"},2500);return()=>window.clearTimeout(f)}},[u]),!e)return l.jsx("div",{className:"max-w-md mx-auto p-6",children:"Invalid or missing review link."});const p=async()=>{if(t<1||t>5){alert("Please select a star rating.");return}try{c(!0);const f=await fetch(`${RT}/submit-review`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,rating:t,comment:r})}),m=await f.json().catch(()=>({}));if(f.status===409){h({ok:!1,error:jf});return}if(!f.ok||m?.error)throw new Error(m?.error||"Failed to submit review");h({ok:!0})}catch(f){h({ok:!1,error:f?.message||"Something went wrong"})}finally{c(!1)}};return u?.ok?l.jsxs("div",{className:"max-w-md mx-auto p-6",children:[l.jsx("h1",{className:"text-xl font-semibold mb-2",children:"Thanks for your review!"}),l.jsx("p",{children:"Your star rating has been recorded and your feedback (if any) was shared with the host."})]}):u&&!u.ok&&u.error===jf?l.jsxs("div",{className:"max-w-md mx-auto p-6",children:[l.jsx("h1",{className:"text-xl font-semibold mb-2",children:"Review Already Submitted"}),l.jsx("p",{children:jf})]}):l.jsxs("div",{className:"max-w-md mx-auto p-6 space-y-4",children:[l.jsx("h1",{className:"text-xl font-semibold",children:"Rate your host"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Your comment (optional) will be emailed to the host, but only your star rating is saved."}),l.jsx("div",{children:l.jsx(PT,{value:t,onChange:n})}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium mb-1",children:"Comment (optional)"}),l.jsx(Gn,{id:"comment",value:r,onChange:f=>o(f.target.value),placeholder:"What did you enjoy? Anything we could improve?",rows:4})]}),l.jsx("div",{className:"flex gap-2",children:l.jsx(ue,{onClick:p,disabled:i,children:i?"Submitting...":"Submit Review"})}),u&&!u.ok&&l.jsx("p",{className:"text-red-600 text-sm mt-2",children:u.error})]})}const My=[{label:"At least 8 characters",test:e=>e.length>=8},{label:"Contains uppercase letter",test:e=>/[A-Z]/.test(e)},{label:"Contains lowercase letter",test:e=>/[a-z]/.test(e)},{label:"Contains a number",test:e=>/\d/.test(e)}];async function Fy(e){const{data:{user:t}}=await Ce.auth.getUser();if(!t)return;const{data:n}=await Ce.from("profiles").select("id, full_name, email").eq("id",t.id).maybeSingle();if(!n)return;const r={};e.fullName&&(!n.full_name||n.full_name.trim()==="")&&(r.full_name=e.fullName),e.email&&(!n.email||n.email.trim()==="")&&(r.email=e.email),Object.keys(r).length>0&&await Ce.from("profiles").update(r).eq("id",t.id)}function Cf(e){const t=String(e?.message??"");return t.includes("Invalid login credentials")||t.includes("Invalid email or password")?"Email or password is incorrect. Please try again.":t.includes("Email not CONFIRMED")?"Please verify your email address before signing in. Check your inbox for a verification link.":t.includes("Too many requests")?"Too many sign-in attempts. Please wait a few minutes and try again.":t.includes("Invalid email")?"Please enter a valid email address.":t.includes("already registered")?"An account with this email already exists. Please sign in instead.":`${t||"Unknown error"}. Please try again or contact support.`}function TT({onClose:e,onSuccess:t}){const[n,r]=_.useState(!1),[o,i]=_.useState(!1),[c,u]=_.useState(""),[h,p]=_.useState(""),[f,m]=_.useState(""),[v,y]=_.useState(""),[w,N]=_.useState(!1),[b,j]=_.useState(!1),[k,C]=_.useState(!1),[A,L]=_.useState(""),[T,B]=_.useState(!1),[P,I]=_.useState(!1),$=My.every(M=>M.test(f)),H=f===v,G=o?!!c:n?!!(c&&h.trim()&&$&&H):!!(c&&f),K=o?T?"Resend Reset Email":"Send Reset Email":n?"Create Account":"Sign In",V=async M=>{M.preventDefault(),C(!0),L("");try{if(n){if(!$)throw new Error("Password does not meet requirements");if(!H)throw new Error("Passwords do not match");const{data:U,error:te}=await Ce.auth.signUp({email:c,password:f,options:{data:{full_name:h.trim()},emailRedirectTo:`${window.location.origin}?verified=true`}});if(te)throw new Error(Cf(te));if(U?.user&&!U.session){e(),we.success("Account created! Check your email for the verification link to complete registration.");return}if(U?.session){await Fy({fullName:h,email:c}),t();return}throw new Error("Unexpected response during account creation")}else{await Ce.auth.getSession().then(async({data:ee})=>{ee.session||await Ce.auth.signOut()});const{data:U,error:te}=await Ce.auth.signInWithPassword({email:c,password:f});if(te)throw new Error(Cf(te));if(U?.user&&!U.user.email_confirmed_at){e(),we.warning("Please verify your email address before signing in. Check your inbox for a verification link.");return}const Q=U?.user?.user_metadata?.full_name?.toString()??"";await Fy({fullName:Q||h,email:c}),t()}}catch(U){L(U?.message||"An error occurred")}finally{C(!1)}},J=async M=>{M.preventDefault(),C(!0),L(""),B(!1);try{if(!c.trim())throw new Error("Please enter the email associated with your account.");const{error:U}=await Ce.auth.resetPasswordForEmail(c.trim(),{redirectTo:`${window.location.origin}/reset-password`});if(U)throw new Error(Cf(U));B(!0),we.success("Password reset email sent! Check your inbox for the reset link.")}catch(U){L(U?.message||"An error occurred")}finally{C(!1)}},R=()=>{i(!1),B(!1),L("")},E=()=>{r(!1),i(!0),B(!1),L(""),m(""),y(""),p(""),I(!1)},D=()=>{R(),r(!1),m(""),y(""),I(!1)},W=()=>{R(),r(!0),m(""),y(""),p(""),I(!1)},F=()=>{R(),r(M=>!M),L(""),m(""),y(""),p(""),I(!1)};return l.jsx(l.Fragment,{children:l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(We,{className:"bg-white border-[#a8b892] max-w-md w-full overflow-hidden",children:[l.jsx(vt,{className:"bg-[#556B2F] text-[#f8f9f6] rounded-t-xl",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(mt,{className:"text-[#f8f9f6]",children:n?"Create Account":"Sign In"}),l.jsx(ue,{variant:"ghost",size:"sm",onClick:e,className:"text-[#f8f9f6] hover:bg-[#6B7F3F]",children:l.jsx(Ln,{className:"w-4 h-4"})})]})}),l.jsx(Ve,{className:"p-6",children:l.jsx("form",{onSubmit:o?J:V,className:"space-y-4",children:o?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-2 text-sm text-[#2d3d1f]",children:[l.jsx("p",{children:"Forgot your password? No worries."}),l.jsx("p",{children:"Enter the email associated with your account and we'll send you a secure link to set a new password."})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"resetEmail",className:"text-[#2d3d1f]",children:"Email"}),l.jsx(bt,{id:"resetEmail",type:"email",inputMode:"email",autoComplete:"email",value:c,onChange:M=>u(M.target.value),required:!0,className:"mt-1 bg-white border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F]",placeholder:"Enter your email"})]}),T&&l.jsxs("div",{className:"text-sm text-green-700 bg-green-50 border border-green-200 rounded p-3",children:["Reset instructions were sent to ",l.jsx("strong",{children:c}),". Check your inbox (and spam folder) for the link."]}),A&&l.jsxs("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded flex items-center whitespace-pre-line",children:[l.jsx(zr,{className:"w-4 h-4 mr-2"}),A]}),l.jsx(ue,{type:"submit",disabled:k||!G,className:"w-full bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6] disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Sending...":K}),l.jsxs("div",{className:"text-center space-y-2",children:[l.jsx("button",{type:"button",onClick:D,className:"text-[#556B2F] hover:underline",children:"Remembered your password? Sign in"}),l.jsx("button",{type:"button",onClick:W,className:"text-[#556B2F] hover:underline",children:"Need an account? Create one"})]})]}):l.jsxs(l.Fragment,{children:[n&&l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"fullName",className:"text-[#2d3d1f]",children:"Full Name"}),l.jsx(bt,{id:"fullName",type:"text",value:h,onChange:M=>p(M.target.value),required:!0,className:"mt-1 bg-white border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F]",placeholder:"Enter your full name"})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"email",className:"text-[#2d3d1f]",children:"Email"}),l.jsx(bt,{id:"email",type:"email",inputMode:"email",autoComplete:"email",value:c,onChange:M=>u(M.target.value),required:!0,className:"mt-1 bg-white border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F]",placeholder:"Enter your email"})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"password",className:"text-[#2d3d1f]",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(bt,{id:"password",type:w?"text":"password",value:f,onChange:M=>m(M.target.value),onFocus:()=>n&&I(!0),required:!0,className:"mt-1 bg-white border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F] pr-10",placeholder:"Enter your password",minLength:n?8:6,autoComplete:n?"new-password":"current-password"}),l.jsx(ue,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(!w),className:"absolute right-2 top-1/2 -translate-y-1/2 h-auto p-1 text-[#556B2F] hover:bg-transparent",children:w?l.jsx(js,{className:"w-4 h-4"}):l.jsx(mc,{className:"w-4 h-4"})})]})]}),!n&&l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"button",onClick:E,className:"text-sm text-[#556B2F] hover:underline",children:"Forgot password?"})}),n&&l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"confirmPassword",className:"text-[#2d3d1f]",children:"Confirm Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(bt,{id:"confirmPassword",type:b?"text":"password",value:v,onChange:M=>y(M.target.value),required:!0,className:"mt-1 bg-white border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F] pr-10",placeholder:"Confirm your password",autoComplete:"new-password"}),l.jsx(ue,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(!b),className:"absolute right-2 top-1/2 -translate-y-1/2 h-auto p-1 text-[#556B2F] hover:bg-transparent",children:b?l.jsx(js,{className:"w-4 h-4"}):l.jsx(mc,{className:"w-4 h-4"})})]}),v&&!H&&l.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center",children:[l.jsx(zr,{className:"w-3 h-3 mr-1"}),"Passwords do not match"]})]}),n&&P&&l.jsxs("div",{className:"bg-[#f8f9f6] border border-[#a8b892] rounded-lg p-3",children:[l.jsx("p",{className:"text-sm text-[#2d3d1f] mb-2",children:"Password requirements:"}),l.jsx("div",{className:"space-y-1",children:My.map((M,U)=>l.jsxs("div",{className:"flex items-center text-xs",children:[l.jsx(io,{className:`w-3 h-3 mr-2 ${M.test(f)?"text-green-600":"text-gray-400"}`}),l.jsx("span",{className:M.test(f)?"text-green-600":"text-[#3c4f21]",children:M.label})]},U))})]}),A&&l.jsxs("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded flex items-center whitespace-pre-line",children:[l.jsx(zr,{className:"w-4 h-4 mr-2"}),A]}),l.jsx(ue,{type:"submit",disabled:k||!G,className:"w-full bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6] disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Loading...":K}),l.jsx("div",{className:"text-center",children:l.jsx("button",{type:"button",onClick:F,className:"text-[#556B2F] hover:underline",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})})]})})})}function IT({onComplete:e,authSession:t}){const[n,r]=_.useState(""),[o,i]=_.useState(!1),[c,u]=_.useState("");_.useEffect(()=>{let f="";t?.user?.user_metadata?.full_name?f=t.user.user_metadata.full_name:t?.user?.user_metadata?.name?f=t.user.user_metadata.name:t?.user?.email&&(f=t.user.email.split("@")[0].split(".").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" ")),r(f),f.trim()&&h(f)},[t]);const h=async f=>{i(!0),u("");try{const{data:{user:m}}=await Ce.auth.getUser();if(!m)throw new Error("Not authenticated");const v={full_name:f.trim(),email:t?.user?.email,updated_at:new Date().toISOString()},{data:y,error:w}=await Ce.from("profiles").update(v).eq("id",m.id).select().maybeSingle();if(w)throw w;y?e(y):(console.warn("No profile row found to update. Check trigger setup."),u("Profile not found. Please contact support."),i(!1))}catch(m){console.error("Onboarding error:",m),u(m.message||"Failed to complete onboarding"),i(!1)}},p=async f=>{f.preventDefault(),await h(n)};return o?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsx(We,{className:"bg-[#ffffff] border-[#a8b892] max-w-md w-full",children:l.jsxs(Ve,{className:"p-8 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#556B2F] mx-auto mb-4"}),l.jsx("h3",{className:"text-[#3c4f21] mb-2",children:"Setting up your profile..."}),l.jsx("p",{className:"text-[#556B2F] text-sm",children:"Welcome to HERD!"})]})})}):c||!n.trim()?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(We,{className:"bg-[#ffffff] border-[#a8b892] max-w-md w-full",children:[l.jsxs(vt,{className:"bg-[#556B2F] text-[#f8f9f6]",children:[l.jsx(mt,{children:"Welcome to HERD!"}),l.jsx("p",{className:"text-[#a8b892] text-sm",children:"Lets complete your profile setup"})]}),l.jsx(Ve,{className:"p-6",children:l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"email",className:"text-[#2d3d1f]",children:"Email"}),l.jsx(bt,{id:"email",type:"email",value:t?.user?.email||"",disabled:!0,className:"mt-1 bg-gray-100 border-[#a8b892]"})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"name",className:"text-[#2d3d1f]",children:"Full Name *"}),l.jsx(bt,{id:"name",type:"text",value:n,onChange:f=>r(f.target.value),required:!0,className:"mt-1 bg-[#ffffff] border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F]",placeholder:"Enter your full name"})]}),c&&l.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:c}),l.jsx(ue,{type:"submit",disabled:!n.trim(),className:"w-full bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6]",children:"Complete Setup"}),l.jsx("p",{className:"text-sm text-[#3c4f21] text-center",children:"You can add more details later, like farm info and Stripe connection for teaching classes."})]})})]})}):null}const OT={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_STRIPE_PUBLISHABLE_KEY:"pk_test_51R62SqL6B5lxSXCUxjcq17byaeHBfkutr6idbXZsovGMZlcgFWfZgMVMsSb1h6MAqAcHmFlweO0IALaE86ptU4EN00MY1DTDUP",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6ZHpqZHVqb2pjamx1cWNkY2hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MjM2MjksImV4cCI6MjA3NDM5OTYyOX0.kS7ZOxQgPvXW7b1mU3OKcAhsnTVBqWqdDXXvUUxxB2M",VITE_SUPABASE_URL:"https://czdzjdujojcjluqcdchq.supabase.co"};function DT({userEmail:e}){const[t,n]=_.useState(!1),[r,o]=_.useState("idle"),[i,c]=_.useState(null),u=async()=>{if(!e){we.error("Missing email address");return}const m=Date.now();if(i&&m-i<6e4){const v=Math.ceil((6e4-(m-i))/1e3);we.info(`Please wait ${v} seconds before requesting another verification email.`);return}n(!0),o("idle");try{console.log("Attempting to resend verification email to:",e),console.log("Supabase URL:",typeof import.meta<"u"&&OT?"https://czdzjdujojcjluqcdchq.supabase.co":"unknown"),console.log("Using resend with type: signup");const{data:y,error:w}=await Ce.auth.getUser();if(w)throw console.error("getUser error:",w),w;if(!!y?.user?.email_confirmed_at){console.log("User already verified; skipping resend."),o("success"),n(!1);return}const{data:b,error:j}=await Ce.auth.resend({type:"signup",email:e});if(j)throw console.error("Resend verification error details:",{message:j.message,status:j?.status,name:j.name}),j;console.log("Resend response:",b),console.log("Verification email resent successfully"),o("success"),c(m),setTimeout(()=>o("idle"),5e3)}catch(v){console.error("Error resending verification email:",v);let y="Failed to send verification email. ";v?.message?.includes("email confirmation")?y+="Email verification may not be enabled for this project.":v?.message?.includes("rate limit")?y+="Too many requests. Please wait before trying again.":v?.status===422?y+="Email confirmation may not be enabled in your Supabase settings.":y+=`Error: ${v?.message??"Unknown error"}`,o("error"),we.error(y),setTimeout(()=>o("idle"),5e3)}finally{n(!1)}},h=()=>{switch(r){case"success":return l.jsx(ac,{className:"w-4 h-4 text-green-600"});case"error":return l.jsx(zr,{className:"w-4 h-4 text-red-600"});default:return l.jsx(yv,{className:"w-4 h-4 text-[#556B2F]"})}},p=()=>{switch(r){case"success":return"Verification email sent (or already verified). Check your inbox.";case"error":return"Failed to send verification email. Please try again.";default:return`Please verify your email address (${e}) to access all features.`}},f=()=>{switch(r){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";default:return"bg-[#fff8dc] border-[#c54a2c]"}};return l.jsx(We,{className:`mx-4 mt-4 border-2 ${f()} shadow-sm`,children:l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"flex items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[h(),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[#2d3d1f]",children:p()}),r==="idle"&&l.jsx("p",{className:"text-xs text-[#3c4f21] mt-1",children:"You can browse content but cannot book classes or create posts until verified."})]})]}),r!=="success"&&l.jsx(ue,{onClick:u,disabled:t,variant:"outline",size:"sm",className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-[#f8f9f6] whitespace-nowrap",children:t?l.jsxs(l.Fragment,{children:[l.jsx(Sx,{className:"w-3 h-3 mr-1 animate-spin"}),"Sending..."]}):l.jsxs(l.Fragment,{children:[l.jsx(yv,{className:"w-3 h-3 mr-1"}),"Resend Email"]})})]})})})}var kf,Ly;function MT(){if(Ly)return kf;Ly=1;var e=!1,t,n,r,o,i,c,u,h,p,f,m,v,y,w,N;function b(){if(!e){e=!0;var k=navigator.userAgent,C=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(k),A=/(Mac OS X)|(Windows)|(Linux)/.exec(k);if(v=/\b(iPhone|iP[ao]d)/.exec(k),y=/\b(iP[ao]d)/.exec(k),f=/Android/i.exec(k),w=/FBAN\/\w+;/i.exec(k),N=/Mobile/i.exec(k),m=!!/Win64/.exec(k),C){t=C[1]?parseFloat(C[1]):C[5]?parseFloat(C[5]):NaN,t&&document&&document.documentMode&&(t=document.documentMode);var L=/(?:Trident\/(\d+.\d+))/.exec(k);c=L?parseFloat(L[1])+4:t,n=C[2]?parseFloat(C[2]):NaN,r=C[3]?parseFloat(C[3]):NaN,o=C[4]?parseFloat(C[4]):NaN,o?(C=/(?:Chrome\/(\d+\.\d+))/.exec(k),i=C&&C[1]?parseFloat(C[1]):NaN):i=NaN}else t=n=r=i=o=NaN;if(A){if(A[1]){var T=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(k);u=T?parseFloat(T[1].replace("_",".")):!0}else u=!1;h=!!A[2],p=!!A[3]}else u=h=p=!1}}var j={ie:function(){return b()||t},ieCompatibilityMode:function(){return b()||c>t},ie64:function(){return j.ie()&&m},firefox:function(){return b()||n},opera:function(){return b()||r},webkit:function(){return b()||o},safari:function(){return j.webkit()},chrome:function(){return b()||i},windows:function(){return b()||h},osx:function(){return b()||u},linux:function(){return b()||p},iphone:function(){return b()||v},mobile:function(){return b()||v||y||f||N},nativeApp:function(){return b()||w},android:function(){return b()||f},ipad:function(){return b()||y}};return kf=j,kf}var Ef,By;function FT(){if(By)return Ef;By=1;var e=!!(typeof window<"u"&&window.document&&window.document.createElement),t={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};return Ef=t,Ef}var Pf,$y;function LT(){if($y)return Pf;$y=1;var e=FT(),t;e.canUseDOM&&(t=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function n(r,o){if(!e.canUseDOM||o&&!("addEventListener"in document))return!1;var i="on"+r,c=i in document;if(!c){var u=document.createElement("div");u.setAttribute(i,"return;"),c=typeof u[i]=="function"}return!c&&t&&r==="wheel"&&(c=document.implementation.hasFeature("Events.wheel","3.0")),c}return Pf=n,Pf}var Rf,Uy;function BT(){if(Uy)return Rf;Uy=1;var e=MT(),t=LT(),n=10,r=40,o=800;function i(c){var u=0,h=0,p=0,f=0;return"detail"in c&&(h=c.detail),"wheelDelta"in c&&(h=-c.wheelDelta/120),"wheelDeltaY"in c&&(h=-c.wheelDeltaY/120),"wheelDeltaX"in c&&(u=-c.wheelDeltaX/120),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(u=h,h=0),p=u*n,f=h*n,"deltaY"in c&&(f=c.deltaY),"deltaX"in c&&(p=c.deltaX),(p||f)&&c.deltaMode&&(c.deltaMode==1?(p*=r,f*=r):(p*=o,f*=o)),p&&!u&&(u=p<1?-1:1),f&&!h&&(h=f<1?-1:1),{spinX:u,spinY:h,pixelX:p,pixelY:f}}return i.getEventType=function(){return e.firefox()?"DOMMouseScroll":t("wheel")?"wheel":"mousewheel"},Rf=i,Rf}var Af,zy;function $T(){return zy||(zy=1,Af=BT()),Af}var UT=$T();const zT=Tc(UT);function WT(e,t,n,r,o,i){i===void 0&&(i=0);var c=pa(e,t,i),u=c.width,h=c.height,p=Math.min(u,n),f=Math.min(h,r);return p>f*o?{width:f*o,height:f}:{width:p,height:p/o}}function HT(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}function li(e,t,n,r,o){o===void 0&&(o=0);var i=pa(t.width,t.height,o),c=i.width,u=i.height;return{x:Wy(e.x,c,n.width,r),y:Wy(e.y,u,n.height,r)}}function Wy(e,t,n,r){var o=t*r/2-n/2;return su(e,-o,o)}function Hy(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function Vy(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function VT(e,t,n,r,o,i,c){i===void 0&&(i=0),c===void 0&&(c=!0);var u=c?qT:GT,h=pa(t.width,t.height,i),p=pa(t.naturalWidth,t.naturalHeight,i),f={x:u(100,((h.width-n.width/o)/2-e.x/o)/h.width*100),y:u(100,((h.height-n.height/o)/2-e.y/o)/h.height*100),width:u(100,n.width/h.width*100/o),height:u(100,n.height/h.height*100/o)},m=Math.round(u(p.width,f.width*p.width/100)),v=Math.round(u(p.height,f.height*p.height/100)),y=p.width>=p.height*r,w=y?{width:Math.round(v*r),height:v}:{width:m,height:Math.round(m/r)},N=Rt(Rt({},w),{x:Math.round(u(p.width-w.width,f.x*p.width/100)),y:Math.round(u(p.height-w.height,f.y*p.height/100))});return{croppedAreaPercentages:f,croppedAreaPixels:N}}function qT(e,t){return Math.min(e,Math.max(0,t))}function GT(e,t){return t}function YT(e,t,n,r,o,i){var c=pa(t.width,t.height,n),u=su(r.width/c.width*(100/e.width),o,i),h={x:u*c.width/2-r.width/2-c.width*u*(e.x/100),y:u*c.height/2-r.height/2-c.height*u*(e.y/100)};return{crop:h,zoom:u}}function KT(e,t,n){var r=HT(t);return n.height>n.width?n.height/(e.height*r):n.width/(e.width*r)}function QT(e,t,n,r,o,i){n===void 0&&(n=0);var c=pa(t.naturalWidth,t.naturalHeight,n),u=su(KT(e,t,r),o,i),h=r.height>r.width?r.height/e.height:r.width/e.width,p={x:((c.width-e.width)/2-e.x)*h,y:((c.height-e.height)/2-e.y)*h};return{crop:p,zoom:u}}function qy(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function JT(e){return e*Math.PI/180}function pa(e,t,n){var r=JT(n);return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function su(e,t,n){return Math.min(Math.max(e,t),n)}function rc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var XT=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,ZT=1,e3=3,t3=1,n3=(function(e){p5(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.cropperRef=_.createRef(),n.imageRef=_.createRef(),n.videoRef=_.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.windowResizeHandler=function(){return n.computeSizes()},n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(o){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.emitCropData(),n.setInitialCrop(r)),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var o=YT(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),i=o.crop,c=o.zoom;n.props.onCropChange(i),n.props.onZoomChange&&n.props.onZoomChange(c)}else if(n.props.initialCroppedAreaPixels){var u=QT(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),i=u.crop,c=u.zoom;n.props.onCropChange(i),n.props.onZoomChange&&n.props.onZoomChange(c)}},n.computeSizes=function(){var r,o,i,c,u,h,p=n.imageRef.current||n.videoRef.current;if(p&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var f=n.containerRect.width/n.containerRect.height,m=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((o=n.videoRef.current)===null||o===void 0?void 0:o.videoWidth)||0,v=((i=n.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((c=n.videoRef.current)===null||c===void 0?void 0:c.videoHeight)||0,y=p.offsetWidth<m||p.offsetHeight<v,w=m/v,N=void 0;if(y)switch(n.state.mediaObjectFit){default:case"contain":N=f>w?{width:n.containerRect.height*w,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/w};break;case"horizontal-cover":N={width:n.containerRect.width,height:n.containerRect.width/w};break;case"vertical-cover":N={width:n.containerRect.height*w,height:n.containerRect.height};break}else N={width:p.offsetWidth,height:p.offsetHeight};n.mediaSize=Rt(Rt({},N),{naturalWidth:m,naturalHeight:v}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var b=n.props.cropSize?n.props.cropSize:WT(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((u=n.state.cropSize)===null||u===void 0?void 0:u.height)!==b.height||((h=n.state.cropSize)===null||h===void 0?void 0:h.width)!==b.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(b),n.setState({cropSize:b},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(b),b}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(t.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(t.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(t.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(t.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var o=t.getMousePoint(r),i=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(i,o,{shouldUpdatePosition:!0}),n.props.onRotationChange){var c=n.gestureRotationStart+r.rotation;n.props.onRotationChange(c)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var o,i,c=r.x,u=r.y;n.dragStartPosition={x:c,y:u},n.dragStartCrop=Rt({},n.props.crop),(i=(o=n.props).onInteractionStart)===null||i===void 0||i.call(o)},n.onDrag=function(r){var o=r.x,i=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(o===void 0||i===void 0)){var c=o-n.dragStartPosition.x,u=i-n.dragStartPosition.y,h={x:n.dragStartCrop.x+c,y:n.dragStartCrop.y+u},p=n.props.restrictPosition?li(h,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):h;n.props.onCropChange(p)}}))},n.onDragStopped=function(){var r,o;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(o=(r=n.props).onInteractionEnd)===null||o===void 0||o.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var o=t.getMousePoint(r),i=zT(r).pixelY,c=n.props.zoom-i*n.props.zoomSpeed/200;n.setNewZoom(c,o,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var u,h;return(h=(u=n.props).onInteractionStart)===null||h===void 0?void 0:h.call(u)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var u,h;return(h=(u=n.props).onInteractionEnd)===null||h===void 0?void 0:h.call(u)})},250)}},n.getPointOnContainer=function(r,o){var i=r.x,c=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(i-o.x),y:n.containerRect.height/2-(c-o.y)}},n.getPointOnMedia=function(r){var o=r.x,i=r.y,c=n.props,u=c.crop,h=c.zoom;return{x:(o+u.x)/h,y:(i+u.y)/h}},n.setNewZoom=function(r,o,i){var c=i===void 0?{}:i,u=c.shouldUpdatePosition,h=u===void 0?!0:u;if(!(!n.state.cropSize||!n.props.onZoomChange)){var p=su(r,n.props.minZoom,n.props.maxZoom);if(h){var f=n.getPointOnContainer(o,n.containerPosition),m=n.getPointOnMedia(f),v={x:m.x*p-f.x,y:m.y*p-f.y},y=n.props.restrictPosition?li(v,n.mediaSize,n.state.cropSize,p,n.props.rotation):v;n.props.onCropChange(y)}n.props.onZoomChange(p)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?li(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return VT(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var o=r.croppedAreaPercentages,i=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(o,i),n.props.onCropAreaChange&&n.props.onCropAreaChange(o,i)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var o=r.croppedAreaPercentages,i=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(o,i)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var r=n.props.crop;if(n.previousCropSize&&n.state.cropSize){var o=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(o){var i=n.state.cropSize.width/n.previousCropSize.width,c=n.state.cropSize.height/n.previousCropSize.height;r={x:n.props.crop.x*i,y:n.props.crop.y*c}}}var u=n.props.restrictPosition?li(r,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):r;n.previousCropSize=n.state.cropSize,n.props.onCropChange(u),n.emitCropData()}},n.onKeyDown=function(r){var o,i,c=n.props,u=c.crop,h=c.onCropChange,p=c.keyboardStep,f=c.zoom,m=c.rotation,v=p;if(n.state.cropSize){r.shiftKey&&(v*=.2);var y=Rt({},u);switch(r.key){case"ArrowUp":y.y-=v,r.preventDefault();break;case"ArrowDown":y.y+=v,r.preventDefault();break;case"ArrowLeft":y.x-=v,r.preventDefault();break;case"ArrowRight":y.x+=v,r.preventDefault();break;default:return}n.props.restrictPosition&&(y=li(y,n.mediaSize,n.state.cropSize,f,m)),r.repeat||(i=(o=n.props).onInteractionStart)===null||i===void 0||i.call(o),h(y)}},n.onKeyUp=function(r){var o,i;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(i=(o=n.props).onInteractionEnd)===null||i===void 0||i.call(o)},n}return t.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.windowResizeHandler),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=XT,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.windowResizeHandler),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(n){var r,o,i,c,u,h,p,f,m;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.height)||((i=n.cropSize)===null||i===void 0?void 0:i.width)!==((c=this.props.cropSize)===null||c===void 0?void 0:c.width)?this.computeSizes():(((u=n.crop)===null||u===void 0?void 0:u.x)!==((h=this.props.crop)===null||h===void 0?void 0:h.x)||((p=n.crop)===null||p===void 0?void 0:p.y)!==((f=this.props.crop)===null||f===void 0?void 0:f.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((m=this.videoRef.current)===null||m===void 0||m.load());var v=this.getObjectFit();v!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:v},this.computeSizes)},t.prototype.getAspect=function(){var n=this.props,r=n.cropSize,o=n.aspect;return r?r.width/r.height:o},t.prototype.getObjectFit=function(){var n,r,o,i;if(this.props.objectFit==="cover"){var c=this.imageRef.current||this.videoRef.current;if(c&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var u=this.containerRect.width/this.containerRect.height,h=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,p=((o=this.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,f=h/p;return f<u?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(n){var r=t.getTouchPoint(n.touches[0]),o=t.getTouchPoint(n.touches[1]);this.lastPinchDistance=Hy(r,o),this.lastPinchRotation=Vy(r,o),this.onDragStart(qy(r,o))},t.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var o=t.getTouchPoint(n.touches[0]),i=t.getTouchPoint(n.touches[1]),c=qy(o,i);this.onDrag(c),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var u=Hy(o,i),h=r.props.zoom*(u/r.lastPinchDistance);r.setNewZoom(h,c,{shouldUpdatePosition:!1}),r.lastPinchDistance=u;var p=Vy(o,i),f=r.props.rotation+(p-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(f),r.lastPinchRotation=p})}},t.prototype.render=function(){var n=this,r,o=this.props,i=o.image,c=o.video,u=o.mediaProps,h=o.cropperProps,p=o.transform,f=o.crop,m=f.x,v=f.y,y=o.rotation,w=o.zoom,N=o.cropShape,b=o.showGrid,j=o.roundCropAreaPixels,k=o.style,C=k.containerStyle,A=k.cropAreaStyle,L=k.mediaStyle,T=o.classes,B=T.containerClassName,P=T.cropAreaClassName,I=T.mediaClassName,$=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return _.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(G){return n.containerRef=G},"data-testid":"container",style:C,className:rc("reactEasyCrop_Container",B)},i?_.createElement("img",Rt({alt:"",className:rc("reactEasyCrop_Image",$==="contain"&&"reactEasyCrop_Contain",$==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",$==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",I)},u,{src:i,ref:this.imageRef,style:Rt(Rt({},L),{transform:p||"translate(".concat(m,"px, ").concat(v,"px) rotate(").concat(y,"deg) scale(").concat(w,")")}),onLoad:this.onMediaLoad})):c&&_.createElement("video",Rt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:rc("reactEasyCrop_Video",$==="contain"&&"reactEasyCrop_Contain",$==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",$==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",I)},u,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Rt(Rt({},L),{transform:p||"translate(".concat(m,"px, ").concat(v,"px) rotate(").concat(y,"deg) scale(").concat(w,")")}),controls:!1}),(Array.isArray(c)?c:[{src:c}]).map(function(H){return _.createElement("source",Rt({key:H.src},H))})),this.state.cropSize&&_.createElement("div",Rt({ref:this.cropperRef,style:Rt(Rt({},A),{width:j?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:j?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:rc("reactEasyCrop_CropArea",N==="round"&&"reactEasyCrop_CropAreaRound",b&&"reactEasyCrop_CropAreaGrid",P)},h)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:e3,minZoom:ZT,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:t3},t.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},t.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},t})(_.Component),Tf={exports:{}},If={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function r3(){if(Gy)return If;Gy=1;var e=Ic();function t(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,i=e.useLayoutEffect,c=e.useDebugValue;function u(m,v){var y=v(),w=r({inst:{value:y,getSnapshot:v}}),N=w[0].inst,b=w[1];return i(function(){N.value=y,N.getSnapshot=v,h(N)&&b({inst:N})},[m,y,v]),o(function(){return h(N)&&b({inst:N}),m(function(){h(N)&&b({inst:N})})},[m]),c(y),y}function h(m){var v=m.getSnapshot;m=m.value;try{var y=v();return!n(m,y)}catch{return!0}}function p(m,v){return v()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return If.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,If}var Yy;function s3(){return Yy||(Yy=1,Tf.exports=r3()),Tf.exports}var o3=s3();function a3(){return o3.useSyncExternalStore(i3,()=>!0,()=>!1)}function i3(){return()=>{}}var dm="Avatar",[l3]=Cr(dm),[c3,Eb]=l3(dm),Pb=_.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,i]=_.useState("idle");return l.jsx(c3,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:i,children:l.jsx(ot.span,{...r,ref:t})})});Pb.displayName=dm;var Rb="AvatarImage",Ab=_.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...i}=e,c=Eb(Rb,n),u=u3(r,i),h=Vr(p=>{o(p),c.onImageLoadingStatusChange(p)});return Xt(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?l.jsx(ot.img,{...i,ref:t,src:r}):null});Ab.displayName=Rb;var Tb="AvatarFallback",Ib=_.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,i=Eb(Tb,n),[c,u]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&i.imageLoadingStatus!=="loaded"?l.jsx(ot.span,{...o,ref:t}):null});Ib.displayName=Tb;function Ky(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function u3(e,{referrerPolicy:t,crossOrigin:n}){const r=a3(),o=_.useRef(null),i=r?(o.current||(o.current=new window.Image),o.current):null,[c,u]=_.useState(()=>Ky(i,e));return Xt(()=>{u(Ky(i,e))},[i,e]),Xt(()=>{const h=m=>()=>{u(m)};if(!i)return;const p=h("loaded"),f=h("error");return i.addEventListener("load",p),i.addEventListener("error",f),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",p),i.removeEventListener("error",f)}},[i,n,t]),c}var d3=Pb,f3=Ab,h3=Ib;function m3({className:e,...t}){return l.jsx(d3,{"data-slot":"avatar",className:rt("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function p3({className:e,...t}){return l.jsx(f3,{"data-slot":"avatar-image",className:rt("aspect-square size-full",e),...t})}function g3({className:e,...t}){return l.jsx(h3,{"data-slot":"avatar-fallback",className:rt("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function v3({currentImage:e,onImageChange:t,onRemove:n,className:r=""}){const[o,i]=_.useState(null),[c,u]=_.useState({x:0,y:0}),[h,p]=_.useState(1),[f,m]=_.useState(null),v=_.useRef(null),y=_.useCallback((k,C)=>{m(C)},[]),w=k=>{const C=k.target.files?.[0];if(!C)return;if(!C.type.startsWith("image/")){we.info("Please select an image file.");return}const A=URL.createObjectURL(C);i(A)},N=async()=>{if(!o||!f)return null;const k=new Image;k.src=o,await new Promise(L=>k.onload=L);const C=document.createElement("canvas");C.width=f.width,C.height=f.height;const A=C.getContext("2d");return A?(A.drawImage(k,f.x,f.y,f.width,f.height,0,0,f.width,f.height),new Promise(L=>{C.toBlob(T=>{if(!T)return L(null);L(new File([T],`avatar-${Date.now()}.jpg`,{type:"image/jpeg"}))},"image/jpeg")})):null},b=async()=>{const k=await N();if(!k){we.error(" Failed to crop image. Try again.");return}const C=URL.createObjectURL(k);t(k,C),i(null),v.current&&(v.current.value="")},j=()=>{v.current&&(v.current.value=""),n?.()};return l.jsxs("div",{className:`space-y-4 ${r}`,children:[l.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsxs(m3,{className:"w-32 h-32 border-4 border-[#a8b892]",children:[l.jsx(p3,{src:e||"",alt:"Profile picture"}),l.jsx(g3,{className:"text-2xl bg-[#f8f9f6] text-[#556B2F]",children:l.jsx(xh,{className:"w-8 h-8"})})]}),e&&l.jsx("button",{onClick:j,className:"absolute -top-2 -right-2 w-8 h-8 bg-[#c54a2c] text-white rounded-full flex items-center justify-center hover:bg-[#a83d24]",title:"Remove image",children:l.jsx(Ln,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsxs(ue,{onClick:()=>v.current?.click(),className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",children:[l.jsx(bh,{className:"w-4 h-4 mr-2"}),e?"Change Photo":"Upload Photo"]}),l.jsx("p",{className:"text-sm text-[#556B2F] text-center max-w-xs",children:"Upload and crop a square image for best results."})]})]}),l.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:w,className:"hidden"}),o&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-md flex flex-col",children:[l.jsx("div",{style:{width:"100%",height:"400px",position:"relative"},children:l.jsx(n3,{image:o,crop:c,zoom:h,aspect:1,onCropChange:u,onZoomChange:p,onCropComplete:y},o)}),l.jsxs("div",{className:"flex justify-between mt-4",children:[l.jsx(ue,{variant:"outline",onClick:()=>i(null),children:"Cancel"}),l.jsxs(ue,{onClick:b,children:[l.jsx(io,{className:"w-4 h-4 mr-2"})," Save"]})]})]})})]})}function y3({user:e,onUpdate:t}){const[n,r]=_.useState(!1),[o,i]=_.useState(!1),[c,u]=_.useState(!1),[h,p]=_.useState({name:"",farmName:"",bio:"",location:""}),[f,m]=_.useState(""),[v,y]=_.useState(null);_.useEffect(()=>{(async()=>{const{data:A,error:L}=await Ce.from("profiles").select("*").eq("id",e.id).single();if(L){console.error("Failed to load profile:",L);return}if(p({name:A.full_name??"",farmName:A.farm_name??"",bio:A.bio??"",location:A.location??""}),A.avatar_url){const{data:T}=await Ce.storage.from("avatars").createSignedUrl(A.avatar_url,604800);m(T?.signedUrl??"")}else m("");t({id:A.id,name:A.full_name,email:A.email,farmName:A.farm_name,bio:A.bio,location:A.location,avatar_url:A.avatar_url,stripe_connected:A.stripe_connected})})()},[e.id]);const w=(C,A)=>{p(L=>({...L,[C]:A}))},N=async()=>{i(!0);try{const{data:C}=await Ce.auth.getUser();if(!C?.user)throw new Error("Not authenticated");let A=e.avatar_url??"";if(v){const $=C.user.id;A=`${$}-${Date.now()}.jpg`;const{error:H}=await Ce.storage.from("avatars").upload(A,v,{upsert:!0});if(H)throw H;const{data:G}=await Ce.storage.from("avatars").list("",{search:$});if(G){const K=G.map(V=>V.name).filter(V=>V!==A);K.length>0&&await Ce.storage.from("avatars").remove(K)}}const L={full_name:h.name??"",farm_name:h.farmName??"",bio:h.bio??"",location:h.location??"",avatar_url:A,updated_at:new Date().toISOString()},{data:T,error:B}=await Ce.from("profiles").update(L).eq("id",C.user.id).select().single();if(B)throw B;let P="";if(A){const{data:$}=await Ce.storage.from("avatars").createSignedUrl(A,604800);P=$?.signedUrl??"",m(P)}const I={id:T.id,name:T.full_name,email:T.email,farmName:T.farm_name,bio:T.bio,location:T.location,avatar_url:A,stripe_connected:T.stripe_connected};t(I),r(!1),y(null)}catch(C){console.error("Error saving profile:",C),we.error("Error saving profile. Please try again.")}finally{i(!1)}},b=(C,A)=>{y(C),m(A)},j=()=>{m(""),y(null)},k=async()=>{u(!0);try{if(!e?.id)throw new Error("No user ID available for Stripe connect.");console.log(" Connecting Stripe for user:",e.id);const{data:C,error:A}=await Ce.functions.invoke("stripe-connect",{body:{userId:e.id}});if(A)throw console.error(" Supabase function error:",A),A;if(!C?.url)throw new Error("Stripe connect function did not return a URL.");window.location.href=C.url}catch(C){console.error("Stripe connect error:",C.message||C),we.error("Stripe connection FAILED: "+(C.message||"Unknown error"))}finally{u(!1)}};return l.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[l.jsx("div",{className:"relative h-48 bg-cover bg-center mb-8 rounded-lg overflow-hidden",style:{backgroundImage:"linear-gradient(rgba(85, 107, 47, 0.7), rgba(85, 107, 47, 0.7)), url('https://images.unsplash.com/photo-1500382017468-9049fed747ef?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080')"},children:l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-white px-6",children:[l.jsx("h1",{className:"text-3xl md:text-4xl mb-2 text-white",children:"Your Profile"}),l.jsx("p",{className:"text-lg text-white opacity-90",children:"Manage your HERD community presence"})]})})}),l.jsxs(We,{className:"bg-white border-[#a8b892] shadow-lg mb-6",children:[l.jsx(vt,{className:"bg-[#556B2F] text-white rounded-t-lg",children:l.jsxs(mt,{className:"flex items-center gap-2 text-white",children:[l.jsx(ua,{className:"w-5 h-5"}),n?"Edit Your Profile":"Profile Information"]})}),l.jsx(Ve,{className:"p-6",children:n?l.jsxs("div",{className:"space-y-6",children:[l.jsx(v3,{currentImage:f,onImageChange:b,onRemove:j}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx(nt,{children:"Full Name *"}),l.jsx(bt,{value:h.name??"",onChange:C=>w("name",C.target.value),required:!0,className:"border-2 border-black focus-visible:border-black focus-visible:ring-black/20"})]}),l.jsxs("div",{children:[l.jsx(nt,{children:"Farm/Property Name"}),l.jsx(bt,{value:h.farmName??"",onChange:C=>w("farmName",C.target.value),className:"border-2 border-black focus-visible:border-black focus-visible:ring-black/20"})]})]}),l.jsxs("div",{children:[l.jsx(nt,{children:"Location"}),l.jsx(bt,{value:h.location??"",onChange:C=>w("location",C.target.value),placeholder:"City, State",className:"border-2 border-black focus-visible:border-black focus-visible:ring-black/20"})]}),l.jsxs("div",{children:[l.jsx(nt,{children:"About You"}),l.jsx(Gn,{value:h.bio??"",onChange:C=>w("bio",C.target.value),rows:4,className:"border-2 border-black focus-visible:border-black focus-visible:ring-black/20"})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l.jsx(ue,{onClick:N,disabled:o,children:o?"Saving...":"Save Changes"}),l.jsxs(ue,{variant:"destructive",onClick:()=>{r(!1),y(null)},className:"bg-[#c54a2c] text-white hover:bg-[#b8432a]",children:[l.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[l.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-100 border-4 border-[#a8b892] overflow-hidden",children:f?l.jsx("img",{src:f,alt:"Profile",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(xh,{className:"w-10 h-10 text-[#556B2F]"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl text-[#1f2b15]",children:h.name}),h.farmName&&l.jsx("p",{className:"text-[#2d3d1f]/90",children:h.farmName}),h.location&&l.jsx("p",{className:"text-[#2d3d1f]/80",children:h.location}),h.bio&&l.jsx("p",{className:"mt-2 text-[#2d3d1f]/80",children:h.bio})]})]}),l.jsx("div",{className:"pt-4 border-t mt-4",children:l.jsx(ue,{onClick:()=>r(!0),children:"Edit Profile"})})]})})]}),l.jsxs(We,{className:"bg-white border-[#a8b892] shadow-lg",children:[l.jsx(vt,{className:"bg-[#556B2F] text-white rounded-t-lg",children:l.jsx(mt,{className:"text-white",children:"Payment & Teaching Setup"})}),l.jsx(Ve,{className:"p-6",children:e.stripe_connected?l.jsx("div",{className:"inline-flex items-center rounded-full bg-[#dce8cc] px-4 py-2 text-sm font-medium text-[#2d3d1f]",children:"Connected & Ready"}):l.jsx(ue,{onClick:k,disabled:c,children:c?"Connecting...":"Connect Stripe Account"})})]})]})}/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ln(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Yr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gh({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function fm(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Ob(e,t,n="/"){return x3(e,t,n,!1)}function x3(e,t,n,r){let o=typeof t=="string"?fm(t):t,i=Rs(o.pathname||"/",n);if(i==null)return null;let c=Db(e);w3(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let p=A3(i);u=P3(c[h],p,r)}return u}function Db(e,t=[],n=[],r="",o=!1){let i=(c,u,h=o,p)=>{let f={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&h)return;ln(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let m=Hr([r,f.relativePath]),v=n.concat(f);c.children&&c.children.length>0&&(ln(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Db(c.children,t,v,m,h)),!(c.path==null&&!c.index)&&t.push({path:m,score:k3(m,c.index),routesMeta:v})};return e.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))i(c,u);else for(let h of Mb(c.path))i(c,u,!0,h)}),t}function Mb(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let c=Mb(r.join("/")),u=[];return u.push(...c.map(h=>h===""?i:[i,h].join("/"))),o&&u.push(...c),u.map(h=>e.startsWith("/")&&h===""?"/":h)}function w3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:E3(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var b3=/^:[\w-]+$/,_3=3,N3=2,S3=1,j3=10,C3=-2,Qy=e=>e==="*";function k3(e,t){let n=e.split("/"),r=n.length;return n.some(Qy)&&(r+=C3),t&&(r+=N3),n.filter(o=>!Qy(o)).reduce((o,i)=>o+(b3.test(i)?_3:i===""?S3:j3),r)}function E3(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function P3(e,t,n=!1){let{routesMeta:r}=e,o={},i="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],p=u===r.length-1,f=i==="/"?t:t.slice(i.length)||"/",m=Ac({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},f),v=h.route;if(!m&&p&&n&&!r[r.length-1].route.index&&(m=Ac({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},f)),!m)return null;Object.assign(o,m.params),c.push({params:o,pathname:Hr([i,m.pathname]),pathnameBase:D3(Hr([i,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(i=Hr([i,m.pathnameBase]))}return c}function Ac(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=R3(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],c=i.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:r.reduce((p,{paramName:f,isOptional:m},v)=>{if(f==="*"){let w=u[v]||"";c=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=u[v];return m&&!y?p[f]=void 0:p[f]=(y||"").replace(/%2F/g,"/"),p},{}),pathname:i,pathnameBase:c,pattern:e}}function R3(e,t=!1,n=!0){Yr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function A3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Yr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Rs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function T3(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?fm(e):e;return{pathname:n?n.startsWith("/")?n:I3(n,t):t,search:M3(r),hash:F3(o)}}function I3(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Of(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function O3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Fb(e){let t=O3(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Lb(e,t,n,r=!1){let o;typeof e=="string"?o=fm(e):(o={...e},ln(!o.pathname||!o.pathname.includes("?"),Of("?","pathname","search",o)),ln(!o.pathname||!o.pathname.includes("#"),Of("#","pathname","hash",o)),ln(!o.search||!o.search.includes("#"),Of("#","search","hash",o)));let i=e===""||o.pathname==="",c=i?"/":o.pathname,u;if(c==null)u=n;else{let m=t.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),m-=1;o.pathname=v.join("/")}u=m>=0?t[m]:"/"}let h=T3(o,u),p=c&&c!=="/"&&c.endsWith("/"),f=(i||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||f)&&(h.pathname+="/"),h}var Hr=e=>e.join("/").replace(/\/\/+/g,"/"),D3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,F3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function L3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Bb=["POST","PUT","PATCH","DELETE"];new Set(Bb);var B3=["GET",...Bb];new Set(B3);var Na=_.createContext(null);Na.displayName="DataRouter";var ou=_.createContext(null);ou.displayName="DataRouterState";_.createContext(!1);var $b=_.createContext({isTransitioning:!1});$b.displayName="ViewTransition";var $3=_.createContext(new Map);$3.displayName="Fetchers";var U3=_.createContext(null);U3.displayName="Await";var Kr=_.createContext(null);Kr.displayName="Navigation";var hm=_.createContext(null);hm.displayName="Location";var Er=_.createContext({outlet:null,matches:[],isDataRoute:!1});Er.displayName="Route";var mm=_.createContext(null);mm.displayName="RouteError";function z3(e,{relative:t}={}){ln(au(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=_.useContext(Kr),{hash:o,pathname:i,search:c}=Di(e,{relative:t}),u=i;return n!=="/"&&(u=i==="/"?n:Hr([n,i])),r.createHref({pathname:u,search:c,hash:o})}function au(){return _.useContext(hm)!=null}function vo(){return ln(au(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(hm).location}var Ub="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zb(e){_.useContext(Kr).static||_.useLayoutEffect(e)}function W3(){let{isDataRoute:e}=_.useContext(Er);return e?rI():H3()}function H3(){ln(au(),"useNavigate() may be used only in the context of a <Router> component.");let e=_.useContext(Na),{basename:t,navigator:n}=_.useContext(Kr),{matches:r}=_.useContext(Er),{pathname:o}=vo(),i=JSON.stringify(Fb(r)),c=_.useRef(!1);return zb(()=>{c.current=!0}),_.useCallback((h,p={})=>{if(Yr(c.current,Ub),!c.current)return;if(typeof h=="number"){n.go(h);return}let f=Lb(h,JSON.parse(i),o,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Hr([t,f.pathname])),(p.replace?n.replace:n.push)(f,p.state,p)},[t,n,i,o,e])}_.createContext(null);function V3(){let{matches:e}=_.useContext(Er),t=e[e.length-1];return t?t.params:{}}function Di(e,{relative:t}={}){let{matches:n}=_.useContext(Er),{pathname:r}=vo(),o=JSON.stringify(Fb(n));return _.useMemo(()=>Lb(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function q3(e,t,n,r,o){ln(au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=_.useContext(Kr),{matches:c}=_.useContext(Er),u=c[c.length-1],h=u?u.params:{},p=u?u.pathname:"/",f=u?u.pathnameBase:"/",m=u&&u.route;{let k=m&&m.path||"";Wb(p,!m||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let v=vo(),y;y=v;let w=y.pathname||"/",N=w;if(f!=="/"){let k=f.replace(/^\//,"").split("/");N="/"+w.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=Ob(e,{pathname:N});return Yr(m||b!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Yr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),J3(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},h,k.params),pathname:Hr([f,i.encodeLocation?i.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:Hr([f,i.encodeLocation?i.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),c,n,r,o)}function G3(){let e=nI(),t=L3(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:i},"ErrorBoundary")," or"," ",_.createElement("code",{style:i},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),n?_.createElement("pre",{style:o},n):null,c)}var Y3=_.createElement(G3,null),K3=class extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?_.createElement(Er.Provider,{value:this.props.routeContext},_.createElement(mm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Q3({routeContext:e,match:t,children:n}){let r=_.useContext(Na);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(Er.Provider,{value:e},n)}function J3(e,t=[],n=null,r=null,o=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,c=n?.errors;if(c!=null){let p=i.findIndex(f=>f.route.id&&c?.[f.route.id]!==void 0);ln(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let u=!1,h=-1;if(n)for(let p=0;p<i.length;p++){let f=i[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=p),f.route.id){let{loaderData:m,errors:v}=n,y=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||y){u=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((p,f,m)=>{let v,y=!1,w=null,N=null;n&&(v=c&&f.route.id?c[f.route.id]:void 0,w=f.route.errorElement||Y3,u&&(h<0&&m===0?(Wb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,N=null):h===m&&(y=!0,N=f.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,m+1)),j=()=>{let k;return v?k=w:y?k=N:f.route.Component?k=_.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=p,_.createElement(Q3,{match:f,routeContext:{outlet:p,matches:b,isDataRoute:n!=null},children:k})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?_.createElement(K3,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:j(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:r}):j()},null)}function pm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X3(e){let t=_.useContext(Na);return ln(t,pm(e)),t}function Z3(e){let t=_.useContext(ou);return ln(t,pm(e)),t}function eI(e){let t=_.useContext(Er);return ln(t,pm(e)),t}function gm(e){let t=eI(e),n=t.matches[t.matches.length-1];return ln(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function tI(){return gm("useRouteId")}function nI(){let e=_.useContext(mm),t=Z3("useRouteError"),n=gm("useRouteError");return e!==void 0?e:t.errors?.[n]}function rI(){let{router:e}=X3("useNavigate"),t=gm("useNavigate"),n=_.useRef(!1);return zb(()=>{n.current=!0}),_.useCallback(async(o,i={})=>{Yr(n.current,Ub),n.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...i}))},[e,t])}var Jy={};function Wb(e,t,n){!t&&!Jy[e]&&(Jy[e]=!0,Yr(!1,n))}_.memo(sI);function sI({routes:e,future:t,state:n,unstable_onError:r}){return q3(e,void 0,n,r,t)}var fc="get",hc="application/x-www-form-urlencoded";function iu(e){return e!=null&&typeof e.tagName=="string"}function oI(e){return iu(e)&&e.tagName.toLowerCase()==="button"}function aI(e){return iu(e)&&e.tagName.toLowerCase()==="form"}function iI(e){return iu(e)&&e.tagName.toLowerCase()==="input"}function lI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cI(e,t){return e.button===0&&(!t||t==="_self")&&!lI(e)}var sc=null;function uI(){if(sc===null)try{new FormData(document.createElement("form"),0),sc=!1}catch{sc=!0}return sc}var dI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Df(e){return e!=null&&!dI.has(e)?(Yr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hc}"`),null):e}function fI(e,t){let n,r,o,i,c;if(aI(e)){let u=e.getAttribute("action");r=u?Rs(u,t):null,n=e.getAttribute("method")||fc,o=Df(e.getAttribute("enctype"))||hc,i=new FormData(e)}else if(oI(e)||iI(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||u.getAttribute("action");if(r=h?Rs(h,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||fc,o=Df(e.getAttribute("formenctype"))||Df(u.getAttribute("enctype"))||hc,i=new FormData(u,e),!uI()){let{name:p,type:f,value:m}=e;if(f==="image"){let v=p?`${p}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else p&&i.append(p,m)}}else{if(iu(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fc,r=null,o=hc,c=e}return i&&o==="text/plain"&&(c=i,i=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:i,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vm(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hI(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Rs(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function mI(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pI(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function gI(e,t,n){let r=await Promise.all(e.map(async o=>{let i=t.routes[o.route.id];if(i){let c=await mI(i,n);return c.links?c.links():[]}return[]}));return wI(r.flat(1).filter(pI).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Xy(e,t,n,r,o,i){let c=(h,p)=>n[p]?h.route.id!==n[p].route.id:!0,u=(h,p)=>n[p].pathname!==h.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==h.params["*"];return i==="assets"?t.filter((h,p)=>c(h,p)||u(h,p)):i==="data"?t.filter((h,p)=>{let f=r.routes[h.route.id];if(!f||!f.hasLoader)return!1;if(c(h,p)||u(h,p))return!0;if(h.route.shouldRevalidate){let m=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function vI(e,t,{includeHydrateFallback:n}={}){return yI(e.map(r=>{let o=t.routes[r.route.id];if(!o)return[];let i=[o.module];return o.clientActionModule&&(i=i.concat(o.clientActionModule)),o.clientLoaderModule&&(i=i.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(i=i.concat(o.hydrateFallbackModule)),o.imports&&(i=i.concat(o.imports)),i}).flat(1))}function yI(e){return[...new Set(e)]}function xI(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function wI(e,t){let n=new Set;return new Set(t),e.reduce((r,o)=>{let i=JSON.stringify(xI(o));return n.has(i)||(n.add(i),r.push({key:i,link:o})),r},[])}function Hb(){let e=_.useContext(Na);return vm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function bI(){let e=_.useContext(ou);return vm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ym=_.createContext(void 0);ym.displayName="FrameworkContext";function Vb(){let e=_.useContext(ym);return vm(e,"You must render this element inside a <HydratedRouter> element"),e}function _I(e,t){let n=_.useContext(ym),[r,o]=_.useState(!1),[i,c]=_.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:p,onMouseLeave:f,onTouchStart:m}=t,v=_.useRef(null);_.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let N=j=>{j.forEach(k=>{c(k.isIntersecting)})},b=new IntersectionObserver(N,{threshold:.5});return v.current&&b.observe(v.current),()=>{b.disconnect()}}},[e]),_.useEffect(()=>{if(r){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[r]);let y=()=>{o(!0)},w=()=>{o(!1),c(!1)};return n?e!=="intent"?[i,v,{}]:[i,v,{onFocus:ci(u,y),onBlur:ci(h,w),onMouseEnter:ci(p,y),onMouseLeave:ci(f,w),onTouchStart:ci(m,y)}]:[!1,v,{}]}function ci(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function NI({page:e,...t}){let{router:n}=Hb(),r=_.useMemo(()=>Ob(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?_.createElement(jI,{page:e,matches:r,...t}):null}function SI(e){let{manifest:t,routeModules:n}=Vb(),[r,o]=_.useState([]);return _.useEffect(()=>{let i=!1;return gI(e,t,n).then(c=>{i||o(c)}),()=>{i=!0}},[e,t,n]),r}function jI({page:e,matches:t,...n}){let r=vo(),{manifest:o,routeModules:i}=Vb(),{basename:c}=Hb(),{loaderData:u,matches:h}=bI(),p=_.useMemo(()=>Xy(e,t,h,o,r,"data"),[e,t,h,o,r]),f=_.useMemo(()=>Xy(e,t,h,o,r,"assets"),[e,t,h,o,r]),m=_.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,N=!1;if(t.forEach(j=>{let k=o.routes[j.route.id];!k||!k.hasLoader||(!p.some(C=>C.route.id===j.route.id)&&j.route.id in u&&i[j.route.id]?.shouldRevalidate||k.hasClientLoader?N=!0:w.add(j.route.id))}),w.size===0)return[];let b=hI(e,c,"data");return N&&w.size>0&&b.searchParams.set("_routes",t.filter(j=>w.has(j.route.id)).map(j=>j.route.id).join(",")),[b.pathname+b.search]},[c,u,r,o,p,t,e,i]),v=_.useMemo(()=>vI(f,o),[f,o]),y=SI(f);return _.createElement(_.Fragment,null,m.map(w=>_.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),v.map(w=>_.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),y.map(({key:w,link:N})=>_.createElement("link",{key:w,nonce:n.nonce,...N})))}function CI(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var qb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qb&&(window.__reactRouterVersion="7.9.4")}catch{}var Gb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yb=_.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:o,reloadDocument:i,replace:c,state:u,target:h,to:p,preventScrollReset:f,viewTransition:m,...v},y){let{basename:w}=_.useContext(Kr),N=typeof p=="string"&&Gb.test(p),b,j=!1;if(typeof p=="string"&&N&&(b=p,qb))try{let I=new URL(window.location.href),$=p.startsWith("//")?new URL(I.protocol+p):new URL(p),H=Rs($.pathname,w);$.origin===I.origin&&H!=null?p=H+$.search+$.hash:j=!0}catch{Yr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=z3(p,{relative:o}),[C,A,L]=_I(r,v),T=RI(p,{replace:c,state:u,target:h,preventScrollReset:f,relative:o,viewTransition:m});function B(I){t&&t(I),I.defaultPrevented||T(I)}let P=_.createElement("a",{...v,...L,href:b||k,onClick:j||i?t:B,ref:CI(y,A),target:h,"data-discover":!N&&n==="render"?"true":void 0});return C&&!N?_.createElement(_.Fragment,null,P,_.createElement(NI,{page:k})):P});Yb.displayName="Link";var kI=_.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:o=!1,style:i,to:c,viewTransition:u,children:h,...p},f){let m=Di(c,{relative:p.relative}),v=vo(),y=_.useContext(ou),{navigator:w,basename:N}=_.useContext(Kr),b=y!=null&&DI(m)&&u===!0,j=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,k=v.pathname,C=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(k=k.toLowerCase(),C=C?C.toLowerCase():null,j=j.toLowerCase()),C&&N&&(C=Rs(C,N)||C);const A=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let L=k===j||!o&&k.startsWith(j)&&k.charAt(A)==="/",T=C!=null&&(C===j||!o&&C.startsWith(j)&&C.charAt(j.length)==="/"),B={isActive:L,isPending:T,isTransitioning:b},P=L?t:void 0,I;typeof r=="function"?I=r(B):I=[r,L?"active":null,T?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let $=typeof i=="function"?i(B):i;return _.createElement(Yb,{...p,"aria-current":P,className:I,ref:f,style:$,to:c,viewTransition:u},typeof h=="function"?h(B):h)});kI.displayName="NavLink";var EI=_.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:i,method:c=fc,action:u,onSubmit:h,relative:p,preventScrollReset:f,viewTransition:m,...v},y)=>{let w=II(),N=OI(u,{relative:p}),b=c.toLowerCase()==="get"?"get":"post",j=typeof u=="string"&&Gb.test(u),k=C=>{if(h&&h(C),C.defaultPrevented)return;C.preventDefault();let A=C.nativeEvent.submitter,L=A?.getAttribute("formmethod")||c;w(A||C.currentTarget,{fetcherKey:t,method:L,navigate:n,replace:o,state:i,relative:p,preventScrollReset:f,viewTransition:m})};return _.createElement("form",{ref:y,method:b,action:N,onSubmit:r?h:k,...v,"data-discover":!j&&e==="render"?"true":void 0})});EI.displayName="Form";function PI(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kb(e){let t=_.useContext(Na);return ln(t,PI(e)),t}function RI(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:i,viewTransition:c}={}){let u=W3(),h=vo(),p=Di(e,{relative:i});return _.useCallback(f=>{if(cI(f,t)){f.preventDefault();let m=n!==void 0?n:gh(h)===gh(p);u(e,{replace:m,state:r,preventScrollReset:o,relative:i,viewTransition:c})}},[h,u,p,n,r,t,e,o,i,c])}var AI=0,TI=()=>`__${String(++AI)}__`;function II(){let{router:e}=Kb("useSubmit"),{basename:t}=_.useContext(Kr),n=tI();return _.useCallback(async(r,o={})=>{let{action:i,method:c,encType:u,formData:h,body:p}=fI(r,t);if(o.navigate===!1){let f=o.fetcherKey||TI();await e.fetch(f,n,o.action||i,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||c,formEncType:o.encType||u,flushSync:o.flushSync})}else await e.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||c,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function OI(e,{relative:t}={}){let{basename:n}=_.useContext(Kr),r=_.useContext(Er);ln(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),i={...Di(e||".",{relative:t})},c=vo();if(e==null){i.search=c.search;let u=new URLSearchParams(i.search),h=u.getAll("index");if(h.some(f=>f==="")){u.delete("index"),h.filter(m=>m).forEach(m=>u.append("index",m));let f=u.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&o.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Hr([n,i.pathname])),gh(i)}function DI(e,{relative:t}={}){let n=_.useContext($b);ln(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Kb("useViewTransitionState"),o=Di(e,{relative:t});if(!n.isTransitioning)return!1;let i=Rs(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=Rs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ac(o.pathname,c)!=null||Ac(o.pathname,i)!=null}function Qb({conversations:e,currentUserId:t,currentUserName:n,onSendMessage:r,onConversationsUpdate:o,initialConversationId:i=null}){const{conversationId:c}=V3(),u=i||c||null,h=_.useRef(null),[p,f]=_.useState(u),[m,v]=_.useState(""),[y,w]=_.useState({}),[N,b]=_.useState(!1),[j,k]=_.useState("all"),[C,A]=_.useState(!1),[L,T]=_.useState(()=>typeof window<"u"?window.matchMedia("(max-width: 1023px)").matches:!1),B=be.useRef(null),P=_.useRef(!0),I=e.find(X=>X.id===p),$=p?y[p]||[]:[];_.useEffect(()=>{if(!L||typeof document>"u")return;const X=document.body.style.overflow;if(p)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=X};document.body.style.overflow=X},[L,p]),_.useEffect(()=>{if(typeof window>"u")return;const X=window.matchMedia("(max-width: 1023px)"),ie=fe=>{T(fe.matches)};return T(X.matches),typeof X.addEventListener=="function"?(X.addEventListener("change",ie),()=>X.removeEventListener("change",ie)):(X.addListener(ie),()=>X.removeListener(ie))},[]);const H=be.useCallback(()=>{const X=B.current;X&&(X.scrollTop=X.scrollHeight)},[]);_.useEffect(()=>{p&&P.current&&$.length>0&&H()},[$.length,p,H]),_.useEffect(()=>{if(!p)return;P.current=!0;const X=setTimeout(()=>{P.current&&H()},100);return()=>clearTimeout(X)},[p,H]),_.useEffect(()=>{p&&!y[p]&&J(p)},[p]),_.useEffect(()=>{e.length===0&&t&&(console.log(" MessagingCenter mounted with no conversations, requesting refresh..."),o?.(()=>[]))},[t]),_.useEffect(()=>{if(e.length===0){i||f(null);return}if(i&&h.current!==i){f(i),h.current=i;return}p||L||f(e[0].id)},[e,i,L,p]),_.useEffect(()=>{!L&&!p&&e.length>0&&f(e[0].id)},[L,e,p]),_.useEffect(()=>{c&&c!==p&&(f(c),J(c))},[c]),_.useEffect(()=>{if(!i){h.current=null;return}h.current!==i&&(h.current=i,i!==p&&(P.current=!0,f(i),J(i)))},[i,p]),_.useEffect(()=>{if(!p)return;const X=e.find(ie=>ie.id===p);X&&X.unreadCount>0&&R(p)},[p,e]);const G=[...e].sort((X,ie)=>{const fe=X.lastMessage?.createdAt||X.updatedAt||X.createdAt||"0",se=ie.lastMessage?.createdAt||ie.updatedAt||ie.createdAt||"0";return new Date(se).getTime()-new Date(fe).getTime()}),K=j==="unread"?G.filter(X=>X.unreadCount>0):G,V=be.useCallback(()=>{const X=B.current;if(!X)return;const ie=X.scrollHeight-X.scrollTop-X.clientHeight;P.current=ie<48},[]),J=async X=>{if(!N){b(!0);try{const{data:ie,error:fe}=await Ce.from("messages").select("id, conversation_id, sender_id, content, created_at").eq("conversation_id",X).order("created_at",{ascending:!0});if(fe)throw fe;const se=(ie||[]).map(he=>({id:he.id,conversationId:he.conversation_id,senderId:he.sender_id,content:he.content,createdAt:he.created_at}));w(he=>({...he,[X]:se})),console.log(` Loaded ${se.length} messages for conversation ${X}`),X===p&&P.current&&requestAnimationFrame(()=>H())}catch(ie){console.error(" Failed to load messages:",ie),w(fe=>({...fe,[X]:[]}))}finally{b(!1)}}},R=async X=>{if(!t)return;const ie=new Date().toISOString();try{const{data:fe,error:se}=await Ce.from("conversation_participants").update({last_read_at:ie}).eq("conversation_id",X).eq("user_id",t).select("id");if(se)throw se;if(!fe||fe.length===0){const{error:he}=await Ce.from("conversation_participants").insert({conversation_id:X,user_id:t,last_read_at:ie});if(he)throw he}console.log(" Marked conversation as read:",X),o?.(he=>he.map(Ee=>Ee.id===X?{...Ee,unreadCount:0,lastReadAt:ie}:Ee))}catch(fe){console.error(" Error marking conversation as read:",fe)}},E=async X=>{P.current=!0,f(X),y[X]||J(X)},D=async()=>{if(!m.trim()||!p)return;const X=m.trim();v(""),P.current=!0;const ie={id:`temp-${Date.now()}`,conversationId:p,senderId:t,senderName:n,content:X,createdAt:new Date().toISOString()};w(fe=>({...fe,[p]:[...fe[p]||[],ie]}));try{await r(p,X),setTimeout(()=>J(p),500)}catch(fe){console.error(" Failed to send message:",fe),w(se=>({...se,[p]:se[p]?.filter(he=>he.id!==ie.id)||[]})),v(X)}},W=async()=>{if(!I||C)return;const X=M(I),ie=X?`Remove your conversation with ${X}? You can still be messaged again later.`:"Remove this conversation? You can still be messaged again later.";if(window.confirm(ie)){A(!0);try{const{error:fe}=await Ce.rpc("delete_conversation_for_user",{_conversation_id:I.id});if(fe)throw fe;const se=e.filter(he=>he.id!==I.id);o?.(he=>he.filter(Ee=>Ee.id!==I.id)),w(he=>{const Ee={...he};return delete Ee[I.id],Ee}),v(""),h.current=null,!L&&se.length>0?f(se[0].id):f(null),we.success("Conversation deleted.")}catch(fe){console.error(" Failed to delete conversation:",fe),we.error("Unable to delete this conversation right now.")}finally{A(!1)}}},F=X=>{const ie=new Date(X),se=(new Date().getTime()-ie.getTime())/(1e3*60*60);return se<1?`${Math.floor(se*60)}m ago`:se<24?`${Math.floor(se)}h ago`:ie.toLocaleDateString("en-US",{month:"short",day:"numeric"})},M=X=>X.hostId===t?X.guestName||"Guest":X.hostName||"Host",U=X=>{if(!X)return"";const ie=new Date(X),fe=new Date;return fe.toDateString()===ie.toDateString()?ie.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):Math.floor((fe.getTime()-ie.getTime())/(1e3*60*60*24))<7?ie.toLocaleDateString("en-US",{weekday:"short"}):ie.toLocaleDateString("en-US",{month:"numeric",day:"numeric"})},te=X=>{const ie=p===X.id,fe=M(X),se=X.lastMessage?.content||"Tap to start this conversation",he=X.lastMessage?.createdAt||X.updatedAt||X.createdAt,Ee=U(he),Se=fe?.trim().charAt(0)?.toUpperCase()||"?",z=X.unreadCount>0;return l.jsxs("button",{type:"button",onClick:()=>E(X.id),className:`flex w-full items-start gap-3 rounded-2xl px-4 py-3 text-left transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#556B2F] ${ie?"bg-[#556B2F]/10":"hover:bg-[#f0f4ea]"}`,children:[l.jsx("div",{className:"flex-shrink-0",children:X.otherAvatarUrl?l.jsx(Yn,{src:X.otherAvatarUrl,alt:fe,className:"h-10 w-10 rounded-full object-cover border border-[#a8b892]"}):l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-[#dfe6d5] text-sm font-semibold text-[#2d3d1f]",children:Se})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"truncate text-sm font-semibold text-[#1f2b15]",children:fe}),Ee&&l.jsx("span",{className:"ml-2 text-xs text-gray-400",children:Ee})]}),l.jsx("p",{className:`mt-1 truncate text-sm ${ie?"text-[#2d3d1f]/80":"text-gray-600"}`,children:se}),X.className&&l.jsxs("p",{className:"mt-1 truncate text-xs text-gray-400",children:["Re: ",X.className]})]}),z&&l.jsx("span",{className:"mt-1 inline-flex h-2.5 w-2.5 shrink-0 rounded-full bg-[#c54a2c]","aria-hidden":"true"})]},X.id)},Q=()=>L?l.jsxs("div",{className:"flex h-full flex-col rounded-3xl bg-white shadow-sm",children:[l.jsxs("div",{className:"px-5 pt-5 pb-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-semibold text-[#1f2b15]",children:"Messages"}),l.jsx("p",{className:"text-sm text-gray-500",children:j==="unread"?"Unread conversations":"All conversations"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[l.jsx("button",{type:"button",className:"rounded-full p-2 hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#556B2F]",children:l.jsx(jx,{className:"h-5 w-5"})}),l.jsx("button",{type:"button",className:"rounded-full p-2 hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#556B2F]",children:l.jsx(qN,{className:"h-5 w-5"})})]})]}),l.jsxs("div",{className:"mt-5 flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>k("all"),className:`rounded-full px-4 py-1.5 text-sm font-medium transition-colors ${j==="all"?"bg-black text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All"}),l.jsx("button",{type:"button",onClick:()=>k("unread"),className:`rounded-full px-4 py-1.5 text-sm font-medium transition-colors ${j==="unread"?"bg-black text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Unread"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain divide-y divide-gray-100",children:K.length===0?l.jsx("div",{className:"px-5 py-10 text-center text-gray-500",children:j==="unread"?"No unread conversations yet":"No conversations yet"}):K.map(X=>te(X))})]}):l.jsxs(We,{className:"lg:col-span-1 h-full flex flex-col overflow-hidden",children:[l.jsx(vt,{className:"shrink-0",children:l.jsxs(mt,{className:"text-[#3c4f21] flex items-center gap-2",children:[l.jsx(pn,{className:"h-5 w-5"})," Conversations"]})}),l.jsx(Ve,{className:"p-0 flex-1 overflow-y-auto overscroll-contain",children:K.length===0?l.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:j==="unread"?"No unread conversations":"No conversations yet"}):l.jsx("div",{className:"space-y-1",children:K.map(X=>te(X))})})]}),ee=()=>{if(!I)return L?null:l.jsx(We,{className:"lg:col-span-1 lg:col-start-2 h-full",children:l.jsx(Ve,{className:"flex h-full items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{className:"mx-auto mb-4 h-12 w-12 text-gray-300"}),l.jsx("p",{className:"text-gray-500",children:"Select a conversation to start messaging"})]})})});const X=M(I),ie=I.className?`Re: ${I.className}`:null,fe=l.jsxs("div",{className:"flex flex-1 flex-col min-h-0 bg-white",children:[l.jsx("div",{ref:B,onScroll:V,className:"flex-1 min-h-0 overflow-y-auto overscroll-contain space-y-4 px-4 pt-4 pb-6",children:N&&$.length===0?l.jsxs("div",{className:"py-8 text-center text-gray-500",children:[l.jsx("div",{className:"mx-auto mb-2 h-8 w-8 animate-spin rounded-full border-b-2 border-[#556B2F]"}),"Loading messages..."]}):$.length===0?l.jsxs("div",{className:"py-8 text-center text-gray-500",children:[l.jsx(pn,{className:"mx-auto mb-2 h-8 w-8 opacity-50"}),"No messages yet. Start the conversation!"]}):$.map(se=>l.jsx("div",{className:`flex ${se.senderId===t?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-[75%] rounded-2xl px-3 py-2 ${se.senderId===t?"bg-[#556B2F] text-white":"bg-[#f8f9f6] text-[#3c4f21]"}`,children:[l.jsx("p",{className:"text-sm leading-relaxed",children:se.content}),l.jsx("p",{className:`mt-1 text-xs ${se.senderId===t?"text-white/70":"text-gray-500"}`,children:F(se.createdAt)})]})},se.id))}),l.jsx("div",{className:"border-t border-gray-200 bg-white px-4 py-4",style:{paddingBottom:L?"calc(env(safe-area-inset-bottom, 0px) + 16px)":void 0},children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx(bt,{placeholder:"Write a message...",value:m,onChange:se=>v(se.target.value),onKeyDown:se=>se.key==="Enter"&&D(),className:"flex-1"}),l.jsx(ue,{onClick:D,disabled:!m.trim(),className:"bg-[#556B2F] text-white hover:bg-[#3c4f21]",children:l.jsx(Mc,{className:"h-4 w-4"})})]})})]});return L?l.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-white",children:[l.jsxs("div",{className:"flex items-center border-b border-gray-200 px-4 py-3",style:{paddingTop:"env(safe-area-inset-top, 0px)"},children:[l.jsx("button",{type:"button",onClick:()=>f(null),className:"rounded-full p-2 hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#556B2F]",children:l.jsx(Ni,{className:"h-5 w-5 text-[#2d3d1f]"})}),l.jsxs("div",{className:"ml-3 flex-1",children:[l.jsx("p",{className:"truncate text-base font-semibold text-[#1f2b15]",children:X}),ie&&l.jsx("p",{className:"truncate text-xs text-gray-500",children:ie})]}),l.jsx("button",{type:"button",onClick:W,disabled:C,className:"rounded-full p-2 text-red-600 hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600","aria-label":"Delete conversation",children:l.jsx(Cs,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"flex-1 min-h-0 flex flex-col pb-6",children:fe})]}):l.jsxs(We,{className:"lg:col-span-1 lg:col-start-2 h-full min-h-0 flex flex-col overflow-hidden",children:[l.jsx(vt,{className:"border-b",children:l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{children:[l.jsxs(mt,{className:"text-[#3c4f21] flex items-center gap-2",children:[l.jsx(ua,{className:"h-5 w-5"}),X]}),ie&&l.jsx("p",{className:"text-sm text-[#556B2F]",children:ie})]}),l.jsxs(ue,{variant:"outline",size:"sm",onClick:W,disabled:C,className:"border-red-500 text-red-600 hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:[l.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})}),l.jsx(Ve,{className:"flex flex-1 min-h-0 flex-col p-0",children:fe})]})};if(e.length===0)return l.jsxs("div",{className:"rounded-3xl bg-white p-8 text-center shadow-sm",children:[l.jsx(pn,{className:"mx-auto mb-4 h-12 w-12 text-gray-300"}),l.jsx("p",{className:"text-gray-500",children:"No conversations yet"}),l.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Messages will appear here when you book classes or connect with hosts."})]});const ce=L?"flex h-[calc(100vh-140px)] min-h-[320px] flex-col gap-4 overflow-hidden":"grid grid-cols-1 gap-6 min-h-0 lg:grid-cols-[280px_minmax(0,1fr)] lg:h-[calc(100vh-140px)] lg:min-h-[320px] lg:overflow-hidden";return l.jsxs("div",{className:ce,children:[(!L||!p)&&Q(),(!L||p)&&ee()]})}const MI={};function oc({user:e,classes:t,conversations:n,onNavigate:r,onDeleteClass:o,onManageClass:i,onRelaunchClass:c,activeView:u="overview",onSendMessage:h,onConversationsUpdate:p,initialConversationId:f=null,initialMessageTarget:m=null,onConversationNavigate:v,onBookingsRefresh:y}){const[w,N]=_.useState([]),[b,j]=_.useState(!0),[k,C]=_.useState(null),[A,L]=_.useState(""),[T,B]=_.useState(!1),P=MI?.VITE_DEBUG_LOGS==="true",[I,$]=_.useState(f??null),H=_.useRef(null),G=w.filter(z=>z.status==="PENDING");w.filter(z=>z.paymentStatus==="PAID");const K=w.filter(z=>z.status==="APPROVED"||z.status==="PAID"),V=new Date().getFullYear();P&&console.log(" Revenue Debug Info:",{totalBookings:w.length,APPROVEDBookings:K,allBookings:w.map(z=>({id:z.id,status:z.status,subtotalCents:z.subtotal,subtotalDollars:Number((z.subtotal/100).toFixed(2)),totalAmountCents:z.totalAmount,totalAmountDollars:Number((z.totalAmount/100).toFixed(2)),createdAt:z.createdAt,approved_at:z.approved_at,year:z.approved_at?new Date(z.approved_at).getFullYear():new Date(z.createdAt).getFullYear()}))});const J=new Set(["HELD","PAID","COMPLETED"]),R=K.filter(z=>{if(!J.has(z.paymentStatus)||!z.subtotal||z.subtotal<=0)return!1;const ye=(z.approved_at?new Date(z.approved_at):new Date(z.createdAt)).getFullYear();return P&&console.log(` Booking ${z.id}: year=${ye}, subtotal=${z.subtotal/100}, status=${z.status}, paymentStatus=${z.paymentStatus}`),ye===V}),E=R.reduce((z,de)=>z+(de.subtotal||0),0),D=ir(E,{withCurrency:!0}),W=_.useMemo(()=>{const z=de=>de?new Date(de).getTime():0;return n.filter(de=>{const ye=de.lastMessage;return ye?ye.senderId!==e.id:!1}).sort((de,ye)=>{const _e=z(de.lastMessage?.createdAt)||z(de.updatedAt)||z(de.createdAt);return(z(ye.lastMessage?.createdAt)||z(ye.updatedAt)||z(ye.createdAt))-_e}).slice(0,3)},[n,e.id]);P&&console.log(" Revenue Calculation Result:",{currentYearBookings:R.length,totalRevenueCents:E,totalRevenueDollars:Number((E/100).toFixed(2)),bookingDetails:R.map(z=>({id:z.id,subtotalCents:z.subtotal,subtotalDollars:Number((z.subtotal/100).toFixed(2)),totalAmountCents:z.totalAmount,totalAmountDollars:Number((z.totalAmount/100).toFixed(2))}))}),n.reduce((z,de)=>z+de.unreadCount,0);const F=_.useMemo(()=>{const z=me=>{if(!me)return 0;const Te=new Date(me).getTime();return Number.isFinite(Te)?Te:0},de=w.filter(me=>me.status==="PENDING").sort((me,Te)=>z(me.createdAt)-z(Te.createdAt)),ye=w.filter(me=>me.status==="APPROVED"||me.status==="PAID").sort((me,Te)=>z(me.createdAt)-z(Te.createdAt)),_e=w.filter(me=>me.status==="DENIED").sort((me,Te)=>z(me.createdAt)-z(Te.createdAt)),pe=w.filter(me=>me.status!=="PENDING"&&me.status!=="APPROVED"&&me.status!=="PAID"&&me.status!=="DENIED").sort((me,Te)=>z(me.createdAt)-z(Te.createdAt));return[...de,...ye,..._e,...pe]},[w]);_.useEffect(()=>{M()},[e.id]);const M=async()=>{try{j(!0);const{data:z,error:de}=await Ce.from("bookings").select(`
          *,
          classes!inner(host_id, title),
          profiles!inner(full_name, email)
        `).eq("classes.host_id",e.id).order("created_at",{ascending:!1});if(de)throw de;const _e=(Array.isArray(z)?z:[]).map(pe=>{const me=Ct=>Math.max(0,Math.round(Number(Ct??0))),Te=(pe.status||"PENDING").toString().toUpperCase(),Je=Te==="CONFIRMED"?"APPROVED":Te,Ue=(pe.payment_status??pe.paymentStatus??"PENDING").toString().toUpperCase(),He=(Array.isArray(pe.studentNames)?pe.studentNames:Array.isArray(pe.student_names)?pe.student_names:Array.isArray(pe.metadata?.student_names)?pe.metadata.student_names:[]).map(Ct=>typeof Ct=="string"?Ct.trim():"").filter(Boolean),tt=Number(pe.studentCount??pe.qty??0),yt=Number.isFinite(tt)&&tt>0?tt:He.length||1;return{id:pe.id,classId:pe.class_id,userId:pe.user_id,userEmail:pe.profiles?.email||"",userName:pe.profiles?.full_name||"",hostId:pe.classes?.host_id||e.id,hostEmail:"",hostName:e.name,studentCount:yt,studentNames:He,totalAmount:me(pe.total_cents),subtotal:me(pe.host_payout_cents),herdFee:me(pe.platform_fee_cents),status:Je,paymentStatus:Ue,createdAt:pe.created_at||"",approved_at:pe.approved_at||null,denied_at:pe.denied_at||null,host_message:pe.host_message||null,autoApprove:!1}});N(_e)}catch(z){typeof z=="object"&&z!==null&&"name"in z&&z.name==="AbortError"?console.warn("Bookings request timed out"):console.error("Error fetching bookings:",z),N([])}finally{j(!1)}};_.useEffect(()=>{$(f??null)},[f]),_.useEffect(()=>{if(u!=="messages"||!m?.guestId||!m.classId)return;const z=`${m.guestId}::${m.classId}`;if(H.current===z)return;(async()=>{try{const{guestId:ye,classId:_e,guestName:pe,classTitle:me}=m;if(!ye||!_e)return;const{data:Te,error:Je}=await Ce.from("conversations").select("id, host_id, guest_id, class_id").eq("class_id",_e).eq("host_id",e.id).eq("guest_id",ye).maybeSingle();if(Je)throw Je;let Ue=Te?.id;if(Ue)n.some(He=>He.id===Ue)||p?.(He=>{if(He.some(Ct=>Ct.id===Ue))return He;const tt=t.find(Ct=>Ct.id===_e);return[{id:Ue,classId:_e,hostId:e.id,guestId:ye,updatedAt:new Date().toISOString(),lastMessage:void 0,hostName:e.name,guestName:pe||"Guest",className:tt?.title||me||"Class",unreadCount:0},...He]});else{const{data:ke,error:He}=await Ce.from("conversations").insert({class_id:_e,host_id:e.id,guest_id:ye,last_message_at:new Date().toISOString()}).select("id").single();if(He)throw He;Ue=ke.id,p?.(tt=>{if(tt.some(Pe=>Pe.id===Ue))return tt;const yt=t.find(Pe=>Pe.id===_e);return[{id:Ue,classId:_e,hostId:e.id,guestId:ye,updatedAt:new Date().toISOString(),lastMessage:void 0,hostName:e.name,guestName:pe||"Guest",className:yt?.title||me||"Class",unreadCount:0},...tt]})}Ue&&$(Ue)}catch(ye){console.error("Failed to prepare conversation for messaging target:",ye)}finally{H.current=z}})()},[u,t,n,m,p,Ce,e.id,e.name]);const U=async(z,de,ye)=>{try{const{data:{session:_e}}=await Ce.auth.getSession();if(!_e?.access_token){we.error("Please sign in again to manage bookings.");return}B(!0),P&&console.log(` ${de.toUpperCase()} booking triggered for`,z);const me=`https://czdzjdujojcjluqcdchq.functions.supabase.co/${de==="approve"?"approve-booking":"deny-booking"}`,Te=de==="approve"?{booking_id:z}:{booking_id:z,message:ye??""},Je=await fetch(me,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_e.access_token}`},body:JSON.stringify(Te)});P&&console.log(" Response status:",Je.status);const Ue=await Je.json().catch(()=>({}));if(P&&console.log(" Response data:",Ue),!Je.ok||Ue.error)throw new Error(Ue.error||`Failed to ${de} booking`);de==="approve"?we.success("Booking approved  payment captured and emails queued!"):we.success("Booking denied and guest notified."),await M(),C(null),L(""),y&&await y().catch(ke=>{console.warn(" Failed to refresh parent bookings:",ke)})}catch(_e){console.error(" Error responding to booking:",_e),we.error(_e?.message||"An error occurred while processing your response.")}finally{B(!1)}},te=z=>new Date(z).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Q=(z,de)=>{const ye=la(z,de);return ye||(z?te(z):"Date TBD")},ee=z=>{if(!z)return"";const[de,ye]=z.split(":"),_e=parseInt(de),pe=_e>=12?"PM":"AM";return`${_e%12||12}:${ye} ${pe}`},ce=z=>{switch(z){case"PENDING":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"DENIED":return"bg-red-100 text-red-800";case"FAILED":return"bg-gray-100 text-gray-800";case"PAID":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},X=z=>{if(!z.startDate)return Number.POSITIVE_INFINITY;const de=new Date(`${z.startDate}T${z.startTime||"00:00"}`).getTime();return Number.isFinite(de)?de:Number.POSITIVE_INFINITY},ie=z=>{const de=z.endDate||z.startDate;if(!de)return null;const ye=new Date(`${de}T${z.startTime||"00:00"}`);return Number.isNaN(ye.getTime())?null:(ye.setHours(23,59,59,999),ye.getTime())},fe=_.useMemo(()=>{const z=Date.now();return t.filter(de=>{const ye=ie(de);return ye===null||ye>=z}).slice().sort((de,ye)=>X(de)-X(ye))},[t]),se=_.useMemo(()=>{const z=Date.now();return t.filter(de=>{const ye=ie(de);return ye!==null&&ye<z}).slice().sort((de,ye)=>X(ye)-X(de))},[t]),he=(z,de)=>{const ye=w.filter(Te=>Te.classId===z.id),_e=ye.filter(Te=>Te.status==="PENDING").length,pe=ye.filter(Te=>Te.status==="APPROVED"||Te.status==="PAID").length,me=!e.isAdmin&&z.instructorId===e.id&&pe>0&&!de;return l.jsxs(We,{className:"overflow-hidden",children:[l.jsxs("div",{className:"relative w-full h-40 md:h-48 bg-gray-100",children:[z.photos&&z.photos.length>0?l.jsx(Yn,{src:z.photos[0],alt:z.title,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#f8f9f6] to-[#e8e9e6] flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-[#556B2F]",children:[l.jsx(mo,{className:"w-8 h-8 mx-auto mb-1 opacity-50"}),l.jsx("p",{className:"text-xs opacity-70",children:"No photo"})]})}),l.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:[l.jsx(an,{className:"bg-[#556B2F] text-[#f8f9f6] text-xs",children:ir(z.pricePerPerson,{withCurrency:!0})}),de&&l.jsx(an,{className:"bg-gray-200 text-gray-600 text-xs",children:"Past"})]})]}),l.jsxs(vt,{className:"pb-3",children:[l.jsx(mt,{className:"text-[#3c4f21] text-lg leading-tight",children:z.title}),l.jsx("p",{className:"text-sm text-[#556B2F] line-clamp-2",children:z.shortSummary})]}),l.jsxs(Ve,{children:[l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsxs("p",{className:"text-sm",children:[l.jsx("strong",{children:"Dates:"})," ",Q(z.startDate,z.endDate),z.startTime&&` at ${ee(z.startTime)}`]}),l.jsxs("p",{className:"text-sm",children:[l.jsx("strong",{children:"Max Students:"})," ",z.maxStudents]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[_e>0&&l.jsxs(an,{className:"bg-yellow-100 text-yellow-800",children:[_e," PENDING"]}),pe>0&&l.jsxs(an,{className:"bg-green-100 text-green-800",children:[pe," CONFIRMED"]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs(ue,{variant:"outline",size:"sm",className:"w-full border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",onClick:()=>i(z),children:[l.jsx(js,{className:"h-4 w-4 mr-2"}),de?"View Past Class":"Manage Class"]}),de&&l.jsxs(ue,{variant:"outline",size:"sm",className:"w-full border-[#3c4f21] text-[#3c4f21] hover:bg-[#3c4f21] hover:text-white",onClick:()=>c(z),children:[l.jsx(zN,{className:"h-4 w-4 mr-2"}),"Relaunch as New Class"]})]}),(e.isAdmin||z.instructorId===e.id)&&l.jsxs("div",{className:"relative",children:[l.jsxs(ue,{variant:"outline",size:"sm",className:`w-full disabled:opacity-60 disabled:cursor-not-allowed disabled:pointer-events-none ${me?"border border-gray-300 text-gray-400 bg-gray-100":"border border-red-500 text-red-500 hover:bg-red-500 hover:text-white"}`,disabled:me,onClick:()=>o(z.id),title:e.isAdmin?"Delete class (Admin privileges)":me?"Classes with approved bookings cannot be deleted":"Delete class",children:[l.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Delete Class",e.isAdmin&&l.jsx(an,{className:"ml-2 bg-orange-500 text-white text-xs px-1 py-0",children:"ADMIN"})]}),me&&l.jsx("p",{className:"mt-1 text-xs text-[#556B2F]",children:"Approved bookings prevent deleting this class while it is active."})]})]})]})]},z.id)};let Ee=null;if(k){const z=t.find(de=>de.id===k.classId);Ee=l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[9999]",children:l.jsxs(We,{className:"bg-[#ffffff] border-[#a8b892] max-w-md w-full",children:[l.jsx(vt,{className:"bg-[#c54a2c] text-[#f8f9f6]",children:l.jsx(mt,{className:"text-lg",children:"Deny Booking Request"})}),l.jsxs(Ve,{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-[#556B2F] mb-2",children:[l.jsx("strong",{children:"Guest:"})," ",k.userName]}),l.jsxs("p",{className:"text-sm text-[#556B2F] mb-2",children:[l.jsx("strong",{children:"Class:"})," ",z?.title||"Unknown Class"]}),l.jsxs("p",{className:"text-sm text-[#556B2F] mb-4",children:[l.jsx("strong",{children:"Students:"})," ",k.studentCount," ",k.studentNames.length>0?`(${k.studentNames.join(", ")})`:"(Guest did not provide names)"]})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"denialMessage",children:"Reason for denial (optional)"}),l.jsx(Gn,{id:"denialMessage",placeholder:"Let the guest know why you can't accommodate their booking...",value:A,onChange:de=>L(de.target.value),className:"mt-1",rows:3,autoFocus:!0})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx(ue,{variant:"outline",onClick:()=>{C(null),L("")},className:"flex-1",children:"Cancel"}),l.jsx(ue,{variant:"destructive",disabled:T,onClick:()=>{P&&console.log(" Deny clicked for",k.id),U(k.id,"deny",A)},className:"flex-1",children:T?"Processing...":"Deny Booking"})]})]})]})})}let Se=null;return u==="overview"?Se=l.jsxs("div",{children:[l.jsx("div",{className:"grid grid-cols-1 gap-3 md:gap-4",children:l.jsxs(We,{children:[l.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(mt,{className:"text-xs md:text-sm font-medium text-[#556B2F]",children:"Total Revenue"}),l.jsx(vi,{className:"h-4 w-4 text-[#556B2F]"})]}),l.jsx(Ve,{className:"pt-2",children:l.jsx("div",{className:"text-xl md:text-2xl font-bold text-[#3c4f21]",children:D})})]})}),l.jsxs("div",{className:"flex flex-row flex-wrap gap-3 my-6",children:[l.jsxs(ue,{onClick:()=>{e.stripeConnected?r("create-class"):(we.warning("You need to connect your Stripe account before creating classes. Please complete your profile setup."),r("profile"))},className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white flex-1 min-w-[140px] h-auto py-3 px-6",children:[l.jsx(ca,{className:"h-4 w-4 mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Create New Class"}),l.jsx("span",{className:"sm:hidden",children:"New Class"})]}),l.jsxs(ue,{onClick:()=>r("classes"),className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white flex-1 min-w-[140px] h-auto py-3 px-6",children:[l.jsx(js,{className:"h-4 w-4 mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"View All Classes"}),l.jsx("span",{className:"sm:hidden",children:"View Classes"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[l.jsxs(We,{children:[l.jsx(vt,{children:l.jsx(mt,{className:"text-[#3c4f21] text-lg",children:"Pending Bookings"})}),l.jsx(Ve,{children:G.length===0?l.jsx("p",{className:"text-gray-500 text-center py-4",children:"No PENDING bookings"}):l.jsx("div",{className:"space-y-3",children:G.slice(0,3).map(z=>{const de=t.find(pe=>pe.id===z.classId),ye=de?ie(de):null,_e=typeof ye=="number"&&ye<Date.now();return l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-[#f8f9f6] rounded-lg gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-[#3c4f21] truncate",children:z.userName}),l.jsx("p",{className:"text-sm text-[#556B2F] truncate",children:de?.title||"Unknown Class"}),l.jsxs("p",{className:"text-xs text-gray-500",children:[z.studentCount," student",z.studentCount>1?"s":""]}),l.jsx("p",{className:"text-xs text-gray-500",children:te(z.createdAt)})]}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsxs("div",{className:"flex gap-2 justify-end w-full",children:[l.jsx(ue,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white h-8 px-3",onClick:()=>U(z.id,"approve"),disabled:_e,children:l.jsx(io,{className:"h-3 w-3"})}),l.jsx(ue,{size:"sm",variant:"destructive",className:"h-8 px-3",onClick:()=>C(z),disabled:_e,children:l.jsx(Ln,{className:"h-3 w-3"})})]}),_e&&l.jsx("p",{className:"text-xs text-[#c54a2c] text-right",children:"This class has ended. Pending bookings were automatically denied."})]})]},z.id)})})})]}),l.jsxs(We,{children:[l.jsx(vt,{children:l.jsx(mt,{className:"text-[#3c4f21] text-lg",children:"Recent Messages"})}),l.jsx(Ve,{children:W.length===0?l.jsx("p",{className:"text-gray-500 text-center py-4",children:"No messages"}):l.jsx("div",{className:"space-y-3",children:W.map(z=>{const de=z.hostId===e.id?z.guestName||"Guest":z.hostName||"Host",ye=t.find(me=>me.id===z.classId)?.title||"Unknown Class",_e=typeof window<"u"&&window.matchMedia("(max-width: 1023px)").matches,pe=()=>{v?.(z.id),_e&&p?.(me=>me)};return l.jsxs("button",{type:"button",onClick:pe,className:"block w-full text-left p-3 bg-[#f8f9f6] rounded-lg transition-colors hover:bg-[#e7ede0] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#556B2F]",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("p",{className:"font-medium text-[#3c4f21] truncate",children:de}),z.unreadCount>0&&l.jsxs("span",{className:"ml-2 inline-flex items-center",children:[l.jsx("span",{className:"block h-2.5 w-2.5 rounded-full bg-[#c54a2c]","aria-hidden":"true"}),l.jsx("span",{className:"sr-only",children:`${z.unreadCount} unread message${z.unreadCount===1?"":"s"}`})]})]}),l.jsx("p",{className:"text-sm text-[#556B2F] mb-1 truncate",children:ye}),z.lastMessage&&l.jsx("p",{className:"text-xs text-gray-600 truncate",children:z.lastMessage.content})]},z.id)})})})]})]})]}):u==="classes"?Se=l.jsxs("div",{className:"space-y-4 md:space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[l.jsx("h2",{className:"text-xl md:text-2xl font-bold text-[#3c4f21]",children:"My Classes"}),l.jsxs(ue,{onClick:()=>{e.stripeConnected?r("create-class"):(we.warning("You need to connect your Stripe account before creating classes. Please complete your profile setup."),r("profile"))},className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white w-full sm:w-auto",children:[l.jsx(ca,{className:"h-4 w-4 mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Create New Class"}),l.jsx("span",{className:"sm:hidden",children:"New Class"})]})]}),b?l.jsx(We,{children:l.jsxs(Ve,{className:"text-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#556B2F] mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"Loading classes..."})]})}):t.length===0?l.jsx(We,{children:l.jsxs(Ve,{className:"text-center py-12",children:[l.jsx(mn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't created any classes yet"}),l.jsx(ue,{onClick:()=>{e.stripeConnected?r("create-class"):(we.warning("You need to connect your Stripe account before creating classes. Please complete your profile setup."),r("profile"))},className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",children:e.stripeConnected?"Create Your First Class":"Setup Stripe to Create Classes"})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-[#3c4f21] mb-3",children:"Upcoming & Active Classes"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:fe.length===0?l.jsx(We,{className:"md:col-span-2 lg:col-span-3",children:l.jsx(Ve,{className:"text-center py-10 text-[#556B2F]",children:"No upcoming classes. Relaunch a past class or create a new one."})}):fe.map(z=>he(z,!1))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-[#3c4f21] mb-3",children:"Past Classes"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:se.length===0?l.jsx(We,{className:"md:col-span-2 lg:col-span-3",children:l.jsx(Ve,{className:"text-center py-10 text-[#556B2F]",children:"No past classes yet."})}):se.map(z=>he(z,!0))})]})]})]}):u==="bookings"?Se=l.jsxs("div",{className:"space-y-4 md:space-y-6",children:[l.jsx("h2",{className:"text-xl md:text-2xl font-bold text-[#3c4f21]",children:"Booking Management"}),b?l.jsx(We,{children:l.jsxs(Ve,{className:"text-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#556B2F] mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"Loading bookings..."})]})}):F.length===0?l.jsx(We,{children:l.jsxs(Ve,{className:"text-center py-12",children:[l.jsx(ar,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"No bookings yet"})]})}):l.jsx("div",{className:"space-y-4",children:F.map(z=>{const de=t.find(_e=>_e.id===z.classId),ye=z.status==="DENIED"?0:z.subtotal;return l.jsx(We,{children:l.jsx(Ve,{className:"p-4 md:p-6",children:l.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-3",children:[l.jsx("h3",{className:"font-bold text-[#3c4f21] truncate",children:de?.title||"Unknown Class"}),l.jsx(an,{className:ce(z.status),children:z.status})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-[#556B2F]",children:[l.jsx("strong",{children:"Guest:"})," ",z.userName]}),l.jsxs("p",{className:"text-sm text-[#556B2F] truncate",children:[l.jsx("strong",{children:"Email:"})," ",z.userEmail]})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-[#556B2F]",children:[l.jsx("strong",{children:"Students:"})," ",z.studentCount]}),l.jsxs("p",{className:"text-sm text-[#556B2F]",children:[l.jsx("strong",{children:"Your earnings:"})," ",ir(ye,{withCurrency:!0})]})]})]}),l.jsxs("div",{className:"space-y-1 mb-3",children:[l.jsxs("p",{className:"text-sm text-gray-500",children:[l.jsx("strong",{children:"Student Names:"})," ",z.studentNames.length>0?z.studentNames.join(", "):"Not provided"]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[l.jsx("strong",{children:"Class Dates:"})," ",de?Q(de.startDate,de.endDate):"Unknown"]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[l.jsx("strong",{children:"Booked:"})," ",te(z.createdAt)]})]}),z.status==="DENIED"&&z.host_message&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2 mt-2",children:l.jsxs("p",{className:"text-sm text-red-800",children:[l.jsx("strong",{children:"Denial reason:"})," ",z.host_message]})})]}),z.status==="PENDING"&&l.jsxs("div",{className:"flex gap-2 justify-end lg:justify-start",children:[l.jsxs(ue,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white disabled:opacity-50",disabled:T,onClick:()=>U(z.id,"approve"),children:[l.jsx(io,{className:"h-4 w-4 mr-1"}),l.jsx("span",{className:"hidden sm:inline",children:"Approve"})]}),l.jsxs(ue,{size:"sm",variant:"destructive",disabled:T,onClick:()=>C(z),children:[l.jsx(Ln,{className:"h-4 w-4 mr-1"}),l.jsx("span",{className:"hidden sm:inline",children:"Deny"})]})]})]})})},z.id)})})]}):u==="messages"&&h&&(Se=l.jsx(Qb,{conversations:n,currentUserId:e.id,currentUserName:e.name,onSendMessage:h,onConversationsUpdate:p,initialConversationId:I})),l.jsxs(l.Fragment,{children:[Se,Ee]})}function ui({user:e,classes:t,bookings:n,conversations:r,favorites:o,posts:i,onNavigate:c,activeView:u="overview",onToggleFavorite:h,onSendMessage:p,onRefreshBookings:f,loadingBookings:m=!1,onManageClass:v,onSelectClass:y,onConversationsUpdate:w,onDeletePost:N,onSelectPost:b}){const j=_.useMemo(()=>n.filter(F=>F.isGuestBooking).sort((F,M)=>{const U=new Date(`${F.startDate??F.createdAt}T${F.startTime??"00:00"}`).getTime(),te=new Date(`${M.startDate??M.createdAt}T${M.startTime??"00:00"}`).getTime();return U-te}),[n]),k=j.filter(F=>F.status==="PENDING");r.reduce((F,M)=>F+(M.unreadCount??0),0);const C=_.useMemo(()=>{const F=Date.now(),M=U=>{if(!U.startDate)return Number.POSITIVE_INFINITY;const te=new Date(`${U.startDate}T${U.startTime||"00:00"}`).getTime();return Number.isFinite(te)?te:Number.POSITIVE_INFINITY};return t.filter(U=>o.includes(U.id)?M(U)>F:!1).slice().sort((U,te)=>M(U)-M(te))},[t,o]),A=j,L=A.filter(F=>F.reviewed).length,T=j,B=_.useMemo(()=>(i??[]).filter(F=>F.authorId===e.id).slice().sort((F,M)=>new Date(M.createdAt).getTime()-new Date(F.createdAt).getTime()),[i,e.id]),P=_.useCallback(async F=>{!N||!window.confirm(`Delete "${F.title}"? This action cannot be undone.`)||await N(F.id)},[N]),I=(F,M=160)=>{if(!F)return"";const U=F.trim();return U.length>M?`${U.slice(0,M)}`:U},$=F=>{const M=new Date(F);return isNaN(M.getTime())?"":M.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},H=async F=>{try{let M=F.reviewToken||null;if(!M){const{data:U,error:te}=await Ce.from("review_tokens").select("token").eq("booking_id",F.id).eq("user_id",e.id).is("used_at",null).maybeSingle();if(te)throw te;M=U?.token??null}if(!M){we.info("Your review link is not ready yet. Please check back soon.");return}window.location.href=`/review?token=${encodeURIComponent(M)}`}catch(M){console.error("Error opening review link",M),we.error("Unable to open the review form right now. Please try again later.")}},G=F=>{const M=F.startDate??(F.createdAt&&F.createdAt.includes("T")?F.createdAt.split("T")[0]:null);if(!M){if(F.reviewReadyAt){const fe=new Date(F.reviewReadyAt);if(!isNaN(fe.getTime()))return fe.getTime()-24*3600*1e3}return null}const U=F.startTime??(F.createdAt&&F.createdAt.includes("T")?F.createdAt.split("T")[1]?.slice(0,5):"00:00"),te=new Date(`${M}T${U}`);if(isNaN(te.getTime()))return null;const Q=Number(F.numberOfDays??1),ee=Number.isFinite(Q)&&Q>0?Q:1,ce=Number(F.hoursPerDay??0),X=Number.isFinite(ce)&&ce>0?ce:0,ie=Math.max(0,X)*Math.max(1,ee);return te.getTime()+ie*3600*1e3},K=F=>{if(F.reviewed)return null;const M=G(F),U=Date.now(),te=(F.status||"").toUpperCase(),Q=te==="APPROVED"||te==="PAID";if(!F.reviewToken&&Q&&M!==null)return M<=U&&(U-M)/36e5<24?"Review invite will be emailed soon.":null;if(!F.reviewEligible){if(F.reviewToken&&F.reviewReadyAt){const ee=new Date(F.reviewReadyAt);if(!isNaN(ee.getTime()))return`Review available on ${ee.toLocaleString()}`}return F.reviewToken?"Review available soon.":null}return null},V=F=>{if(!F)return"";const M=new Date(F);return isNaN(M.getTime())?"":M.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},J=F=>{switch(F){case"PENDING":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"DENIED":case"FAILED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},R=F=>{switch(F){case"PENDING":return"Pending";case"APPROVED":return"Approved";case"DENIED":return"Denied";case"FAILED":return"Failed";default:return F||"Unknown"}},E=F=>{if(!v)return;const M=t.find(U=>U.id===F);M&&v(M)},D=F=>{const M=t.find(Q=>Q.id===F.classId),te=[F.hostName,M?.hostName,M?.instructorName].find(Q=>typeof Q=="string"&&Q.trim().length>0);return te?te.trim():null},W=F=>{const M=D(F),U=t.find(Q=>Q.id===F.classId),te=la(F.startDate??U?.startDate,U?.endDate)||V(F.startDate??F.createdAt);return l.jsxs("div",{className:"p-3 bg-[#f8f9f6] rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("button",{onClick:()=>E(F.classId),className:"font-medium text-[#3c4f21] hover:text-[#556B2F] underline text-left",children:F.className||"Unknown Class"}),l.jsx(an,{className:J(F.status),children:R(F.status)})]}),l.jsx("p",{className:"text-sm text-[#556B2F] italic",children:M?`Host: ${M}`:"Host info unavailable"}),l.jsx("p",{className:"text-xs text-gray-500",children:te}),l.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:F.reviewed?l.jsx(an,{className:"bg-green-100 text-green-800",children:"Reviewed"}):l.jsxs(l.Fragment,{children:[l.jsx(ue,{size:"sm",variant:"outline",className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",disabled:!F.reviewEligible,onClick:()=>H(F),children:"Leave Review"}),K(F)&&l.jsx("span",{className:"text-xs text-gray-500",children:K(F)})]})})]})};return u==="overview"?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{title:"My Bookings",icon:mn,count:A.length},{title:"Pending",icon:mn,count:k.length,iconColor:"#c54a2c"},{title:"Favorites",icon:Ns,count:o.length,iconColor:"#c54a2c"},{title:"Reviews Left",icon:Fc,count:L,iconColor:"#c54a2c"}].map((F,M)=>l.jsxs(We,{children:[l.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(mt,{className:"text-sm font-medium text-[#556B2F]",children:F.title}),l.jsx(F.icon,{className:"h-4 w-4",style:{color:F.iconColor||"#556B2F"}})]}),l.jsx(Ve,{children:l.jsx("div",{className:"text-2xl font-bold text-[#3c4f21]",children:F.count})})]},M))}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs(ue,{onClick:()=>c("classes"),className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",children:[l.jsx(ao,{className:"h-4 w-4 mr-2"}),"Browse Classes"]}),l.jsxs(ue,{variant:"outline",onClick:()=>c("bulletin"),className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",children:[l.jsx(js,{className:"h-4 w-4 mr-2"}),"View Bulletin Board"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(We,{children:[l.jsx(vt,{children:l.jsx(mt,{className:"text-[#3c4f21]",children:"Recent Bookings"})}),l.jsx(Ve,{children:A.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(mn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"No bookings yet"}),l.jsx(ue,{onClick:()=>c("classes"),className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",children:"Browse Classes"})]}):l.jsx("div",{className:"space-y-3",children:T.slice(0,3).map(F=>l.jsx("div",{children:W(F)},F.id))})})]}),l.jsxs(We,{children:[l.jsx(vt,{children:l.jsx(mt,{className:"text-[#3c4f21]",children:"Favorite Classes"})}),l.jsx(Ve,{children:C.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Ns,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"No favorites yet"}),l.jsx(ue,{onClick:()=>c("classes"),className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",children:"Discover Classes"})]}):l.jsx("div",{className:"space-y-3",children:C.slice(0,3).map(F=>l.jsxs("div",{className:"p-3 bg-[#f8f9f6] rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("p",{className:"font-medium text-[#3c4f21]",children:F.title}),l.jsx(ue,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-[#c54a2c] hover:text-[#c54a2c]",onClick:()=>h?.(F.id),children:l.jsx(Ns,{className:"h-4 w-4 fill-current"})})]}),l.jsx("p",{className:"text-sm text-[#556B2F]",children:F.instructorName||""}),l.jsxs("p",{className:"text-sm text-[#556B2F]",children:[ir(F.pricePerPerson,{withCurrency:!0}),"/person"]}),l.jsx("p",{className:"text-xs text-gray-500",children:la(F.startDate,F.endDate)})]},F.id))})})]})]})]}):u==="bookings"?(console.log(" Rendering MY BOOKINGS tab"),console.log("bookings prop:",n),console.log("orderedBookings:",T),console.log("guestBookings:",n.filter(F=>F.isGuestBooking)),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-2xl font-bold text-[#3c4f21]",children:"My Bookings"}),f&&l.jsxs(ue,{variant:"outline",size:"sm",onClick:f,disabled:m,className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white disabled:opacity-50",children:[l.jsx(Sx,{className:`h-4 w-4 mr-2 ${m?"animate-spin":""}`}),m?"Loading...":"Refresh"]})]}),m?l.jsx(We,{children:l.jsx(Ve,{className:"text-center py-12",children:"Loading..."})}):T.length===0?l.jsx(We,{children:l.jsxs(Ve,{className:"text-center py-12",children:[l.jsx(mn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't booked any classes yet"}),l.jsx(ue,{onClick:()=>c("classes"),className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",children:"Browse Classes"})]})}):l.jsx("div",{className:"space-y-4",children:T.map(F=>l.jsx(We,{children:l.jsxs(Ve,{className:"space-y-4",children:[W(F),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-[#556B2F]",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Total Paid:"})," $",((F.totalAmount??0)/100).toFixed(2)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Booked:"})," ",V(F.createdAt)]})]})]})},F.id))})]})):u==="favorites"?l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-[#3c4f21]",children:"Favorite Classes"}),C.length===0?l.jsx(We,{children:l.jsx(Ve,{className:"text-center py-12",children:"No favorites yet"})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(F=>l.jsxs(We,{role:"button",tabIndex:0,onClick:()=>{y?y(F):c("class-detail")},onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&(M.preventDefault(),y?y(F):c("class-detail"))},className:"group cursor-pointer border-[#a8b892] hover:shadow-xl transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#556B2F]",children:[l.jsxs(vt,{children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx(mt,{className:"text-[#3c4f21] flex-1 truncate",children:l.jsx("span",{className:"underline-offset-2 group-hover:underline",children:F.title})}),l.jsx(ue,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-[#c54a2c] hover:text-[#c54a2c] ml-2",onClick:M=>{M.stopPropagation(),h?.(F.id)},children:l.jsx(Ns,{className:"h-4 w-4 fill-current"})})]}),l.jsx("p",{className:"text-sm text-[#556B2F]",children:F.shortSummary})]}),l.jsxs(Ve,{className:"space-y-2 text-sm text-[#556B2F]",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Instructor:"})," ",F.instructorName||""]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Dates:"})," ",la(F.startDate,F.endDate)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Price:"})," ",ir(F.pricePerPerson,{withCurrency:!0}),"/person"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Duration:"})," ",F.numberOfDays??0," day",(F.numberOfDays??0)>1?"s":""]})]})]},F.id))})]}):u==="bulletins"?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-[#3c4f21]",children:"My Bulletins"}),l.jsx("p",{className:"text-sm text-[#556B2F]",children:"Manage posts you've published to the community."})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs(ue,{className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",onClick:()=>c("bulletin"),children:[l.jsx(Wf,{className:"h-4 w-4 mr-2"}),"Create Bulletin"]}),l.jsxs(ue,{variant:"outline",className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",onClick:()=>c("bulletin"),children:[l.jsx(js,{className:"h-4 w-4 mr-2"}),"View Board"]})]})]}),B.length===0?l.jsx(We,{children:l.jsxs(Ve,{className:"py-12 text-center text-[#556B2F] space-y-3",children:[l.jsx(Nx,{className:"h-10 w-10 mx-auto text-gray-400"}),l.jsx("p",{children:"You haven't posted any bulletins yet."}),l.jsx(ue,{className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",onClick:()=>c("bulletin"),children:"Write Your First Bulletin"})]})}):l.jsx("div",{className:"space-y-4",children:B.map(F=>{const M=I(F.content||"",180),U=F.photos?.[0]??null;return l.jsxs(We,{className:"border-[#a8b892]",children:[l.jsxs(vt,{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(mt,{className:"text-[#3c4f21] text-lg sm:text-xl",children:F.title}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-[#556B2F]",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(mn,{className:"h-3.5 w-3.5"})," ",$(F.createdAt)]}),l.jsxs(an,{className:"bg-[#a8b892] text-[#2d3d1f] flex items-center gap-1",children:[l.jsx(wh,{className:"h-3 w-3"})," ",F.category||"General"]}),F.photos?.length?l.jsxs("span",{className:"text-xs text-gray-500",children:[F.photos.length," photo",F.photos.length===1?"":"s"]}):null]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs(ue,{size:"sm",className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",onClick:()=>{b?.(F),c("bulletin-detail")},children:[l.jsx(Wf,{className:"h-4 w-4 mr-1"})," View / Edit"]}),N&&l.jsxs(ue,{size:"sm",variant:"outline",className:"border-red-500 text-red-600 hover:bg-red-50",onClick:()=>void P(F),children:[l.jsx(Cs,{className:"h-4 w-4 mr-1"})," Delete"]})]})]}),l.jsxs(Ve,{className:"space-y-3 text-sm text-[#3c4f21]",children:[U&&l.jsx("div",{className:"relative h-40 w-full overflow-hidden rounded-lg border border-[#a8b892]",children:l.jsx(Yn,{src:U,alt:`${F.title} cover`,className:"h-full w-full object-cover"})}),M&&l.jsx("p",{className:"leading-relaxed text-[#3c4f21]",children:M})]})]},F.id)})})]}):u==="messages"&&p?l.jsx(Qb,{conversations:r,currentUserId:e.id,currentUserName:e.name,onSendMessage:p,onConversationsUpdate:w}):null}var Mf="rovingFocusGroup.onEntryFocus",FI={bubbles:!1,cancelable:!0},Mi="RovingFocusGroup",[vh,Jb,LI]=m0(Mi),[BI,Xb]=Cr(Mi,[LI]),[$I,UI]=BI(Mi),Zb=_.forwardRef((e,t)=>l.jsx(vh.Provider,{scope:e.__scopeRovingFocusGroup,children:l.jsx(vh.Slot,{scope:e.__scopeRovingFocusGroup,children:l.jsx(zI,{...e,ref:t})})}));Zb.displayName=Mi;var zI=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:f=!1,...m}=e,v=_.useRef(null),y=kt(t,v),w=Ah(i),[N,b]=ks({prop:c,defaultProp:u??null,onChange:h,caller:Mi}),[j,k]=_.useState(!1),C=Vr(p),A=Jb(n),L=_.useRef(!1),[T,B]=_.useState(0);return _.useEffect(()=>{const P=v.current;if(P)return P.addEventListener(Mf,C),()=>P.removeEventListener(Mf,C)},[C]),l.jsx($I,{scope:n,orientation:r,dir:w,loop:o,currentTabStopId:N,onItemFocus:_.useCallback(P=>b(P),[b]),onItemShiftTab:_.useCallback(()=>k(!0),[]),onFocusableItemAdd:_.useCallback(()=>B(P=>P+1),[]),onFocusableItemRemove:_.useCallback(()=>B(P=>P-1),[]),children:l.jsx(ot.div,{tabIndex:j||T===0?-1:0,"data-orientation":r,...m,ref:y,style:{outline:"none",...e.style},onMouseDown:at(e.onMouseDown,()=>{L.current=!0}),onFocus:at(e.onFocus,P=>{const I=!L.current;if(P.target===P.currentTarget&&I&&!j){const $=new CustomEvent(Mf,FI);if(P.currentTarget.dispatchEvent($),!$.defaultPrevented){const H=A().filter(R=>R.focusable),G=H.find(R=>R.active),K=H.find(R=>R.id===N),J=[G,K,...H].filter(Boolean).map(R=>R.ref.current);n1(J,f)}}L.current=!1}),onBlur:at(e.onBlur,()=>k(!1))})})}),e1="RovingFocusGroupItem",t1=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,children:c,...u}=e,h=Wr(),p=i||h,f=UI(e1,n),m=f.currentTabStopId===p,v=Jb(n),{onFocusableItemAdd:y,onFocusableItemRemove:w,currentTabStopId:N}=f;return _.useEffect(()=>{if(r)return y(),()=>w()},[r,y,w]),l.jsx(vh.ItemSlot,{scope:n,id:p,focusable:r,active:o,children:l.jsx(ot.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...u,ref:t,onMouseDown:at(e.onMouseDown,b=>{r?f.onItemFocus(p):b.preventDefault()}),onFocus:at(e.onFocus,()=>f.onItemFocus(p)),onKeyDown:at(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){f.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const j=VI(b,f.orientation,f.dir);if(j!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let C=v().filter(A=>A.focusable).map(A=>A.ref.current);if(j==="last")C.reverse();else if(j==="prev"||j==="next"){j==="prev"&&C.reverse();const A=C.indexOf(b.currentTarget);C=f.loop?qI(C,A+1):C.slice(A+1)}setTimeout(()=>n1(C))}}),children:typeof c=="function"?c({isCurrentTabStop:m,hasTabStop:N!=null}):c})})});t1.displayName=e1;var WI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function HI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function VI(e,t,n){const r=HI(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return WI[r]}function n1(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function qI(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var GI=Zb,YI=t1,lu="Tabs",[KI]=Cr(lu,[Xb]),r1=Xb(),[QI,xm]=KI(lu),s1=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:i,orientation:c="horizontal",dir:u,activationMode:h="automatic",...p}=e,f=Ah(u),[m,v]=ks({prop:r,onChange:o,defaultProp:i??"",caller:lu});return l.jsx(QI,{scope:n,baseId:Wr(),value:m,onValueChange:v,orientation:c,dir:f,activationMode:h,children:l.jsx(ot.div,{dir:f,"data-orientation":c,...p,ref:t})})});s1.displayName=lu;var o1="TabsList",a1=_.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,i=xm(o1,n),c=r1(n);return l.jsx(GI,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:r,children:l.jsx(ot.div,{role:"tablist","aria-orientation":i.orientation,...o,ref:t})})});a1.displayName=o1;var i1="TabsTrigger",l1=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...i}=e,c=xm(i1,n),u=r1(n),h=d1(c.baseId,r),p=f1(c.baseId,r),f=r===c.value;return l.jsx(YI,{asChild:!0,...u,focusable:!o,active:f,children:l.jsx(ot.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":p,"data-state":f?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:h,...i,ref:t,onMouseDown:at(e.onMouseDown,m=>{!o&&m.button===0&&m.ctrlKey===!1?c.onValueChange(r):m.preventDefault()}),onKeyDown:at(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&c.onValueChange(r)}),onFocus:at(e.onFocus,()=>{const m=c.activationMode!=="manual";!f&&!o&&m&&c.onValueChange(r)})})})});l1.displayName=i1;var c1="TabsContent",u1=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:i,...c}=e,u=xm(c1,n),h=d1(u.baseId,r),p=f1(u.baseId,r),f=r===u.value,m=_.useRef(f);return _.useEffect(()=>{const v=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(v)},[]),l.jsx(As,{present:o||f,children:({present:v})=>l.jsx(ot.div,{"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:p,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:v&&i})})});u1.displayName=c1;function d1(e,t){return`${e}-trigger-${t}`}function f1(e,t){return`${e}-content-${t}`}var JI=s1,XI=a1,ZI=l1,eO=u1;function Zy({className:e,...t}){return l.jsx(JI,{"data-slot":"tabs",className:rt("flex flex-col gap-2",e),...t})}function ex({className:e,...t}){return l.jsx(XI,{"data-slot":"tabs-list",className:rt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function Br({className:e,...t}){return l.jsx(ZI,{"data-slot":"tabs-trigger",className:rt("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] hover:shadow-md focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function $r({className:e,...t}){return l.jsx(eO,{"data-slot":"tabs-content",className:rt("flex-1 outline-none",e),...t})}var cu="Switch",[tO]=Cr(cu),[nO,rO]=tO(cu),h1=_.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:i,required:c,disabled:u,value:h="on",onCheckedChange:p,form:f,...m}=e,[v,y]=_.useState(null),w=kt(t,C=>y(C)),N=_.useRef(!1),b=v?f||!!v.closest("form"):!0,[j,k]=ks({prop:o,defaultProp:i??!1,onChange:p,caller:cu});return l.jsxs(nO,{scope:n,checked:j,disabled:u,children:[l.jsx(ot.button,{type:"button",role:"switch","aria-checked":j,"aria-required":c,"data-state":v1(j),"data-disabled":u?"":void 0,disabled:u,value:h,...m,ref:w,onClick:at(e.onClick,C=>{k(A=>!A),b&&(N.current=C.isPropagationStopped(),N.current||C.stopPropagation())})}),b&&l.jsx(g1,{control:v,bubbles:!N.current,name:r,value:h,checked:j,required:c,disabled:u,form:f,style:{transform:"translateX(-100%)"}})]})});h1.displayName=cu;var m1="SwitchThumb",p1=_.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,o=rO(m1,n);return l.jsx(ot.span,{"data-state":v1(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:t})});p1.displayName=m1;var sO="SwitchBubbleInput",g1=_.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...o},i)=>{const c=_.useRef(null),u=kt(c,i),h=_h(n),p=Nh(t);return _.useEffect(()=>{const f=c.current;if(!f)return;const m=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(m,"checked").set;if(h!==n&&y){const w=new Event("click",{bubbles:r});y.call(f,n),f.dispatchEvent(w)}},[h,n,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:u,style:{...o.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});g1.displayName=sO;function v1(e){return e?"checked":"unchecked"}var oO=h1,aO=p1;function iO({className:e,...t}){return l.jsx(oO,{"data-slot":"switch",className:rt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:l.jsx(aO,{"data-slot":"switch-thumb",className:rt("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const lO={},tx={overview:"",bookings:"mybookings",favorites:"favorites",bulletins:"mybulletins",messages:"messages"},nx=e=>{if(typeof e!="string")return"/";const t=e.trim();return!t||t==="/"?"/":t.replace(/\/+$/,"")||"/"},cO=(e,t)=>{const n=e.host_profile??e.host??null,r=e.guest_profile??e.guest??null;return e.host_id&&e.host_id!==t&&n?n:e.guest_id&&e.guest_id!==t&&r||e.host_id===t?r:e.guest_id===t?n:n||r||null};function uO({user:e,classes:t,posts:n,onNavigate:r,onDeleteClass:o,onManageClass:i,onSelectClass:c,initialTab:u=null,initialConversationId:h=null,favorites:p,onToggleFavorite:f,onRelaunchClass:m,onDeletePost:v,onSelectPost:y,hostMessageTarget:w=null}){const[N,b]=_.useState([]),[j,k]=_.useState([]),[C,A]=_.useState(u??"overview"),[L,T]=_.useState(e.stripeConnected?"host":"guest"),[B,P]=_.useState(!1),[I,$]=_.useState(w?.conversationId??h??null),[H,G]=_.useState(!0),K=lO?.VITE_DEBUG_LOGS==="true",V=be.useRef(u),J=be.useRef(e.stripeConnected),R=_.useMemo(()=>N.reduce((Se,z)=>Se+(z.unreadCount>0?1:0),0),[N]),E=R>0,D=E?R>99?"99+":String(R):null,W=E?`${R} unread conversation${R===1?"":"s"}`:null,F=_.useMemo(()=>j.filter(Se=>Se.hostId===e.id&&Se.status==="PENDING").length,[j,e.id]),M=F>0,U=M?F>99?"99+":String(F):null,te=M?`${F} booking${F===1?"":"s"} needing attention`:null,Q=["overview","classes","bookings","messages"],ee=["overview","bookings","favorites","bulletins","messages"];_.useEffect(()=>{u&&V.current!==u&&(A(u),V.current=u)},[u]),_.useEffect(()=>{h&&$(h)},[h]),_.useEffect(()=>{w?.conversationId&&$(w.conversationId)},[w?.conversationId]),_.useEffect(()=>{const Se=J.current;e.stripeConnected?!Se&&e.stripeConnected&&T("host"):T("guest"),J.current=e.stripeConnected},[e.stripeConnected]),_.useEffect(()=>{(L==="host"?Q:ee).includes(C)||A("overview")},[L,C]);const ce=Se=>{if(!e.stripeConnected){T("guest");return}T(Se)},X=_.useCallback(Se=>{$(Se),A("messages")},[$,A]),ie=()=>{if(!e.stripeConnected)return null;const Se=L==="host";return l.jsx("div",{className:"mb-4 flex justify-end",children:l.jsxs("div",{className:["inline-flex items-center gap-3 rounded-full border px-4 py-2 shadow-sm transition-colors","bg-transparent border-transparent"].join(" "),children:[l.jsx("button",{type:"button","aria-pressed":!Se,onClick:()=>ce("guest"),className:["text-xs font-medium px-3 py-1.5 rounded-full border transition-all duration-150",Se?"bg-transparent text-gray-500 hover:text-gray-800 border-transparent":"bg-green-100 text-black-900 border-black-200 shadow"].join(" "),children:"Guest View"}),l.jsx(iO,{checked:Se,onCheckedChange:z=>ce(z?"host":"guest"),"aria-label":"Toggle host dashboard",className:"data-[state=checked]:bg-green-700 data-[state=unchecked]:bg-gray-300 border border-black/70 shadow-[0_0_0_1px_rgba(0,0,0,0.15)]"}),l.jsx("button",{type:"button","aria-pressed":Se,onClick:()=>ce("host"),className:["text-xs font-medium px-3 py-1.5 rounded-full border transition-all duration-150",Se?"bg-green-100 text-black-900 border-black-200 shadow":"bg-transparent text-gray-500 hover:text-gray-800 border-transparent"].join(" "),children:"Host View"})]})})};_.useEffect(()=>{e?.id&&fe()},[e.id]),_.useEffect(()=>{const Se=()=>{e?.id&&se()};return window.addEventListener("herd-message-sent",Se),()=>window.removeEventListener("herd-message-sent",Se)},[e?.id]);const fe=async()=>{e?.id&&(K&&console.log(" Loading dashboard data for user:",e.id),await se(),await he())},se=async(Se={})=>{try{K&&console.log(" Loading conversations for user:",e.id);const z=Se.includeDeletedAt??H,de=`
        id,
        class_id,
        host_id,
        guest_id,
        created_at,
        updated_at,
        last_message_at,
        messages (
          id,
          sender_id,
          content,
          created_at
        ),
        participants:conversation_participants (
          user_id,
          last_read_at${z?", deleted_at":""}
        ),
        classes!conversations_class_id_fkey (
          id,
          title
        ),
        host:profiles!conversations_host_id_fkey (
          id,
          full_name,
          avatar_url
        ),
        guest:profiles!conversations_guest_id_fkey (
          id,
          full_name,
          avatar_url
        )
      `,{data:ye,error:_e}=await Ce.from("conversations").select(de).order("last_message_at",{ascending:!1});if(_e){if(z&&typeof _e=="object"&&_e!==null&&"code"in _e&&_e.code==="42703")return console.warn(" Conversations backend has no deleted_at column yet; retrying without soft-delete support."),G(!1),await se({includeDeletedAt:!1});throw _e}const pe=(ye||[]).filter(ke=>ke.host_id===e.id||ke.guest_id===e.id),me=new Map,Te=async ke=>{if(!ke)return null;if(/^https?:\/\//i.test(ke))return ke;if(me.has(ke))return me.get(ke)??null;try{const{data:He,error:tt}=await Ce.storage.from("avatars").createSignedUrl(ke,604800);return tt?(console.warn("Failed to create signed avatar URL:",tt.message??tt),me.set(ke,null),null):(me.set(ke,He?.signedUrl??null),He?.signedUrl??null)}catch(He){return console.warn("Unexpected error signing avatar URL:",He),me.set(ke,null),null}},Ue=(await Promise.all(pe.map(async ke=>{const He=Array.isArray(ke.messages)?[...ke.messages]:[],tt=He.length>0?He.slice().sort((q,re)=>new Date(re.created_at).getTime()-new Date(q.created_at).getTime())[0]:void 0,yt=Array.isArray(ke.participants)?ke.participants.find(q=>q.user_id===e.id):void 0;if(z&&yt?.deleted_at)return null;const Ct=yt?.last_read_at??null,Pe=(()=>{if(!He.length)return null;const q=He.slice().sort((je,Re)=>new Date(je.created_at).getTime()-new Date(Re.created_at).getTime()).find(je=>typeof je?.content=="string"&&je.content.startsWith("[Bulletin] "));return q?(q.content.split(`
`)[0]??"").replace(/^\[Bulletin\]\s*/,"").trim():null})(),dt=ke.classes?.title?ke.classes.title:Pe?`Bulletin: ${Pe}`:null,Ge=cO(ke,e.id),_t=await Te(Ge?.avatar_url??null);return{id:ke.id,classId:ke.class_id,hostId:ke.host_id,guestId:ke.guest_id,createdAt:ke.created_at,updatedAt:ke.updated_at,lastReadAt:Ct??void 0,lastMessage:tt?{id:tt.id,conversationId:ke.id,senderId:tt.sender_id,content:tt.content,createdAt:tt.created_at}:void 0,hostName:ke.host?.full_name||"Host",guestName:ke.guest?.full_name||"Guest",otherAvatarUrl:_t,className:dt||"Conversation",unreadCount:(()=>{if(!tt||tt.sender_id===e.id)return 0;const q=tt.created_at?new Date(tt.created_at).getTime():ke.last_message_at?new Date(ke.last_message_at).getTime():0,re=Ct?new Date(Ct).getTime():ke.updated_at?new Date(ke.updated_at).getTime():0;return q>re?1:0})()}}))).filter(ke=>ke!==null);K&&console.log(` Loaded ${Ue.length} conversations`),b(Ue)}catch(z){console.error(" Failed to load conversations:",z),b([])}},he=async()=>{try{P(!0),K&&console.log(` Loading bookings for user: ${e.id}`);const Se=`
        id,
        class_id,
        user_id,
        qty,
        total_cents,
        status,
        payment_status,
        stripe_fee_cents,
        platform_fee_cents,
        host_payout_cents,
        reviewed,
        student_names,
        created_at,
        updated_at,
        approved_at,
        denied_at,
        host_message,
        classes:classes!bookings_class_id_fkey(
          title,
          start_date,
          end_date,
          start_time,
          number_of_days,
          hours_per_day,
          host_id
        )
      `,[z,de]=await Promise.all([Ce.from("bookings").select(Se).eq("user_id",e.id).order("created_at",{ascending:!1}),Ce.from("bookings").select(Se).eq("classes.host_id",e.id).order("created_at",{ascending:!1})]);if(z.error)throw z.error;if(de.error)throw de.error;const ye=Array.isArray(z.data)?z.data:[],_e=Array.isArray(de.data)?de.data:[],pe=ye.map(Pe=>Pe.id).filter(Boolean),me={};if(pe.length>0){const{data:Pe,error:dt}=await Ce.from("review_tokens").select("booking_id, token, expires_at, used_at").in("booking_id",pe).eq("user_id",e.id).is("used_at",null);!dt&&Array.isArray(Pe)&&Pe.forEach(Ge=>{Ge?.booking_id&&Ge?.token&&(me[Ge.booking_id]={token:Ge.token,expires_at:Ge.expires_at??null})})}const Te=Date.now(),Je=[...ye,..._e],Ue=new Map;Je.forEach(Pe=>{Pe?.id&&!Ue.has(Pe.id)&&Ue.set(Pe.id,Pe)});const ke=Array.from(new Set(Je.map(Pe=>Pe?.classes?.host_id).filter(Pe=>typeof Pe=="string"&&Pe.trim().length>0))),He={};if(ke.length>0){const{data:Pe,error:dt}=await Ce.from("profiles").select("id, full_name").in("id",ke);dt?console.error(" Error loading host profiles:",dt):Array.isArray(Pe)&&Pe.forEach(Ge=>{const _t=typeof Ge?.id=="string"?Ge.id:null,q=typeof Ge?.full_name=="string"?Ge.full_name.trim():"";_t&&q&&(He[_t]=q)})}const tt=Pe=>{const dt=Pe?.end_date??Pe?.start_date??null;if(!dt)return null;const Ge=new Date(`${dt}T${Pe?.start_time||"00:00:00"}`);return Number.isNaN(Ge.getTime())?null:(Ge.setHours(23,59,59,999),Ge.getTime())},yt=[],Ct=Array.from(Ue.values()).map(Pe=>{const dt=Pe.classes||{},Ge=dt?.start_date||null,_t=dt?.start_time||null,q=dt?.end_date||Ge,re=Number(dt?.number_of_days??1)||1,je=Number(dt?.hours_per_day??0)||0,Re=typeof dt?.host_id=="string"?dt.host_id:null,qe=(()=>{if(!Re)return null;const xt=He[Re];return xt&&xt.trim().length>0?xt.trim():Re===e.id&&typeof e.name=="string"&&e.name.trim().length>0?e.name.trim():null})(),Le=tt(dt),Xe=Le!==null&&Le<Te;let Oe=Pe.status;Xe&&Oe==="PENDING"&&(yt.push(Pe.id),Oe="DENIED");let lt=null;if(Ge){const xt=_t||"00:00",Nt=new Date(`${Ge}T${xt}Z`);if(!isNaN(Nt.getTime()))if(!!(q&&q!==Ge&&re>1)){const Tt=new Date(`${q}T${xt}Z`);isNaN(Tt.getTime())||(lt=new Date(Tt.getTime()+864e5).toISOString())}else{const Tt=je*re>0?je*re*3600*1e3:0;lt=new Date(Nt.getTime()+Tt+24*3600*1e3).toISOString()}}const Dt=me[Pe.id],wt=!!Pe.reviewed,Mt=(Pe.status||"").toString().toUpperCase(),ze=lt?new Date(lt).getTime():null,ft=!wt&&!!Dt?.token&&["APPROVED","PAID"].includes(Mt)&&(!ze||Te>=ze);return{id:Pe.id,classId:Pe.class_id,userId:Pe.user_id,qty:Pe.qty,totalAmount:Pe.total_cents,status:Oe,createdAt:Pe.created_at,className:dt?.title,startDate:Ge,endDate:q,startTime:_t,numberOfDays:re,hoursPerDay:je,reviewed:wt,reviewToken:Dt?.token??null,reviewTokenExpiresAt:Dt?.expires_at??null,reviewEligible:ft,reviewReadyAt:lt,hostId:dt?.host_id??null,hostName:qe,studentCount:Pe.qty??null,isGuestBooking:Pe.user_id===e.id}});if(yt.length>0)try{await Ce.from("bookings").update({status:"DENIED",denied_at:new Date().toISOString(),updated_at:new Date().toISOString()}).in("id",yt),K&&console.log(` Auto-denied ${yt.length} expired pending bookings`)}catch(Pe){console.error(" Failed to auto-deny past bookings:",Pe)}k(Ct)}catch(Se){console.error(" Error loading bookings:",Se),k([])}finally{P(!1)}};_.useEffect(()=>{if(!(typeof window>"u")){if(L==="guest"){if(!Object.prototype.hasOwnProperty.call(tx,C))return;const Se=tx[C],z=`/dashboard/guestview${Se?`/${Se}`:""}`;nx(window.location.pathname)!==z&&window.history.replaceState({},document.title,z)}else if(L==="host"){const Se="/dashboard";nx(window.location.pathname)!==Se&&window.history.replaceState({},document.title,Se)}}},[L,C]);const Ee=async(Se,z)=>{try{K&&console.log(" Sending message to conversation:",Se);const{error:de}=await Ce.from("messages").insert([{conversation_id:Se,sender_id:e.id,content:z}]);if(de)throw de;K&&console.log(" Message sent successfully"),await se()}catch(de){console.error("Error sending message:",de),we.error("Error sending message. Please check your connection and try again.")}};return e.stripeConnected&&L==="host"?l.jsxs("div",{className:"max-w-6xl mx-auto p-3 md:p-6",children:[ie(),l.jsxs("div",{className:"mb-6 md:mb-8",children:[l.jsx("h1",{className:"text-2xl md:text-3xl text-[#3c4f21] mb-2",children:"Host Dashboard"}),l.jsx("p",{className:"text-sm md:text-base text-[#556B2F]",children:"Manage your classes, bookings, and connect with students"})]}),l.jsxs(Zy,{value:C,onValueChange:A,className:"w-full",children:[l.jsxs(ex,{className:"grid w-full grid-cols-2 md:grid-cols-4 mb-4 md:mb-6 h-auto p-1",children:[l.jsxs(Br,{value:"overview",children:[l.jsx(ao,{size:14})," Overview"]}),l.jsxs(Br,{value:"classes",children:[l.jsx(mn,{size:14})," My Classes"]}),l.jsxs(Br,{value:"bookings",children:[l.jsx(mn,{size:14})," Bookings",M&&U&&l.jsx("span",{className:"ml-2 inline-flex min-w-[1.5rem] h-5 items-center justify-center rounded-full bg-[#c54a2c] px-2 text-[10px] font-semibold uppercase tracking-wide text-white","aria-label":te??void 0,title:te??void 0,children:U})]}),l.jsxs(Br,{value:"messages",children:[l.jsx(pn,{size:14})," Messages",E&&D&&l.jsx("span",{className:"ml-2 inline-flex min-w-[1.5rem] h-5 items-center justify-center rounded-full bg-[#c54a2c] px-2 text-[10px] font-semibold uppercase tracking-wide text-white","aria-label":W??void 0,title:W??void 0,children:D})]})]}),l.jsx($r,{value:"overview",children:l.jsx(oc,{user:e,classes:t,conversations:N,onNavigate:r,onDeleteClass:o,onManageClass:i,onRelaunchClass:m,activeView:"overview",onSendMessage:Ee,onConversationsUpdate:b,initialConversationId:I,initialMessageTarget:w,onConversationNavigate:X,onBookingsRefresh:he})}),l.jsx($r,{value:"classes",children:l.jsx(oc,{user:e,classes:t,conversations:N,onNavigate:r,onDeleteClass:o,onManageClass:i,onRelaunchClass:m,activeView:"classes",onSendMessage:Ee,onConversationsUpdate:b,initialConversationId:I,initialMessageTarget:w,onConversationNavigate:X,onBookingsRefresh:he})}),l.jsx($r,{value:"bookings",children:l.jsx(oc,{user:e,classes:t,conversations:N,onNavigate:r,onDeleteClass:o,onManageClass:i,onRelaunchClass:m,activeView:"bookings",onSendMessage:Ee,onConversationsUpdate:b,initialConversationId:I,initialMessageTarget:w,onConversationNavigate:X,onBookingsRefresh:he})}),l.jsx($r,{value:"messages",children:l.jsx(oc,{user:e,classes:t,conversations:N,onNavigate:r,onDeleteClass:o,onManageClass:i,onRelaunchClass:m,activeView:"messages",onSendMessage:Ee,onConversationsUpdate:b,initialConversationId:I,initialMessageTarget:w,onConversationNavigate:X,onBookingsRefresh:he})})]})]}):l.jsxs("div",{className:"max-w-6xl mx-auto p-3 md:p-6",children:[ie(),l.jsxs("div",{className:"mb-6 md:mb-8",children:[l.jsx("h1",{className:"text-2xl md:text-3xl text-[#3c4f21] mb-2",children:"My Dashboard"}),l.jsx("p",{className:"text-sm md:text-base text-[#556B2F]",children:"Track your bookings, favorites, and messages"})]}),l.jsxs(Zy,{value:C,onValueChange:A,className:"w-full",children:[l.jsxs(ex,{className:"grid w-full grid-cols-2 md:grid-cols-5 mb-4 md:mb-6 h-auto p-1",children:[l.jsxs(Br,{value:"overview",children:[l.jsx(ao,{size:14})," Overview"]}),l.jsxs(Br,{value:"bookings",children:[l.jsx(mn,{size:14})," My Bookings"]}),l.jsxs(Br,{value:"favorites",children:[l.jsx(Fc,{size:14})," Favorites"]}),l.jsxs(Br,{value:"bulletins",children:[l.jsx(Nx,{size:14})," My Bulletins"]}),l.jsxs(Br,{value:"messages",children:[l.jsx(pn,{size:14})," Messages",E&&D&&l.jsx("span",{className:"ml-2 inline-flex min-w-[1.5rem] h-5 items-center justify-center rounded-full bg-[#c54a2c] px-2 text-[10px] font-semibold uppercase tracking-wide text-white","aria-label":W??void 0,title:W??void 0,children:D})]})]}),l.jsxs($r,{value:"overview",children:[console.log(" Dashboard rendering GUEST bookings tab"),l.jsx(ui,{user:e,classes:t,bookings:j,conversations:N,favorites:p,posts:n,onNavigate:r,onRefreshBookings:he,loadingBookings:B,onConversationsUpdate:b,onToggleFavorite:f,onSelectClass:c,onDeletePost:v,onSelectPost:y})]}),l.jsx($r,{value:"bookings",children:l.jsx(ui,{user:e,classes:t,bookings:j,conversations:N,favorites:p,posts:n,onNavigate:r,onRefreshBookings:he,loadingBookings:B,onConversationsUpdate:b,activeView:"bookings",onToggleFavorite:f,onSelectClass:c,onDeletePost:v,onSelectPost:y})}),l.jsx($r,{value:"favorites",children:l.jsx(ui,{user:e,classes:t,bookings:j,conversations:N,favorites:p,posts:n,onNavigate:r,onRefreshBookings:he,loadingBookings:B,onConversationsUpdate:b,activeView:"favorites",onToggleFavorite:f,onSelectClass:c,onDeletePost:v,onSelectPost:y})}),l.jsx($r,{value:"bulletins",children:l.jsx(ui,{user:e,classes:t,bookings:j,conversations:N,favorites:p,posts:n,onNavigate:r,onRefreshBookings:he,loadingBookings:B,onConversationsUpdate:b,activeView:"bulletins",onToggleFavorite:f,onSelectClass:c,onDeletePost:v,onSelectPost:y})}),l.jsx($r,{value:"messages",children:l.jsx(ui,{user:e,classes:t,bookings:j,conversations:N,favorites:p,posts:n,onNavigate:r,onRefreshBookings:he,loadingBookings:B,onSendMessage:Ee,onConversationsUpdate:b,activeView:"messages",onToggleFavorite:f,onSelectClass:c,onDeletePost:v,onSelectPost:y})})]})]})}function dO({classId:e,hostId:t,classTitle:n,onClose:r}){const[o,i]=_.useState(""),[c,u]=_.useState(!1),h=async()=>{if(o.trim()){u(!0);try{const{data:p,error:f}=await Ce.functions.invoke("broadcast-message-to-class",{body:{class_id:e,host_id:t,message_content:o.trim()}});if(f)throw f;we.success(`Sent to ${p?.sent??0} participants.`),r()}catch(p){console.error(" Broadcast failed:",p),we.error("Failed to send message to participants.")}finally{u(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs(We,{className:"w-full max-w-lg bg-white shadow-lg",children:[l.jsxs(vt,{className:"border-b flex justify-between items-center",children:[l.jsx(mt,{className:"text-[#3c4f21]",children:"Message All Participants"}),l.jsx(ue,{variant:"ghost",size:"sm",onClick:r,children:l.jsx(Ln,{className:"h-4 w-4"})})]}),l.jsxs(Ve,{className:"p-6 space-y-4",children:[l.jsxs("p",{className:"text-sm text-[#556B2F] mb-2",children:["This message will be sent individually to every participant of"," ",l.jsx("strong",{children:n||"this class"}),"."]}),l.jsx(Gn,{placeholder:"Type your message...",value:o,onChange:p=>i(p.target.value),rows:4,disabled:c}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(ue,{variant:"outline",onClick:r,disabled:c,children:"Cancel"}),l.jsx(ue,{onClick:h,disabled:!o.trim()||c,className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",children:c?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Mc,{className:"h-4 w-4 mr-2"})," Send"]})})]})]})]})})}function fO({classData:e,user:t,onNavigate:n,onDeleteClass:r,onEditClass:o,onUpdateClass:i}){const[c,u]=_.useState([]),[h,p]=_.useState(!0),[f,m]=_.useState(null),[v,y]=_.useState(""),[w,N]=_.useState(!1),[b,j]=_.useState(()=>String(e.maxStudents)),[k,C]=_.useState(!1),[A,L]=_.useState(!1),T=_.useMemo(()=>{const z=e.endDate||e.startDate;if(!z)return null;const de=new Date(`${z}T${e.startTime||"00:00"}`);return Number.isNaN(de.getTime())?null:(de.setHours(23,59,59,999),de.getTime())},[e.endDate,e.startDate,e.startTime]),B=T!==null&&T<Date.now();_.useEffect(()=>{P()},[e.id]),_.useEffect(()=>{j(String(e.maxStudents))},[e.maxStudents]);const P=async()=>{try{const{data:z,error:de}=await Ce.from("bookings").select(`
          *,
          profiles!inner(full_name, email)
        `).eq("class_id",e.id).order("created_at",{ascending:!1});if(de)throw de;const _e=(Array.isArray(z)?z:[]).map(pe=>{const me=ke=>Math.max(0,Math.round(Number(ke??0))),Je=(Array.isArray(pe.studentNames)?pe.studentNames:Array.isArray(pe.student_names)?pe.student_names:Array.isArray(pe.metadata?.student_names)?pe.metadata.student_names:[]).map(ke=>typeof ke=="string"?ke.trim():"").filter(Boolean),Ue=Number(pe.qty??0);return{id:pe.id,classId:pe.class_id,userId:pe.user_id,userEmail:pe.profiles?.email||"",userName:pe.profiles?.full_name||"",hostId:e.hostId,hostEmail:"",hostName:e.hostName||t.name,studentCount:Ue>0?Ue:Je.length||1,studentNames:Je,totalAmount:me(pe.total_cents),subtotal:me(pe.host_payout_cents),herdFee:me(pe.platform_fee_cents),status:(pe.status||"PENDING").toUpperCase(),paymentStatus:(pe.payment_status||"PENDING").toUpperCase(),createdAt:pe.created_at||"",autoApprove:!1,approved_at:pe.approved_at||null,denied_at:pe.denied_at||null,host_message:pe.host_message||null,stripePaymentIntentId:pe.stripe_payment_intent_id||null,isGuestBooking:!1}});u(_e)}catch(z){console.error("Error fetching class bookings:",z)}finally{p(!1)}},I=z=>new Date(z).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),$=(z,de)=>{const ye=la(z,de);return ye||(z?I(z):"Date TBD")},H=z=>{if(!z)return"";const[de,ye]=z.split(":"),_e=parseInt(de),pe=_e>=12?"PM":"AM";return`${_e%12||12}:${ye} ${pe}`},G=z=>{switch(z){case"PENDING":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"DENIED":return"bg-red-100 text-red-800";case"FAILED":return"bg-gray-100 text-gray-800";case"PAID":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},K=z=>{switch(z){case"PENDING":return l.jsx(zr,{className:"h-4 w-4"});case"APPROVED":return l.jsx(ac,{className:"h-4 w-4"});case"PAID":return l.jsx(ac,{className:"h-4 w-4"});case"DENIED":return l.jsx(pv,{className:"h-4 w-4"});default:return l.jsx(zr,{className:"h-4 w-4"})}},V=c.filter(z=>z.status==="PENDING"),J=c.filter(z=>z.status==="APPROVED"||z.status==="PAID"),R=J.length,E=R>0,D=e.instructorId===t.id,W=!B&&(t.isAdmin||D&&!E),F=!B&&!t.isAdmin&&D&&E,M=!t.isAdmin&&D&&E,U=W?"Edit":"Adjust Capacity",te=!B&&(t.isAdmin||D),Q=Math.max(R,1),ee=b.trim()===""?NaN:Math.floor(Number(b)),ce=Number.isNaN(ee)?null:Math.max(0,ee),X=ce!==null&&ce<Q;_.useEffect(()=>{F||N(!1)},[F]);const ie=_.useMemo(()=>{const z=me=>{if(!me)return 0;const Te=new Date(me).getTime();return Number.isFinite(Te)?Te:0},de=c.filter(me=>me.status==="PENDING").sort((me,Te)=>z(me.createdAt)-z(Te.createdAt)),ye=c.filter(me=>me.status==="APPROVED"||me.status==="PAID").sort((me,Te)=>z(me.createdAt)-z(Te.createdAt)),_e=c.filter(me=>me.status==="DENIED").sort((me,Te)=>z(me.createdAt)-z(Te.createdAt)),pe=c.filter(me=>me.status!=="PENDING"&&me.status!=="APPROVED"&&me.status!=="PAID"&&me.status!=="DENIED").sort((me,Te)=>z(me.createdAt)-z(Te.createdAt));return[...de,...ye,..._e,...pe]},[c]),fe=async()=>{if(ce===null){we.warning("Enter the maximum number of students.");return}if(X){we.warning(`Capacity cannot be lower than ${Q}.`);return}C(!0);const z=await i(e.id,{maxStudents:ce},{minimumMaxStudents:Q,hasApprovedBookings:E,successMessage:"Class capacity updated successfully."});C(!1),z&&N(!1)},se=()=>{j(String(e.maxStudents)),N(!1)},he=J.reduce((z,de)=>z+de.subtotal,0),Ee=ir(he,{withCurrency:!0}),Se=J.reduce((z,de)=>z+de.studentCount,0);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"max-w-6xl mx-auto p-3 md:p-6",children:[l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[l.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>n("dashboard"),className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",children:[l.jsx(Ni,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),t.isAdmin&&l.jsx(an,{className:"bg-orange-500 text-white",children:"Admin View"})]}),l.jsx("h1",{className:"text-2xl md:text-3xl text-[#3c4f21] mb-2",children:"Class Management"}),l.jsx("p",{className:"text-[#556B2F]",children:B?"Review class details and booking history.":"Manage bookings, view details, and edit your class"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs(We,{children:[l.jsx(vt,{children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx(mt,{className:"text-[#3c4f21] text-xl",children:e.title}),l.jsx("p",{className:"text-[#556B2F] mt-2",children:e.shortSummary})]}),l.jsxs("div",{className:"flex gap-2",children:[te?l.jsxs(ue,{variant:"outline",size:"sm",className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",onClick:()=>{W||t.isAdmin?o(e):F?(N(!0),we.info("Only class capacity can be updated now. Adjust the maximum number of students below.")):we.warning("You do not have permission to edit this class.")},title:W||t.isAdmin?"Edit class details":"Adjust the maximum number of students",children:[l.jsx(YN,{className:"h-4 w-4 mr-2"}),U]}):B&&l.jsx("div",{className:"max-w-xs self-center text-xs sm:text-sm text-[#556B2F] italic",children:"Past classes are read-only. Relaunch to make updates."}),(t.isAdmin||e.instructorId===t.id)&&l.jsxs(ue,{variant:"outline",size:"sm",className:`border disabled:opacity-60 disabled:cursor-not-allowed disabled:pointer-events-none ${M?"border-gray-300 text-gray-400 bg-gray-100":"border-red-500 text-red-500 hover:bg-red-500 hover:text-white"}`,disabled:M,onClick:()=>r(e.id),title:t.isAdmin?"Delete class (Admin privileges)":M?"This class has approved bookings and cannot be deleted":"Delete class (no approved bookings)",children:[l.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Delete",t.isAdmin&&l.jsx(an,{className:"ml-2 bg-orange-500 text-white text-xs px-1 py-0",children:"ADMIN"})]}),M&&l.jsx("p",{className:"mt-2 text-xs text-[#556B2F]",children:"Approved bookings prevent deleting this class. Contact support if you need assistance."})]})]})}),l.jsxs(Ve,{children:[l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"relative w-full h-48 md:h-64 bg-gray-100 rounded-lg overflow-hidden",children:[e.photos&&e.photos.length>0?l.jsx(Yn,{src:e.photos[0],alt:e.title,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#f8f9f6] to-[#e8e9e6] flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-[#556B2F]",children:[l.jsx(mo,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm opacity-70",children:"No photo uploaded"})]})}),l.jsx("div",{className:"absolute top-4 right-4",children:l.jsxs(an,{className:"bg-[#556B2F] text-[#f8f9f6]",children:[ir(e.pricePerPerson,{withCurrency:!0})," / person"]})})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(mn,{className:"h-5 w-5 text-[#556B2F]"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[#556B2F]",children:"Date & Time"}),l.jsxs("p",{className:"font-medium text-[#3c4f21]",children:[$(e.startDate,e.endDate),e.startTime&&` at ${H(e.startTime)}`]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ya,{className:"h-5 w-5 text-[#556B2F]"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[#556B2F]",children:"Duration"}),l.jsxs("p",{className:"font-medium text-[#3c4f21]",children:[e.numberOfDays," day",e.numberOfDays>1?"s":"",e.hoursPerDay&&` (${e.hoursPerDay} hours/day)`]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ar,{className:"h-5 w-5 text-[#556B2F]"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[#556B2F]",children:"Capacity"}),l.jsxs("p",{className:"font-medium text-[#3c4f21]",children:[Se," / ",e.maxStudents," students"]})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Si,{className:"h-5 w-5 text-[#556B2F]"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[#556B2F]",children:"Location"}),l.jsx("p",{className:"font-medium text-[#3c4f21]",children:e.address.street}),l.jsxs("p",{className:"text-sm text-[#556B2F]",children:[e.address.city,", ",e.address.state," ",e.address.zipCode]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(vi,{className:"h-5 w-5 text-[#556B2F]"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[#556B2F]",children:"Booking Settings"}),l.jsx("p",{className:"font-medium text-[#3c4f21]",children:e.auto_approve?"Auto-approve enabled":"Manual approval required"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ar,{className:"h-5 w-5 text-[#556B2F]"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[#556B2F]",children:"Age Requirement"}),l.jsxs("p",{className:"font-medium text-[#3c4f21]",children:[e.minimumAge,"+ years old"]})]})]})]})]}),(e.instructorBio||e.advisories||e.houseRules)&&l.jsxs("div",{className:"mt-6 space-y-4",children:[e.instructorBio&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-[#3c4f21] mb-2",children:"About the Instructor"}),l.jsx("p",{className:"text-sm text-[#556B2F] leading-relaxed",children:e.instructorBio})]}),e.advisories&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-[#3c4f21] mb-2",children:"Important Advisories"}),l.jsx("p",{className:"text-sm text-[#556B2F] leading-relaxed",children:e.advisories})]}),e.houseRules&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-[#3c4f21] mb-2",children:"House Rules"}),l.jsx("p",{className:"text-sm text-[#556B2F] leading-relaxed",children:e.houseRules})]})]})]})]})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-1 gap-4",children:[l.jsx(We,{children:l.jsx(Ve,{className:"p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[#556B2F]",children:"Total Bookings"}),l.jsx("p",{className:"text-2xl font-bold text-[#3c4f21]",children:c.length})]}),l.jsx(ar,{className:"h-8 w-8 text-[#556B2F]"})]})})}),l.jsx(We,{children:l.jsx(Ve,{className:"p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[#556B2F]",children:"Revenue"}),l.jsx("p",{className:"text-2xl font-bold text-[#3c4f21]",children:Ee})]}),l.jsx(vi,{className:"h-8 w-8 text-[#556B2F]"})]})})}),V.length>0&&l.jsx(We,{children:l.jsx(Ve,{className:"p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[#556B2F]",children:"Pending"}),l.jsx("p",{className:"text-2xl font-bold text-[#c54a2c]",children:V.length})]}),l.jsx(zr,{className:"h-8 w-8 text-[#c54a2c]"})]})})})]}),F&&l.jsxs(We,{children:[l.jsx(vt,{children:l.jsx(mt,{className:"text-[#3c4f21] text-lg",children:"Manage Capacity"})}),l.jsxs(Ve,{className:"space-y-3",children:[l.jsxs("p",{className:"text-sm text-[#556B2F]",children:["Approved bookings: ",l.jsx("strong",{children:R})]}),l.jsxs("p",{className:"text-sm text-[#556B2F]",children:["Current capacity: ",l.jsx("strong",{children:e.maxStudents})," students"]}),w?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[l.jsx(bt,{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:b,onChange:z=>{const de=z.target.value.replace(/[^0-9]/g,"");j(de)},placeholder:String(Q),className:"sm:flex-1 border-[#556B2F] text-[#3c4f21]","aria-label":"Maximum number of students"}),l.jsx(ue,{size:"sm",className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",onClick:fe,disabled:k||ce===null||X,children:k?"Saving...":"Save"}),l.jsx(ue,{size:"sm",variant:"ghost",onClick:se,disabled:k,children:"Cancel"})]}),l.jsxs("p",{className:"text-xs text-[#556B2F]",children:["Capacity cannot drop below ",Q,". This matches the number of approved bookings."]}),X&&l.jsxs("p",{className:"text-xs text-red-600",children:["Increase capacity to at least ",Q," students before saving."]})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs text-[#556B2F]",children:"Once bookings are approved, only the maximum number of students can be adjusted."}),l.jsx(ue,{size:"sm",className:"bg-[#556B2F] hover:bg-[#3c4f21] text-white",onClick:()=>N(!0),children:"Adjust Capacity"})]})]})]}),l.jsxs(We,{children:[l.jsx(vt,{children:l.jsx(mt,{className:"text-[#3c4f21]",children:"Quick Actions"})}),l.jsx(Ve,{className:"space-y-3",children:l.jsxs(ue,{variant:"outline",className:"w-full border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-white",disabled:!t.isAdmin&&!D||J.length===0,onClick:()=>{if(!t.isAdmin&&!D){we.warning("Only the class host can message students.");return}if(J.length===0){we.info("No confirmed students to message yet.");return}L(!0)},children:[l.jsx(pn,{className:"h-4 w-4 mr-2"}),"Message Students"]})})]})]})]}),l.jsx("div",{className:"mt-8",children:l.jsxs(We,{children:[l.jsx(vt,{children:l.jsx(mt,{className:"text-[#3c4f21]",children:"Bookings"})}),l.jsx(Ve,{children:h?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#556B2F] mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"Loading bookings..."})]}):c.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ar,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"No bookings yet"})]}):l.jsx("div",{className:"space-y-4",children:ie.map(z=>{const ye=z.status==="DENIED"?0:z.subtotal;return l.jsx("div",{className:"border border-[#a8b892] rounded-lg p-4",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-medium text-[#3c4f21]",children:z.userName}),l.jsx(an,{className:G(z.status),children:l.jsxs("div",{className:"flex items-center gap-1",children:[K(z.status),z.status]})})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-[#556B2F]",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",z.userEmail]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Students:"})," ",z.studentCount]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Names:"})," ",z.studentNames.join(", ")]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Your earnings:"})," ",ir(ye,{withCurrency:!0})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Booked:"})," ",I(z.createdAt)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Payment:"})," ",z.paymentStatus]})]}),z.status==="DENIED"&&z.host_message&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2 mt-2",children:l.jsxs("p",{className:"text-sm text-red-800",children:[l.jsx("strong",{children:"Denial reason:"})," ",z.host_message]})})]}),z.status==="PENDING"&&l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(ue,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{we.info("Booking approval functionality will be integrated with the existing system")},children:[l.jsx(ac,{className:"h-4 w-4 mr-1"}),"Approve"]}),l.jsxs(ue,{size:"sm",variant:"destructive",onClick:()=>m(z),children:[l.jsx(pv,{className:"h-4 w-4 mr-1"}),"Deny"]})]})]})},z.id)})})})]})})]}),f&&renderBookingModal(),A&&l.jsx(dO,{classId:e.id,hostId:e.hostId||t.id,classTitle:e.title,onClose:()=>L(!1)})]})}var hO=(e,t,n,r,o,i,c,u)=>{let h=document.documentElement,p=["light","dark"];function f(y){(Array.isArray(e)?e:[e]).forEach(w=>{let N=w==="class",b=N&&i?o.map(j=>i[j]||j):o;N?(h.classList.remove(...b),h.classList.add(i&&i[y]?i[y]:y)):h.setAttribute(w,y)}),m(y)}function m(y){u&&p.includes(y)&&(h.style.colorScheme=y)}function v(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let y=localStorage.getItem(t)||n,w=c&&y==="system"?v():y;f(w)}catch{}},mO=_.createContext(void 0),pO={setTheme:e=>{},themes:[]},gO=()=>{var e;return(e=_.useContext(mO))!=null?e:pO};_.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:i,value:c,themes:u,nonce:h,scriptProps:p})=>{let f=JSON.stringify([n,t,i,e,u,c,r,o]).slice(1,-1);return _.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${hO.toString()})(${f})`}})});const vO=({...e})=>{const{theme:t="system"}=gO();return l.jsx(RS,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})},rx=[{label:"At least 8 characters",test:e=>e.length>=8},{label:"Contains uppercase letter",test:e=>/[A-Z]/.test(e)},{label:"Contains lowercase letter",test:e=>/[a-z]/.test(e)},{label:"Contains a number",test:e=>/\d/.test(e)}];function yO(e){const t=String(e?.message??"");return t?t.toLowerCase().includes("password")?t:`${t}. Please try again or contact support.`:"Unable to update password. Please try again."}function xO({email:e,onClose:t,onSuccess:n}){const[r,o]=_.useState(""),[i,c]=_.useState(""),[u,h]=_.useState(!1),[p,f]=_.useState(!1),[m,v]=_.useState(!1),[y,w]=_.useState(!1),[N,b]=_.useState(""),j=rx.every(L=>L.test(r)),k=r===i,C=r.length>0&&i.length>0&&j&&k,A=async L=>{if(L.preventDefault(),!!C){w(!0),b("");try{const{error:T}=await Ce.auth.updateUser({password:r});if(T)throw new Error(yO(T));we.success("Password updated successfully! You can continue using HERD."),o(""),c(""),v(!1),n()}catch(T){b(T?.message||"Unable to update password. Please try again.")}finally{w(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:l.jsxs(We,{className:"bg-white border-[#a8b892] max-w-md w-full",children:[l.jsx(vt,{className:"bg-[#556B2F] text-[#f8f9f6]",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(mt,{children:"Reset Your Password"}),l.jsx(ue,{type:"button",variant:"ghost",size:"sm",onClick:t,className:"text-[#f8f9f6] hover:bg-[#6B7F3F]",children:l.jsx(Ln,{className:"w-4 h-4"})})]})}),l.jsx(Ve,{className:"p-6",children:l.jsxs("form",{className:"space-y-4",onSubmit:A,children:[l.jsxs("div",{className:"space-y-2 text-sm text-[#2d3d1f]",children:[l.jsx("p",{children:`You're almost done! ${e?`Finish resetting the password for ${e}.`:"Enter a new password to finish resetting your account."}`}),l.jsx("p",{children:"Your password should be strong enough to protect your account. Use at least one uppercase letter, one lowercase letter, and a number."})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"new-password",className:"text-[#2d3d1f]",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(bt,{id:"new-password",type:u?"text":"password",value:r,onChange:L=>o(L.target.value),onFocus:()=>v(!0),className:"mt-1 bg-white border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F] pr-10",placeholder:"Enter a new password",autoComplete:"new-password",minLength:8,required:!0}),l.jsx(ue,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(L=>!L),className:"absolute right-2 top-1/2 -translate-y-1/2 h-auto p-1 text-[#556B2F] hover:bg-transparent",children:u?l.jsx(js,{className:"w-4 h-4"}):l.jsx(mc,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{children:[l.jsx(nt,{htmlFor:"confirm-password",className:"text-[#2d3d1f]",children:"Confirm New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(bt,{id:"confirm-password",type:p?"text":"password",value:i,onChange:L=>c(L.target.value),className:"mt-1 bg-white border-[#a8b892] focus:border-[#556B2F] focus:ring-[#556B2F] pr-10",placeholder:"Confirm your new password",autoComplete:"new-password",required:!0}),l.jsx(ue,{type:"button",variant:"ghost",size:"sm",onClick:()=>f(L=>!L),className:"absolute right-2 top-1/2 -translate-y-1/2 h-auto p-1 text-[#556B2F] hover:bg-transparent",children:p?l.jsx(js,{className:"w-4 h-4"}):l.jsx(mc,{className:"w-4 h-4"})})]}),i&&!k&&l.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center",children:[l.jsx(zr,{className:"w-3 h-3 mr-1"}),"Passwords do not match"]})]}),m&&l.jsxs("div",{className:"bg-[#f8f9f6] border border-[#a8b892] rounded-lg p-3",children:[l.jsx("p",{className:"text-sm text-[#2d3d1f] mb-2",children:"Password requirements:"}),l.jsx("div",{className:"space-y-1",children:rx.map((L,T)=>l.jsxs("div",{className:"flex items-center text-xs",children:[l.jsx(io,{className:`w-3 h-3 mr-2 ${L.test(r)?"text-green-600":"text-gray-400"}`}),l.jsx("span",{className:L.test(r)?"text-green-600":"text-[#3c4f21]",children:L.label})]},T))})]}),N&&l.jsxs("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded flex items-center whitespace-pre-line",children:[l.jsx(zr,{className:"w-4 h-4 mr-2"}),N]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ue,{type:"submit",disabled:y||!C,className:"flex-1 bg-[#c54a2c] hover:bg-[#b8432a] text-[#f8f9f6] disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Updating...":"Save New Password"}),l.jsx(ue,{type:"button",variant:"outline",onClick:t,className:"border-[#556B2F] text-[#556B2F] hover:bg-[#556B2F] hover:text-[#f8f9f6]",children:"Cancel"})]})]})})]})})}const wO={overview:"",bookings:"mybookings",favorites:"favorites",bulletins:"mybulletins",messages:"messages"},bO=e=>{if(typeof e!="string")return"/";const t=e.trim();return!t||t==="/"?"/":t.replace(/\/+$/,"")||"/"},_O=e=>{if(typeof window>"u"||typeof e!="string")return null;const t=bO(e);if(!t.startsWith("/dashboard"))return null;const n=t.split("/").filter(Boolean);if(n.length===0)return null;const r=n.map(f=>f.toLowerCase());if(r[0]!=="dashboard"||(r[1]??"guestview")!=="guestview")return null;const i=r[2]??"",c=n[2]??"";let u=null;if(!i)u="overview";else{const f=Object.entries(wO).find(([,m])=>m===i||m===c);if(f)u=f[0];else switch(i){case"overview":u="overview";break;case"bookings":case"mybookings":u="bookings";break;case"favorites":u="favorites";break;case"bulletins":case"mybulletins":u="bulletins";break;case"messages":u="messages";break;default:u=null}}if(!u)return null;const h=n[3]??null,p=u==="messages"&&typeof h=="string"&&h.length>0?h:null;return{tab:u,conversationId:p}};function NO(e){return{id:e.id,email:e.email??"",name:e.full_name||(e.email?e.email.split("@")[0]:"User"),farmName:e.farm_name??"",bio:e.bio??"",profilePicture:e.avatar_url??"",location:e.location??"",stripeConnected:!!e.stripe_connected,isAdmin:!!e.is_admin,createdAt:e.created_at??new Date().toISOString()}}function SO(e){const t=e?.host_profile??e?.profiles??e?.profile??e?.hostProfile??null,n=[e?.instructor_name,e?.host_name,e?.hostName,t?.full_name,t?.name];for(const r of n)if(typeof r=="string"&&r.trim().length>0)return r.trim();return""}function Ff(e){const t=SO(e),r=(typeof e?.instructor_name=="string"?e.instructor_name.trim():"")||t||"",o=e?.host_profile??e?.profiles??e?.profile??e?.hostProfile??null,i=o?.rating_average??o?.ratingAverage??e?.rating_average??null,c=o?.rating_count??o?.ratingCount??e?.rating_count??null,u=i==null||i===""?null:Number(i),h=c==null||c===""?0:Number(c);return{id:e.id,title:e.title,shortSummary:e.short_summary??"",startDate:e.start_date??"",startTime:e.start_time??"",endDate:e.end_date??e.start_date??"",numberOfDays:e.number_of_days??1,hoursPerDay:e.hours_per_day??void 0,pricePerPerson:Ts(e.price_per_person_cents??0),maxStudents:e.max_students??0,address:{street:e.address_street??"",city:e.address_city??"",state:e.address_state??"",zipCode:e.address_zip??"",country:e.address_country??""},instructorName:r,hostId:e.host_id,host_id:e.host_id,hostName:t||r,instructorId:e.host_id,minimumAge:e.minimum_age??0,instructorBio:e.instructor_bio??"",instructorAvatar:o?.avatar_url??null,advisories:e.advisories??"",houseRules:e.house_rules??"",photos:e.photos??[],auto_approve:!!e.auto_approve,createdAt:e.created_at??new Date().toISOString(),hostRatingAverage:Number.isFinite(u)?u:null,hostRatingCount:Number.isFinite(h)?h:0,hostProfile:{fullName:o?.full_name??"",farmName:o?.farm_name??"",bio:o?.bio??"",avatarUrl:o?.avatar_url??null,ratingAverage:Number.isFinite(u)?u:null,ratingCount:Number.isFinite(h)?h:0}}}function di(e,t){const n=(e.instructorName??"").trim(),r=(e.hostName??"").trim();if(n&&r)return e;const o=n||r||(t&&e.instructorId===t.id?t.name:"");return o?{...e,instructorName:n||o,hostName:r||o}:e}function Lf(e){const t=e?.author_profile??e?.profile??e?.profiles??null,n=typeof t?.full_name=="string"?t.full_name:typeof e?.author=="string"?e.author:"",r=n?.trim?.()?n.trim():"",o=typeof e?.category=="string"&&e.category.trim().length>0?e.category.trim():"General Discussion",i=Array.isArray(e?.photos)?e.photos:[];return{id:e.id,title:e.title,content:e.content??"",author:r,authorId:e.user_id,createdAt:e.created_at??new Date().toISOString(),category:o,authorEmail:t?.email??null,photos:i}}function jO(){const[e,t]=_.useState("home"),[n,r]=_.useState(null),[o,i]=_.useState(null),[c,u]=_.useState([]),[h,p]=_.useState([]),[f,m]=_.useState(null),[v,y]=_.useState([]),[w,N]=_.useState(null),[b,j]=_.useState(null),[k,C]=_.useState(!1),[A,L]=_.useState(!1),[T,B]=_.useState(null),[P,I]=_.useState(!1),[$,H]=_.useState(!0),[G,K]=_.useState("Loading..."),[V,J]=_.useState(!0),[R,E]=_.useState(!1),[D,W]=_.useState(null),[F,M]=_.useState("create"),[U,te]=_.useState(null),[Q,ee]=_.useState(null);_.useEffect(()=>{if(!f)return;const q=h.find(re=>re.id===f.id);if(!q){m(null),e==="bulletin-detail"&&t("bulletin");return}q!==f&&m(q)},[h,e,f]),_.useEffect(()=>{if(!w?.id){y([]);return}Ee(w.id)},[w?.id]),_.useEffect(()=>{u(q=>{if(q.length===0)return q;let re=!1;const je=q.map(Re=>{const qe=di(Re,w);return qe!==Re&&(re=!0),qe});return re?je:q})},[w?.id]);const ce=(q,re)=>{try{localStorage.setItem(q,JSON.stringify(re))}catch(je){if(je?.name==="QuotaExceededError")try{localStorage.removeItem("herd-posts"),localStorage.setItem(q,JSON.stringify(re))}catch{}}},X=async q=>{const re=q.id??n?.id;if(!re){we.error("Unable to identify the class you are editing.");return}const je={title:q.title,shortSummary:q.shortSummary,startDate:q.startDate,startTime:q.startTime,endDate:q.endDate,numberOfDays:q.numberOfDays,hoursPerDay:q.hoursPerDay,pricePerPerson:q.pricePerPerson,maxStudents:q.maxStudents,address:q.address,minimumAge:q.minimumAge,instructorBio:q.instructorBio,advisories:q.advisories,houseRules:q.houseRules,photos:q.photos,auto_approve:q.auto_approve,instructorName:q.instructorName};await ye(re,je,{hasApprovedBookings:!1,successMessage:"Class details updated successfully."})&&t("manage-class")},ie=q=>{try{const re=localStorage.getItem(q);return re?JSON.parse(re):null}catch{try{localStorage.removeItem(q)}catch{}return null}};_.useEffect(()=>{R||fe()},[R]);const fe=async()=>{if(!R){H(!0),K("Loading your data...");try{const q=ie("herd-classes"),re=ie("herd-posts");if(q?.length>0){const qe=q.map(Le=>di({...Le,hostName:Le.hostName||Le.instructorName||"",instructorName:Le.instructorName||Le.hostName||""},w));u(qe),ce("herd-classes",qe)}re?.length>0&&p(re);const je=Promise.allSettled([se(),he()]),Re=new Promise((qe,Le)=>{setTimeout(()=>Le(new Error("Data loading timeout")),1e4)});try{await Promise.race([je,Re])}catch{}E(!0),H(!1)}catch(q){console.error("Failed to load initial data:",q),E(!0),H(!1)}}},se=async()=>{try{const{data:q,error:re}=await Ce.from("classes").select(`
          *,
          host_profile:profiles!classes_host_id_fkey(full_name, avatar_url, farm_name, bio, rating_average, rating_count)
        `).order("created_at",{ascending:!1}).limit(200);if(re)throw re;const je=(q??[]).map(Ff).map(Re=>di(Re,w));u(je),ce("herd-classes",je)}catch(q){console.error("Error loading classes:",q?.message||q)}},he=async()=>{try{const{data:q,error:re}=await Ce.from("posts").select(`
          *,
          author_profile:profiles!posts_user_id_fkey(
            id,
            full_name,
            email,
            avatar_url
          )
        `).order("created_at",{ascending:!1}).limit(200);if(re)throw re;const je=(q??[]).map(Lf);p(je),ce("herd-posts",je)}catch(q){console.error("Error loading posts:",q?.message||q)}},Ee=async q=>{try{const{data:re,error:je}=await Ce.from("favorites").select("class_id").eq("user_id",q);if(je)throw je;const Re=Array.isArray(re)?re.map(qe=>qe.class_id).filter(Boolean):[];y(Re)}catch(re){console.error("Error loading favorites:",re?.message||re),y([])}};_.useEffect(()=>{let q=!0;const re=setTimeout(()=>{q&&$&&H(!1)},15e3);new URLSearchParams(window.location.search).get("verified")==="true"&&window.history.replaceState({},document.title,window.location.pathname),(async()=>{try{const Le=Ce.auth.getSession(),Xe=new Promise((lt,Dt)=>setTimeout(()=>Dt(new Error("Session check timeout")),2e3)),{data:{session:Oe}}=await Promise.race([Le,Xe]);if(!q)return;if(j(Oe),Oe?.user){const lt=!!Oe.user.email_confirmed_at;J(lt),K("Loading your profile...");try{await Se(Oe.user.id,0)}catch{q&&H(!1)}}else q&&H(!1)}catch{if(!q)return;H(!1)}})();const{data:{subscription:qe}}=Ce.auth.onAuthStateChange((Le,Xe)=>{if(q){if(j(Xe),Le==="PASSWORD_RECOVERY"&&Xe?.user){J(!!Xe.user.email_confirmed_at),C(!1),L(!0),B(Xe.user.email??Xe.user.user_metadata?.email??null),H(!1),we.info("Enter a new password to finish resetting your account.");return}if(Le==="SIGNED_IN"&&Xe?.user){const Oe=!!Xe.user.email_confirmed_at;J(Oe),L(!1),B(null);const lt=new URLSearchParams(window.location.search);Xe.user.email_confirmed_at&&lt.get("verified")==="true"&&setTimeout(()=>we.success("Email verified successfully! Welcome to HERD."),500),Se(Xe.user.id,0)}else if(Le==="TOKEN_REFRESHED"&&Xe?.user){const Oe=!!Xe.user.email_confirmed_at;J(Oe),w||Se(Xe.user.id,0)}else if(Le==="USER_UPDATED"&&Xe?.user){const Oe=!!Xe.user.email_confirmed_at;J(Oe),L(!1),B(null),Se(Xe.user.id,0)}else Le==="SIGNED_OUT"&&(N(null),J(!0),H(!1),t("home"),L(!1),B(null))}});return()=>{q=!1,clearTimeout(re),qe.unsubscribe()}},[]),_.useEffect(()=>{const re=new URLSearchParams(window.location.search).get("stripe");if(!re||!w)return;const Re=setTimeout(()=>{window.history.replaceState({},document.title,window.location.pathname),re==="connected"?(we.success("Stripe account connected successfully! You can now create classes."),w&&(Se(w.id,0),t("profile"))):re==="error"?we.error("There was an error connecting your Stripe account. Please try again."):re==="refresh"&&we.warning("Stripe onboarding needs to be completed. Please finish the setup process.")},500);return()=>clearTimeout(Re)},[w?.id]),_.useEffect(()=>{if(e!=="dashboard"||!Q||Q.consumed)return;const q=setTimeout(()=>{ee(re=>re&&{...re,consumed:!0})},500);return()=>clearTimeout(q)},[e,Q]),_.useEffect(()=>{e!=="dashboard"&&Q&&ee(null)},[e]),_.useEffect(()=>{if(typeof window>"u"||new URLSearchParams(window.location.search).get("page")==="dashboard")return;const re=Re=>{te(_O(Re))};re(window.location.pathname);const je=()=>{re(window.location.pathname)};return window.addEventListener("popstate",je),()=>window.removeEventListener("popstate",je)},[]),_.useEffect(()=>{if(U){if(!w){C(!0);return}ee({tab:U.tab,conversationId:U.conversationId??null,consumed:!1,role:"guest"}),t("dashboard"),te(null)}},[U,w?.id]),_.useEffect(()=>{const q=new URLSearchParams(window.location.search),re=q.get("page");if(!re||re!=="dashboard"||!w)return;const je=q.get("booking"),Re=q.get("action"),qe=q.get("tab"),Le=q.get("conversation"),Xe=q.get("guest")??q.get("guest_id"),Oe=q.get("guest_name"),lt=q.get("class")??q.get("class_id"),Dt=q.get("class_title");t("dashboard"),ee({tab:qe,bookingId:je,conversationId:Le,guestId:Xe,guestName:Oe,classId:lt,classTitle:Dt,consumed:!1,role:"guest"}),window.history.replaceState({},document.title,window.location.pathname),!je&&!Re?setTimeout(()=>{(window.innerWidth<768||!localStorage.getItem("herd-dashboard-visited"))&&(we.success("Welcome to your HERD dashboard! Here you can view and manage your classes and bookings."),localStorage.setItem("herd-dashboard-visited","true"))},1e3):je&&Re&&(Re==="approve"||Re==="decline")&&setTimeout(()=>{we.info("Host booking actions will be enabled after we add a safe RLS policy for hosts to update bookings.")},500)},[w?.id]);const Se=async(q,re=0)=>{try{const{data:Re,error:qe}=await Ce.from("profiles").select("id, email, full_name, farm_name, bio, location, avatar_url, stripe_connected, is_admin, created_at").eq("id",q).maybeSingle();if(qe)throw qe;if(!Re)return I(!0),H(!1),null;const Le=NO(Re);return N(Le),H(!1),Le}catch(Re){const qe=Re?.message||"Unknown error";if(re<1&&!/timeout|abort/i.test(qe))return await new Promise(Le=>setTimeout(Le,1e3)),Se(q,re+1);if(b?.user){const Le={id:b.user.id,email:b.user.email||"",name:b.user.user_metadata?.name||b.user.email?.split("@")[0]||"User",stripeConnected:!1,createdAt:new Date().toISOString()};N(Le),I(!0)}return H(!1),null}},z=async q=>{if(w)try{const{data:re}=await Ce.auth.getUser();if(!re?.user){we.warning("Please log in to create a class.");return}const je=(q.startDate??"").trim(),Re=(q.startTime??"").trim();if(!je){we.warning("Please select a start date.");return}if(!Re){we.warning("Please select a start time.");return}const qe=/^\d{2}:\d{2}(:\d{2})?$/.test(Re)&&Re.length===5?`${Re}:00`:Re,Le=Number.isFinite(q.numberOfDays)&&q.numberOfDays>0?q.numberOfDays:1,Xe=Number.isFinite(q.maxStudents)&&q.maxStudents>0?q.maxStudents:1,Oe=Number.isFinite(q.minimumAge)&&q.minimumAge>=0?q.minimumAge:0,lt=q.hoursPerDay!==void 0&&q.hoursPerDay!==null&&Number.isFinite(q.hoursPerDay)?q.hoursPerDay:null,Dt=q.endDate&&q.endDate.trim().length>0?q.endDate:je,wt=Ts(q.pricePerPerson);if(wt<=0){we.warning("Please enter a valid price for your class.");return}const Mt={host_id:re.user.id,title:q.title,short_summary:q.shortSummary,description:q.shortSummary??"",start_date:je,start_time:qe,end_date:Dt,number_of_days:Le,hours_per_day:lt,price_per_person_cents:wt,max_students:Xe,minimum_age:Oe,instructor_bio:q.instructorBio,instructor_name:q.instructorName?q.instructorName.trim():null,advisories:q.advisories,house_rules:q.houseRules,photos:q.photos??[],auto_approve:!!q.auto_approve,address_street:q.address?.street??"",address_city:q.address?.city??"",address_state:q.address?.state??"",address_zip:q.address?.zipCode??"",address_country:q.address?.country??""},{data:ze,error:ft}=await Ce.from("classes").insert([Mt]).select("*").single();if(ft)throw ft;const xt=di(Ff(ze),w);u(Nt=>{const Wt=[...Nt,xt];return ce("herd-classes",Wt),Wt}),we.success("Class created and posted"),W(null),M("create"),t("dashboard")}catch(re){console.error("Error creating class:",re),we.error("Failed to create class. Please check your info and try again.")}},de=async q=>{if(!w)return;const re=c.find(Le=>Le.id===q);if(!re){we.error("Class not found.");return}const je=w.isAdmin===!0,Re=re.instructorId===w.id;if(!je&&!Re){we.error("You do not have permission to delete this class.");return}if(Re)try{const{data:Le,error:Xe}=await Ce.from("bookings").select("id, status").eq("class_id",q).in("status",["APPROVED","PAID"]);if(Xe)throw Xe;if(Le&&Le.length>0){we.warning("You cannot delete this class while it has approved bookings.");return}}catch(Le){console.error("Error checking class bookings before deletion:",Le?.message||Le),we.error("Unable to verify bookings for this class. Please try again.");return}if(confirm(je?"Are you sure you want to delete this class? This action cannot be undone and will affect any associated bookings.":"Are you sure you want to delete this class? This action cannot be undone."))try{const{error:Le}=await Ce.from("classes").delete().eq("id",q);if(Le)throw Le;u(Xe=>{const Oe=Xe.filter(lt=>lt.id!==q);return ce("herd-classes",Oe),Oe}),we.success("Class deleted successfully.")}catch(Le){console.error("Error deleting class:",Le?.message||Le),we.error("Failed to delete class. Please try again.")}},ye=async(q,re,je={})=>{if(!w)return!1;const Re=c.find(lt=>lt.id===q);if(!Re)return we.error("Class not found."),!1;const qe=w.isAdmin===!0,Le=Re.instructorId===w.id;if(!qe&&!Le)return we.error("You do not have permission to edit this class."),!1;const Xe=Object.keys(re);if(Xe.length===0)return we.info("No changes to save."),!1;if(re.maxStudents!==void 0){const lt=je.minimumMaxStudents??0;if(re.maxStudents<lt)return we.warning(`Class capacity cannot be lower than ${lt}.`),!1}if(!qe&&je.hasApprovedBookings){const lt=new Set(["maxStudents"]);if(Xe.some(wt=>!lt.has(wt))||re.address!==void 0||re.photos!==void 0||re.title!==void 0||re.shortSummary!==void 0||re.startDate!==void 0||re.startTime!==void 0||re.numberOfDays!==void 0||re.hoursPerDay!==void 0||re.pricePerPerson!==void 0||re.instructorName!==void 0||re.minimumAge!==void 0||re.instructorBio!==void 0||re.advisories!==void 0||re.houseRules!==void 0||re.auto_approve!==void 0)return we.warning("Once a class has approved bookings, only the maximum number of students can be updated."),!1}const Oe={};if(re.title!==void 0&&(Oe.title=re.title),re.shortSummary!==void 0&&(Oe.short_summary=re.shortSummary,Oe.description=re.shortSummary),re.startDate!==void 0&&(Oe.start_date=re.startDate),re.startTime!==void 0&&(Oe.start_time=re.startTime),re.numberOfDays!==void 0&&(Oe.number_of_days=re.numberOfDays),re.endDate!==void 0&&(Oe.end_date=re.endDate),re.hoursPerDay!==void 0&&(Oe.hours_per_day=re.hoursPerDay),re.pricePerPerson!==void 0&&(Oe.price_per_person_cents=re.pricePerPerson),re.maxStudents!==void 0&&(Oe.max_students=re.maxStudents),re.minimumAge!==void 0&&(Oe.minimum_age=re.minimumAge),re.instructorBio!==void 0&&(Oe.instructor_bio=re.instructorBio),re.instructorName!==void 0&&(Oe.instructor_name=typeof re.instructorName=="string"?re.instructorName.trim():re.instructorName),re.advisories!==void 0&&(Oe.advisories=re.advisories),re.houseRules!==void 0&&(Oe.house_rules=re.houseRules),re.photos!==void 0&&(Oe.photos=re.photos),re.auto_approve!==void 0&&(Oe.auto_approve=re.auto_approve),re.address&&(re.address.street!==void 0&&(Oe.address_street=re.address.street),re.address.city!==void 0&&(Oe.address_city=re.address.city),re.address.state!==void 0&&(Oe.address_state=re.address.state),re.address.zipCode!==void 0&&(Oe.address_zip=re.address.zipCode),re.address.country!==void 0&&(Oe.address_country=re.address.country)),Object.keys(Oe).length===0)return we.info("No changes detected."),!1;try{const{data:lt,error:Dt}=await Ce.from("classes").update(Oe).eq("id",q).select(`
          *,
          host_profile:profiles!classes_host_id_fkey(full_name, avatar_url, farm_name, bio, rating_average, rating_count)
        `).single();if(Dt)throw Dt;const wt=di(Ff(lt),w);return u(Mt=>{const ze=Mt.map(ft=>ft.id===q?wt:ft);return ce("herd-classes",ze),ze}),r(Mt=>Mt&&Mt.id===q?wt:Mt),we.success(je.successMessage??"Class updated successfully."),!0}catch(lt){return console.error("Error updating class:",lt?.message||lt),we.error("Failed to update class. Please try again."),!1}},_e=async q=>{if(w)try{const re={user_id:w.id,title:q.title,content:q.content,photos:q.photos??[],category:q.category},{data:je,error:Re}=await Ce.from("posts").insert([re]).select(`
          *,
          author_profile:profiles!posts_user_id_fkey(
            id,
            full_name,
            email,
            avatar_url
          )
        `).single();if(Re)throw Re;const qe=Lf(je);qe.author=w.name,qe.authorEmail=w.email,qe.category=q.category,p(Le=>{const Xe=[qe,...Le];return ce("herd-posts",Xe),Xe})}catch(re){console.error("Error creating post:",re?.message||re),we.error("Failed to create post. Please try again.")}},pe=async q=>{if(w)try{const{error:re}=await Ce.from("posts").delete().eq("id",q);if(re)throw re;p(je=>{const Re=je.filter(qe=>qe.id!==q);return ce("herd-posts",Re),Re}),f?.id===q&&(m(null),t("bulletin"))}catch(re){console.error("Error deleting post:",re?.message||re),we.error("Failed to delete post. Please try again.")}},me=async(q,re)=>{if(!w)return C(!0),!1;try{const{data:je,error:Re}=await Ce.from("posts").update({title:re.title,content:re.content,category:re.category}).eq("id",q).select(`
          *,
          author_profile:profiles!posts_user_id_fkey(
            id,
            full_name,
            email,
            avatar_url
          )
        `).single();if(Re)throw Re;const qe=Lf(je);return qe.author||(qe.author=w.name),qe.authorEmail||(qe.authorEmail=w.email),p(Le=>{const Xe=Le.map(Oe=>Oe.id===q?qe:Oe);return ce("herd-posts",Xe),Xe}),m(Le=>Le&&Le.id===q?qe:Le),we.success("Bulletin updated."),!0}catch(je){return console.error("Error updating post:",je?.message||je),we.error("Failed to update bulletin. Please try again."),!1}},Te=async q=>{if(!w){C(!0);return}if(!V){we.warning("Please verify your email address before relaunching classes.");return}if(!w.stripeConnected){we.warning("Connect your Stripe account to relaunch a class."),t("profile");return}const re=Number.isFinite(q.numberOfDays)&&q.numberOfDays>0?Math.trunc(q.numberOfDays):1,Re=(q.instructorName??"").trim()||w.name||"",qe=(q.hostName??"").trim()||Re,Le={...q,id:"",startDate:"",endDate:"",startTime:"",numberOfDays:re,hostId:w.id,host_id:w.id,instructorId:w.id,instructorName:Re,hostName:qe,photos:Array.isArray(q.photos)?[...q.photos]:[],auto_approve:!!q.auto_approve,address:{street:q.address?.street??"",city:q.address?.city??"",state:q.address?.state??"",zipCode:q.address?.zipCode??"",country:q.address?.country??""},hostProfile:null,createdAt:new Date().toISOString()};W(Le),M("relaunch"),t("create-class"),we.info("Copied your class details. Pick a new future date and time, then save to relaunch.")},Je=async q=>{if(!w){C(!0);return}const re=v.includes(q);try{if(re){const{error:je}=await Ce.from("favorites").delete().eq("user_id",w.id).eq("class_id",q);if(je)throw je;y(Re=>Re.filter(qe=>qe!==q)),we.success("Removed from favorites.")}else{const{error:je}=await Ce.from("favorites").insert({user_id:w.id,class_id:q});if(je)throw je;y(Re=>[...Re,q]),we.success("Added to favorites.")}}catch(je){console.error("Error toggling favorite:",je?.message||je),we.error("Unable to update favorites right now.")}},Ue=()=>{C(!1)},ke=()=>{L(!1),B(null),C(!1)},He=async()=>{L(!1),B(null);try{await Ce.auth.signOut()}catch(q){console.error("Error ending password recovery session:",q)}},tt=q=>{N(q),I(!1)},yt=q=>{const re=w??{},je={...re,...q,profilePicture:q?.profilePicture??q?.avatar_url??re.profilePicture??"",stripeConnected:typeof q?.stripeConnected=="boolean"?q.stripeConnected:typeof q?.stripe_connected=="boolean"?!!q.stripe_connected:!!re.stripeConnected,name:q?.name??re.name,email:q?.email??re.email,farmName:q?.farmName??re.farmName,bio:q?.bio??re.bio,location:q?.location??re.location,createdAt:re.createdAt||new Date().toISOString(),id:q?.id??re.id,isAdmin:typeof q?.isAdmin=="boolean"?q.isAdmin:re.isAdmin};N(je);try{localStorage.setItem("herd-user",JSON.stringify(je))}catch{}},Ct=async()=>{try{try{localStorage.removeItem("herd-classes"),localStorage.removeItem("herd-posts"),localStorage.removeItem("herd-user"),localStorage.removeItem("herd-dashboard-visited"),localStorage.removeItem("herd-conversations")}catch{}const{data:{session:q}}=await Ce.auth.getSession();if(q){const{error:re}=await Ce.auth.signOut();re&&!/AuthSessionMissingError|session missing/i.test(re.message)&&console.error("Sign out error:",re)}N(null),j(null),J(!0),t("home"),u([]),p([]),E(!1),L(!1),B(null),r(null),i(null)}catch(q){console.error("Unexpected error during sign out:",q),N(null),j(null),J(!0),t("home"),u([]),p([]),E(!1),L(!1),B(null),r(null),i(null)}},Pe=q=>{w?V?q():we.warning("Please verify your email address before continuing. Check your inbox for a verification link."):C(!0)},dt=q=>{w?V?w.stripeConnected?q():(we.warning("You need to connect your Stripe account before creating classes. Please complete your profile setup."),t("profile")):we.warning("Please verify your email address before creating classes. Check your inbox for a verification link."):C(!0)},Ge=()=>{if($)return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f8f9f6]",children:l.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#556B2F] mx-auto mb-4"}),l.jsx("h2",{className:"text-[#3c4f21] mb-2",children:"Loading HERD"}),l.jsx("p",{className:"text-[#556B2F] text-sm mb-4",children:G})]})});switch(e){case"home":return l.jsx(Xd,{onNavigate:t,user:w,onRequireAuth:()=>C(!0)});case"classes":return l.jsx(VA,{classes:c,onNavigate:t,user:w,onRequireAuth:()=>C(!0),onSelectClass:q=>{r(q),i(q.instructorId??null),t("class-detail")},favorites:v,onToggleFavorite:Je});case"class-detail":return n?l.jsx(lT,{classData:n,user:w,onNavigate:t,onRequireAuth:()=>C(!0),onViewHost:(q,re)=>{i(q),r(re),t("host-profile")},favorites:v,onToggleFavorite:Je,onOpenConversation:(q,re)=>{ee({tab:"messages",conversationId:q,guestId:w?.id??null,guestName:w?.name??null,classId:re.id,classTitle:re.title,bookingId:null,consumed:!1,role:"guest"}),t("dashboard")}}):null;case"host-profile":return o?l.jsx(mT,{hostId:o,currentUser:w,onNavigate:t,onSelectClass:q=>{r(q),i(q.instructorId??null),t("class-detail")}}):l.jsx(Xd,{onNavigate:t,user:w,onRequireAuth:()=>C(!0)});case"create-class":{if(!w)return C(!0),W(null),M("create"),t("home"),null;if(!V)return we.warning("Please verify your email address before creating classes. Check your inbox for a verification link."),W(null),M("create"),t("home"),null;if(!w.stripeConnected)return we.warning("You need to connect your Stripe account before creating classes. Please complete your profile setup."),W(null),M("create"),t("profile"),null;const q=()=>{W(null),F==="relaunch"?(M("create"),t("dashboard")):t("classes")};return l.jsx(Iy,{onSubmit:z,onCancel:q,user:w,initialData:D,mode:F==="relaunch"?"relaunch":"create"})}case"edit-class":return w&&n?l.jsx(Iy,{onSubmit:X,onCancel:()=>t("manage-class"),user:w,initialData:{...n},mode:"edit"}):null;case"bulletin":return l.jsx(Dy,{posts:h,onCreatePost:_e,onDeletePost:pe,onSelectPost:q=>{m(q),t("bulletin-detail")},user:w,onRequireAuth:()=>C(!0)});case"bulletin-detail":return f?l.jsx(bT,{post:f,user:w,onBack:()=>t("bulletin"),onDeletePost:q=>pe(q),onRequireAuth:()=>C(!0),onUpdatePost:me}):l.jsx(Dy,{posts:h,onCreatePost:_e,onDeletePost:pe,onSelectPost:q=>{m(q),t("bulletin-detail")},user:w,onRequireAuth:()=>C(!0)});case"profile":return w?l.jsx(y3,{user:w,onUpdate:yt}):null;case"dashboard":return w?l.jsx(uO,{user:w,classes:c,posts:h,onNavigate:t,onDeleteClass:de,onManageClass:q=>{r(q),i(q.instructorId??null),t("manage-class")},onSelectClass:q=>{r(q),i(q.instructorId??null),t("class-detail")},initialTab:Q?.consumed?null:Q?.tab??null,initialConversationId:Q?.consumed?null:Q?.conversationId??null,favorites:v,onToggleFavorite:Je,onRelaunchClass:Te,onDeletePost:pe,onSelectPost:q=>{m(q),t("bulletin-detail")},hostMessageTarget:w.stripeConnected&&Q?.role==="host"?{conversationId:Q?.conversationId??null,guestId:Q?.guestId??null,guestName:Q?.guestName??null,classId:Q?.classId??null,classTitle:Q?.classTitle??null,bookingId:Q?.bookingId??null}:null}):null;case"manage-class":return w&&n?l.jsx(fO,{classData:n,user:w,onNavigate:t,onDeleteClass:de,onEditClass:q=>{r(q),i(q.instructorId??null),t("edit-class")},onUpdateClass:ye}):null;default:return l.jsx(Xd,{onNavigate:t,user:w,onRequireAuth:()=>C(!0)})}};return(typeof window<"u"?window.location.pathname:"/").startsWith("/review")?l.jsx("div",{className:"min-h-screen bg-[#f8f9f6]",children:l.jsx(AT,{})}):l.jsxs("div",{className:"min-h-screen bg-[#f8f9f6]",children:[l.jsx(ET,{currentPage:e,onNavigate:q=>{q==="create-class"?dt(()=>{W(null),M("create"),t(q)}):q==="profile"||q==="dashboard"?Pe(()=>t(q)):t(q)},user:w,onSignOut:Ct,onShowAuth:()=>C(!0)}),w&&!V&&l.jsx(DT,{userEmail:b?.user?.email}),Ge(),k&&l.jsx(TT,{onClose:()=>C(!1),onSuccess:Ue}),A&&l.jsx(xO,{email:T,onClose:He,onSuccess:ke}),P&&b&&V&&l.jsx(IT,{onComplete:tt,authSession:b}),l.jsx(vO,{position:"top-right",richColors:!0,closeButton:!0})]})}w2.createRoot(document.getElementById("root")).render(l.jsx(jO,{}));
